(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){
var mapboxgl = require('mapbox-gl');
var mapPrint = require('../../js/mapbox-print-pdf.js');
require('@webcomponents/template');
var map;

mapboxgl.accessToken = 'pk.eyJ1IjoiZGVtb2FjY291bnQxMiIsImEiOiJjamUzZTQwMTIyNmQyMzRvNm53NDJ4emdmIn0.4MH5FDzsJT37L2GFZxUIjw';

function setFormat(builder) {
    var format = $('#formatInp').val();
    if (format != '') builder.format(format);
}

function setDPI(builder) {
    var dpi = parseInt(($('#dpiInp').val()));
    if (!isNaN(dpi) && dpi > 0) builder.dpi(dpi);
}

function setOrientation(builder) {
    var orientation = $('#orientationInp').val();
    if (orientation === 'l') builder.landscape();
}

function setHeader(builder) {
    var header = $('#headerHtmlInp').val();
    if (header == null || header.trim() === '') return;
    var height = parseInt($('#headerHeightInp').val());
    if (height < 1) return;
    var heightUnit = $('#headerHeightUnitInp').val();
    var baseline = $('#headerBaselineFormatInp').val();
    if (baseline.trim() == '') return;
    var orientation = $('#headerBaselineOrientationInp').val();
    builder.header({
        html: header,
        height: {
            value: height,
            unit: heightUnit
        },
        baseline: {
            format: baseline,
            orientation: orientation
        }
    });
}

function setFooter(builder) {
    var footer = $('#footerHtmlInp').val();
    if (footer == null || footer.trim() === '') return;
    var height = parseInt($('#footerHeightInp').val());
    if (height < 1) return;
    var heightUnit = $('#footerHeightUnitInp').val();
    var baseline = $('#footerBaselineFormatInp').val();
    if (baseline.trim() == '') return;
    var orientation = $('#footerBaselineOrientationInp').val();
    builder.footer({
        html: footer,
        height: {
            value: height,
            unit: heightUnit
        },
        baseline: {
            format: baseline,
            orientation: orientation
        }
    });
}

function setScaleControl(builder) {
    var maxWidth = parseInt($('#scaleMaxWidthInp').val());
    if (isNaN(maxWidth) || maxWidth <= 0) return;
    var unit = $('#scaleUnitInp').val();
    builder.scale({ maxWidthPercent: maxWidth, unit: unit });
}

function getMargin(id) {
    var val = parseInt($('#' + id).val());
    return isNaN(val) || val < 0 ? 0 : val;
}

function setMargins(builder) {
    var obj = {
        top: getMargin('marginTopInp'),
        right: getMargin('marginRightInp'),
        bottom: getMargin('marginBottomInp'),
        left: getMargin('marginLeftInp')
    };
    builder.margins(obj, $('#marginUnitInp').val());
}
function displayPdf(pdf) {
    pdf.save('map.pdf');
}

function showProgress() {
    $('#progressModal').modal('show');
}

function hideProgress() {
    $('#progressModal').modal('hide');
}
function printMap(e) {
    e.preventDefault();

    showProgress();

    var builder = mapPrint.build();
    setFormat(builder);
    setDPI(builder);
    setOrientation(builder);
    setHeader(builder);
    setFooter(builder);
    setScaleControl(builder);
    setMargins(builder);
    builder.print(map, mapboxgl)
        .then(displayPdf)
        .then(hideProgress);
}
$(function () {
    map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 11,
        center: [18.068, 59.329]
    });
    $('#progressModal').modal({
        backdrop: 'static',
        keyboard: false,
        show: false
    });
    $('#printForm').on('submit', printMap);
});

},{"../../js/mapbox-print-pdf.js":6,"@webcomponents/template":9,"mapbox-gl":71}],2:[function(require,module,exports){
/*
 * Mapbox Print Pdf - Printing PDFs with high resolution mapbox maps
 * Copyright (c) 2018 Eddie Larsson
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var check = require('./type-check.js');

var UNITS = {
    Points: 'pt',
    Pixels: 'px',
    Inches: 'in',
    Millimeters: 'mm',
    Centimeters: 'cm'
};
UNITS.Enumerated = [UNITS.Points, UNITS.Pixels, UNITS.Inches, UNITS.Millimeters, UNITS.Centimeters];



function isValidPDFUnit(value) {
    return check.isString(value) && value !== UNITS.Pixels && UNITS.Enumerated.indexOf(value) !== -1;
}

var Dimens = (function () {
    var IN_TO_CM = 2.54;
    var IN_TO_MM = 10 * IN_TO_CM;
    var IN_TO_PT = 72;
    var IN_TO_PX = 96;

    var _toInches = function (value, unit) {
        if (unit === UNITS.Inches) return value;
        if (unit === UNITS.Centimeters) return value / IN_TO_CM;
        if (unit === UNITS.Millimeters) return value / IN_TO_MM;
        if (unit === UNITS.Points) return value / IN_TO_PT;
        if (unit === UNITS.Pixels) return value / IN_TO_PX;
        console.error('Unrecognized unit: ' + unit);
        return -1;
    };

    var _isValidDimensionObject = function (obj) {
        if (!check.isObject(obj)) return false;
        if (!obj.hasOwnProperty('width') || !obj.hasOwnProperty('height') || !obj.hasOwnProperty('unit')) return false;
        if (!check.isNumber(obj.width) || !check.isNumber(obj.height) || !check.isString(obj.unit)) return false;
        if (obj.width < 0 || obj.height < 0 || UNITS.Enumerated.indexOf(obj.unit) == -1) return false;
        return true;
    };

    var _isValidPdfDimensionObject = function (obj) {
        if (!_isValidDimensionObject(obj) || !isValidPDFUnit(obj.unit)) return false;
        return true;
    };

    var _toDimension = function (obj) {
        if (obj instanceof Dimens) return obj;
        if (!_isValidDimensionObject(obj)) return null;
        return new Dimens(obj.width, obj.height, obj.unit);
    };

    var _add = function (dimensOne, dimensTwo) {
        dimensTwo = dimensTwo.to(dimensOne.unit());
        return new Dimens(dimensOne.width() + dimensTwo.width(),
            dimensOne.height() + dimensTwo.height(), dimensOne.unit());
    };

    var _toPdfDimension = function (obj) {
        if (!_isValidPdfDimensionObject) return null;
        if (obj instanceof Dimens) return obj;
        return new Dimens(obj.width, obj.height, obj.unit);
    };


    var _subtractMargin = function (dimensions, margins) {
        var convMargins = margins.to(dimensions.unit());
        return new Dimens(dimensions.width() - convMargins.left() - convMargins.right(),
            dimensions.height() - convMargins.top() - convMargins.bottom(), dimensions.unit());
    };
    var _to = function (value, unitFrom, unitTo) {
        if (unitFrom === unitTo) return value;

        value = _toInches(value, unitFrom);
        if (value === -1) return value;

        if (unitTo === UNITS.Inches) return value;
        if (unitTo === UNITS.Centimeters) return value * IN_TO_CM;
        if (unitTo === UNITS.Millimeters) return value * IN_TO_MM;
        if (unitTo === UNITS.Points) return value * IN_TO_PT;
        if (unitTo === UNITS.Pixels) return value * IN_TO_PX;
        console.error('Unrecognized unit: ' + unitTo);
        return -1;
    };
    var constructor = function (width, height, unit) {
        this.to = function (unitTo) {
            return new Dimens(Dimens.to(width, unit, unitTo), Dimens.to(height, unit, unitTo), unitTo);
        };

        this.toString = function () {
            return 'width: ' + width + unit + '; height: ' + height + unit + ';';
        };

        this.subtractMargin = function (margin) {
            return Dimens.subtractMargin(this, margin);
        };

        this.add = function (toAdd) {
            return _add(this, toAdd);
        };

        this.area = function () {
            return width * height;
        };

        this.sum = function () {
            return width + height;
        };

        this.width = function () {
            return width;
        };
        this.height = function () {
            return height;
        };
        this.unit = function () {
            return unit;
        };
    };
    constructor.isValidDimensionObject = _isValidDimensionObject;
    constructor.toDimension = _toDimension;
    constructor.toPdfDimension = _toPdfDimension;
    constructor.subtractMargin = _subtractMargin;
    constructor.to = _to;
    constructor.add = _add;
    constructor.isValidPdfDimensionObject = _isValidPdfDimensionObject;
    return constructor;
})();

var Margin = (function () {

    var _isValidMargin = function (margin) {

        if (check.isNumber(margin) && margin >= 0) return true;

        if (!check.isObject(margin)) return false;
        if (!margin.hasOwnProperty('top') || !margin.hasOwnProperty('bottom') ||
      !margin.hasOwnProperty('right') || !margin.hasOwnProperty('left')) return false;

        if ((!check.isNumber(margin.top) || margin.top < 0) ||
      (!check.isNumber(margin.bottom) || margin.bottom < 0) ||
      (!check.isNumber(margin.left) || margin.left < 0) ||
      (!check.isNumber(margin.right) || margin.right < 0)) return false;

        return true;
    };
    var _createPDFMargin = function (margin, unit) {
        if (!isValidPDFUnit(unit) || !_isValidMargin(margin)) return null;

        if (check.isNumber(margin)) {

            return new Margin({
                top: margin,
                left: margin,
                right: margin,
                bottom: margin
            }, unit);
        } else {

            var marg = new Margin(margin, unit);

            return marg;
        }
    };
    var constructor = function (margins, unit) {
        var right = margins.right;
        var left = margins.left;
        var top = margins.top;
        var bottom = margins.bottom;

        this.to = function (toUnit) {
            return new Margin({
                right: Dimens.to(right, unit, toUnit),
                left: Dimens.to(left, unit, toUnit),
                top: Dimens.to(top, unit, toUnit),
                bottom: Dimens.to(bottom, unit, toUnit),
            }, toUnit);
        };

        this.top = function () {
            return top;
        };
        this.left = function () {
            return left;
        };
        this.right = function () {
            return right;
        };
        this.bottom = function () {
            return bottom;
        };
        this.toArray = function () {
            return [top, left, bottom, right];
        };
    };

    constructor.createPDFMargin = _createPDFMargin;
    return constructor;
})();

var Size = function (value, unit) {
    this.to = function (toUnit) {
        return new Size(Dimens.to(value, unit, toUnit), toUnit);
    };

    this.value = function () {
        return value;
    };
    this.unit = function () {
        return unit;
    };
};
Size.from = function (obj, valueProp) {
    valueProp = valueProp ? valueProp : 'value';
    if (!obj.hasOwnProperty(valueProp) || !obj.hasOwnProperty('unit')) return null;
    if (!check.isNumber(obj[valueProp]) || obj[valueProp] < 0 || UNITS.Enumerated.indexOf(obj.unit) == -1) return null;
    return new Size(obj[valueProp], obj.unit);
};


module.exports = {
    Dimens: Dimens,
    Margin: Margin,
    Size: Size,
    UNITS: UNITS
};

},{"./type-check.js":8}],3:[function(require,module,exports){
var dimensions = require('./dimensions.js');
var Dimens = dimensions.Dimens;
var UNITS = dimensions.UNITS;

var FormatConfig = (function() {
    var DEFAULT_FORMATS = {
        'a0': new Dimens(2383.94, 3370.39, UNITS.Points),
        'a1': new Dimens(1683.78, 2383.94, UNITS.Points),
        'a2': new Dimens(1190.55, 1683.78, UNITS.Points),
        'a3': new Dimens(841.89, 1190.55, UNITS.Points),
        'a4': new Dimens(595.28, 841.89, UNITS.Points),
        'a5': new Dimens(419.53, 595.28, UNITS.Points),
        'a6': new Dimens(297.64, 419.53, UNITS.Points),
        'a7': new Dimens(209.76, 297.64, UNITS.Points),
        'a8': new Dimens(147.40, 209.76, UNITS.Points),
        'a9': new Dimens(104.88, 147.40, UNITS.Points),
        'a10': new Dimens(73.70, 104.88, UNITS.Points),
        'b0': new Dimens(2834.65, 4008.19, UNITS.Points),
        'b1': new Dimens(2004.09, 2834.65, UNITS.Points),
        'b2': new Dimens(1417.32, 2004.09, UNITS.Points),
        'b3': new Dimens(1000.63, 1417.32, UNITS.Points),
        'b4': new Dimens(708.66, 1000.63, UNITS.Points),
        'b5': new Dimens(498.90, 708.66, UNITS.Points),
        'b6': new Dimens(354.33, 498.90, UNITS.Points),
        'b7': new Dimens(249.45, 354.33, UNITS.Points),
        'b8': new Dimens(175.75, 249.45, UNITS.Points),
        'b9': new Dimens(124.72, 175.75, UNITS.Points),
        'b10': new Dimens(87.87, 124.72, UNITS.Points),
        'c0': new Dimens(2599.37, 3676.54, UNITS.Points),
        'c1': new Dimens(1836.85, 2599.37, UNITS.Points),
        'c2': new Dimens(1298.27, 1836.85, UNITS.Points),
        'c3': new Dimens(918.43, 1298.27, UNITS.Points),
        'c4': new Dimens(649.13, 918.43, UNITS.Points),
        'c5': new Dimens(459.21, 649.13, UNITS.Points),
        'c6': new Dimens(323.15, 459.21, UNITS.Points),
        'c7': new Dimens(229.61, 323.15, UNITS.Points),
        'c8': new Dimens(161.57, 229.61, UNITS.Points),
        'c9': new Dimens(113.39, 161.57, UNITS.Points),
        'c10': new Dimens(79.37, 113.39, UNITS.Points),
        'dl': new Dimens(311.81, 623.62, UNITS.Points),
        'letter': new Dimens(612, 792, UNITS.Points),
        'government-letter': new Dimens(576, 756, UNITS.Points),
        'legal': new Dimens(612, 1008, UNITS.Points),
        'junior-legal': new Dimens(576, 360, UNITS.Points),
        'ledger': new Dimens(1224, 792, UNITS.Points),
        'tabloid': new Dimens(792, 1224, UNITS.Points),
        'credit-card': new Dimens(153, 243, UNITS.Points)
    };

    var userFormats = {};

    var _getFormats = function() {
        var formatsCopy = {};
        var format;
        for (format in DEFAULT_FORMATS) {
            if (DEFAULT_FORMATS.hasOwnProperty(format)) {
                formatsCopy[format] = DEFAULT_FORMATS[format];
            }
        }
        for (format in userFormats) {
            if (userFormats.hasOwnProperty(format)) {
                formatsCopy[format] = userFormats[format];
            }
        }
        return formatsCopy;
    };

    var _isDefaultFormat = function(format) {
        if (userFormats.hasOwnProperty(format)) return false;
        return DEFAULT_FORMATS.hasOwnProperty(format);
    };

    var _formatExists = function(format) {
        return userFormats.hasOwnProperty(format) || DEFAULT_FORMATS.hasOwnProperty(format);
    };

    var _addFormat = function(format, dimension) {
        if (userFormats.hasOwnProperty(format)) return {
            error: 'Format ' + format + ' already exists'
        };
        if (!Dimens.isValidPdfDimensionObject(dimension)) return {
            error: 'Dimensions are of an invalid type'
        };
        userFormats[format] = Dimens.toPdfDimension(dimension);
        return {
            success: true
        };
    };

    var _getFormat = function(format) {
        if (userFormats.hasOwnProperty(format)) return userFormats[format];
        if (DEFAULT_FORMATS.hasOwnProperty(format)) return DEFAULT_FORMATS[format];
        console.error('The format ' + format + ' doesn\'t exist.');
        return null;
    };

    return {
        getFormats: _getFormats,
        isDefaultFormat: function(format) {
            return _isDefaultFormat(format.toLowerCase());
        },
        addFormat: function(format, width, height, unit) {
            return _addFormat(format.toLowerCase(), width, height, unit);
        },
        getFormat: function(format) {
            return _getFormat(format.toLowerCase());
        },
        formatExists: function(format) {
            return _formatExists(format.toLowerCase());
        }
    };
})();

module.exports = FormatConfig;

},{"./dimensions.js":2}],4:[function(require,module,exports){
var check = require('./type-check.js');
var dimensions = require('./dimensions.js');
var cssInitials = require('css-initials');
var Dimens = dimensions.Dimens;
var UNITS = dimensions.UNITS;
var CONTAINER_CLASS = '__mapbox-print-pdf-container__';
var ATTR_PRESERVE_CSS = 'data-mpp-preserve';
var DEFAULT_FONT = '"Times New Roman", Times, serif';
var scaleElement = require('./scale-element.js');
var canvg = require('canvg');

var HIDDEN_CONTAINER_STYLE = {overflow: 'hidden', height: 0, width: 0, position: 'fixed', top:0, left:0};

var HtmlObject = (function () {
    var constructor = function (html, baseline, handlers) {
        handlers = check.isObject(handlers) ? handlers : {};
        this.html = function () { return html; };
        this.baseline = function () { return baseline; };
        this.handlers = function () { return handlers; };
    };

    var _getBaseline = function (baseline, formatConfig) {
        var result = null;
        if (check.isObject(baseline)
            && baseline.hasOwnProperty('format')
            && (check.isString(baseline.format) || Dimens.isValidDimensionObject(baseline.format))) {
            if (check.isString(baseline.format)) {
                result = formatConfig.getFormat(baseline.format);
            } else {
                result = Dimens.toDimension(baseline.format);
            }
            if (baseline.orientation === 'l') {
                result = new Dimens(result.height(), result.width(), result.unit());
            }
        } else if (check.isString(baseline) && formatConfig.formatExists(baseline)) {
            result = formatConfig.getFormat(baseline);
        }
        return result;
    };
    constructor.from = function (obj, formatConfig) {
        if (!obj.hasOwnProperty('html')
            || !obj.hasOwnProperty('baseline')) {
            console.error('Missing a required property in the html object');
            return null;
        }
        var html = createOrReturnHTML(obj.html);
        if (html === null) {
            console.error('Html property couldn\'t be parsed to an html object');
            console.error(obj.baseline);
            return null;
        }
        var baseline = _getBaseline(obj.baseline, formatConfig);
        if (baseline === null) {
            console.error('Couldn\'t parse the baseline property of the html object');
            console.error(obj.baseline);
            return null;
        }
        return new HtmlObject(html, baseline, obj.handlers);
    };
    return constructor;
})();

var cloneObject = function(obj) {
    var clone = {};
    for(var prop in obj) {
        if(obj.hasOwnProperty(prop)) clone[prop] = obj[prop];
    }
    return clone;
};

var buildStyleStringFromObject = function(obj, override) {
    var style = '';
    obj = cloneObject(obj);
    for(var prop in override) {
        if(override.hasOwnProperty(prop)) obj[prop] = override[prop];
    }
    for(prop in obj) {
        if(obj.hasOwnProperty(prop)) {
            style += prop + ': ' + obj[prop] + ';';
        }
    }
    return style;
};
var createOrReturnHTML = function (html) {
    if (check.isString(html)) {
        var template = document.createElement('template');
        html = html.trim();
        template.innerHTML = html;
        return template.content.firstChild;
    } else if (check.isHTMLElement(html)) {
        return html.cloneNode(true);
    } else {
        console.error(html + ' is not a html element or string');
        return null;
    }
};

var removeStylesExceptMapbox = function (doc, cssToKeep) {
    var links = Array.prototype.slice.call(doc.getElementsByTagName('LINK'));
    for (var i = 0; i < links.length; ++i) {
        var link = links[i];
        if (link.tagName != 'LINK' || link.href.indexOf('mapbox') != -1 || link.hasAttribute(ATTR_PRESERVE_CSS)) continue;
        if(cssToKeep.indexOf(link.href) !== -1 || cssToKeep.indexOf(link.href.replace(window.location.href, '')) !== -1) continue;
        link.parentNode.removeChild(link);
    }
};

var clearBodyExceptContainer = function(doc) {
    var children = Array.prototype.slice.call(doc.body.children);
    for (var i = 0; i < children.length; ++i) {
        var child = children[i];
        if(child.tagName == 'STYLE') continue;
        if (child.className.indexOf(CONTAINER_CLASS) != -1)  continue;
        child.parentNode.removeChild(child);
    }
};

var createDocumentContainer = function (dimens) {
    dimens = dimens.to(UNITS.Pixels);
    var hidden = document.createElement('div');
    hidden.className = CONTAINER_CLASS;
    hidden.setAttribute('style', buildStyleStringFromObject(HIDDEN_CONTAINER_STYLE));
    var doc = document.createElement('div');
    doc.setAttribute('style', buildStyleStringFromObject(cssInitials));
    doc.style.width = dimens.width() + dimens.unit();
    doc.style.height = dimens.height() + dimens.unit();
    doc.style.fontFamily = DEFAULT_FONT;
    doc.style.display = 'table';
    hidden.appendChild(doc);
    document.body.appendChild(hidden);
    return doc;
};

var addHTMLObject = function (htmlObj, container, dimens) {
    if (htmlObj instanceof HtmlObject) {
        dimens = dimens.to(UNITS.Pixels);
        var htmlContainer = document.createElement('div');
        htmlContainer.style.width = dimens.width() + dimens.unit();
        htmlContainer.style.height = 'auto';
        htmlContainer.style.overflow = 'hidden';
        htmlContainer.appendChild(htmlObj.html());
        container.appendChild(htmlContainer);
        scaleElement(htmlObj.html(), htmlObj.handlers(), htmlObj.baseline(), dimens);
    }
    return htmlObj;
};

var createMapContainer = function (container) {
    var mapContainer = document.createElement('div');
    var tableRow = document.createElement('div');
    tableRow.style.display = 'table-row';
    tableRow.style.height = '100%';
    mapContainer.style.display = 'table-cell';
    tableRow.appendChild(mapContainer);
    container.appendChild(tableRow);
    return mapContainer;
};

var replaceSvgSources = function(container, scaleFactor) {
    var images = Array.prototype.slice.call(container.getElementsByTagName('img'));
    for(var i = 0; i < images.length; ++i) {
        var image = images[i];
        if(image.src.indexOf('.svg') === -1) continue;
        var canvas = document.createElement('canvas');
        canvas.width = image.scrollWidth*scaleFactor;
        canvas.height = image.scrollHeight*scaleFactor;
        canvg(canvas, image.src);
        image.src = canvas.toDataURL('image/png');
    }
};


module.exports = {
    createMapContainer: createMapContainer,
    addHTMLObject: addHTMLObject,
    createDocumentContainer: createDocumentContainer,
    createOrReturnHTML: createOrReturnHTML,
    HtmlObject: HtmlObject,
    removeStylesExceptMapbox: removeStylesExceptMapbox,
    clearBodyExceptContainer: clearBodyExceptContainer,
    replaceSvgSources: replaceSvgSources
};

},{"./dimensions.js":2,"./scale-element.js":7,"./type-check.js":8,"canvg":10,"css-initials":12}],5:[function(require,module,exports){

var check = require('./type-check.js');
var UNITS = require('./dimensions.js').UNITS;
var QUIESCE_TIMEOUT = 500;
var SCALE_UNITS = ['metric', 'imperial', 'nautical'];

function isValidScaleObject(value) {
    if (!check.isObject(value)) return false;
    if (!value.hasOwnProperty('maxWidthPercent') || !value.hasOwnProperty('unit')) return false;
    if (!check.isNumber(value.maxWidthPercent) || !check.isString(value.unit)) return false;
    if (value.maxWidthPercent <= 0 || SCALE_UNITS.indexOf(value.unit) === -1) return false;
    if (value.maxWidthPercent > 1) value.maxWidthPercent /= 100;
    return true;
}

function calculateMaxSize(map) {
    var maxSize = -1;
    if (map && map.loaded()) {
        var canvas = map.getCanvas();
        var gl = canvas.getContext('experimental-webgl');
        maxSize = gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);
    }
    return maxSize;
}

function getDpiForSize(size, map) {
    var maxSize = calculateMaxSize(map);
    if (maxSize <= 0) return {
        error: 'Couldn\'t calculate the maximum size of the render buffer'
    };

    return {
        result: maxSize / size.to(UNITS.Inches).value()
    };
}

function calculateMaximumDpi(size, map, dpi) {
    var dpiRes = getDpiForSize(size, map);
    if (dpiRes.error) {
        console.error('Error when calculating dpi for size: ' + dpiRes.error);
        return dpi;
    }
    return dpiRes.result;
}


function waitForMapToRender(map) {
    var noneLoaded = false;
    return new Promise(function (resolve) {
        var quiesce = function () {
            if (!noneLoaded || (!map.loaded() || !map.isStyleLoaded() || !map.areTilesLoaded())) {
                noneLoaded = true;
                setTimeout(quiesce, QUIESCE_TIMEOUT);
            } else {
                map.off('render', renderListener);
                resolve(map);
            }
        };
        var renderListener = function () {
            noneLoaded = false;
        };
        map.on('render', renderListener);
        quiesce();
    });

}

function addScale(map, scale, mapboxgl) {
    return new Promise(function (resolve, reject) {

        try {
            if (scale) {
                map.addControl(new mapboxgl.ScaleControl({
                    maxWidth: scale.maxWidthPercent * map._container.scrollWidth,
                    unit: scale.unit
                }));
            }
            resolve(map);
        } catch (err) {
            reject(err);
        }
    });
}

function createPrintMap(map, mapboxgl, container) {
    return new Promise(function (resolve, reject) {

        try {
            var renderMap = new mapboxgl.Map({
                container: container,
                center: map.getCenter(),
                style: map.getStyle(),
                bearing: map.getBearing(),
                maxZoom: 24,
                pitch: map.getPitch(),
                interactive: false,
                attributionControl: false,
                preserveDrawingBuffer: true
            });
            renderMap.fitBounds(map.getBounds());

            resolve(renderMap);
        } catch (err) {
            reject(err);
        }
    });
}

module.exports = {
    calculateMaximumDpi: calculateMaximumDpi,
    createPrintMap: createPrintMap,
    isValidScaleObject: isValidScaleObject,
    addScale: addScale,
    waitForMapToRender: waitForMapToRender
};

},{"./dimensions.js":2,"./type-check.js":8}],6:[function(require,module,exports){
/*
 * Mapbox Print Pdf - Printing PDFs with high resolution mapbox maps
 * Copyright (c) 2015-2018 Matthew Petroff
 * Copyright (c) 2018 Eddie Larsson
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

var jsPDF = require('jspdf');
var html2canvas = require('html2canvas');
var check = require('./type-check.js');
var dimensions = require('./dimensions.js');
var Html = require('./html-container.js');
var FormatConfig = require('./format-config.js');
var mapUtils = require('./map-utils.js');
var Dimens = dimensions.Dimens;
var Margin = dimensions.Margin;
var Size = dimensions.Size;

var HtmlObject = Html.HtmlObject;
var UNITS = dimensions.UNITS;
var RENDER_SCALE = 2;

function getOrientedDimensions(dimensions, orientation) {
    if (orientation == 'l') {
        return new Dimens(dimensions.height(), dimensions.width(), dimensions.unit());
    }
    return dimensions;
}

function getRenderFormat(format, orientation, margins) {
    return getOrientedDimensions(FormatConfig.getFormat(format), orientation).subtractMargin(margins);
}

var PdfBuilder = (function() {

    var constructor = function() {
        var format = 'a4';
        var dpi = 300;
        var orientation = 'p';
        var htmlDoc = null;
        var header = null;
        var footer = null;
        var scale = null;
        var css = [];
        var actualPixelRatio = -1;
        var margins = Margin.createPDFMargin(0, UNITS.Points);
        var that = this;

        var _cleanup = function(map) {
            map.remove();
            var parent = htmlDoc.parentNode;
            parent.parentNode.removeChild(parent);
            htmlDoc = null;
            header = null;
            footer = null;
            Object.defineProperty(window, 'devicePixelRatio', {
                get: function() {
                    return actualPixelRatio;
                }
            });
        };
        

        var _printMap = function() {
            return new Promise(function(resolve, reject) {
                var dimensions = FormatConfig.getFormat(format);
                var convMargins = margins.to(dimensions.unit());

                var pdf = new jsPDF({
                    unit: dimensions.unit(),
                    format: FormatConfig.isDefaultFormat(format) ? format : [dimensions.width(), dimensions.height()],
                    orientation: orientation,
                    compress: true
                });
                
                var writeCanvasToPdf = function(canvas) {
                    var renderFormat = getRenderFormat(format, orientation, convMargins);
                    try {
                        pdf.addImage(canvas.toDataURL('image/jpeg', 1), 'JPEG', convMargins.left(), convMargins.top(),
                            renderFormat.width(),
                            renderFormat.height(), null, 'FAST');
                        resolve(pdf);
                    } catch(err) {
                        reject(err);
                    }
                };

                var whenCloned = function(doc) {
                    Html.removeStylesExceptMapbox(doc, css);
                    Html.clearBodyExceptContainer(doc);
                };
                html2canvas(htmlDoc, {
                    letterRendering: true,
                    useCORS: true,
                    scale: RENDER_SCALE,
                    allowTaint: true,
                    onclone: whenCloned
                }).then(writeCanvasToPdf, reject);
            });
        };

        var _decreaseDpiToValidValue = function(mapDimens, map) {
            mapDimens = mapDimens.to(UNITS.Pixels);
            var newDpi = Math.min(
                mapUtils.calculateMaximumDpi(new Size(mapDimens.width(), UNITS.Pixels), map, dpi),
                mapUtils.calculateMaximumDpi(new Size(mapDimens.height(), UNITS.Pixels), map, dpi)
            );
            if (newDpi < dpi) {
                dpi = newDpi;
                Object.defineProperty(window, 'devicePixelRatio', {
                    get: function() {
                        return dpi / 96;
                    }
                });
                var hidden = htmlDoc.parentNode;
                hidden.removeChild(hidden);
                document.body.appendChild(hidden);
            }
        };

        var _createHTMLDocument = function(map) {
            actualPixelRatio = window.devicePixelRatio;
            Object.defineProperty(window, 'devicePixelRatio', {
                get: function() {
                    return dpi / 96;
                }
            });

            var renderFormat = getRenderFormat(format, orientation, margins);
            htmlDoc = Html.createDocumentContainer(renderFormat);
            Html.addHTMLObject(header, htmlDoc, renderFormat);
            var container = Html.createMapContainer(htmlDoc);
            Html.addHTMLObject(footer, htmlDoc, renderFormat);
            
            var mapDimens = new Dimens(container.scrollWidth, container.scrollHeight, UNITS.Pixels);
            _decreaseDpiToValidValue(mapDimens, map);
            Html.replaceSvgSources(htmlDoc, RENDER_SCALE);
            return container;
        };

        this.format = function(nwFormat) {
            if (check.isString(nwFormat) && FormatConfig.formatExists(nwFormat)) {
                format = nwFormat;
            } else if (Dimens.isValidPdfDimensionObject(nwFormat) && nwFormat.hasOwnProperty('name')) {
                var addRes = FormatConfig.addFormat(nwFormat.name, nwFormat);
                if(addRes.error) {
                    console.error(addRes.error);
                } else {
                    format = nwFormat.name;
                }
            }
            return that;
        };

        this.dpi = function(nwDpi) {
            if (nwDpi <= 0) {
                console.error('The dpi must be greater than 0, given value was ' + nwDpi);
                return that;
            }
            dpi = nwDpi;
            return that;
        };

        this.landscape = function() {
            orientation = 'l';
            return that;
        };

        this.portrait = function() {
            orientation = 'p';
            return that;
        };

        this.header = function(nwHeader, elemCallback) {
            var tmpHeader = HtmlObject.from(nwHeader, FormatConfig);
            if (tmpHeader) {
                header = tmpHeader;
                if(check.isFunction(elemCallback)) elemCallback(header.html());
            }
            return that;
        };

        this.footer = function(nwFooter, elemCallback) {
            var tmpFooter = HtmlObject.from(nwFooter, FormatConfig);
            if (tmpFooter) {
                footer = tmpFooter;
                if(check.isFunction(elemCallback)) elemCallback(footer.html());
            }
            return that;
        };


        this.scale = function(nwScale) {
            if (mapUtils.isValidScaleObject(nwScale)) {
                scale = nwScale;
            } else {
                console.error('The given scale is invalid: ' + nwScale);
            }
            return that;
        };

        this.keepCSS = function(_css) {
            if(check.isArray(_css)) {
                css = _css;
            } else if(check.isString(_css)) {
                css = [_css];
            }
            return that;
        };

        this.margins = function(nwMargins, unit) {
            var tmpMargins = Margin.createPDFMargin(nwMargins, unit ? unit : UNITS.Millimeters);
            if (tmpMargins) {
                margins = tmpMargins;
            } else {
                console.error('The provided arguments are invalid: ' + nwMargins + ', ' + unit);
            }
            return that;
        };

        var _waitForStyleToLoad = function(map) {
            var TIMEOUT = 100;
            var maxWait = 10000;
            var waited = -1*TIMEOUT;

            
            return new Promise(function(resolve, reject) {
                var checkStyle = function() {
                    if(map.isStyleLoaded()) {
                        resolve(map);
                    } else {
                        waited += TIMEOUT;
                        if(waited >= maxWait) {
                            reject(new Error('The maps style took too long to load.'));
                        } else {
                            setTimeout(checkStyle, TIMEOUT);
                        }
                    }
                };
                checkStyle();
            });
        };
        this.print = function(map, mapboxgl) {
            
            if (!map.isStyleLoaded()) {
                
                return new Promise(function(resolve, reject) {
                    _waitForStyleToLoad(map).then(function() {
                        that.print(map, mapboxgl).then(resolve, reject);
                    }, reject);
                });
            }
            return new Promise(function(resolve, reject) {
                
                var container = _createHTMLDocument(map);
                
                var afterRenderMapCreate = function(renderMap) {
                    return new Promise(function (res, rej) {
                        mapUtils.addScale(renderMap, scale, mapboxgl)
                            .then(mapUtils.waitForMapToRender)
                            .then(_printMap)
                            .then(function(pdf) {
                                _cleanup(renderMap);
                                res(pdf);
                            }, function(err) {
                                _cleanup(renderMap);
                                rej(err);
                            });
                    });
                };
                mapUtils.createPrintMap(map, mapboxgl, container)
                    .then(afterRenderMapCreate)
                    .then(resolve, reject);
            });
        };

    };
    return constructor;
})();

module.exports = {
    formats: FormatConfig,
    build: function() { return new PdfBuilder(); }
};

},{"./dimensions.js":2,"./format-config.js":3,"./html-container.js":4,"./map-utils.js":5,"./type-check.js":8,"html2canvas":46,"jspdf":70}],7:[function(require,module,exports){
/*
 * Mapbox Print Pdf - Printing PDFs with high resolution mapbox maps
 * Copyright (c) 2018 Eddie Larsson
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */

var check = require('./type-check.js');
var Dimens = require('./dimensions.js').Dimens;
var SUPPORTED_UNITS = ['px', 'pt', 'rem', 'cm', 'mm', 'in', 'pc'];
var ATTR_SCALE_WIDTH = 'data-scale-width';
var ATTR_SCALE_HEIGHT = 'data-scale-height';
var ATTR_SCALE_SUM = 'data-scale-sum';
var ATTR_HANDLER = 'data-scale-handler';
var UNITS_REGEX = makePropertyRegex(SUPPORTED_UNITS);

function toSnakeCase(str) {
    return str.replace(/([A-Z])/g, '-$1').toLowerCase();
}

function toCamelCase(str) {
    return str.replace(/-([a-z])/g, function (match) {
        return match[1].toUpperCase();
    });
}

function makePropertyRegex(units) {
    return new RegExp('^(\\d+\\.?\\d*)(' + units.join('|') + ')$');
}

var StyleSize = (function(supportedUnits) {
    var _constructor = function(values) {
        this.scale = function(percent) {
            for (var i = 0; i < values.length; ++i) {
                if (check.isString(values[i]) || supportedUnits.indexOf(values[i].unit) === -1) continue;
                values[i].size *= percent;
            }
            return this;
        };
        this.toString = function() {
            var string = '';
            for (var i = 0; i < values.length; ++i) {
                if (i > 0) string += ' ';
                if (check.isString(values[i])) {
                    string += values[i];
                    continue;
                }
                string += values[i].size + values[i].unit;
            }
            return string;
        };
    };
    var _fromString = function(string, regex) {
        var styleValues = string.split(' ');
        var values = [];
        var atLeastOneMatch = false;
        for (var i = 0; i < styleValues.length; ++i) {
            var match = regex.exec(styleValues[i]);

            if (!match || match.length != 3) {
                values.push(styleValues[i]);
                continue;
            }
            atLeastOneMatch = true;
            values.push({
                size: Number(match[1]),
                unit: match[2]
            });
        }
        if (!atLeastOneMatch) return null;
        return new _constructor(values);
    };
    return {
        fromString: _fromString
    };
})(SUPPORTED_UNITS);

function getStyle(elem) {

    if (elem.currentStyle) {
        return {
            style: elem.currentStyle,
            snakeCase: false
        };

    // other browsers
    } else if (elem.ownerDocument.defaultView &&
        elem.ownerDocument.defaultView.getComputedStyle) {
        return {
            style: elem.ownerDocument.defaultView.getComputedStyle(elem),
            snakeCase: true
        };
    } else {
        return null;
    }
}

function scaleSingleElement(element, percent, properties, newStyles) {
    var style = getStyle(element);
    if (style) {
        for (var i = 0; i < properties.length; ++i) {
            var prop = properties[i];
            var propValue = style.snakeCase ? style.style.getPropertyValue(toSnakeCase(prop)) : style.style[prop];
            var scaleValue = StyleSize.fromString(propValue, UNITS_REGEX);
            if (scaleValue) newStyles.push({
                elem: element,
                prop: prop,
                value: scaleValue.scale(percent).toString()
            });
        }
    }
}

function scaleByAttribute(element, attr, percent, newStyles) {
    if(element.hasAttribute(attr)) {
        var properties = toCamelCase(element.getAttribute(attr)).split(' ');
        scaleSingleElement(element, percent, properties, newStyles);
    }
}

function recursiveScale(element, handlers, scalingObj, newStyles) {
    if (element.hasAttribute(ATTR_HANDLER)) {
        var handler = element.getAttribute(ATTR_HANDLER);
        if (handlers.hasOwnProperty(handler) && check.isFunction(handlers[handler])) {
            var tmpStyles = handlers[handler](element, scalingObj);
            if (check.isArray(tmpStyles)) newStyles.push.apply(newStyles, tmpStyles);
        }
    } else {
        scaleByAttribute(element, ATTR_SCALE_WIDTH, scalingObj.widthRatio, newStyles);
        scaleByAttribute(element, ATTR_SCALE_HEIGHT, scalingObj.heightRatio, newStyles);
        scaleByAttribute(element, ATTR_SCALE_SUM, scalingObj.sumRatio, newStyles);
    }
    for (var i = 0; i < element.children.length; ++i) {
        recursiveScale(element.children[i], handlers, scalingObj, newStyles);
    }
}

function applyStyles(newStyles) {
    for (var i = 0; i < newStyles.length; ++i) {
        var style = newStyles[i];
        style.elem.style[style.prop] = style.value;
    }
}

function scaleElement(element, handlers, orgDimens, currentDimens) {
    if (!check.isHTMLElement(element) || !(orgDimens instanceof Dimens) || !(currentDimens instanceof Dimens)) return;

    currentDimens = currentDimens.to(orgDimens.unit());
    var scalingObj = {original: orgDimens, current: currentDimens};
    scalingObj.heightRatio = currentDimens.height()/orgDimens.height();
    scalingObj.widthRatio = currentDimens.width()/orgDimens.width();
    scalingObj.sumRatio = (currentDimens.sum())/(orgDimens.sum());
    var newStyles = [];
    recursiveScale(element, handlers, scalingObj, newStyles);
    applyStyles(newStyles);
}

module.exports = scaleElement;

},{"./dimensions.js":2,"./type-check.js":8}],8:[function(require,module,exports){
/*
 * Mapbox Print Pdf - Printing PDFs with high resolution mapbox maps
 * Copyright (c) 2018 Eddie Larsson
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
module.exports = {
    isString: function(obj) {
        return typeof obj === 'string' || obj instanceof String;
    },

    isHTMLElement: function(obj) {
        return obj instanceof Element;
    },

    isFunction: function(obj) {
        return obj instanceof Function;
    },

    isObject: function(obj) {
        return obj === Object(obj);
    },

    isNumber: function(obj) {
        return typeof obj === 'number' || (typeof o == 'object' && obj.constructor === Number);
    },
    isArray: function(obj) {
        return obj instanceof Array;
    }
};

},{}],9:[function(require,module,exports){
/**
 * @license
 * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */

// minimal template polyfill
(function() {
  'use strict';

  var needsTemplate = (typeof HTMLTemplateElement === 'undefined');
  var brokenDocFragment = !(document.createDocumentFragment().cloneNode() instanceof DocumentFragment);
  var needsDocFrag = false;

  // NOTE: Replace DocumentFragment to work around IE11 bug that
  // casues children of a document fragment modified while
  // there is a mutation observer to not have a parentNode, or
  // have a broken parentNode (!?!)
  if (/Trident/.test(navigator.userAgent)) {
    (function() {

      needsDocFrag = true;

      var origCloneNode = Node.prototype.cloneNode;
      Node.prototype.cloneNode = function cloneNode(deep) {
        var newDom = origCloneNode.call(this, deep);
        if (this instanceof DocumentFragment) {
          newDom.__proto__ = DocumentFragment.prototype;
        }
        return newDom;
      };

      // IE's DocumentFragment querySelector code doesn't work when
      // called on an element instance
      DocumentFragment.prototype.querySelectorAll = HTMLElement.prototype.querySelectorAll;
      DocumentFragment.prototype.querySelector = HTMLElement.prototype.querySelector;

      Object.defineProperties(DocumentFragment.prototype, {
        'nodeType': {
          get: function () {
            return Node.DOCUMENT_FRAGMENT_NODE;
          },
          configurable: true
        },

        'localName': {
          get: function () {
            return undefined;
          },
          configurable: true
        },

        'nodeName': {
          get: function () {
            return '#document-fragment';
          },
          configurable: true
        }
      });

      var origInsertBefore = Node.prototype.insertBefore;
      function insertBefore(newNode, refNode) {
        if (newNode instanceof DocumentFragment) {
          var child;
          while ((child = newNode.firstChild)) {
            origInsertBefore.call(this, child, refNode);
          }
        } else {
          origInsertBefore.call(this, newNode, refNode);
        }
        return newNode;
      }
      Node.prototype.insertBefore = insertBefore;

      var origAppendChild = Node.prototype.appendChild;
      Node.prototype.appendChild = function appendChild(child) {
        if (child instanceof DocumentFragment) {
          insertBefore.call(this, child, null);
        } else {
          origAppendChild.call(this, child);
        }
        return child;
      };

      var origRemoveChild = Node.prototype.removeChild;
      var origReplaceChild = Node.prototype.replaceChild;
      Node.prototype.replaceChild = function replaceChild(newChild, oldChild) {
        if (newChild instanceof DocumentFragment) {
          insertBefore.call(this, newChild, oldChild);
          origRemoveChild.call(this, oldChild);
        } else {
          origReplaceChild.call(this, newChild, oldChild);
        }
        return oldChild;
      };

      Document.prototype.createDocumentFragment = function createDocumentFragment() {
        var frag = this.createElement('df');
        frag.__proto__ = DocumentFragment.prototype;
        return frag;
      };

      var origImportNode = Document.prototype.importNode;
      Document.prototype.importNode = function importNode(impNode, deep) {
        deep = deep || false;
        var newNode = origImportNode.call(this, impNode, deep);
        if (impNode instanceof DocumentFragment) {
          newNode.__proto__ = DocumentFragment.prototype;
        }
        return newNode;
      };
    })();
  }

  // NOTE: we rely on this cloneNode not causing element upgrade.
  // This means this polyfill must load before the CE polyfill and
  // this would need to be re-worked if a browser supports native CE
  // but not <template>.
  var capturedCloneNode = Node.prototype.cloneNode;
  var capturedCreateElement = Document.prototype.createElement;
  var capturedImportNode = Document.prototype.importNode;
  var capturedRemoveChild = Node.prototype.removeChild;
  var capturedAppendChild = Node.prototype.appendChild;
  var capturedReplaceChild = Node.prototype.replaceChild;

  var elementQuerySelectorAll = Element.prototype.querySelectorAll;
  var docQuerySelectorAll = Document.prototype.querySelectorAll;
  var fragQuerySelectorAll = DocumentFragment.prototype.querySelectorAll;

  var scriptSelector = 'script:not([type]),script[type="application/javascript"],script[type="text/javascript"]';

  function QSA(node, selector) {
    // IE 11 throws a SyntaxError with `scriptSelector` if the node has no children due to the `:not([type])` syntax
    if (!node.childNodes.length) {
      return [];
    }
    switch (node.nodeType) {
      case Node.DOCUMENT_NODE:
        return docQuerySelectorAll.call(node, selector);
      case Node.DOCUMENT_FRAGMENT_NODE:
        return fragQuerySelectorAll.call(node, selector);
      default:
        return elementQuerySelectorAll.call(node, selector);
    }
  }

  // returns true if nested templates cannot be cloned (they cannot be on
  // some impl's like Safari 8 and Edge)
  // OR if cloning a document fragment does not result in a document fragment
  var needsCloning = (function() {
    if (!needsTemplate) {
      var t = document.createElement('template');
      var t2 = document.createElement('template');
      t2.content.appendChild(document.createElement('div'));
      t.content.appendChild(t2);
      var clone = t.cloneNode(true);
      return (clone.content.childNodes.length === 0 || clone.content.firstChild.content.childNodes.length === 0
        || brokenDocFragment);
    }
  })();

  var TEMPLATE_TAG = 'template';
  var PolyfilledHTMLTemplateElement = function() {};

  if (needsTemplate) {

    var contentDoc = document.implementation.createHTMLDocument('template');
    var canDecorate = true;

    var templateStyle = document.createElement('style');
    templateStyle.textContent = TEMPLATE_TAG + '{display:none;}';

    var head = document.head;
    head.insertBefore(templateStyle, head.firstElementChild);

    /**
      Provides a minimal shim for the <template> element.
    */
    PolyfilledHTMLTemplateElement.prototype = Object.create(HTMLElement.prototype);


    // if elements do not have `innerHTML` on instances, then
    // templates can be patched by swizzling their prototypes.
    var canProtoPatch =
      !(document.createElement('div').hasOwnProperty('innerHTML'));

    /**
      The `decorate` method moves element children to the template's `content`.
      NOTE: there is no support for dynamically adding elements to templates.
    */
    PolyfilledHTMLTemplateElement.decorate = function(template) {
      // if the template is decorated, return fast
      if (template.content) {
        return;
      }
      template.content = contentDoc.createDocumentFragment();
      var child;
      while ((child = template.firstChild)) {
        capturedAppendChild.call(template.content, child);
      }
      // NOTE: prefer prototype patching for performance and
      // because on some browsers (IE11), re-defining `innerHTML`
      // can result in intermittent errors.
      if (canProtoPatch) {
        template.__proto__ = PolyfilledHTMLTemplateElement.prototype;
      } else {
        template.cloneNode = function(deep) {
          return PolyfilledHTMLTemplateElement._cloneNode(this, deep);
        };
        // add innerHTML to template, if possible
        // Note: this throws on Safari 7
        if (canDecorate) {
          try {
            defineInnerHTML(template);
            defineOuterHTML(template);
          } catch (err) {
            canDecorate = false;
          }
        }
      }
      // bootstrap recursively
      PolyfilledHTMLTemplateElement.bootstrap(template.content);
    };

    var defineInnerHTML = function defineInnerHTML(obj) {
      Object.defineProperty(obj, 'innerHTML', {
        get: function() {
          var o = '';
          for (var e = this.content.firstChild; e; e = e.nextSibling) {
            o += e.outerHTML || escapeData(e.data);
          }
          return o;
        },
        set: function(text) {
          contentDoc.body.innerHTML = text;
          PolyfilledHTMLTemplateElement.bootstrap(contentDoc);
          while (this.content.firstChild) {
            capturedRemoveChild.call(this.content, this.content.firstChild);
          }
          while (contentDoc.body.firstChild) {
            capturedAppendChild.call(this.content, contentDoc.body.firstChild);
          }
        },
        configurable: true
      });
    };

    var defineOuterHTML = function defineOuterHTML(obj) {
      Object.defineProperty(obj, 'outerHTML', {
        get: function() {
          return '<' + TEMPLATE_TAG + '>' + this.innerHTML + '</' + TEMPLATE_TAG + '>';
        },
        set: function(innerHTML) {
          if (this.parentNode) {
            contentDoc.body.innerHTML = innerHTML;
            var docFrag = this.ownerDocument.createDocumentFragment();
            while (contentDoc.body.firstChild) {
              capturedAppendChild.call(docFrag, contentDoc.body.firstChild);
            }
            capturedReplaceChild.call(this.parentNode, docFrag, this);
          } else {
            throw new Error("Failed to set the 'outerHTML' property on 'Element': This element has no parent node.");
          }
        },
        configurable: true
      });
    };

    defineInnerHTML(PolyfilledHTMLTemplateElement.prototype);
    defineOuterHTML(PolyfilledHTMLTemplateElement.prototype);

    /**
      The `bootstrap` method is called automatically and "fixes" all
      <template> elements in the document referenced by the `doc` argument.
    */
    PolyfilledHTMLTemplateElement.bootstrap = function bootstrap(doc) {
      var templates = QSA(doc, TEMPLATE_TAG);
      for (var i=0, l=templates.length, t; (i<l) && (t=templates[i]); i++) {
        PolyfilledHTMLTemplateElement.decorate(t);
      }
    };

    // auto-bootstrapping for main document
    document.addEventListener('DOMContentLoaded', function() {
      PolyfilledHTMLTemplateElement.bootstrap(document);
    });

    // Patch document.createElement to ensure newly created templates have content
    Document.prototype.createElement = function createElement() {
      var el = capturedCreateElement.apply(this, arguments);
      if (el.localName === 'template') {
        PolyfilledHTMLTemplateElement.decorate(el);
      }
      return el;
    };

    var escapeDataRegExp = /[&\u00A0<>]/g;

    var escapeReplace = function escapeReplace(c) {
      switch (c) {
        case '&':
          return '&amp;';
        case '<':
          return '&lt;';
        case '>':
          return '&gt;';
        case '\u00A0':
          return '&nbsp;';
      }
    };

    var escapeData = function escapeData(s) {
      return s.replace(escapeDataRegExp, escapeReplace);
    };
  }

  // make cloning/importing work!
  if (needsTemplate || needsCloning) {

    PolyfilledHTMLTemplateElement._cloneNode = function _cloneNode(template, deep) {
      var clone = capturedCloneNode.call(template, false);
      // NOTE: decorate doesn't auto-fix children because they are already
      // decorated so they need special clone fixup.
      if (this.decorate) {
        this.decorate(clone);
      }
      if (deep) {
        // NOTE: use native clone node to make sure CE's wrapped
        // cloneNode does not cause elements to upgrade.
        capturedAppendChild.call(clone.content, capturedCloneNode.call(template.content, true));
        // now ensure nested templates are cloned correctly.
        fixClonedDom(clone.content, template.content);
      }
      return clone;
    };

    // Given a source and cloned subtree, find <template>'s in the cloned
    // subtree and replace them with cloned <template>'s from source.
    // We must do this because only the source templates have proper .content.
    var fixClonedDom = function fixClonedDom(clone, source) {
      // do nothing if cloned node is not an element
      if (!source.querySelectorAll) return;
      // these two lists should be coincident
      var s$ = QSA(source, TEMPLATE_TAG);
      if (s$.length === 0) {
        return;
      }
      var t$ = QSA(clone, TEMPLATE_TAG);
      for (var i=0, l=t$.length, t, s; i<l; i++) {
        s = s$[i];
        t = t$[i];
        if (PolyfilledHTMLTemplateElement && PolyfilledHTMLTemplateElement.decorate) {
          PolyfilledHTMLTemplateElement.decorate(s);
        }
        capturedReplaceChild.call(t.parentNode, cloneNode.call(s, true), t);
      }
    };

    // make sure scripts inside of a cloned template are executable
    var fixClonedScripts = function fixClonedScripts(fragment) {
      var scripts = QSA(fragment, scriptSelector);
      for (var ns, s, i = 0; i < scripts.length; i++) {
        s = scripts[i];
        ns = capturedCreateElement.call(document, 'script');
        ns.textContent = s.textContent;
        var attrs = s.attributes;
        for (var ai = 0, a; ai < attrs.length; ai++) {
          a = attrs[ai];
          ns.setAttribute(a.name, a.value);
        }
        capturedReplaceChild.call(s.parentNode, ns, s);
      }
    };

    // override all cloning to fix the cloned subtree to contain properly
    // cloned templates.
    var cloneNode = Node.prototype.cloneNode = function cloneNode(deep) {
      var dom;
      // workaround for Edge bug cloning documentFragments
      // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8619646/
      if (!needsDocFrag && brokenDocFragment && this instanceof DocumentFragment) {
        if (!deep) {
          return this.ownerDocument.createDocumentFragment();
        } else {
          dom = importNode.call(this.ownerDocument, this, true);
        }
      } else if (this.nodeType === Node.ELEMENT_NODE && this.localName === TEMPLATE_TAG) {
        dom = PolyfilledHTMLTemplateElement._cloneNode(this, deep);
      } else {
        dom = capturedCloneNode.call(this, deep);
      }
      // template.content is cloned iff `deep`.
      if (deep) {
        fixClonedDom(dom, this);
      }
      return dom;
    };

    // NOTE: we are cloning instead of importing <template>'s.
    // However, the ownerDocument of the cloned template will be correct!
    // This is because the native import node creates the right document owned
    // subtree and `fixClonedDom` inserts cloned templates into this subtree,
    // thus updating the owner doc.
    var importNode = Document.prototype.importNode = function importNode(element, deep) {
      deep = deep || false;
      if (element.localName === TEMPLATE_TAG) {
        return PolyfilledHTMLTemplateElement._cloneNode(element, deep);
      } else {
        var dom = capturedImportNode.call(this, element, deep);
        if (deep) {
          fixClonedDom(dom, element);
          fixClonedScripts(dom);
        }
        return dom;
      }
    };
  }

  if (needsTemplate) {
    window.HTMLTemplateElement = PolyfilledHTMLTemplateElement;
  }

})();

},{}],10:[function(require,module,exports){
/*
 * canvg.js - Javascript SVG parser and renderer on Canvas
 * MIT Licensed
 * Gabe Lerner (gabelerner@gmail.com)
 * http://code.google.com/p/canvg/
 *
 * Requires: rgbcolor.js - http://www.phpied.com/rgb-color-parser-in-javascript/
 */
 (function ( global, factory ) {

	'use strict';

	// export as AMD...
	if ( typeof define !== 'undefined' && define.amd ) {
		define('canvgModule', [ 'rgbcolor', 'stackblur' ], factory );
	}

	// ...or as browserify
	else if ( typeof module !== 'undefined' && module.exports ) {
		module.exports = factory( require( 'rgbcolor' ), require( 'stackblur' ) );
	}

	global.canvg = factory( global.RGBColor, global.stackBlur );

}( typeof window !== 'undefined' ? window : this, function ( RGBColor, stackBlur ) {

	// canvg(target, s)
	// empty parameters: replace all 'svg' elements on page with 'canvas' elements
	// target: canvas element or the id of a canvas element
	// s: svg string, url to svg file, or xml document
	// opts: optional hash of options
	//		 ignoreMouse: true => ignore mouse events
	//		 ignoreAnimation: true => ignore animations
	//		 ignoreDimensions: true => does not try to resize canvas
	//		 ignoreClear: true => does not clear canvas
	//		 offsetX: int => draws at a x offset
	//		 offsetY: int => draws at a y offset
	//		 scaleWidth: int => scales horizontally to width
	//		 scaleHeight: int => scales vertically to height
	//		 renderCallback: function => will call the function after the first render is completed
	//		 forceRedraw: function => will call the function on every frame, if it returns true, will redraw
	var canvg = function (target, s, opts) {
		// no parameters
		if (target == null && s == null && opts == null) {
			var svgTags = document.querySelectorAll('svg');
			for (var i=0; i<svgTags.length; i++) {
				var svgTag = svgTags[i];
				var c = document.createElement('canvas');
				c.width = svgTag.clientWidth;
				c.height = svgTag.clientHeight;
				svgTag.parentNode.insertBefore(c, svgTag);
				svgTag.parentNode.removeChild(svgTag);
				var div = document.createElement('div');
				div.appendChild(svgTag);
				canvg(c, div.innerHTML);
			}
			return;
		}

		if (typeof target == 'string') {
			target = document.getElementById(target);
		}

		// store class on canvas
		if (target.svg != null) target.svg.stop();
		var svg = build(opts || {});
		// on i.e. 8 for flash canvas, we can't assign the property so check for it
		if (!(target.childNodes.length == 1 && target.childNodes[0].nodeName == 'OBJECT')) target.svg = svg;

		var ctx = target.getContext('2d');
		if (typeof s.documentElement != 'undefined') {
			// load from xml doc
			svg.loadXmlDoc(ctx, s);
		}
		else if (s.substr(0,1) == '<') {
			// load from xml string
			svg.loadXml(ctx, s);
		}
		else {
			// load from url
			svg.load(ctx, s);
		}
	}

	// see https://developer.mozilla.org/en-US/docs/Web/API/Element.matches
	var matchesSelector;
	if (typeof Element.prototype.matches != 'undefined') {
		matchesSelector = function(node, selector) {
			return node.matches(selector);
		};
	} else if (typeof Element.prototype.webkitMatchesSelector != 'undefined') {
		matchesSelector = function(node, selector) {
			return node.webkitMatchesSelector(selector);
		};
	} else if (typeof Element.prototype.mozMatchesSelector != 'undefined') {
		matchesSelector = function(node, selector) {
			return node.mozMatchesSelector(selector);
		};
	} else if (typeof Element.prototype.msMatchesSelector != 'undefined') {
		matchesSelector = function(node, selector) {
			return node.msMatchesSelector(selector);
		};
	} else if (typeof Element.prototype.oMatchesSelector != 'undefined') {
		matchesSelector = function(node, selector) {
			return node.oMatchesSelector(selector);
		};
	} else {
		// requires Sizzle: https://github.com/jquery/sizzle/wiki/Sizzle-Documentation
		// or jQuery: http://jquery.com/download/
		// or Zepto: http://zeptojs.com/#
		// without it, this is a ReferenceError

		if (typeof jQuery === 'function' || typeof Zepto === 'function') {
			matchesSelector = function (node, selector) {
				return $(node).is(selector);
			};
		}

		if (typeof matchesSelector === 'undefined') {
			matchesSelector = Sizzle.matchesSelector;
		}
	}

	// slightly modified version of https://github.com/keeganstreet/specificity/blob/master/specificity.js
	var attributeRegex = /(\[[^\]]+\])/g;
	var idRegex = /(#[^\s\+>~\.\[:]+)/g;
	var classRegex = /(\.[^\s\+>~\.\[:]+)/g;
	var pseudoElementRegex = /(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi;
	var pseudoClassWithBracketsRegex = /(:[\w-]+\([^\)]*\))/gi;
	var pseudoClassRegex = /(:[^\s\+>~\.\[:]+)/g;
	var elementRegex = /([^\s\+>~\.\[:]+)/g;
	function getSelectorSpecificity(selector) {
		var typeCount = [0, 0, 0];
		var findMatch = function(regex, type) {
			var matches = selector.match(regex);
			if (matches == null) {
				return;
			}
			typeCount[type] += matches.length;
			selector = selector.replace(regex, ' ');
		};

		selector = selector.replace(/:not\(([^\)]*)\)/g, '     $1 ');
		selector = selector.replace(/{[\s\S]*/gm, ' ');
		findMatch(attributeRegex, 1);
		findMatch(idRegex, 0);
		findMatch(classRegex, 1);
		findMatch(pseudoElementRegex, 2);
		findMatch(pseudoClassWithBracketsRegex, 1);
		findMatch(pseudoClassRegex, 1);
		selector = selector.replace(/[\*\s\+>~]/g, ' ');
		selector = selector.replace(/[#\.]/g, ' ');
		findMatch(elementRegex, 2);
		return typeCount.join('');
	}

	function build(opts) {
		var svg = { opts: opts };

		svg.FRAMERATE = 30;
		svg.MAX_VIRTUAL_PIXELS = 30000;

		svg.log = function(msg) {};
		if (svg.opts['log'] == true && typeof console != 'undefined') {
			svg.log = function(msg) { console.log(msg); };
		};

		// globals
		svg.init = function(ctx) {
			var uniqueId = 0;
			svg.UniqueId = function () { uniqueId++; return 'canvg' + uniqueId;	};
			svg.Definitions = {};
			svg.Styles = {};
			svg.StylesSpecificity = {};
			svg.Animations = [];
			svg.Images = [];
			svg.ctx = ctx;
			svg.ViewPort = new (function () {
				this.viewPorts = [];
				this.Clear = function() { this.viewPorts = []; }
				this.SetCurrent = function(width, height) { this.viewPorts.push({ width: width, height: height }); }
				this.RemoveCurrent = function() { this.viewPorts.pop(); }
				this.Current = function() { return this.viewPorts[this.viewPorts.length - 1]; }
				this.width = function() { return this.Current().width; }
				this.height = function() { return this.Current().height; }
				this.ComputeSize = function(d) {
					if (d != null && typeof d == 'number') return d;
					if (d == 'x') return this.width();
					if (d == 'y') return this.height();
					return Math.sqrt(Math.pow(this.width(), 2) + Math.pow(this.height(), 2)) / Math.sqrt(2);
				}
			});
		}
		svg.init();

		// images loaded
		svg.ImagesLoaded = function() {
			for (var i=0; i<svg.Images.length; i++) {
				if (!svg.Images[i].loaded) return false;
			}
			return true;
		}

		// trim
		svg.trim = function(s) { return s.replace(/^\s+|\s+$/g, ''); }

		// compress spaces
		svg.compressSpaces = function(s) { return s.replace(/[\s\r\t\n]+/gm,' '); }

		// ajax
		svg.ajax = function(url) {
			var AJAX;
			if(window.XMLHttpRequest){AJAX=new XMLHttpRequest();}
			else{AJAX=new ActiveXObject('Microsoft.XMLHTTP');}
			if(AJAX){
			   AJAX.open('GET',url,false);
			   AJAX.send(null);
			   return AJAX.responseText;
			}
			return null;
		}

		// parse xml
		svg.parseXml = function(xml) {
			if (typeof Windows != 'undefined' && typeof Windows.Data != 'undefined' && typeof Windows.Data.Xml != 'undefined') {
				var xmlDoc = new Windows.Data.Xml.Dom.XmlDocument();
				var settings = new Windows.Data.Xml.Dom.XmlLoadSettings();
				settings.prohibitDtd = false;
				xmlDoc.loadXml(xml, settings);
				return xmlDoc;
			}
			else if (window.DOMParser)
			{
				try {
					var parser = new DOMParser();
					return parser.parseFromString(xml, 'image/svg+xml');
				}
				catch(e){
					parser = new DOMParser();
					return parser.parseFromString(xml, 'text/xml');
				}
			}
			else
			{
				xml = xml.replace(/<!DOCTYPE svg[^>]*>/, '');
				var xmlDoc = new ActiveXObject('Microsoft.XMLDOM');
				xmlDoc.async = 'false';
				xmlDoc.loadXML(xml);
				return xmlDoc;
			}
		}

		svg.Property = function(name, value) {
			this.name = name;
			this.value = value;
		}
			svg.Property.prototype.getValue = function() {
				return this.value;
			}

			svg.Property.prototype.hasValue = function() {
				return (this.value != null && this.value !== '');
			}

			// return the numerical value of the property
			svg.Property.prototype.numValue = function() {
				if (!this.hasValue()) return 0;

				var n = parseFloat(this.value);
				if ((this.value + '').match(/%$/)) {
					n = n / 100.0;
				}
				return n;
			}

			svg.Property.prototype.valueOrDefault = function(def) {
				if (this.hasValue()) return this.value;
				return def;
			}

			svg.Property.prototype.numValueOrDefault = function(def) {
				if (this.hasValue()) return this.numValue();
				return def;
			}

			// color extensions
				// augment the current color value with the opacity
				svg.Property.prototype.addOpacity = function(opacityProp) {
					var newValue = this.value;
					if (opacityProp.value != null && opacityProp.value != '' && typeof this.value == 'string') { // can only add opacity to colors, not patterns
						var color = new RGBColor(this.value);
						if (color.ok) {
							newValue = 'rgba(' + color.r + ', ' + color.g + ', ' + color.b + ', ' + opacityProp.numValue() + ')';
						}
					}
					return new svg.Property(this.name, newValue);
				}

			// definition extensions
				// get the definition from the definitions table
				svg.Property.prototype.getDefinition = function() {
					var name = this.value.match(/#([^\)'"]+)/);
					if (name) { name = name[1]; }
					if (!name) { name = this.value; }
					return svg.Definitions[name];
				}

				svg.Property.prototype.isUrlDefinition = function() {
					return this.value.indexOf('url(') == 0
				}

				svg.Property.prototype.getFillStyleDefinition = function(e, opacityProp) {
					var def = this.getDefinition();

					// gradient
					if (def != null && def.createGradient) {
						return def.createGradient(svg.ctx, e, opacityProp);
					}

					// pattern
					if (def != null && def.createPattern) {
						if (def.getHrefAttribute().hasValue()) {
							var pt = def.attribute('patternTransform');
							def = def.getHrefAttribute().getDefinition();
							if (pt.hasValue()) { def.attribute('patternTransform', true).value = pt.value; }
						}
						return def.createPattern(svg.ctx, e);
					}

					return null;
				}

			// length extensions
				svg.Property.prototype.getDPI = function(viewPort) {
					return 96.0; // TODO: compute?
				}

				svg.Property.prototype.getEM = function(viewPort) {
					var em = 12;

					var fontSize = new svg.Property('fontSize', svg.Font.Parse(svg.ctx.font).fontSize);
					if (fontSize.hasValue()) em = fontSize.toPixels(viewPort);

					return em;
				}

				svg.Property.prototype.getUnits = function() {
					var s = this.value+'';
					return s.replace(/[0-9\.\-]/g,'');
				}

				// get the length as pixels
				svg.Property.prototype.toPixels = function(viewPort, processPercent) {
					if (!this.hasValue()) return 0;
					var s = this.value+'';
					if (s.match(/em$/)) return this.numValue() * this.getEM(viewPort);
					if (s.match(/ex$/)) return this.numValue() * this.getEM(viewPort) / 2.0;
					if (s.match(/px$/)) return this.numValue();
					if (s.match(/pt$/)) return this.numValue() * this.getDPI(viewPort) * (1.0 / 72.0);
					if (s.match(/pc$/)) return this.numValue() * 15;
					if (s.match(/cm$/)) return this.numValue() * this.getDPI(viewPort) / 2.54;
					if (s.match(/mm$/)) return this.numValue() * this.getDPI(viewPort) / 25.4;
					if (s.match(/in$/)) return this.numValue() * this.getDPI(viewPort);
					if (s.match(/%$/)) return this.numValue() * svg.ViewPort.ComputeSize(viewPort);
					var n = this.numValue();
					if (processPercent && n < 1.0) return n * svg.ViewPort.ComputeSize(viewPort);
					return n;
				}

			// time extensions
				// get the time as milliseconds
				svg.Property.prototype.toMilliseconds = function() {
					if (!this.hasValue()) return 0;
					var s = this.value+'';
					if (s.match(/s$/)) return this.numValue() * 1000;
					if (s.match(/ms$/)) return this.numValue();
					return this.numValue();
				}

			// angle extensions
				// get the angle as radians
				svg.Property.prototype.toRadians = function() {
					if (!this.hasValue()) return 0;
					var s = this.value+'';
					if (s.match(/deg$/)) return this.numValue() * (Math.PI / 180.0);
					if (s.match(/grad$/)) return this.numValue() * (Math.PI / 200.0);
					if (s.match(/rad$/)) return this.numValue();
					return this.numValue() * (Math.PI / 180.0);
				}

			// text extensions
				// get the text baseline
				var textBaselineMapping = {
					'baseline': 'alphabetic',
					'before-edge': 'top',
					'text-before-edge': 'top',
					'middle': 'middle',
					'central': 'middle',
					'after-edge': 'bottom',
					'text-after-edge': 'bottom',
					'ideographic': 'ideographic',
					'alphabetic': 'alphabetic',
					'hanging': 'hanging',
					'mathematical': 'alphabetic'
				};
				svg.Property.prototype.toTextBaseline = function () {
					if (!this.hasValue()) return null;
					return textBaselineMapping[this.value];
				}

		// fonts
		svg.Font = new (function() {
			this.Styles = 'normal|italic|oblique|inherit';
			this.Variants = 'normal|small-caps|inherit';
			this.Weights = 'normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit';

			this.CreateFont = function(fontStyle, fontVariant, fontWeight, fontSize, fontFamily, inherit) {
				var f = inherit != null ? this.Parse(inherit) : this.CreateFont('', '', '', '', '', svg.ctx.font);
				return {
					fontFamily: fontFamily || f.fontFamily,
					fontSize: fontSize || f.fontSize,
					fontStyle: fontStyle || f.fontStyle,
					fontWeight: fontWeight || f.fontWeight,
					fontVariant: fontVariant || f.fontVariant,
					toString: function () { return [this.fontStyle, this.fontVariant, this.fontWeight, this.fontSize, this.fontFamily].join(' ') }
				}
			}

			var that = this;
			this.Parse = function(s) {
				var f = {};
				var d = svg.trim(svg.compressSpaces(s || '')).split(' ');
				var set = { fontSize: false, fontStyle: false, fontWeight: false, fontVariant: false }
				var ff = '';
				for (var i=0; i<d.length; i++) {
					if (!set.fontStyle && that.Styles.indexOf(d[i]) != -1) { if (d[i] != 'inherit') f.fontStyle = d[i]; set.fontStyle = true; }
					else if (!set.fontVariant && that.Variants.indexOf(d[i]) != -1) { if (d[i] != 'inherit') f.fontVariant = d[i]; set.fontStyle = set.fontVariant = true;	}
					else if (!set.fontWeight && that.Weights.indexOf(d[i]) != -1) {	if (d[i] != 'inherit') f.fontWeight = d[i]; set.fontStyle = set.fontVariant = set.fontWeight = true; }
					else if (!set.fontSize) { if (d[i] != 'inherit') f.fontSize = d[i].split('/')[0]; set.fontStyle = set.fontVariant = set.fontWeight = set.fontSize = true; }
					else { if (d[i] != 'inherit') ff += d[i]; }
				} if (ff != '') f.fontFamily = ff;
				return f;
			}
		});

		// points and paths
		svg.ToNumberArray = function(s) {
			var a = svg.trim(svg.compressSpaces((s || '').replace(/,/g, ' '))).split(' ');
			for (var i=0; i<a.length; i++) {
				a[i] = parseFloat(a[i]);
			}
			return a;
		}
		svg.Point = function(x, y) {
			this.x = x;
			this.y = y;
		}
			svg.Point.prototype.angleTo = function(p) {
				return Math.atan2(p.y - this.y, p.x - this.x);
			}

			svg.Point.prototype.applyTransform = function(v) {
				var xp = this.x * v[0] + this.y * v[2] + v[4];
				var yp = this.x * v[1] + this.y * v[3] + v[5];
				this.x = xp;
				this.y = yp;
			}

		svg.CreatePoint = function(s) {
			var a = svg.ToNumberArray(s);
			return new svg.Point(a[0], a[1]);
		}
		svg.CreatePath = function(s) {
			var a = svg.ToNumberArray(s);
			var path = [];
			for (var i=0; i<a.length; i+=2) {
				path.push(new svg.Point(a[i], a[i+1]));
			}
			return path;
		}

		// bounding box
		svg.BoundingBox = function(x1, y1, x2, y2) { // pass in initial points if you want
			this.x1 = Number.NaN;
			this.y1 = Number.NaN;
			this.x2 = Number.NaN;
			this.y2 = Number.NaN;

			this.x = function() { return this.x1; }
			this.y = function() { return this.y1; }
			this.width = function() { return this.x2 - this.x1; }
			this.height = function() { return this.y2 - this.y1; }

			this.addPoint = function(x, y) {
				if (x != null) {
					if (isNaN(this.x1) || isNaN(this.x2)) {
						this.x1 = x;
						this.x2 = x;
					}
					if (x < this.x1) this.x1 = x;
					if (x > this.x2) this.x2 = x;
				}

				if (y != null) {
					if (isNaN(this.y1) || isNaN(this.y2)) {
						this.y1 = y;
						this.y2 = y;
					}
					if (y < this.y1) this.y1 = y;
					if (y > this.y2) this.y2 = y;
				}
			}
			this.addX = function(x) { this.addPoint(x, null); }
			this.addY = function(y) { this.addPoint(null, y); }

			this.addBoundingBox = function(bb) {
				this.addPoint(bb.x1, bb.y1);
				this.addPoint(bb.x2, bb.y2);
			}

			this.addQuadraticCurve = function(p0x, p0y, p1x, p1y, p2x, p2y) {
				var cp1x = p0x + 2/3 * (p1x - p0x); // CP1 = QP0 + 2/3 *(QP1-QP0)
				var cp1y = p0y + 2/3 * (p1y - p0y); // CP1 = QP0 + 2/3 *(QP1-QP0)
				var cp2x = cp1x + 1/3 * (p2x - p0x); // CP2 = CP1 + 1/3 *(QP2-QP0)
				var cp2y = cp1y + 1/3 * (p2y - p0y); // CP2 = CP1 + 1/3 *(QP2-QP0)
				this.addBezierCurve(p0x, p0y, cp1x, cp2x, cp1y,	cp2y, p2x, p2y);
			}

			this.addBezierCurve = function(p0x, p0y, p1x, p1y, p2x, p2y, p3x, p3y) {
				// from http://blog.hackers-cafe.net/2009/06/how-to-calculate-bezier-curves-bounding.html
				var p0 = [p0x, p0y], p1 = [p1x, p1y], p2 = [p2x, p2y], p3 = [p3x, p3y];
				this.addPoint(p0[0], p0[1]);
				this.addPoint(p3[0], p3[1]);

				for (i=0; i<=1; i++) {
					var f = function(t) {
						return Math.pow(1-t, 3) * p0[i]
						+ 3 * Math.pow(1-t, 2) * t * p1[i]
						+ 3 * (1-t) * Math.pow(t, 2) * p2[i]
						+ Math.pow(t, 3) * p3[i];
					}

					var b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];
					var a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];
					var c = 3 * p1[i] - 3 * p0[i];

					if (a == 0) {
						if (b == 0) continue;
						var t = -c / b;
						if (0 < t && t < 1) {
							if (i == 0) this.addX(f(t));
							if (i == 1) this.addY(f(t));
						}
						continue;
					}

					var b2ac = Math.pow(b, 2) - 4 * c * a;
					if (b2ac < 0) continue;
					var t1 = (-b + Math.sqrt(b2ac)) / (2 * a);
					if (0 < t1 && t1 < 1) {
						if (i == 0) this.addX(f(t1));
						if (i == 1) this.addY(f(t1));
					}
					var t2 = (-b - Math.sqrt(b2ac)) / (2 * a);
					if (0 < t2 && t2 < 1) {
						if (i == 0) this.addX(f(t2));
						if (i == 1) this.addY(f(t2));
					}
				}
			}

			this.isPointInBox = function(x, y) {
				return (this.x1 <= x && x <= this.x2 && this.y1 <= y && y <= this.y2);
			}

			this.addPoint(x1, y1);
			this.addPoint(x2, y2);
		}

		// transforms
		svg.Transform = function(v) {
			var that = this;
			this.Type = {}

			// translate
			this.Type.translate = function(s) {
				this.p = svg.CreatePoint(s);
				this.apply = function(ctx) {
					ctx.translate(this.p.x || 0.0, this.p.y || 0.0);
				}
				this.unapply = function(ctx) {
					ctx.translate(-1.0 * this.p.x || 0.0, -1.0 * this.p.y || 0.0);
				}
				this.applyToPoint = function(p) {
					p.applyTransform([1, 0, 0, 1, this.p.x || 0.0, this.p.y || 0.0]);
				}
			}

			// rotate
			this.Type.rotate = function(s) {
				var a = svg.ToNumberArray(s);
				this.angle = new svg.Property('angle', a[0]);
				this.cx = a[1] || 0;
				this.cy = a[2] || 0;
				this.apply = function(ctx) {
					ctx.translate(this.cx, this.cy);
					ctx.rotate(this.angle.toRadians());
					ctx.translate(-this.cx, -this.cy);
				}
				this.unapply = function(ctx) {
					ctx.translate(this.cx, this.cy);
					ctx.rotate(-1.0 * this.angle.toRadians());
					ctx.translate(-this.cx, -this.cy);
				}
				this.applyToPoint = function(p) {
					var a = this.angle.toRadians();
					p.applyTransform([1, 0, 0, 1, this.p.x || 0.0, this.p.y || 0.0]);
					p.applyTransform([Math.cos(a), Math.sin(a), -Math.sin(a), Math.cos(a), 0, 0]);
					p.applyTransform([1, 0, 0, 1, -this.p.x || 0.0, -this.p.y || 0.0]);
				}
			}

			this.Type.scale = function(s) {
				this.p = svg.CreatePoint(s);
				this.apply = function(ctx) {
					ctx.scale(this.p.x || 1.0, this.p.y || this.p.x || 1.0);
				}
				this.unapply = function(ctx) {
					ctx.scale(1.0 / this.p.x || 1.0, 1.0 / this.p.y || this.p.x || 1.0);
				}
				this.applyToPoint = function(p) {
					p.applyTransform([this.p.x || 0.0, 0, 0, this.p.y || 0.0, 0, 0]);
				}
			}

			this.Type.matrix = function(s) {
				this.m = svg.ToNumberArray(s);
				this.apply = function(ctx) {
					ctx.transform(this.m[0], this.m[1], this.m[2], this.m[3], this.m[4], this.m[5]);
				}
				this.unapply = function(ctx) {
					var a = this.m[0];
					var b = this.m[2];
					var c = this.m[4];
					var d = this.m[1];
					var e = this.m[3];
					var f = this.m[5];
					var g = 0.0;
					var h = 0.0;
					var i = 1.0;
					var det = 1 / (a*(e*i-f*h)-b*(d*i-f*g)+c*(d*h-e*g));
					ctx.transform(
						det*(e*i-f*h),
						det*(f*g-d*i),
						det*(c*h-b*i),
						det*(a*i-c*g),
						det*(b*f-c*e),
						det*(c*d-a*f)
					);
				}
				this.applyToPoint = function(p) {
					p.applyTransform(this.m);
				}
			}

			this.Type.SkewBase = function(s) {
				this.base = that.Type.matrix;
				this.base(s);
				this.angle = new svg.Property('angle', s);
			}
			this.Type.SkewBase.prototype = new this.Type.matrix;

			this.Type.skewX = function(s) {
				this.base = that.Type.SkewBase;
				this.base(s);
				this.m = [1, 0, Math.tan(this.angle.toRadians()), 1, 0, 0];
			}
			this.Type.skewX.prototype = new this.Type.SkewBase;

			this.Type.skewY = function(s) {
				this.base = that.Type.SkewBase;
				this.base(s);
				this.m = [1, Math.tan(this.angle.toRadians()), 0, 1, 0, 0];
			}
			this.Type.skewY.prototype = new this.Type.SkewBase;

			this.transforms = [];

			this.apply = function(ctx) {
				for (var i=0; i<this.transforms.length; i++) {
					this.transforms[i].apply(ctx);
				}
			}

			this.unapply = function(ctx) {
				for (var i=this.transforms.length-1; i>=0; i--) {
					this.transforms[i].unapply(ctx);
				}
			}

			this.applyToPoint = function(p) {
				for (var i=0; i<this.transforms.length; i++) {
					this.transforms[i].applyToPoint(p);
				}
			}

			var data = svg.trim(svg.compressSpaces(v)).replace(/\)([a-zA-Z])/g, ') $1').replace(/\)(\s?,\s?)/g,') ').split(/\s(?=[a-z])/);
			for (var i=0; i<data.length; i++) {
				var type = svg.trim(data[i].split('(')[0]);
				var s = data[i].split('(')[1].replace(')','');
				var transformType = this.Type[type];
				if (typeof transformType != 'undefined') {
					var transform = new transformType(s);
					transform.type = type;
					this.transforms.push(transform);
				}
			}
		}

		// aspect ratio
		svg.AspectRatio = function(ctx, aspectRatio, width, desiredWidth, height, desiredHeight, minX, minY, refX, refY) {
			// aspect ratio - http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute
			aspectRatio = svg.compressSpaces(aspectRatio);
			aspectRatio = aspectRatio.replace(/^defer\s/,''); // ignore defer
			var align = aspectRatio.split(' ')[0] || 'xMidYMid';
			var meetOrSlice = aspectRatio.split(' ')[1] || 'meet';

			// calculate scale
			var scaleX = width / desiredWidth;
			var scaleY = height / desiredHeight;
			var scaleMin = Math.min(scaleX, scaleY);
			var scaleMax = Math.max(scaleX, scaleY);
			if (meetOrSlice == 'meet') { desiredWidth *= scaleMin; desiredHeight *= scaleMin; }
			if (meetOrSlice == 'slice') { desiredWidth *= scaleMax; desiredHeight *= scaleMax; }

			refX = new svg.Property('refX', refX);
			refY = new svg.Property('refY', refY);
			if (refX.hasValue() && refY.hasValue()) {
				ctx.translate(-scaleMin * refX.toPixels('x'), -scaleMin * refY.toPixels('y'));
			}
			else {
				// align
				if (align.match(/^xMid/) && ((meetOrSlice == 'meet' && scaleMin == scaleY) || (meetOrSlice == 'slice' && scaleMax == scaleY))) ctx.translate(width / 2.0 - desiredWidth / 2.0, 0);
				if (align.match(/YMid$/) && ((meetOrSlice == 'meet' && scaleMin == scaleX) || (meetOrSlice == 'slice' && scaleMax == scaleX))) ctx.translate(0, height / 2.0 - desiredHeight / 2.0);
				if (align.match(/^xMax/) && ((meetOrSlice == 'meet' && scaleMin == scaleY) || (meetOrSlice == 'slice' && scaleMax == scaleY))) ctx.translate(width - desiredWidth, 0);
				if (align.match(/YMax$/) && ((meetOrSlice == 'meet' && scaleMin == scaleX) || (meetOrSlice == 'slice' && scaleMax == scaleX))) ctx.translate(0, height - desiredHeight);
			}

			// scale
			if (align == 'none') ctx.scale(scaleX, scaleY);
			else if (meetOrSlice == 'meet') ctx.scale(scaleMin, scaleMin);
			else if (meetOrSlice == 'slice') ctx.scale(scaleMax, scaleMax);

			// translate
			ctx.translate(minX == null ? 0 : -minX, minY == null ? 0 : -minY);
		}

		// elements
		svg.Element = {}

		svg.EmptyProperty = new svg.Property('EMPTY', '');

		svg.Element.ElementBase = function(node) {
			this.attributes = {};
			this.styles = {};
			this.stylesSpecificity = {};
			this.children = [];

			// get or create attribute
			this.attribute = function(name, createIfNotExists) {
				var a = this.attributes[name];
				if (a != null) return a;

				if (createIfNotExists == true) { a = new svg.Property(name, ''); this.attributes[name] = a; }
				return a || svg.EmptyProperty;
			}

			this.getHrefAttribute = function() {
				for (var a in this.attributes) {
					if (a == 'href' || a.match(/:href$/)) {
						return this.attributes[a];
					}
				}
				return svg.EmptyProperty;
			}

			// get or create style, crawls up node tree
			this.style = function(name, createIfNotExists, skipAncestors) {
				var s = this.styles[name];
				if (s != null) return s;

				var a = this.attribute(name);
				if (a != null && a.hasValue()) {
					this.styles[name] = a; // move up to me to cache
					return a;
				}

				if (skipAncestors != true) {
					var p = this.parent;
					if (p != null) {
						var ps = p.style(name);
						if (ps != null && ps.hasValue()) {
							return ps;
						}
					}
				}

				if (createIfNotExists == true) { s = new svg.Property(name, ''); this.styles[name] = s; }
				return s || svg.EmptyProperty;
			}

			// base render
			this.render = function(ctx) {
				// don't render display=none
				if (this.style('display').value == 'none') return;

				// don't render visibility=hidden
				if (this.style('visibility').value == 'hidden') return;

				ctx.save();
				if (this.style('mask').hasValue()) { // mask
					var mask = this.style('mask').getDefinition();
					if (mask != null) mask.apply(ctx, this);
				}
				else if (this.style('filter').hasValue()) { // filter
					var filter = this.style('filter').getDefinition();
					if (filter != null) filter.apply(ctx, this);
				}
				else {
					this.setContext(ctx);
					this.renderChildren(ctx);
					this.clearContext(ctx);
				}
				ctx.restore();
			}

			// base set context
			this.setContext = function(ctx) {
				// OVERRIDE ME!
			}

			// base clear context
			this.clearContext = function(ctx) {
				// OVERRIDE ME!
			}

			// base render children
			this.renderChildren = function(ctx) {
				for (var i=0; i<this.children.length; i++) {
					this.children[i].render(ctx);
				}
			}

			this.addChild = function(childNode, create) {
				var child = childNode;
				if (create) child = svg.CreateElement(childNode);
				child.parent = this;
				if (child.type != 'title') { this.children.push(child);	}
			}

			this.addStylesFromStyleDefinition = function () {
				// add styles
				for (var selector in svg.Styles) {
					if (selector[0] != '@' && matchesSelector(node, selector)) {
						var styles = svg.Styles[selector];
						var specificity = svg.StylesSpecificity[selector];
						if (styles != null) {
							for (var name in styles) {
								var existingSpecificity = this.stylesSpecificity[name];
								if (typeof existingSpecificity == 'undefined') {
									existingSpecificity = '000';
								}
								if (specificity > existingSpecificity) {
									this.styles[name] = styles[name];
									this.stylesSpecificity[name] = specificity;
								}
							}
						}
					}
				}
			};

			// Microsoft Edge fix
			var allUppercase = new RegExp("^[A-Z\-]+$");
			var normalizeAttributeName = function (name) {
				if (allUppercase.test(name)) {
					return name.toLowerCase();
				}
				return name;
			};

			if (node != null && node.nodeType == 1) { //ELEMENT_NODE
				// add attributes
				for (var i=0; i<node.attributes.length; i++) {
					var attribute = node.attributes[i];
					var nodeName = normalizeAttributeName(attribute.nodeName);
					this.attributes[nodeName] = new svg.Property(nodeName, attribute.value);
				}

				this.addStylesFromStyleDefinition();

				// add inline styles
				if (this.attribute('style').hasValue()) {
					var styles = this.attribute('style').value.split(';');
					for (var i=0; i<styles.length; i++) {
						if (svg.trim(styles[i]) != '') {
							var style = styles[i].split(':');
							var name = svg.trim(style[0]);
							var value = svg.trim(style[1]);
							this.styles[name] = new svg.Property(name, value);
						}
					}
				}

				// add id
				if (this.attribute('id').hasValue()) {
					if (svg.Definitions[this.attribute('id').value] == null) {
						svg.Definitions[this.attribute('id').value] = this;
					}
				}

				// add children
				for (var i=0; i<node.childNodes.length; i++) {
					var childNode = node.childNodes[i];
					if (childNode.nodeType == 1) this.addChild(childNode, true); //ELEMENT_NODE
					if (this.captureTextNodes && (childNode.nodeType == 3 || childNode.nodeType == 4)) {
						var text = childNode.value || childNode.text || childNode.textContent || '';
						if (svg.compressSpaces(text) != '') {
							this.addChild(new svg.Element.tspan(childNode), false); // TEXT_NODE
						}
					}
				}
			}
		}

		svg.Element.RenderedElementBase = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.setContext = function(ctx) {
				// fill
				if (this.style('fill').isUrlDefinition()) {
					var fs = this.style('fill').getFillStyleDefinition(this, this.style('fill-opacity'));
					if (fs != null) ctx.fillStyle = fs;
				}
				else if (this.style('fill').hasValue()) {
					var fillStyle = this.style('fill');
					if (fillStyle.value == 'currentColor') fillStyle.value = this.style('color').value;
					if (fillStyle.value != 'inherit') ctx.fillStyle = (fillStyle.value == 'none' ? 'rgba(0,0,0,0)' : fillStyle.value);
				}
				if (this.style('fill-opacity').hasValue()) {
					var fillStyle = new svg.Property('fill', ctx.fillStyle);
					fillStyle = fillStyle.addOpacity(this.style('fill-opacity'));
					ctx.fillStyle = fillStyle.value;
				}

				// stroke
				if (this.style('stroke').isUrlDefinition()) {
					var fs = this.style('stroke').getFillStyleDefinition(this, this.style('stroke-opacity'));
					if (fs != null) ctx.strokeStyle = fs;
				}
				else if (this.style('stroke').hasValue()) {
					var strokeStyle = this.style('stroke');
					if (strokeStyle.value == 'currentColor') strokeStyle.value = this.style('color').value;
					if (strokeStyle.value != 'inherit') ctx.strokeStyle = (strokeStyle.value == 'none' ? 'rgba(0,0,0,0)' : strokeStyle.value);
				}
				if (this.style('stroke-opacity').hasValue()) {
					var strokeStyle = new svg.Property('stroke', ctx.strokeStyle);
					strokeStyle = strokeStyle.addOpacity(this.style('stroke-opacity'));
					ctx.strokeStyle = strokeStyle.value;
				}
				if (this.style('stroke-width').hasValue()) {
					var newLineWidth = this.style('stroke-width').toPixels();
					ctx.lineWidth = newLineWidth == 0 ? 0.001 : newLineWidth; // browsers don't respect 0
			    }
				if (this.style('stroke-linecap').hasValue()) ctx.lineCap = this.style('stroke-linecap').value;
				if (this.style('stroke-linejoin').hasValue()) ctx.lineJoin = this.style('stroke-linejoin').value;
				if (this.style('stroke-miterlimit').hasValue()) ctx.miterLimit = this.style('stroke-miterlimit').value;
				if (this.style('paint-order').hasValue()) ctx.paintOrder = this.style('paint-order').value;
				if (this.style('stroke-dasharray').hasValue() && this.style('stroke-dasharray').value != 'none') {
					var gaps = svg.ToNumberArray(this.style('stroke-dasharray').value);
					if (typeof ctx.setLineDash != 'undefined') { ctx.setLineDash(gaps); }
					else if (typeof ctx.webkitLineDash != 'undefined') { ctx.webkitLineDash = gaps; }
					else if (typeof ctx.mozDash != 'undefined' && !(gaps.length==1 && gaps[0]==0)) { ctx.mozDash = gaps; }

					var offset = this.style('stroke-dashoffset').numValueOrDefault(1);
					if (typeof ctx.lineDashOffset != 'undefined') { ctx.lineDashOffset = offset; }
					else if (typeof ctx.webkitLineDashOffset != 'undefined') { ctx.webkitLineDashOffset = offset; }
					else if (typeof ctx.mozDashOffset != 'undefined') { ctx.mozDashOffset = offset; }
				}

				// font
				if (typeof ctx.font != 'undefined') {
					ctx.font = svg.Font.CreateFont(
						this.style('font-style').value,
						this.style('font-variant').value,
						this.style('font-weight').value,
						this.style('font-size').hasValue() ? this.style('font-size').toPixels() + 'px' : '',
						this.style('font-family').value).toString();
				}

				// transform
				if (this.style('transform', false, true).hasValue()) {
					var transform = new svg.Transform(this.style('transform', false, true).value);
					transform.apply(ctx);
				}

				// clip
				if (this.style('clip-path', false, true).hasValue()) {
					var clip = this.style('clip-path', false, true).getDefinition();
					if (clip != null) clip.apply(ctx);
				}

				// opacity
				if (this.style('opacity').hasValue()) {
					ctx.globalAlpha = this.style('opacity').numValue();
				}
			}
		}
		svg.Element.RenderedElementBase.prototype = new svg.Element.ElementBase;

		svg.Element.PathElementBase = function(node) {
			this.base = svg.Element.RenderedElementBase;
			this.base(node);

			this.path = function(ctx) {
				if (ctx != null) ctx.beginPath();
				return new svg.BoundingBox();
			}

			this.renderChildren = function(ctx) {
				this.path(ctx);
				svg.Mouse.checkPath(this, ctx);
				if (ctx.fillStyle != '') {
					if (this.style('fill-rule').valueOrDefault('inherit') != 'inherit') { ctx.fill(this.style('fill-rule').value); }
					else { ctx.fill(); }
				}
				if (ctx.strokeStyle != '') ctx.stroke();

				var markers = this.getMarkers();
				if (markers != null) {
					if (this.style('marker-start').isUrlDefinition()) {
						var marker = this.style('marker-start').getDefinition();
						marker.render(ctx, markers[0][0], markers[0][1]);
					}
					if (this.style('marker-mid').isUrlDefinition()) {
						var marker = this.style('marker-mid').getDefinition();
						for (var i=1;i<markers.length-1;i++) {
							marker.render(ctx, markers[i][0], markers[i][1]);
						}
					}
					if (this.style('marker-end').isUrlDefinition()) {
						var marker = this.style('marker-end').getDefinition();
						marker.render(ctx, markers[markers.length-1][0], markers[markers.length-1][1]);
					}
				}
			}

			this.getBoundingBox = function() {
				return this.path();
			}

			this.getMarkers = function() {
				return null;
			}
		}
		svg.Element.PathElementBase.prototype = new svg.Element.RenderedElementBase;

		// svg element
		svg.Element.svg = function(node) {
			this.base = svg.Element.RenderedElementBase;
			this.base(node);

			this.baseClearContext = this.clearContext;
			this.clearContext = function(ctx) {
				this.baseClearContext(ctx);
				svg.ViewPort.RemoveCurrent();
			}

			this.baseSetContext = this.setContext;
			this.setContext = function(ctx) {
				// initial values and defaults
				ctx.strokeStyle = 'rgba(0,0,0,0)';
				ctx.lineCap = 'butt';
				ctx.lineJoin = 'miter';
				ctx.miterLimit = 4;
				if (typeof ctx.font != 'undefined' && typeof window.getComputedStyle != 'undefined') {
					ctx.font = window.getComputedStyle(ctx.canvas).getPropertyValue('font');
				}

				this.baseSetContext(ctx);

				// create new view port
				if (!this.attribute('x').hasValue()) this.attribute('x', true).value = 0;
				if (!this.attribute('y').hasValue()) this.attribute('y', true).value = 0;
				ctx.translate(this.attribute('x').toPixels('x'), this.attribute('y').toPixels('y'));

				var width = svg.ViewPort.width();
				var height = svg.ViewPort.height();

				if (!this.attribute('width').hasValue()) this.attribute('width', true).value = '100%';
				if (!this.attribute('height').hasValue()) this.attribute('height', true).value = '100%';
				if (typeof this.root == 'undefined') {
					width = this.attribute('width').toPixels('x');
					height = this.attribute('height').toPixels('y');

					var x = 0;
					var y = 0;
					if (this.attribute('refX').hasValue() && this.attribute('refY').hasValue()) {
						x = -this.attribute('refX').toPixels('x');
						y = -this.attribute('refY').toPixels('y');
					}

					if (this.attribute('overflow').valueOrDefault('hidden') != 'visible') {
						ctx.beginPath();
						ctx.moveTo(x, y);
						ctx.lineTo(width, y);
						ctx.lineTo(width, height);
						ctx.lineTo(x, height);
						ctx.closePath();
						ctx.clip();
					}
				}
				svg.ViewPort.SetCurrent(width, height);

				// viewbox
				if (this.attribute('viewBox').hasValue()) {
					var viewBox = svg.ToNumberArray(this.attribute('viewBox').value);
					var minX = viewBox[0];
					var minY = viewBox[1];
					width = viewBox[2];
					height = viewBox[3];

					svg.AspectRatio(ctx,
									this.attribute('preserveAspectRatio').value,
									svg.ViewPort.width(),
									width,
									svg.ViewPort.height(),
									height,
									minX,
									minY,
									this.attribute('refX').value,
									this.attribute('refY').value);

					svg.ViewPort.RemoveCurrent();
					svg.ViewPort.SetCurrent(viewBox[2], viewBox[3]);
				}
			}
		}
		svg.Element.svg.prototype = new svg.Element.RenderedElementBase;

		// rect element
		svg.Element.rect = function(node) {
			this.base = svg.Element.PathElementBase;
			this.base(node);

			this.path = function(ctx) {
				var x = this.attribute('x').toPixels('x');
				var y = this.attribute('y').toPixels('y');
				var width = this.attribute('width').toPixels('x');
				var height = this.attribute('height').toPixels('y');
				var rx = this.attribute('rx').toPixels('x');
				var ry = this.attribute('ry').toPixels('y');
				if (this.attribute('rx').hasValue() && !this.attribute('ry').hasValue()) ry = rx;
				if (this.attribute('ry').hasValue() && !this.attribute('rx').hasValue()) rx = ry;
				rx = Math.min(rx, width / 2.0);
				ry = Math.min(ry, height / 2.0);
				if (ctx != null) {
					ctx.beginPath();
					ctx.moveTo(x + rx, y);
					ctx.lineTo(x + width - rx, y);
					ctx.quadraticCurveTo(x + width, y, x + width, y + ry)
					ctx.lineTo(x + width, y + height - ry);
					ctx.quadraticCurveTo(x + width, y + height, x + width - rx, y + height)
					ctx.lineTo(x + rx, y + height);
					ctx.quadraticCurveTo(x, y + height, x, y + height - ry)
					ctx.lineTo(x, y + ry);
					ctx.quadraticCurveTo(x, y, x + rx, y)
					ctx.closePath();
				}

				return new svg.BoundingBox(x, y, x + width, y + height);
			}
		}
		svg.Element.rect.prototype = new svg.Element.PathElementBase;

		// circle element
		svg.Element.circle = function(node) {
			this.base = svg.Element.PathElementBase;
			this.base(node);

			this.path = function(ctx) {
				var cx = this.attribute('cx').toPixels('x');
				var cy = this.attribute('cy').toPixels('y');
				var r = this.attribute('r').toPixels();

				if (ctx != null) {
					ctx.beginPath();
					ctx.arc(cx, cy, r, 0, Math.PI * 2, true);
					ctx.closePath();
				}

				return new svg.BoundingBox(cx - r, cy - r, cx + r, cy + r);
			}
		}
		svg.Element.circle.prototype = new svg.Element.PathElementBase;

		// ellipse element
		svg.Element.ellipse = function(node) {
			this.base = svg.Element.PathElementBase;
			this.base(node);

			this.path = function(ctx) {
				var KAPPA = 4 * ((Math.sqrt(2) - 1) / 3);
				var rx = this.attribute('rx').toPixels('x');
				var ry = this.attribute('ry').toPixels('y');
				var cx = this.attribute('cx').toPixels('x');
				var cy = this.attribute('cy').toPixels('y');

				if (ctx != null) {
					ctx.beginPath();
					ctx.moveTo(cx, cy - ry);
					ctx.bezierCurveTo(cx + (KAPPA * rx), cy - ry,  cx + rx, cy - (KAPPA * ry), cx + rx, cy);
					ctx.bezierCurveTo(cx + rx, cy + (KAPPA * ry), cx + (KAPPA * rx), cy + ry, cx, cy + ry);
					ctx.bezierCurveTo(cx - (KAPPA * rx), cy + ry, cx - rx, cy + (KAPPA * ry), cx - rx, cy);
					ctx.bezierCurveTo(cx - rx, cy - (KAPPA * ry), cx - (KAPPA * rx), cy - ry, cx, cy - ry);
					ctx.closePath();
				}

				return new svg.BoundingBox(cx - rx, cy - ry, cx + rx, cy + ry);
			}
		}
		svg.Element.ellipse.prototype = new svg.Element.PathElementBase;

		// line element
		svg.Element.line = function(node) {
			this.base = svg.Element.PathElementBase;
			this.base(node);

			this.getPoints = function() {
				return [
					new svg.Point(this.attribute('x1').toPixels('x'), this.attribute('y1').toPixels('y')),
					new svg.Point(this.attribute('x2').toPixels('x'), this.attribute('y2').toPixels('y'))];
			}

			this.path = function(ctx) {
				var points = this.getPoints();

				if (ctx != null) {
					ctx.beginPath();
					ctx.moveTo(points[0].x, points[0].y);
					ctx.lineTo(points[1].x, points[1].y);
				}

				return new svg.BoundingBox(points[0].x, points[0].y, points[1].x, points[1].y);
			}

			this.getMarkers = function() {
				var points = this.getPoints();
				var a = points[0].angleTo(points[1]);
				return [[points[0], a], [points[1], a]];
			}
		}
		svg.Element.line.prototype = new svg.Element.PathElementBase;

		// polyline element
		svg.Element.polyline = function(node) {
			this.base = svg.Element.PathElementBase;
			this.base(node);

			this.points = svg.CreatePath(this.attribute('points').value);
			this.path = function(ctx) {
				var bb = new svg.BoundingBox(this.points[0].x, this.points[0].y);
				if (ctx != null) {
					ctx.beginPath();
					ctx.moveTo(this.points[0].x, this.points[0].y);
				}
				for (var i=1; i<this.points.length; i++) {
					bb.addPoint(this.points[i].x, this.points[i].y);
					if (ctx != null) ctx.lineTo(this.points[i].x, this.points[i].y);
				}
				return bb;
			}

			this.getMarkers = function() {
				var markers = [];
				for (var i=0; i<this.points.length - 1; i++) {
					markers.push([this.points[i], this.points[i].angleTo(this.points[i+1])]);
				}
				if (markers.length > 0) {
					markers.push([this.points[this.points.length-1], markers[markers.length-1][1]]);
				}
				return markers;
			}
		}
		svg.Element.polyline.prototype = new svg.Element.PathElementBase;

		// polygon element
		svg.Element.polygon = function(node) {
			this.base = svg.Element.polyline;
			this.base(node);

			this.basePath = this.path;
			this.path = function(ctx) {
				var bb = this.basePath(ctx);
				if (ctx != null) {
					ctx.lineTo(this.points[0].x, this.points[0].y);
					ctx.closePath();
				}
				return bb;
			}
		}
		svg.Element.polygon.prototype = new svg.Element.polyline;

		// path element
		svg.Element.path = function(node) {
			this.base = svg.Element.PathElementBase;
			this.base(node);

			var d = this.attribute('d').value;
			// TODO: convert to real lexer based on http://www.w3.org/TR/SVG11/paths.html#PathDataBNF
			d = d.replace(/,/gm,' '); // get rid of all commas
			// As the end of a match can also be the start of the next match, we need to run this replace twice.
			for(var i=0; i<2; i++)
				d = d.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,'$1 $2'); // suffix commands with spaces
			d = d.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,'$1 $2'); // prefix commands with spaces
			d = d.replace(/([0-9])([+\-])/gm,'$1 $2'); // separate digits on +- signs
			// Again, we need to run this twice to find all occurances
			for(var i=0; i<2; i++)
				d = d.replace(/(\.[0-9]*)(\.)/gm,'$1 $2'); // separate digits when they start with a comma
			d = d.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,'$1 $3 $4 '); // shorthand elliptical arc path syntax
			d = svg.compressSpaces(d); // compress multiple spaces
			d = svg.trim(d);
			this.PathParser = new (function(d) {
				this.tokens = d.split(' ');

				this.reset = function() {
					this.i = -1;
					this.command = '';
					this.previousCommand = '';
					this.start = new svg.Point(0, 0);
					this.control = new svg.Point(0, 0);
					this.current = new svg.Point(0, 0);
					this.points = [];
					this.angles = [];
				}

				this.isEnd = function() {
					return this.i >= this.tokens.length - 1;
				}

				this.isCommandOrEnd = function() {
					if (this.isEnd()) return true;
					return this.tokens[this.i + 1].match(/^[A-Za-z]$/) != null;
				}

				this.isRelativeCommand = function() {
					switch(this.command)
					{
						case 'm':
						case 'l':
						case 'h':
						case 'v':
						case 'c':
						case 's':
						case 'q':
						case 't':
						case 'a':
						case 'z':
							return true;
							break;
					}
					return false;
				}

				this.getToken = function() {
					this.i++;
					return this.tokens[this.i];
				}

				this.getScalar = function() {
					return parseFloat(this.getToken());
				}

				this.nextCommand = function() {
					this.previousCommand = this.command;
					this.command = this.getToken();
				}

				this.getPoint = function() {
					var p = new svg.Point(this.getScalar(), this.getScalar());
					return this.makeAbsolute(p);
				}

				this.getAsControlPoint = function() {
					var p = this.getPoint();
					this.control = p;
					return p;
				}

				this.getAsCurrentPoint = function() {
					var p = this.getPoint();
					this.current = p;
					return p;
				}

				this.getReflectedControlPoint = function() {
					if (this.previousCommand.toLowerCase() != 'c' &&
					    this.previousCommand.toLowerCase() != 's' &&
						this.previousCommand.toLowerCase() != 'q' &&
						this.previousCommand.toLowerCase() != 't' ){
						return this.current;
					}

					// reflect point
					var p = new svg.Point(2 * this.current.x - this.control.x, 2 * this.current.y - this.control.y);
					return p;
				}

				this.makeAbsolute = function(p) {
					if (this.isRelativeCommand()) {
						p.x += this.current.x;
						p.y += this.current.y;
					}
					return p;
				}

				this.addMarker = function(p, from, priorTo) {
					// if the last angle isn't filled in because we didn't have this point yet ...
					if (priorTo != null && this.angles.length > 0 && this.angles[this.angles.length-1] == null) {
						this.angles[this.angles.length-1] = this.points[this.points.length-1].angleTo(priorTo);
					}
					this.addMarkerAngle(p, from == null ? null : from.angleTo(p));
				}

				this.addMarkerAngle = function(p, a) {
					this.points.push(p);
					this.angles.push(a);
				}

				this.getMarkerPoints = function() { return this.points; }
				this.getMarkerAngles = function() {
					for (var i=0; i<this.angles.length; i++) {
						if (this.angles[i] == null) {
							for (var j=i+1; j<this.angles.length; j++) {
								if (this.angles[j] != null) {
									this.angles[i] = this.angles[j];
									break;
								}
							}
						}
					}
					return this.angles;
				}
			})(d);

			this.path = function(ctx) {
				var pp = this.PathParser;
				pp.reset();

				var bb = new svg.BoundingBox();
				if (ctx != null) ctx.beginPath();
				while (!pp.isEnd()) {
					pp.nextCommand();
					switch (pp.command) {
					case 'M':
					case 'm':
						var p = pp.getAsCurrentPoint();
						pp.addMarker(p);
						bb.addPoint(p.x, p.y);
						if (ctx != null) ctx.moveTo(p.x, p.y);
						pp.start = pp.current;
						while (!pp.isCommandOrEnd()) {
							var p = pp.getAsCurrentPoint();
							pp.addMarker(p, pp.start);
							bb.addPoint(p.x, p.y);
							if (ctx != null) ctx.lineTo(p.x, p.y);
						}
						break;
					case 'L':
					case 'l':
						while (!pp.isCommandOrEnd()) {
							var c = pp.current;
							var p = pp.getAsCurrentPoint();
							pp.addMarker(p, c);
							bb.addPoint(p.x, p.y);
							if (ctx != null) ctx.lineTo(p.x, p.y);
						}
						break;
					case 'H':
					case 'h':
						while (!pp.isCommandOrEnd()) {
							var newP = new svg.Point((pp.isRelativeCommand() ? pp.current.x : 0) + pp.getScalar(), pp.current.y);
							pp.addMarker(newP, pp.current);
							pp.current = newP;
							bb.addPoint(pp.current.x, pp.current.y);
							if (ctx != null) ctx.lineTo(pp.current.x, pp.current.y);
						}
						break;
					case 'V':
					case 'v':
						while (!pp.isCommandOrEnd()) {
							var newP = new svg.Point(pp.current.x, (pp.isRelativeCommand() ? pp.current.y : 0) + pp.getScalar());
							pp.addMarker(newP, pp.current);
							pp.current = newP;
							bb.addPoint(pp.current.x, pp.current.y);
							if (ctx != null) ctx.lineTo(pp.current.x, pp.current.y);
						}
						break;
					case 'C':
					case 'c':
						while (!pp.isCommandOrEnd()) {
							var curr = pp.current;
							var p1 = pp.getPoint();
							var cntrl = pp.getAsControlPoint();
							var cp = pp.getAsCurrentPoint();
							pp.addMarker(cp, cntrl, p1);
							bb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);
							if (ctx != null) ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);
						}
						break;
					case 'S':
					case 's':
						while (!pp.isCommandOrEnd()) {
							var curr = pp.current;
							var p1 = pp.getReflectedControlPoint();
							var cntrl = pp.getAsControlPoint();
							var cp = pp.getAsCurrentPoint();
							pp.addMarker(cp, cntrl, p1);
							bb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);
							if (ctx != null) ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);
						}
						break;
					case 'Q':
					case 'q':
						while (!pp.isCommandOrEnd()) {
							var curr = pp.current;
							var cntrl = pp.getAsControlPoint();
							var cp = pp.getAsCurrentPoint();
							pp.addMarker(cp, cntrl, cntrl);
							bb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);
							if (ctx != null) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);
						}
						break;
					case 'T':
					case 't':
						while (!pp.isCommandOrEnd()) {
							var curr = pp.current;
							var cntrl = pp.getReflectedControlPoint();
							pp.control = cntrl;
							var cp = pp.getAsCurrentPoint();
							pp.addMarker(cp, cntrl, cntrl);
							bb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);
							if (ctx != null) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);
						}
						break;
					case 'A':
					case 'a':
						while (!pp.isCommandOrEnd()) {
						    var curr = pp.current;
							var rx = pp.getScalar();
							var ry = pp.getScalar();
							var xAxisRotation = pp.getScalar() * (Math.PI / 180.0);
							var largeArcFlag = pp.getScalar();
							var sweepFlag = pp.getScalar();
							var cp = pp.getAsCurrentPoint();

							// Conversion from endpoint to center parameterization
							// http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes
							// x1', y1'
							var currp = new svg.Point(
								Math.cos(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.sin(xAxisRotation) * (curr.y - cp.y) / 2.0,
								-Math.sin(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.cos(xAxisRotation) * (curr.y - cp.y) / 2.0
							);
							// adjust radii
							var l = Math.pow(currp.x,2)/Math.pow(rx,2)+Math.pow(currp.y,2)/Math.pow(ry,2);
							if (l > 1) {
								rx *= Math.sqrt(l);
								ry *= Math.sqrt(l);
							}
							// cx', cy'
							var s = (largeArcFlag == sweepFlag ? -1 : 1) * Math.sqrt(
								((Math.pow(rx,2)*Math.pow(ry,2))-(Math.pow(rx,2)*Math.pow(currp.y,2))-(Math.pow(ry,2)*Math.pow(currp.x,2))) /
								(Math.pow(rx,2)*Math.pow(currp.y,2)+Math.pow(ry,2)*Math.pow(currp.x,2))
							);
							if (isNaN(s)) s = 0;
							var cpp = new svg.Point(s * rx * currp.y / ry, s * -ry * currp.x / rx);
							// cx, cy
							var centp = new svg.Point(
								(curr.x + cp.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y,
								(curr.y + cp.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y
							);
							// vector magnitude
							var m = function(v) { return Math.sqrt(Math.pow(v[0],2) + Math.pow(v[1],2)); }
							// ratio between two vectors
							var r = function(u, v) { return (u[0]*v[0]+u[1]*v[1]) / (m(u)*m(v)) }
							// angle between two vectors
							var a = function(u, v) { return (u[0]*v[1] < u[1]*v[0] ? -1 : 1) * Math.acos(r(u,v)); }
							// initial angle
							var a1 = a([1,0], [(currp.x-cpp.x)/rx,(currp.y-cpp.y)/ry]);
							// angle delta
							var u = [(currp.x-cpp.x)/rx,(currp.y-cpp.y)/ry];
							var v = [(-currp.x-cpp.x)/rx,(-currp.y-cpp.y)/ry];
							var ad = a(u, v);
							if (r(u,v) <= -1) ad = Math.PI;
							if (r(u,v) >= 1) ad = 0;

							// for markers
							var dir = 1 - sweepFlag ? 1.0 : -1.0;
							var ah = a1 + dir * (ad / 2.0);
							var halfWay = new svg.Point(
								centp.x + rx * Math.cos(ah),
								centp.y + ry * Math.sin(ah)
							);
							pp.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);
							pp.addMarkerAngle(cp, ah - dir * Math.PI);

							bb.addPoint(cp.x, cp.y); // TODO: this is too naive, make it better
							if (ctx != null) {
								var r = rx > ry ? rx : ry;
								var sx = rx > ry ? 1 : rx / ry;
								var sy = rx > ry ? ry / rx : 1;

								ctx.translate(centp.x, centp.y);
								ctx.rotate(xAxisRotation);
								ctx.scale(sx, sy);
								ctx.arc(0, 0, r, a1, a1 + ad, 1 - sweepFlag);
								ctx.scale(1/sx, 1/sy);
								ctx.rotate(-xAxisRotation);
								ctx.translate(-centp.x, -centp.y);
							}
						}
						break;
					case 'Z':
					case 'z':
						if (ctx != null) ctx.closePath();
						pp.current = pp.start;
					}
				}

				return bb;
			}

			this.getMarkers = function() {
				var points = this.PathParser.getMarkerPoints();
				var angles = this.PathParser.getMarkerAngles();

				var markers = [];
				for (var i=0; i<points.length; i++) {
					markers.push([points[i], angles[i]]);
				}
				return markers;
			}
		}
		svg.Element.path.prototype = new svg.Element.PathElementBase;

		// pattern element
		svg.Element.pattern = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.createPattern = function(ctx, element) {
				var width = this.attribute('width').toPixels('x', true);
				var height = this.attribute('height').toPixels('y', true);

				// render me using a temporary svg element
				var tempSvg = new svg.Element.svg();
				tempSvg.attributes['viewBox'] = new svg.Property('viewBox', this.attribute('viewBox').value);
				tempSvg.attributes['width'] = new svg.Property('width', width + 'px');
				tempSvg.attributes['height'] = new svg.Property('height', height + 'px');
				tempSvg.attributes['transform'] = new svg.Property('transform', this.attribute('patternTransform').value);
				tempSvg.children = this.children;

				var c = document.createElement('canvas');
				c.width = width;
				c.height = height;
				var cctx = c.getContext('2d');
				if (this.attribute('x').hasValue() && this.attribute('y').hasValue()) {
					cctx.translate(this.attribute('x').toPixels('x', true), this.attribute('y').toPixels('y', true));
				}
				// render 3x3 grid so when we transform there's no white space on edges
				for (var x=-1; x<=1; x++) {
					for (var y=-1; y<=1; y++) {
						cctx.save();
						tempSvg.attributes['x'] = new svg.Property('x', x * c.width);
						tempSvg.attributes['y'] = new svg.Property('y', y * c.height);
						tempSvg.render(cctx);
						cctx.restore();
					}
				}
				var pattern = ctx.createPattern(c, 'repeat');
				return pattern;
			}
		}
		svg.Element.pattern.prototype = new svg.Element.ElementBase;

		// marker element
		svg.Element.marker = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.baseRender = this.render;
			this.render = function(ctx, point, angle) {
				ctx.translate(point.x, point.y);
				if (this.attribute('orient').valueOrDefault('auto') == 'auto') ctx.rotate(angle);
				if (this.attribute('markerUnits').valueOrDefault('strokeWidth') == 'strokeWidth') ctx.scale(ctx.lineWidth, ctx.lineWidth);
				ctx.save();

				// render me using a temporary svg element
				var tempSvg = new svg.Element.svg();
				tempSvg.attributes['viewBox'] = new svg.Property('viewBox', this.attribute('viewBox').value);
				tempSvg.attributes['refX'] = new svg.Property('refX', this.attribute('refX').value);
				tempSvg.attributes['refY'] = new svg.Property('refY', this.attribute('refY').value);
				tempSvg.attributes['width'] = new svg.Property('width', this.attribute('markerWidth').value);
				tempSvg.attributes['height'] = new svg.Property('height', this.attribute('markerHeight').value);
				tempSvg.attributes['fill'] = new svg.Property('fill', this.attribute('fill').valueOrDefault('black'));
				tempSvg.attributes['stroke'] = new svg.Property('stroke', this.attribute('stroke').valueOrDefault('none'));
				tempSvg.children = this.children;
				tempSvg.render(ctx);

				ctx.restore();
				if (this.attribute('markerUnits').valueOrDefault('strokeWidth') == 'strokeWidth') ctx.scale(1/ctx.lineWidth, 1/ctx.lineWidth);
				if (this.attribute('orient').valueOrDefault('auto') == 'auto') ctx.rotate(-angle);
				ctx.translate(-point.x, -point.y);
			}
		}
		svg.Element.marker.prototype = new svg.Element.ElementBase;

		// definitions element
		svg.Element.defs = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.render = function(ctx) {
				// NOOP
			}
		}
		svg.Element.defs.prototype = new svg.Element.ElementBase;

		// base for gradients
		svg.Element.GradientBase = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.stops = [];
			for (var i=0; i<this.children.length; i++) {
				var child = this.children[i];
				if (child.type == 'stop') this.stops.push(child);
			}

			this.getGradient = function() {
				// OVERRIDE ME!
			}

			this.gradientUnits = function () {
				return this.attribute('gradientUnits').valueOrDefault('objectBoundingBox');
			}

			this.attributesToInherit = ['gradientUnits'];

			this.inheritStopContainer = function (stopsContainer) {
				for (var i=0; i<this.attributesToInherit.length; i++) {
					var attributeToInherit = this.attributesToInherit[i];
					if (!this.attribute(attributeToInherit).hasValue() && stopsContainer.attribute(attributeToInherit).hasValue()) {
						this.attribute(attributeToInherit, true).value = stopsContainer.attribute(attributeToInherit).value;
					}
				}
			}

			this.createGradient = function(ctx, element, parentOpacityProp) {
				var stopsContainer = this;
				if (this.getHrefAttribute().hasValue()) {
					stopsContainer = this.getHrefAttribute().getDefinition();
					this.inheritStopContainer(stopsContainer);
				}

				var addParentOpacity = function (color) {
					if (parentOpacityProp.hasValue()) {
						var p = new svg.Property('color', color);
						return p.addOpacity(parentOpacityProp).value;
					}
					return color;
				};

				var g = this.getGradient(ctx, element);
				if (g == null) return addParentOpacity(stopsContainer.stops[stopsContainer.stops.length - 1].color);
				for (var i=0; i<stopsContainer.stops.length; i++) {
					g.addColorStop(stopsContainer.stops[i].offset, addParentOpacity(stopsContainer.stops[i].color));
				}

				if (this.attribute('gradientTransform').hasValue()) {
					// render as transformed pattern on temporary canvas
					var rootView = svg.ViewPort.viewPorts[0];

					var rect = new svg.Element.rect();
					rect.attributes['x'] = new svg.Property('x', -svg.MAX_VIRTUAL_PIXELS/3.0);
					rect.attributes['y'] = new svg.Property('y', -svg.MAX_VIRTUAL_PIXELS/3.0);
					rect.attributes['width'] = new svg.Property('width', svg.MAX_VIRTUAL_PIXELS);
					rect.attributes['height'] = new svg.Property('height', svg.MAX_VIRTUAL_PIXELS);

					var group = new svg.Element.g();
					group.attributes['transform'] = new svg.Property('transform', this.attribute('gradientTransform').value);
					group.children = [ rect ];

					var tempSvg = new svg.Element.svg();
					tempSvg.attributes['x'] = new svg.Property('x', 0);
					tempSvg.attributes['y'] = new svg.Property('y', 0);
					tempSvg.attributes['width'] = new svg.Property('width', rootView.width);
					tempSvg.attributes['height'] = new svg.Property('height', rootView.height);
					tempSvg.children = [ group ];

					var c = document.createElement('canvas');
					c.width = rootView.width;
					c.height = rootView.height;
					var tempCtx = c.getContext('2d');
					tempCtx.fillStyle = g;
					tempSvg.render(tempCtx);
					return tempCtx.createPattern(c, 'no-repeat');
				}

				return g;
			}
		}
		svg.Element.GradientBase.prototype = new svg.Element.ElementBase;

		// linear gradient element
		svg.Element.linearGradient = function(node) {
			this.base = svg.Element.GradientBase;
			this.base(node);

			this.attributesToInherit.push('x1');
			this.attributesToInherit.push('y1');
			this.attributesToInherit.push('x2');
			this.attributesToInherit.push('y2');

			this.getGradient = function(ctx, element) {
				var bb = this.gradientUnits() == 'objectBoundingBox' ? element.getBoundingBox() : null;

				if (!this.attribute('x1').hasValue()
				 && !this.attribute('y1').hasValue()
				 && !this.attribute('x2').hasValue()
				 && !this.attribute('y2').hasValue()) {
					this.attribute('x1', true).value = 0;
					this.attribute('y1', true).value = 0;
					this.attribute('x2', true).value = 1;
					this.attribute('y2', true).value = 0;
				 }

				var x1 = (this.gradientUnits() == 'objectBoundingBox'
					? bb.x() + bb.width() * this.attribute('x1').numValue()
					: this.attribute('x1').toPixels('x'));
				var y1 = (this.gradientUnits() == 'objectBoundingBox'
					? bb.y() + bb.height() * this.attribute('y1').numValue()
					: this.attribute('y1').toPixels('y'));
				var x2 = (this.gradientUnits() == 'objectBoundingBox'
					? bb.x() + bb.width() * this.attribute('x2').numValue()
					: this.attribute('x2').toPixels('x'));
				var y2 = (this.gradientUnits() == 'objectBoundingBox'
					? bb.y() + bb.height() * this.attribute('y2').numValue()
					: this.attribute('y2').toPixels('y'));

				if (x1 == x2 && y1 == y2) return null;
				return ctx.createLinearGradient(x1, y1, x2, y2);
			}
		}
		svg.Element.linearGradient.prototype = new svg.Element.GradientBase;

		// radial gradient element
		svg.Element.radialGradient = function(node) {
			this.base = svg.Element.GradientBase;
			this.base(node);

			this.attributesToInherit.push('cx');
			this.attributesToInherit.push('cy');
			this.attributesToInherit.push('r');
			this.attributesToInherit.push('fx');
			this.attributesToInherit.push('fy');

			this.getGradient = function(ctx, element) {
				var bb = element.getBoundingBox();

				if (!this.attribute('cx').hasValue()) this.attribute('cx', true).value = '50%';
				if (!this.attribute('cy').hasValue()) this.attribute('cy', true).value = '50%';
				if (!this.attribute('r').hasValue()) this.attribute('r', true).value = '50%';

				var cx = (this.gradientUnits() == 'objectBoundingBox'
					? bb.x() + bb.width() * this.attribute('cx').numValue()
					: this.attribute('cx').toPixels('x'));
				var cy = (this.gradientUnits() == 'objectBoundingBox'
					? bb.y() + bb.height() * this.attribute('cy').numValue()
					: this.attribute('cy').toPixels('y'));

				var fx = cx;
				var fy = cy;
				if (this.attribute('fx').hasValue()) {
					fx = (this.gradientUnits() == 'objectBoundingBox'
					? bb.x() + bb.width() * this.attribute('fx').numValue()
					: this.attribute('fx').toPixels('x'));
				}
				if (this.attribute('fy').hasValue()) {
					fy = (this.gradientUnits() == 'objectBoundingBox'
					? bb.y() + bb.height() * this.attribute('fy').numValue()
					: this.attribute('fy').toPixels('y'));
				}

				var r = (this.gradientUnits() == 'objectBoundingBox'
					? (bb.width() + bb.height()) / 2.0 * this.attribute('r').numValue()
					: this.attribute('r').toPixels());

				return ctx.createRadialGradient(fx, fy, 0, cx, cy, r);
			}
		}
		svg.Element.radialGradient.prototype = new svg.Element.GradientBase;

		// gradient stop element
		svg.Element.stop = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.offset = this.attribute('offset').numValue();
			if (this.offset < 0) this.offset = 0;
			if (this.offset > 1) this.offset = 1;

			var stopColor = this.style('stop-color', true);
			if (stopColor.value === '') stopColor.value = '#000';
			if (this.style('stop-opacity').hasValue()) stopColor = stopColor.addOpacity(this.style('stop-opacity'));
			this.color = stopColor.value;
		}
		svg.Element.stop.prototype = new svg.Element.ElementBase;

		// animation base element
		svg.Element.AnimateBase = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			svg.Animations.push(this);

			this.duration = 0.0;
			this.begin = this.attribute('begin').toMilliseconds();
			this.maxDuration = this.begin + this.attribute('dur').toMilliseconds();

			this.getProperty = function() {
				var attributeType = this.attribute('attributeType').value;
				var attributeName = this.attribute('attributeName').value;

				if (attributeType == 'CSS') {
					return this.parent.style(attributeName, true);
				}
				return this.parent.attribute(attributeName, true);
			};

			this.initialValue = null;
			this.initialUnits = '';
			this.removed = false;

			this.calcValue = function() {
				// OVERRIDE ME!
				return '';
			}

			this.update = function(delta) {
				// set initial value
				if (this.initialValue == null) {
					this.initialValue = this.getProperty().value;
					this.initialUnits = this.getProperty().getUnits();
				}

				// if we're past the end time
				if (this.duration > this.maxDuration) {
					// loop for indefinitely repeating animations
					if (this.attribute('repeatCount').value == 'indefinite'
					 || this.attribute('repeatDur').value == 'indefinite') {
						this.duration = 0.0
					}
					else if (this.attribute('fill').valueOrDefault('remove') == 'freeze' && !this.frozen) {
						this.frozen = true;
						this.parent.animationFrozen = true;
						this.parent.animationFrozenValue = this.getProperty().value;
					}
					else if (this.attribute('fill').valueOrDefault('remove') == 'remove' && !this.removed) {
						this.removed = true;
						this.getProperty().value = this.parent.animationFrozen ? this.parent.animationFrozenValue : this.initialValue;
						return true;
					}
					return false;
				}
				this.duration = this.duration + delta;

				// if we're past the begin time
				var updated = false;
				if (this.begin < this.duration) {
					var newValue = this.calcValue(); // tween

					if (this.attribute('type').hasValue()) {
						// for transform, etc.
						var type = this.attribute('type').value;
						newValue = type + '(' + newValue + ')';
					}

					this.getProperty().value = newValue;
					updated = true;
				}

				return updated;
			}

			this.from = this.attribute('from');
			this.to = this.attribute('to');
			this.values = this.attribute('values');
			if (this.values.hasValue()) this.values.value = this.values.value.split(';');

			// fraction of duration we've covered
			this.progress = function() {
				var ret = { progress: (this.duration - this.begin) / (this.maxDuration - this.begin) };
				if (this.values.hasValue()) {
					var p = ret.progress * (this.values.value.length - 1);
					var lb = Math.floor(p), ub = Math.ceil(p);
					ret.from = new svg.Property('from', parseFloat(this.values.value[lb]));
					ret.to = new svg.Property('to', parseFloat(this.values.value[ub]));
					ret.progress = (p - lb) / (ub - lb);
				}
				else {
					ret.from = this.from;
					ret.to = this.to;
				}
				return ret;
			}
		}
		svg.Element.AnimateBase.prototype = new svg.Element.ElementBase;

		// animate element
		svg.Element.animate = function(node) {
			this.base = svg.Element.AnimateBase;
			this.base(node);

			this.calcValue = function() {
				var p = this.progress();

				// tween value linearly
				var newValue = p.from.numValue() + (p.to.numValue() - p.from.numValue()) * p.progress;
				return newValue + this.initialUnits;
			};
		}
		svg.Element.animate.prototype = new svg.Element.AnimateBase;

		// animate color element
		svg.Element.animateColor = function(node) {
			this.base = svg.Element.AnimateBase;
			this.base(node);

			this.calcValue = function() {
				var p = this.progress();
				var from = new RGBColor(p.from.value);
				var to = new RGBColor(p.to.value);

				if (from.ok && to.ok) {
					// tween color linearly
					var r = from.r + (to.r - from.r) * p.progress;
					var g = from.g + (to.g - from.g) * p.progress;
					var b = from.b + (to.b - from.b) * p.progress;
					return 'rgb('+parseInt(r,10)+','+parseInt(g,10)+','+parseInt(b,10)+')';
				}
				return this.attribute('from').value;
			};
		}
		svg.Element.animateColor.prototype = new svg.Element.AnimateBase;

		// animate transform element
		svg.Element.animateTransform = function(node) {
			this.base = svg.Element.AnimateBase;
			this.base(node);

			this.calcValue = function() {
				var p = this.progress();

				// tween value linearly
				var from = svg.ToNumberArray(p.from.value);
				var to = svg.ToNumberArray(p.to.value);
				var newValue = '';
				for (var i=0; i<from.length; i++) {
					newValue += from[i] + (to[i] - from[i]) * p.progress + ' ';
				}
				return newValue;
			};
		}
		svg.Element.animateTransform.prototype = new svg.Element.animate;

		// font element
		svg.Element.font = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.horizAdvX = this.attribute('horiz-adv-x').numValue();

			this.isRTL = false;
			this.isArabic = false;
			this.fontFace = null;
			this.missingGlyph = null;
			this.glyphs = [];
			for (var i=0; i<this.children.length; i++) {
				var child = this.children[i];
				if (child.type == 'font-face') {
					this.fontFace = child;
					if (child.style('font-family').hasValue()) {
						svg.Definitions[child.style('font-family').value] = this;
					}
				}
				else if (child.type == 'missing-glyph') this.missingGlyph = child;
				else if (child.type == 'glyph') {
					if (child.arabicForm != '') {
						this.isRTL = true;
						this.isArabic = true;
						if (typeof this.glyphs[child.unicode] == 'undefined') this.glyphs[child.unicode] = [];
						this.glyphs[child.unicode][child.arabicForm] = child;
					}
					else {
						this.glyphs[child.unicode] = child;
					}
				}
			}
		}
		svg.Element.font.prototype = new svg.Element.ElementBase;

		// font-face element
		svg.Element.fontface = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.ascent = this.attribute('ascent').value;
			this.descent = this.attribute('descent').value;
			this.unitsPerEm = this.attribute('units-per-em').numValue();
		}
		svg.Element.fontface.prototype = new svg.Element.ElementBase;

		// missing-glyph element
		svg.Element.missingglyph = function(node) {
			this.base = svg.Element.path;
			this.base(node);

			this.horizAdvX = 0;
		}
		svg.Element.missingglyph.prototype = new svg.Element.path;

		// glyph element
		svg.Element.glyph = function(node) {
			this.base = svg.Element.path;
			this.base(node);

			this.horizAdvX = this.attribute('horiz-adv-x').numValue();
			this.unicode = this.attribute('unicode').value;
			this.arabicForm = this.attribute('arabic-form').value;
		}
		svg.Element.glyph.prototype = new svg.Element.path;

		// text element
		svg.Element.text = function(node) {
			this.captureTextNodes = true;
			this.base = svg.Element.RenderedElementBase;
			this.base(node);

			this.baseSetContext = this.setContext;
			this.setContext = function(ctx) {
				this.baseSetContext(ctx);

				var textBaseline = this.style('dominant-baseline').toTextBaseline();
				if (textBaseline == null) textBaseline = this.style('alignment-baseline').toTextBaseline();
				if (textBaseline != null) ctx.textBaseline = textBaseline;
			}

			this.getBoundingBox = function () {
				var x = this.attribute('x').toPixels('x');
				var y = this.attribute('y').toPixels('y');
				var fontSize = this.parent.style('font-size').numValueOrDefault(svg.Font.Parse(svg.ctx.font).fontSize);
				return new svg.BoundingBox(x, y - fontSize, x + Math.floor(fontSize * 2.0 / 3.0) * this.children[0].getText().length, y);
			}

			this.renderChildren = function(ctx) {
				this.x = this.attribute('x').toPixels('x');
				this.y = this.attribute('y').toPixels('y');
				if (this.attribute('dx').hasValue()) this.x += this.attribute('dx').toPixels('x');
				if (this.attribute('dy').hasValue()) this.y += this.attribute('dy').toPixels('y');
				this.x += this.getAnchorDelta(ctx, this, 0);
				for (var i=0; i<this.children.length; i++) {
					this.renderChild(ctx, this, this, i);
				}
			}

			this.getAnchorDelta = function (ctx, parent, startI) {
				var textAnchor = this.style('text-anchor').valueOrDefault('start');
				if (textAnchor != 'start') {
					var width = 0;
					for (var i=startI; i<parent.children.length; i++) {
						var child = parent.children[i];
						if (i > startI && child.attribute('x').hasValue()) break; // new group
						width += child.measureTextRecursive(ctx);
					}
					return -1 * (textAnchor == 'end' ? width : width / 2.0);
				}
				return 0;
			}

			this.renderChild = function(ctx, textParent, parent, i) {
				var child = parent.children[i];
				if (child.attribute('x').hasValue()) {
					child.x = child.attribute('x').toPixels('x') + textParent.getAnchorDelta(ctx, parent, i);
					if (child.attribute('dx').hasValue()) child.x += child.attribute('dx').toPixels('x');
				}
				else {
					if (child.attribute('dx').hasValue()) textParent.x += child.attribute('dx').toPixels('x');
					child.x = textParent.x;
				}
				textParent.x = child.x + child.measureText(ctx);

				if (child.attribute('y').hasValue()) {
					child.y = child.attribute('y').toPixels('y');
					if (child.attribute('dy').hasValue()) child.y += child.attribute('dy').toPixels('y');
				}
				else {
					if (child.attribute('dy').hasValue()) textParent.y += child.attribute('dy').toPixels('y');
					child.y = textParent.y;
				}
				textParent.y = child.y;

				child.render(ctx);

				for (var i=0; i<child.children.length; i++) {
					textParent.renderChild(ctx, textParent, child, i);
				}
			}
		}
		svg.Element.text.prototype = new svg.Element.RenderedElementBase;

		// text base
		svg.Element.TextElementBase = function(node) {
			this.base = svg.Element.RenderedElementBase;
			this.base(node);

			this.getGlyph = function(font, text, i) {
				var c = text[i];
				var glyph = null;
				if (font.isArabic) {
					var arabicForm = 'isolated';
					if ((i==0 || text[i-1]==' ') && i<text.length-2 && text[i+1]!=' ') arabicForm = 'terminal';
					if (i>0 && text[i-1]!=' ' && i<text.length-2 && text[i+1]!=' ') arabicForm = 'medial';
					if (i>0 && text[i-1]!=' ' && (i == text.length-1 || text[i+1]==' ')) arabicForm = 'initial';
					if (typeof font.glyphs[c] != 'undefined') {
						glyph = font.glyphs[c][arabicForm];
						if (glyph == null && font.glyphs[c].type == 'glyph') glyph = font.glyphs[c];
					}
				}
				else {
					glyph = font.glyphs[c];
				}
				if (glyph == null) glyph = font.missingGlyph;
				return glyph;
			}

			this.renderChildren = function(ctx) {
				var customFont = this.parent.style('font-family').getDefinition();
				if (customFont != null) {
					var fontSize = this.parent.style('font-size').numValueOrDefault(svg.Font.Parse(svg.ctx.font).fontSize);
					var fontStyle = this.parent.style('font-style').valueOrDefault(svg.Font.Parse(svg.ctx.font).fontStyle);
					var text = this.getText();
					if (customFont.isRTL) text = text.split("").reverse().join("");

					var dx = svg.ToNumberArray(this.parent.attribute('dx').value);
					for (var i=0; i<text.length; i++) {
						var glyph = this.getGlyph(customFont, text, i);
						var scale = fontSize / customFont.fontFace.unitsPerEm;
						ctx.translate(this.x, this.y);
						ctx.scale(scale, -scale);
						var lw = ctx.lineWidth;
						ctx.lineWidth = ctx.lineWidth * customFont.fontFace.unitsPerEm / fontSize;
						if (fontStyle == 'italic') ctx.transform(1, 0, .4, 1, 0, 0);
						glyph.render(ctx);
						if (fontStyle == 'italic') ctx.transform(1, 0, -.4, 1, 0, 0);
						ctx.lineWidth = lw;
						ctx.scale(1/scale, -1/scale);
						ctx.translate(-this.x, -this.y);

						this.x += fontSize * (glyph.horizAdvX || customFont.horizAdvX) / customFont.fontFace.unitsPerEm;
						if (typeof dx[i] != 'undefined' && !isNaN(dx[i])) {
							this.x += dx[i];
						}
					}
					return;
				}
				if(ctx.paintOrder == "stroke") {
					if (ctx.strokeStyle != '') ctx.strokeText(svg.compressSpaces(this.getText()), this.x, this.y);
					if (ctx.fillStyle != '') ctx.fillText(svg.compressSpaces(this.getText()), this.x, this.y);
				} else {
					if (ctx.fillStyle != '') ctx.fillText(svg.compressSpaces(this.getText()), this.x, this.y);
					if (ctx.strokeStyle != '') ctx.strokeText(svg.compressSpaces(this.getText()), this.x, this.y);
				}
			}

			this.getText = function() {
				// OVERRIDE ME
			}

			this.measureTextRecursive = function(ctx) {
				var width = this.measureText(ctx);
				for (var i=0; i<this.children.length; i++) {
					width += this.children[i].measureTextRecursive(ctx);
				}
				return width;
			}

			this.measureText = function(ctx) {
				var customFont = this.parent.style('font-family').getDefinition();
				if (customFont != null) {
					var fontSize = this.parent.style('font-size').numValueOrDefault(svg.Font.Parse(svg.ctx.font).fontSize);
					var measure = 0;
					var text = this.getText();
					if (customFont.isRTL) text = text.split("").reverse().join("");
					var dx = svg.ToNumberArray(this.parent.attribute('dx').value);
					for (var i=0; i<text.length; i++) {
						var glyph = this.getGlyph(customFont, text, i);
						measure += (glyph.horizAdvX || customFont.horizAdvX) * fontSize / customFont.fontFace.unitsPerEm;
						if (typeof dx[i] != 'undefined' && !isNaN(dx[i])) {
							measure += dx[i];
						}
					}
					return measure;
				}

				var textToMeasure = svg.compressSpaces(this.getText());
				if (!ctx.measureText) return textToMeasure.length * 10;

				ctx.save();
				this.setContext(ctx);
				var width = ctx.measureText(textToMeasure).width;
				ctx.restore();
				return width;
			}
		}
		svg.Element.TextElementBase.prototype = new svg.Element.RenderedElementBase;

		// tspan
		svg.Element.tspan = function(node) {
			this.captureTextNodes = true;
			this.base = svg.Element.TextElementBase;
			this.base(node);

			this.text = svg.compressSpaces(node.value || node.text || node.textContent || '');
			this.getText = function() {
				// if this node has children, then they own the text
				if (this.children.length > 0) { return ''; }
				return this.text;
			}
		}
		svg.Element.tspan.prototype = new svg.Element.TextElementBase;

		// tref
		svg.Element.tref = function(node) {
			this.base = svg.Element.TextElementBase;
			this.base(node);

			this.getText = function() {
				var element = this.getHrefAttribute().getDefinition();
				if (element != null) return element.children[0].getText();
			}
		}
		svg.Element.tref.prototype = new svg.Element.TextElementBase;

		// a element
		svg.Element.a = function(node) {
			this.base = svg.Element.TextElementBase;
			this.base(node);

			this.hasText = node.childNodes.length > 0;
			for (var i=0; i<node.childNodes.length; i++) {
				if (node.childNodes[i].nodeType != 3) this.hasText = false;
			}

			// this might contain text
			this.text = this.hasText ? node.childNodes[0].value : '';
			this.getText = function() {
				return this.text;
			}

			this.baseRenderChildren = this.renderChildren;
			this.renderChildren = function(ctx) {
				if (this.hasText) {
					// render as text element
					this.baseRenderChildren(ctx);
					var fontSize = new svg.Property('fontSize', svg.Font.Parse(svg.ctx.font).fontSize);
					svg.Mouse.checkBoundingBox(this, new svg.BoundingBox(this.x, this.y - fontSize.toPixels('y'), this.x + this.measureText(ctx), this.y));
				}
				else if (this.children.length > 0) {
					// render as temporary group
					var g = new svg.Element.g();
					g.children = this.children;
					g.parent = this;
					g.render(ctx);
				}
			}

			this.onclick = function() {
				window.open(this.getHrefAttribute().value);
			}

			this.onmousemove = function() {
				svg.ctx.canvas.style.cursor = 'pointer';
			}
		}
		svg.Element.a.prototype = new svg.Element.TextElementBase;

		// image element
		svg.Element.image = function(node) {
			this.base = svg.Element.RenderedElementBase;
			this.base(node);

			var href = this.getHrefAttribute().value;
			if (href == '') { return; }
			var isSvg = href.match(/\.svg$/)

			svg.Images.push(this);
			this.loaded = false;
			if (!isSvg) {
				this.img = document.createElement('img');
				if (svg.opts['useCORS'] == true) { this.img.crossOrigin = 'Anonymous'; }
				var self = this;
				this.img.onload = function() { self.loaded = true; }
				this.img.onerror = function() { svg.log('ERROR: image "' + href + '" not found'); self.loaded = true; }
				this.img.src = href;
			}
			else {
				this.img = svg.ajax(href);
				this.loaded = true;
			}

			this.renderChildren = function(ctx) {
				var x = this.attribute('x').toPixels('x');
				var y = this.attribute('y').toPixels('y');

				var width = this.attribute('width').toPixels('x');
				var height = this.attribute('height').toPixels('y');
				if (width == 0 || height == 0) return;

				ctx.save();
				if (isSvg) {
					ctx.drawSvg(this.img, x, y, width, height);
				}
				else {
					ctx.translate(x, y);
					svg.AspectRatio(ctx,
									this.attribute('preserveAspectRatio').value,
									width,
									this.img.width,
									height,
									this.img.height,
									0,
									0);
					ctx.drawImage(this.img, 0, 0);
				}
				ctx.restore();
			}

			this.getBoundingBox = function() {
				var x = this.attribute('x').toPixels('x');
				var y = this.attribute('y').toPixels('y');
				var width = this.attribute('width').toPixels('x');
				var height = this.attribute('height').toPixels('y');
				return new svg.BoundingBox(x, y, x + width, y + height);
			}
		}
		svg.Element.image.prototype = new svg.Element.RenderedElementBase;

		// group element
		svg.Element.g = function(node) {
			this.base = svg.Element.RenderedElementBase;
			this.base(node);

			this.getBoundingBox = function() {
				var bb = new svg.BoundingBox();
				for (var i=0; i<this.children.length; i++) {
					bb.addBoundingBox(this.children[i].getBoundingBox());
				}
				return bb;
			};
		}
		svg.Element.g.prototype = new svg.Element.RenderedElementBase;

		// symbol element
		svg.Element.symbol = function(node) {
			this.base = svg.Element.RenderedElementBase;
			this.base(node);

			this.render = function(ctx) {
				// NO RENDER
			};
		}
		svg.Element.symbol.prototype = new svg.Element.RenderedElementBase;

		// style element
		svg.Element.style = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			// text, or spaces then CDATA
			var css = ''
			for (var i=0; i<node.childNodes.length; i++) {
			  css += node.childNodes[i].data;
			}
			css = css.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm, ''); // remove comments
			css = svg.compressSpaces(css); // replace whitespace
			var cssDefs = css.split('}');
			for (var i=0; i<cssDefs.length; i++) {
				if (svg.trim(cssDefs[i]) != '') {
					var cssDef = cssDefs[i].split('{');
					var cssClasses = cssDef[0].split(',');
					var cssProps = cssDef[1].split(';');
					for (var j=0; j<cssClasses.length; j++) {
						var cssClass = svg.trim(cssClasses[j]);
						if (cssClass != '') {
							var props = svg.Styles[cssClass] || {};
							for (var k=0; k<cssProps.length; k++) {
								var prop = cssProps[k].indexOf(':');
								var name = cssProps[k].substr(0, prop);
								var value = cssProps[k].substr(prop + 1, cssProps[k].length - prop);
								if (name != null && value != null) {
									props[svg.trim(name)] = new svg.Property(svg.trim(name), svg.trim(value));
								}
							}
							svg.Styles[cssClass] = props;
							svg.StylesSpecificity[cssClass] = getSelectorSpecificity(cssClass);
							if (cssClass == '@font-face') {
								var fontFamily = props['font-family'].value.replace(/"/g,'');
								var srcs = props['src'].value.split(',');
								for (var s=0; s<srcs.length; s++) {
									if (srcs[s].indexOf('format("svg")') > 0) {
										var urlStart = srcs[s].indexOf('url');
										var urlEnd = srcs[s].indexOf(')', urlStart);
										var url = srcs[s].substr(urlStart + 5, urlEnd - urlStart - 6);
										var doc = svg.parseXml(svg.ajax(url));
										var fonts = doc.getElementsByTagName('font');
										for (var f=0; f<fonts.length; f++) {
											var font = svg.CreateElement(fonts[f]);
											svg.Definitions[fontFamily] = font;
										}
									}
								}
							}
						}
					}
				}
			}
		}
		svg.Element.style.prototype = new svg.Element.ElementBase;

		// use element
		svg.Element.use = function(node) {
			this.base = svg.Element.RenderedElementBase;
			this.base(node);

			this.baseSetContext = this.setContext;
			this.setContext = function(ctx) {
				this.baseSetContext(ctx);
				if (this.attribute('x').hasValue()) ctx.translate(this.attribute('x').toPixels('x'), 0);
				if (this.attribute('y').hasValue()) ctx.translate(0, this.attribute('y').toPixels('y'));
			}

			var element = this.getHrefAttribute().getDefinition();

			this.path = function(ctx) {
				if (element != null) element.path(ctx);
			}

			this.getBoundingBox = function() {
				if (element != null) return element.getBoundingBox();
			}

			this.renderChildren = function(ctx) {
				if (element != null) {
					var tempSvg = element;
					if (element.type == 'symbol') {
						// render me using a temporary svg element in symbol cases (http://www.w3.org/TR/SVG/struct.html#UseElement)
						tempSvg = new svg.Element.svg();
						tempSvg.type = 'svg';
						tempSvg.attributes['viewBox'] = new svg.Property('viewBox', element.attribute('viewBox').value);
						tempSvg.attributes['preserveAspectRatio'] = new svg.Property('preserveAspectRatio', element.attribute('preserveAspectRatio').value);
						tempSvg.attributes['overflow'] = new svg.Property('overflow', element.attribute('overflow').value);
						tempSvg.children = element.children;
					}
					if (tempSvg.type == 'svg') {
						// if symbol or svg, inherit width/height from me
						if (this.attribute('width').hasValue()) tempSvg.attributes['width'] = new svg.Property('width', this.attribute('width').value);
						if (this.attribute('height').hasValue()) tempSvg.attributes['height'] = new svg.Property('height', this.attribute('height').value);
					}
					var oldParent = tempSvg.parent;
					tempSvg.parent = null;
					tempSvg.render(ctx);
					tempSvg.parent = oldParent;
				}
			}
		}
		svg.Element.use.prototype = new svg.Element.RenderedElementBase;

		// mask element
		svg.Element.mask = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.apply = function(ctx, element) {
				// render as temp svg
				var x = this.attribute('x').toPixels('x');
				var y = this.attribute('y').toPixels('y');
				var width = this.attribute('width').toPixels('x');
				var height = this.attribute('height').toPixels('y');

				if (width == 0 && height == 0) {
					var bb = new svg.BoundingBox();
					for (var i=0; i<this.children.length; i++) {
						bb.addBoundingBox(this.children[i].getBoundingBox());
					}
					var x = Math.floor(bb.x1);
					var y = Math.floor(bb.y1);
					var width = Math.floor(bb.width());
					var	height = Math.floor(bb.height());
				}

				// temporarily remove mask to avoid recursion
				var mask = element.attribute('mask').value;
				element.attribute('mask').value = '';

					var cMask = document.createElement('canvas');
					cMask.width = x + width;
					cMask.height = y + height;
					var maskCtx = cMask.getContext('2d');
					this.renderChildren(maskCtx);

					var c = document.createElement('canvas');
					c.width = x + width;
					c.height = y + height;
					var tempCtx = c.getContext('2d');
					element.render(tempCtx);
					tempCtx.globalCompositeOperation = 'destination-in';
					tempCtx.fillStyle = maskCtx.createPattern(cMask, 'no-repeat');
					tempCtx.fillRect(0, 0, x + width, y + height);

					ctx.fillStyle = tempCtx.createPattern(c, 'no-repeat');
					ctx.fillRect(0, 0, x + width, y + height);

				// reassign mask
				element.attribute('mask').value = mask;
			}

			this.render = function(ctx) {
				// NO RENDER
			}
		}
		svg.Element.mask.prototype = new svg.Element.ElementBase;

		// clip element
		svg.Element.clipPath = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.apply = function(ctx) {
				var oldBeginPath = CanvasRenderingContext2D.prototype.beginPath;
				CanvasRenderingContext2D.prototype.beginPath = function () { };

				var oldClosePath = CanvasRenderingContext2D.prototype.closePath;
				CanvasRenderingContext2D.prototype.closePath = function () { };

				oldBeginPath.call(ctx);
				for (var i=0; i<this.children.length; i++) {
					var child = this.children[i];
					if (typeof child.path != 'undefined') {
						var transform = null;
						if (child.style('transform', false, true).hasValue()) {
							transform = new svg.Transform(child.style('transform', false, true).value);
							transform.apply(ctx);
						}
						child.path(ctx);
						CanvasRenderingContext2D.prototype.closePath = oldClosePath;
						if (transform) { transform.unapply(ctx); }
					}
				}
				oldClosePath.call(ctx);
				ctx.clip();

				CanvasRenderingContext2D.prototype.beginPath = oldBeginPath;
				CanvasRenderingContext2D.prototype.closePath = oldClosePath;
			}

			this.render = function(ctx) {
				// NO RENDER
			}
		}
		svg.Element.clipPath.prototype = new svg.Element.ElementBase;

		// filters
		svg.Element.filter = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.apply = function(ctx, element) {
				// render as temp svg
				var bb = element.getBoundingBox();
				var x = Math.floor(bb.x1);
				var y = Math.floor(bb.y1);
				var width = Math.floor(bb.width());
				var	height = Math.floor(bb.height());

				// temporarily remove filter to avoid recursion
				var filter = element.style('filter').value;
				element.style('filter').value = '';

				var px = 0, py = 0;
				for (var i=0; i<this.children.length; i++) {
					var efd = this.children[i].extraFilterDistance || 0;
					px = Math.max(px, efd);
					py = Math.max(py, efd);
				}

				var c = document.createElement('canvas');
				c.width = width + 2*px;
				c.height = height + 2*py;
				var tempCtx = c.getContext('2d');
				tempCtx.translate(-x + px, -y + py);
				element.render(tempCtx);

				// apply filters
				for (var i=0; i<this.children.length; i++) {
					if (typeof this.children[i].apply == 'function') {
						this.children[i].apply(tempCtx, 0, 0, width + 2*px, height + 2*py);
					}
				}

				// render on me
				ctx.drawImage(c, 0, 0, width + 2*px, height + 2*py, x - px, y - py, width + 2*px, height + 2*py);

				// reassign filter
				element.style('filter', true).value = filter;
			}

			this.render = function(ctx) {
				// NO RENDER
			}
		}
		svg.Element.filter.prototype = new svg.Element.ElementBase;

		svg.Element.feMorphology = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.apply = function(ctx, x, y, width, height) {
				// TODO: implement
			}
		}
		svg.Element.feMorphology.prototype = new svg.Element.ElementBase;

		svg.Element.feComposite = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.apply = function(ctx, x, y, width, height) {
				// TODO: implement
			}
		}
		svg.Element.feComposite.prototype = new svg.Element.ElementBase;

		svg.Element.feColorMatrix = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			var matrix = svg.ToNumberArray(this.attribute('values').value);
			switch (this.attribute('type').valueOrDefault('matrix')) { // http://www.w3.org/TR/SVG/filters.html#feColorMatrixElement
				case 'saturate':
					var s = matrix[0];
					matrix = [0.213+0.787*s,0.715-0.715*s,0.072-0.072*s,0,0,
							  0.213-0.213*s,0.715+0.285*s,0.072-0.072*s,0,0,
							  0.213-0.213*s,0.715-0.715*s,0.072+0.928*s,0,0,
							  0,0,0,1,0,
							  0,0,0,0,1];
					break;
				case 'hueRotate':
					var a = matrix[0] * Math.PI / 180.0;
					var c = function (m1,m2,m3) { return m1 + Math.cos(a)*m2 + Math.sin(a)*m3; };
					matrix = [c(0.213,0.787,-0.213),c(0.715,-0.715,-0.715),c(0.072,-0.072,0.928),0,0,
							  c(0.213,-0.213,0.143),c(0.715,0.285,0.140),c(0.072,-0.072,-0.283),0,0,
							  c(0.213,-0.213,-0.787),c(0.715,-0.715,0.715),c(0.072,0.928,0.072),0,0,
							  0,0,0,1,0,
							  0,0,0,0,1];
					break;
				case 'luminanceToAlpha':
					matrix = [0,0,0,0,0,
							  0,0,0,0,0,
							  0,0,0,0,0,
							  0.2125,0.7154,0.0721,0,0,
							  0,0,0,0,1];
					break;
			}

			function imGet(img, x, y, width, height, rgba) {
				return img[y*width*4 + x*4 + rgba];
			}

			function imSet(img, x, y, width, height, rgba, val) {
				img[y*width*4 + x*4 + rgba] = val;
			}

			function m(i, v) {
				var mi = matrix[i];
				return mi * (mi < 0 ? v - 255 : v);
			}

			this.apply = function(ctx, x, y, width, height) {
				// assuming x==0 && y==0 for now
				var srcData = ctx.getImageData(0, 0, width, height);
				for (var y = 0; y < height; y++) {
					for (var x = 0; x < width; x++) {
						var r = imGet(srcData.data, x, y, width, height, 0);
						var g = imGet(srcData.data, x, y, width, height, 1);
						var b = imGet(srcData.data, x, y, width, height, 2);
						var a = imGet(srcData.data, x, y, width, height, 3);
						imSet(srcData.data, x, y, width, height, 0, m(0,r)+m(1,g)+m(2,b)+m(3,a)+m(4,1));
						imSet(srcData.data, x, y, width, height, 1, m(5,r)+m(6,g)+m(7,b)+m(8,a)+m(9,1));
						imSet(srcData.data, x, y, width, height, 2, m(10,r)+m(11,g)+m(12,b)+m(13,a)+m(14,1));
						imSet(srcData.data, x, y, width, height, 3, m(15,r)+m(16,g)+m(17,b)+m(18,a)+m(19,1));
					}
				}
				ctx.clearRect(0, 0, width, height);
				ctx.putImageData(srcData, 0, 0);
			}
		}
		svg.Element.feColorMatrix.prototype = new svg.Element.ElementBase;

		svg.Element.feGaussianBlur = function(node) {
			this.base = svg.Element.ElementBase;
			this.base(node);

			this.blurRadius = Math.floor(this.attribute('stdDeviation').numValue());
			this.extraFilterDistance = this.blurRadius;

			this.apply = function(ctx, x, y, width, height) {
				if (typeof stackBlur.canvasRGBA == 'undefined') {
					svg.log('ERROR: StackBlur.js must be included for blur to work');
					return;
				}

				// StackBlur requires canvas be on document
				ctx.canvas.id = svg.UniqueId();
				ctx.canvas.style.display = 'none';
				document.body.appendChild(ctx.canvas);
				stackBlur.canvasRGBA(ctx.canvas.id, x, y, width, height, this.blurRadius);
				document.body.removeChild(ctx.canvas);
			}
		}
		svg.Element.feGaussianBlur.prototype = new svg.Element.ElementBase;

		// title element, do nothing
		svg.Element.title = function(node) {
		}
		svg.Element.title.prototype = new svg.Element.ElementBase;

		// desc element, do nothing
		svg.Element.desc = function(node) {
		}
		svg.Element.desc.prototype = new svg.Element.ElementBase;

		svg.Element.MISSING = function(node) {
			svg.log('ERROR: Element \'' + node.nodeName + '\' not yet implemented.');
		}
		svg.Element.MISSING.prototype = new svg.Element.ElementBase;

		// element factory
		svg.CreateElement = function(node) {
			var className = node.nodeName.replace(/^[^:]+:/,''); // remove namespace
			className = className.replace(/\-/g,''); // remove dashes
			var e = null;
			if (typeof svg.Element[className] != 'undefined') {
				e = new svg.Element[className](node);
			}
			else {
				e = new svg.Element.MISSING(node);
			}

			e.type = node.nodeName;
			return e;
		}

		// load from url
		svg.load = function(ctx, url) {
			svg.loadXml(ctx, svg.ajax(url));
		}

		// load from xml
		svg.loadXml = function(ctx, xml) {
			svg.loadXmlDoc(ctx, svg.parseXml(xml));
		}

		svg.loadXmlDoc = function(ctx, dom) {
			svg.init(ctx);

			var mapXY = function(p) {
				var e = ctx.canvas;
				while (e) {
					p.x -= e.offsetLeft;
					p.y -= e.offsetTop;
					e = e.offsetParent;
				}
				if (window.scrollX) p.x += window.scrollX;
				if (window.scrollY) p.y += window.scrollY;
				return p;
			}

			// bind mouse
			if (svg.opts['ignoreMouse'] != true) {
				ctx.canvas.onclick = function(e) {
					var p = mapXY(new svg.Point(e != null ? e.clientX : event.clientX, e != null ? e.clientY : event.clientY));
					svg.Mouse.onclick(p.x, p.y);
				};
				ctx.canvas.onmousemove = function(e) {
					var p = mapXY(new svg.Point(e != null ? e.clientX : event.clientX, e != null ? e.clientY : event.clientY));
					svg.Mouse.onmousemove(p.x, p.y);
				};
			}

			var e = svg.CreateElement(dom.documentElement);
			e.root = true;
			e.addStylesFromStyleDefinition();

			// render loop
			var isFirstRender = true;
			var draw = function() {
				svg.ViewPort.Clear();
				if (ctx.canvas.parentNode) svg.ViewPort.SetCurrent(ctx.canvas.parentNode.clientWidth, ctx.canvas.parentNode.clientHeight);

				if (svg.opts['ignoreDimensions'] != true) {
					// set canvas size
					if (e.style('width').hasValue()) {
						ctx.canvas.width = e.style('width').toPixels('x');
						ctx.canvas.style.width = ctx.canvas.width + 'px';
					}
					if (e.style('height').hasValue()) {
						ctx.canvas.height = e.style('height').toPixels('y');
						ctx.canvas.style.height = ctx.canvas.height + 'px';
					}
				}
				var cWidth = ctx.canvas.clientWidth || ctx.canvas.width;
				var cHeight = ctx.canvas.clientHeight || ctx.canvas.height;
				if (svg.opts['ignoreDimensions'] == true && e.style('width').hasValue() && e.style('height').hasValue()) {
					cWidth = e.style('width').toPixels('x');
					cHeight = e.style('height').toPixels('y');
				}
				svg.ViewPort.SetCurrent(cWidth, cHeight);

				if (svg.opts['offsetX'] != null) e.attribute('x', true).value = svg.opts['offsetX'];
				if (svg.opts['offsetY'] != null) e.attribute('y', true).value = svg.opts['offsetY'];
				if (svg.opts['scaleWidth'] != null || svg.opts['scaleHeight'] != null) {
					var xRatio = null, yRatio = null, viewBox = svg.ToNumberArray(e.attribute('viewBox').value);

					if (svg.opts['scaleWidth'] != null) {
						if (e.attribute('width').hasValue()) xRatio = e.attribute('width').toPixels('x') / svg.opts['scaleWidth'];
						else if (!isNaN(viewBox[2])) xRatio = viewBox[2] / svg.opts['scaleWidth'];
					}

					if (svg.opts['scaleHeight'] != null) {
						if (e.attribute('height').hasValue()) yRatio = e.attribute('height').toPixels('y') / svg.opts['scaleHeight'];
						else if (!isNaN(viewBox[3])) yRatio = viewBox[3] / svg.opts['scaleHeight'];
					}

					if (xRatio == null) { xRatio = yRatio; }
					if (yRatio == null) { yRatio = xRatio; }

					e.attribute('width', true).value = svg.opts['scaleWidth'];
					e.attribute('height', true).value = svg.opts['scaleHeight'];
					e.style('transform', true, true).value += ' scale('+(1.0/xRatio)+','+(1.0/yRatio)+')';
				}

				// clear and render
				if (svg.opts['ignoreClear'] != true) {
					ctx.clearRect(0, 0, cWidth, cHeight);
				}
				e.render(ctx);
				if (isFirstRender) {
					isFirstRender = false;
					if (typeof svg.opts['renderCallback'] == 'function') svg.opts['renderCallback'](dom);
				}
			}

			var waitingForImages = true;
			if (svg.ImagesLoaded()) {
				waitingForImages = false;
				draw();
			}
			svg.intervalID = setInterval(function() {
				var needUpdate = false;

				if (waitingForImages && svg.ImagesLoaded()) {
					waitingForImages = false;
					needUpdate = true;
				}

				// need update from mouse events?
				if (svg.opts['ignoreMouse'] != true) {
					needUpdate = needUpdate | svg.Mouse.hasEvents();
				}

				// need update from animations?
				if (svg.opts['ignoreAnimation'] != true) {
					for (var i=0; i<svg.Animations.length; i++) {
						needUpdate = needUpdate | svg.Animations[i].update(1000 / svg.FRAMERATE);
					}
				}

				// need update from redraw?
				if (typeof svg.opts['forceRedraw'] == 'function') {
					if (svg.opts['forceRedraw']() == true) needUpdate = true;
				}

				// render if needed
				if (needUpdate) {
					draw();
					svg.Mouse.runEvents(); // run and clear our events
				}
			}, 1000 / svg.FRAMERATE);
		}

		svg.stop = function() {
			if (svg.intervalID) {
				clearInterval(svg.intervalID);
			}
		}

		svg.Mouse = new (function() {
			this.events = [];
			this.hasEvents = function() { return this.events.length != 0; }

			this.onclick = function(x, y) {
				this.events.push({ type: 'onclick', x: x, y: y,
					run: function(e) { if (e.onclick) e.onclick(); }
				});
			}

			this.onmousemove = function(x, y) {
				this.events.push({ type: 'onmousemove', x: x, y: y,
					run: function(e) { if (e.onmousemove) e.onmousemove(); }
				});
			}

			this.eventElements = [];

			this.checkPath = function(element, ctx) {
				for (var i=0; i<this.events.length; i++) {
					var e = this.events[i];
					if (ctx.isPointInPath && ctx.isPointInPath(e.x, e.y)) this.eventElements[i] = element;
				}
			}

			this.checkBoundingBox = function(element, bb) {
				for (var i=0; i<this.events.length; i++) {
					var e = this.events[i];
					if (bb.isPointInBox(e.x, e.y)) this.eventElements[i] = element;
				}
			}

			this.runEvents = function() {
				svg.ctx.canvas.style.cursor = '';

				for (var i=0; i<this.events.length; i++) {
					var e = this.events[i];
					var element = this.eventElements[i];
					while (element) {
						e.run(element);
						element = element.parent;
					}
				}

				// done running, clear
				this.events = [];
				this.eventElements = [];
			}
		});

		return svg;
	};

	if (typeof CanvasRenderingContext2D  != 'undefined') {
		CanvasRenderingContext2D.prototype.drawSvg = function(s, dx, dy, dw, dh, opts) {
			var cOpts = {
				ignoreMouse: true,
				ignoreAnimation: true,
				ignoreDimensions: true,
				ignoreClear: true,
				offsetX: dx,
				offsetY: dy,
				scaleWidth: dw,
				scaleHeight: dh
			}

			for(var prop in opts) {
				if(opts.hasOwnProperty(prop)){
					cOpts[prop] = opts[prop];
				}
			}
			canvg(this.canvas, s, cOpts);
		}
	}

	return canvg;

}));

},{"rgbcolor":73,"stackblur":74}],11:[function(require,module,exports){
module.exports = {
  "align-content": "stretch",
  "align-items": "stretch",
  "align-self": "auto",
  "animation-delay": "0s",
  "animation-direction": "normal",
  "animation-duration": "0s",
  "animation-fill-mode": "none",
  "animation-iteration-count": "1",
  "animation-name": "none",
  "animation-play-state": "running",
  "animation-timing-function": "ease",
  "azimuth": "center",
  "backface-visibility": "visible",
  "background-attachment": "scroll",
  "background-blend-mode": "normal",
  "background-clip": "border-box",
  "background-color": "transparent",
  "background-image": "none",
  "background-origin": "padding-box",
  "background-position": "0% 0%",
  "background-repeat": "repeat",
  "background-size": "auto auto",
  "block-size": "auto",
  "border-block-end-color": "currentcolor",
  "border-block-end-style": "none",
  "border-block-end-width": "medium",
  "border-block-start-color": "currentcolor",
  "border-block-start-style": "none",
  "border-block-start-width": "medium",
  "border-bottom-color": "currentcolor",
  "border-bottom-left-radius": "0",
  "border-bottom-right-radius": "0",
  "border-bottom-style": "none",
  "border-bottom-width": "medium",
  "border-collapse": "separate",
  "border-image-outset": "0s",
  "border-image-repeat": "stretch",
  "border-image-slice": "100%",
  "border-image-source": "none",
  "border-image-width": "1",
  "border-inline-end-color": "currentcolor",
  "border-inline-end-style": "none",
  "border-inline-end-width": "medium",
  "border-inline-start-color": "currentcolor",
  "border-inline-start-style": "none",
  "border-inline-start-width": "medium",
  "border-left-color": "currentcolor",
  "border-left-style": "none",
  "border-left-width": "medium",
  "border-right-color": "currentcolor",
  "border-right-style": "none",
  "border-right-width": "medium",
  "border-spacing": "0",
  "border-top-color": "currentcolor",
  "border-top-left-radius": "0",
  "border-top-right-radius": "0",
  "border-top-style": "none",
  "border-top-width": "medium",
  "bottom": "auto",
  "box-decoration-break": "slice",
  "box-shadow": "none",
  "box-sizing": "content-box",
  "break-after": "auto",
  "break-before": "auto",
  "break-inside": "auto",
  "caption-side": "top",
  "caret-color": "auto",
  "clear": "none",
  "clip": "auto",
  "clip-path": "none",
  "color": "initial",
  "column-count": "auto",
  "column-fill": "balance",
  "column-gap": "normal",
  "column-rule-color": "currentcolor",
  "column-rule-style": "none",
  "column-rule-width": "medium",
  "column-span": "none",
  "column-width": "auto",
  "content": "normal",
  "counter-increment": "none",
  "counter-reset": "none",
  "cursor": "auto",
  "display": "inline",
  "empty-cells": "show",
  "filter": "none",
  "flex-basis": "auto",
  "flex-direction": "row",
  "flex-grow": "0",
  "flex-shrink": "1",
  "flex-wrap": "nowrap",
  "float": "none",
  "font-family": "initial",
  "font-feature-settings": "normal",
  "font-kerning": "auto",
  "font-language-override": "normal",
  "font-size": "medium",
  "font-size-adjust": "none",
  "font-stretch": "normal",
  "font-style": "normal",
  "font-synthesis": "weight style",
  "font-variant": "normal",
  "font-variant-alternates": "normal",
  "font-variant-caps": "normal",
  "font-variant-east-asian": "normal",
  "font-variant-ligatures": "normal",
  "font-variant-numeric": "normal",
  "font-variant-position": "normal",
  "font-weight": "normal",
  "grid-auto-columns": "auto",
  "grid-auto-flow": "row",
  "grid-auto-rows": "auto",
  "grid-column-end": "auto",
  "grid-column-gap": "0",
  "grid-column-start": "auto",
  "grid-row-end": "auto",
  "grid-row-gap": "0",
  "grid-row-start": "auto",
  "grid-template-areas": "none",
  "grid-template-columns": "none",
  "grid-template-rows": "none",
  "height": "auto",
  "hyphens": "manual",
  "image-orientation": "0deg",
  "image-rendering": "auto",
  "image-resolution": "1dppx",
  "ime-mode": "auto",
  "inline-size": "auto",
  "isolation": "auto",
  "justify-content": "flex-start",
  "left": "auto",
  "letter-spacing": "normal",
  "line-break": "auto",
  "line-height": "normal",
  "list-style-image": "none",
  "list-style-position": "outside",
  "list-style-type": "disc",
  "margin-block-end": "0",
  "margin-block-start": "0",
  "margin-bottom": "0",
  "margin-inline-end": "0",
  "margin-inline-start": "0",
  "margin-left": "0",
  "margin-right": "0",
  "margin-top": "0",
  "mask-clip": "border-box",
  "mask-composite": "add",
  "mask-image": "none",
  "mask-mode": "match-source",
  "mask-origin": "border-box",
  "mask-position": "0% 0%",
  "mask-repeat": "repeat",
  "mask-size": "auto",
  "mask-type": "luminance",
  "max-height": "none",
  "max-width": "none",
  "min-block-size": "0",
  "min-height": "0",
  "min-inline-size": "0",
  "min-width": "0",
  "mix-blend-mode": "normal",
  "object-fit": "fill",
  "object-position": "50% 50%",
  "offset-block-end": "auto",
  "offset-block-start": "auto",
  "offset-inline-end": "auto",
  "offset-inline-start": "auto",
  "opacity": "1.0",
  "order": "0",
  "orphans": "2",
  "outline-color": "initial",
  "outline-offset": "0",
  "outline-style": "none",
  "outline-width": "medium",
  "overflow": "visible",
  "overflow-wrap": "normal",
  "overflow-x": "visible",
  "overflow-y": "visible",
  "padding-block-end": "0",
  "padding-block-start": "0",
  "padding-bottom": "0",
  "padding-inline-end": "0",
  "padding-inline-start": "0",
  "padding-left": "0",
  "padding-right": "0",
  "padding-top": "0",
  "page-break-after": "auto",
  "page-break-before": "auto",
  "page-break-inside": "auto",
  "perspective": "none",
  "perspective-origin": "50% 50%",
  "pointer-events": "auto",
  "position": "static",
  "quotes": "initial",
  "resize": "none",
  "right": "auto",
  "ruby-align": "space-around",
  "ruby-merge": "separate",
  "ruby-position": "over",
  "scroll-behavior": "auto",
  "scroll-snap-coordinate": "none",
  "scroll-snap-destination": "0px 0px",
  "scroll-snap-points-x": "none",
  "scroll-snap-points-y": "none",
  "scroll-snap-type": "none",
  "shape-image-threshold": "0.0",
  "shape-margin": "0",
  "shape-outside": "none",
  "tab-size": "8",
  "table-layout": "auto",
  "text-align": "initial",
  "text-align-last": "auto",
  "text-combine-upright": "none",
  "text-decoration-color": "currentcolor",
  "text-decoration-line": "none",
  "text-decoration-style": "solid",
  "text-emphasis-color": "currentcolor",
  "text-emphasis-position": "over right",
  "text-emphasis-style": "none",
  "text-indent": "0",
  "text-justify": "auto",
  "text-orientation": "mixed",
  "text-overflow": "clip",
  "text-rendering": "auto",
  "text-shadow": "none",
  "text-transform": "none",
  "text-underline-position": "auto",
  "top": "auto",
  "touch-action": "auto",
  "transform": "none",
  "transform-box": "border-box ",
  "transform-origin": "50% 50% 0",
  "transform-style": "flat",
  "transition-delay": "0s",
  "transition-duration": "0s",
  "transition-property": "all",
  "transition-timing-function": "ease",
  "vertical-align": "baseline",
  "visibility": "visible",
  "white-space": "normal",
  "widows": "2",
  "width": "auto",
  "will-change": "auto",
  "word-break": "normal",
  "word-spacing": "normal",
  "word-wrap": "normal",
  "writing-mode": "horizontal-tb",
  "z-index": "auto",
  "-webkit-appearance": "none",
  "-moz-appearance": "none",
  "-ms-appearance": "none",
  "appearance": "none"
};
},{}],12:[function(require,module,exports){
module.exports = require('./all')

},{"./all":11}],13:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.LineBreaker = exports.inlineBreakOpportunities = exports.lineBreakAtIndex = exports.codePointsToCharacterClasses = exports.UnicodeTrie = exports.BREAK_ALLOWED = exports.BREAK_NOT_ALLOWED = exports.BREAK_MANDATORY = exports.classes = exports.LETTER_NUMBER_MODIFIER = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _Trie = require('./Trie');

var _linebreakTrie = require('./linebreak-trie');

var _linebreakTrie2 = _interopRequireDefault(_linebreakTrie);

var _Util = require('./Util');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var LETTER_NUMBER_MODIFIER = exports.LETTER_NUMBER_MODIFIER = 50;

// Non-tailorable Line Breaking Classes
var BK = 1; //  Cause a line break (after)
var CR = 2; //  Cause a line break (after), except between CR and LF
var LF = 3; //  Cause a line break (after)
var CM = 4; //  Prohibit a line break between the character and the preceding character
var NL = 5; //  Cause a line break (after)
var SG = 6; //  Do not occur in well-formed text
var WJ = 7; //  Prohibit line breaks before and after
var ZW = 8; //  Provide a break opportunity
var GL = 9; //  Prohibit line breaks before and after
var SP = 10; // Enable indirect line breaks
var ZWJ = 11; // Prohibit line breaks within joiner sequences
// Break Opportunities
var B2 = 12; //  Provide a line break opportunity before and after the character
var BA = 13; //  Generally provide a line break opportunity after the character
var BB = 14; //  Generally provide a line break opportunity before the character
var HY = 15; //  Provide a line break opportunity after the character, except in numeric context
var CB = 16; //   Provide a line break opportunity contingent on additional information
// Characters Prohibiting Certain Breaks
var CL = 17; //  Prohibit line breaks before
var CP = 18; //  Prohibit line breaks before
var EX = 19; //  Prohibit line breaks before
var IN = 20; //  Allow only indirect line breaks between pairs
var NS = 21; //  Allow only indirect line breaks before
var OP = 22; //  Prohibit line breaks after
var QU = 23; //  Act like they are both opening and closing
// Numeric Context
var IS = 24; //  Prevent breaks after any and before numeric
var NU = 25; //  Form numeric expressions for line breaking purposes
var PO = 26; //  Do not break following a numeric expression
var PR = 27; //  Do not break in front of a numeric expression
var SY = 28; //  Prevent a break before; and allow a break after
// Other Characters
var AI = 29; //  Act like AL when the resolvedEAW is N; otherwise; act as ID
var AL = 30; //  Are alphabetic characters or symbols that are used with alphabetic characters
var CJ = 31; //  Treat as NS or ID for strict or normal breaking.
var EB = 32; //  Do not break from following Emoji Modifier
var EM = 33; //  Do not break from preceding Emoji Base
var H2 = 34; //  Form Korean syllable blocks
var H3 = 35; //  Form Korean syllable blocks
var HL = 36; //  Do not break around a following hyphen; otherwise act as Alphabetic
var ID = 37; //  Break before or after; except in some numeric context
var JL = 38; //  Form Korean syllable blocks
var JV = 39; //  Form Korean syllable blocks
var JT = 40; //  Form Korean syllable blocks
var RI = 41; //  Keep pairs together. For pairs; break before and after other classes
var SA = 42; //  Provide a line break opportunity contingent on additional, language-specific context analysis
var XX = 43; //  Have as yet unknown line breaking behavior or unassigned code positions

var classes = exports.classes = {
    BK: BK,
    CR: CR,
    LF: LF,
    CM: CM,
    NL: NL,
    SG: SG,
    WJ: WJ,
    ZW: ZW,
    GL: GL,
    SP: SP,
    ZWJ: ZWJ,
    B2: B2,
    BA: BA,
    BB: BB,
    HY: HY,
    CB: CB,
    CL: CL,
    CP: CP,
    EX: EX,
    IN: IN,
    NS: NS,
    OP: OP,
    QU: QU,
    IS: IS,
    NU: NU,
    PO: PO,
    PR: PR,
    SY: SY,
    AI: AI,
    AL: AL,
    CJ: CJ,
    EB: EB,
    EM: EM,
    H2: H2,
    H3: H3,
    HL: HL,
    ID: ID,
    JL: JL,
    JV: JV,
    JT: JT,
    RI: RI,
    SA: SA,
    XX: XX
};

var BREAK_MANDATORY = exports.BREAK_MANDATORY = '!';
var BREAK_NOT_ALLOWED = exports.BREAK_NOT_ALLOWED = '×';
var BREAK_ALLOWED = exports.BREAK_ALLOWED = '÷';
var UnicodeTrie = exports.UnicodeTrie = (0, _Trie.createTrieFromBase64)(_linebreakTrie2.default);

var ALPHABETICS = [AL, HL];
var HARD_LINE_BREAKS = [BK, CR, LF, NL];
var SPACE = [SP, ZW];
var PREFIX_POSTFIX = [PR, PO];
var LINE_BREAKS = HARD_LINE_BREAKS.concat(SPACE);
var KOREAN_SYLLABLE_BLOCK = [JL, JV, JT, H2, H3];
var HYPHEN = [HY, BA];

var codePointsToCharacterClasses = exports.codePointsToCharacterClasses = function codePointsToCharacterClasses(codePoints) {
    var lineBreak = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'strict';

    var types = [];
    var indicies = [];
    var categories = [];
    codePoints.forEach(function (codePoint, index) {
        var classType = UnicodeTrie.get(codePoint);
        if (classType > LETTER_NUMBER_MODIFIER) {
            categories.push(true);
            classType -= LETTER_NUMBER_MODIFIER;
        } else {
            categories.push(false);
        }

        if (['normal', 'auto', 'loose'].indexOf(lineBreak) !== -1) {
            // U+2010, – U+2013, 〜 U+301C, ゠ U+30A0
            if ([0x2010, 0x2013, 0x301c, 0x30a0].indexOf(codePoint) !== -1) {
                indicies.push(index);
                return types.push(CB);
            }
        }

        if (classType === CM || classType === ZWJ) {
            // LB10 Treat any remaining combining mark or ZWJ as AL.
            if (index === 0) {
                indicies.push(index);
                return types.push(AL);
            }

            // LB9 Do not break a combining character sequence; treat it as if it has the line breaking class of
            // the base character in all of the following rules. Treat ZWJ as if it were CM.
            var prev = types[index - 1];
            if (LINE_BREAKS.indexOf(prev) === -1) {
                indicies.push(indicies[index - 1]);
                return types.push(prev);
            }
            indicies.push(index);
            return types.push(AL);
        }

        indicies.push(index);

        if (classType === CJ) {
            return types.push(lineBreak === 'strict' ? NS : ID);
        }

        if (classType === SA) {
            return types.push(AL);
        }

        if (classType === AI) {
            return types.push(AL);
        }

        // For supplementary characters, a useful default is to treat characters in the range 10000..1FFFD as AL
        // and characters in the ranges 20000..2FFFD and 30000..3FFFD as ID, until the implementation can be revised
        // to take into account the actual line breaking properties for these characters.
        if (classType === XX) {
            if (codePoint >= 0x20000 && codePoint <= 0x2fffd || codePoint >= 0x30000 && codePoint <= 0x3fffd) {
                return types.push(ID);
            } else {
                return types.push(AL);
            }
        }

        types.push(classType);
    });

    return [indicies, types, categories];
};

var isAdjacentWithSpaceIgnored = function isAdjacentWithSpaceIgnored(a, b, currentIndex, classTypes) {
    var current = classTypes[currentIndex];
    if (Array.isArray(a) ? a.indexOf(current) !== -1 : a === current) {
        var i = currentIndex;
        while (i <= classTypes.length) {
            i++;
            var next = classTypes[i];

            if (next === b) {
                return true;
            }

            if (next !== SP) {
                break;
            }
        }
    }

    if (current === SP) {
        var _i = currentIndex;

        while (_i > 0) {
            _i--;
            var prev = classTypes[_i];

            if (Array.isArray(a) ? a.indexOf(prev) !== -1 : a === prev) {
                var n = currentIndex;
                while (n <= classTypes.length) {
                    n++;
                    var _next = classTypes[n];

                    if (_next === b) {
                        return true;
                    }

                    if (_next !== SP) {
                        break;
                    }
                }
            }

            if (prev !== SP) {
                break;
            }
        }
    }
    return false;
};

var previousNonSpaceClassType = function previousNonSpaceClassType(currentIndex, classTypes) {
    var i = currentIndex;
    while (i >= 0) {
        var type = classTypes[i];
        if (type === SP) {
            i--;
        } else {
            return type;
        }
    }
    return 0;
};

var _lineBreakAtIndex = function _lineBreakAtIndex(codePoints, classTypes, indicies, index, forbiddenBreaks) {
    if (indicies[index] === 0) {
        return BREAK_NOT_ALLOWED;
    }

    var currentIndex = index - 1;
    if (Array.isArray(forbiddenBreaks) && forbiddenBreaks[currentIndex] === true) {
        return BREAK_NOT_ALLOWED;
    }

    var beforeIndex = currentIndex - 1;
    var afterIndex = currentIndex + 1;
    var current = classTypes[currentIndex];

    // LB4 Always break after hard line breaks.
    // LB5 Treat CR followed by LF, as well as CR, LF, and NL as hard line breaks.
    var before = beforeIndex >= 0 ? classTypes[beforeIndex] : 0;
    var next = classTypes[afterIndex];

    if (current === CR && next === LF) {
        return BREAK_NOT_ALLOWED;
    }

    if (HARD_LINE_BREAKS.indexOf(current) !== -1) {
        return BREAK_MANDATORY;
    }

    // LB6 Do not break before hard line breaks.
    if (HARD_LINE_BREAKS.indexOf(next) !== -1) {
        return BREAK_NOT_ALLOWED;
    }

    // LB7 Do not break before spaces or zero width space.
    if (SPACE.indexOf(next) !== -1) {
        return BREAK_NOT_ALLOWED;
    }

    // LB8 Break before any character following a zero-width space, even if one or more spaces intervene.
    if (previousNonSpaceClassType(currentIndex, classTypes) === ZW) {
        return BREAK_ALLOWED;
    }

    // LB8a Do not break between a zero width joiner and an ideograph, emoji base or emoji modifier.
    if (UnicodeTrie.get(codePoints[currentIndex]) === ZWJ && (next === ID || next === EB || next === EM)) {
        return BREAK_NOT_ALLOWED;
    }

    // LB11 Do not break before or after Word joiner and related characters.
    if (current === WJ || next === WJ) {
        return BREAK_NOT_ALLOWED;
    }

    // LB12 Do not break after NBSP and related characters.
    if (current === GL) {
        return BREAK_NOT_ALLOWED;
    }

    // LB12a Do not break before NBSP and related characters, except after spaces and hyphens.
    if ([SP, BA, HY].indexOf(current) === -1 && next === GL) {
        return BREAK_NOT_ALLOWED;
    }

    // LB13 Do not break before ‘]’ or ‘!’ or ‘;’ or ‘/’, even after spaces.
    if ([CL, CP, EX, IS, SY].indexOf(next) !== -1) {
        return BREAK_NOT_ALLOWED;
    }

    // LB14 Do not break after ‘[’, even after spaces.
    if (previousNonSpaceClassType(currentIndex, classTypes) === OP) {
        return BREAK_NOT_ALLOWED;
    }

    // LB15 Do not break within ‘”[’, even with intervening spaces.
    if (isAdjacentWithSpaceIgnored(QU, OP, currentIndex, classTypes)) {
        return BREAK_NOT_ALLOWED;
    }

    // LB16 Do not break between closing punctuation and a nonstarter (lb=NS), even with intervening spaces.
    if (isAdjacentWithSpaceIgnored([CL, CP], NS, currentIndex, classTypes)) {
        return BREAK_NOT_ALLOWED;
    }

    // LB17 Do not break within ‘——’, even with intervening spaces.
    if (isAdjacentWithSpaceIgnored(B2, B2, currentIndex, classTypes)) {
        return BREAK_NOT_ALLOWED;
    }

    // LB18 Break after spaces.
    if (current === SP) {
        return BREAK_ALLOWED;
    }

    // LB19 Do not break before or after quotation marks, such as ‘ ” ’.
    if (current === QU || next === QU) {
        return BREAK_NOT_ALLOWED;
    }

    // LB20 Break before and after unresolved CB.
    if (next === CB || current === CB) {
        return BREAK_ALLOWED;
    }

    // LB21 Do not break before hyphen-minus, other hyphens, fixed-width spaces, small kana, and other non-starters, or after acute accents.
    if ([BA, HY, NS].indexOf(next) !== -1 || current === BB) {
        return BREAK_NOT_ALLOWED;
    }

    // LB21a Don't break after Hebrew + Hyphen.
    if (before === HL && HYPHEN.indexOf(current) !== -1) {
        return BREAK_NOT_ALLOWED;
    }

    // LB21b Don’t break between Solidus and Hebrew letters.
    if (current === SY && next === HL) {
        return BREAK_NOT_ALLOWED;
    }

    // LB22 Do not break between two ellipses, or between letters, numbers or exclamations and ellipsis.
    if (next === IN && ALPHABETICS.concat(IN, EX, NU, ID, EB, EM).indexOf(current) !== -1) {
        return BREAK_NOT_ALLOWED;
    }

    // LB23 Do not break between digits and letters.
    if (ALPHABETICS.indexOf(next) !== -1 && current === NU || ALPHABETICS.indexOf(current) !== -1 && next === NU) {
        return BREAK_NOT_ALLOWED;
    }

    // LB23a Do not break between numeric prefixes and ideographs, or between ideographs and numeric postfixes.
    if (current === PR && [ID, EB, EM].indexOf(next) !== -1 || [ID, EB, EM].indexOf(current) !== -1 && next === PO) {
        return BREAK_NOT_ALLOWED;
    }

    // LB24 Do not break between numeric prefix/postfix and letters, or between letters and prefix/postfix.
    if (ALPHABETICS.indexOf(current) !== -1 && PREFIX_POSTFIX.indexOf(next) !== -1 || PREFIX_POSTFIX.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {
        return BREAK_NOT_ALLOWED;
    }

    // LB25 Do not break between the following pairs of classes relevant to numbers:
    if (
    // (PR | PO) × ( OP | HY )? NU
    [PR, PO].indexOf(current) !== -1 && (next === NU || [OP, HY].indexOf(next) !== -1 && classTypes[afterIndex + 1] === NU) ||
    // ( OP | HY ) × NU
    [OP, HY].indexOf(current) !== -1 && next === NU ||
    // NU ×	(NU | SY | IS)
    current === NU && [NU, SY, IS].indexOf(next) !== -1) {
        return BREAK_NOT_ALLOWED;
    }

    // NU (NU | SY | IS)* × (NU | SY | IS | CL | CP)
    if ([NU, SY, IS, CL, CP].indexOf(next) !== -1) {
        var prevIndex = currentIndex;
        while (prevIndex >= 0) {
            var type = classTypes[prevIndex];
            if (type === NU) {
                return BREAK_NOT_ALLOWED;
            } else if ([SY, IS].indexOf(type) !== -1) {
                prevIndex--;
            } else {
                break;
            }
        }
    }

    // NU (NU | SY | IS)* (CL | CP)? × (PO | PR))
    if ([PR, PO].indexOf(next) !== -1) {
        var _prevIndex = [CL, CP].indexOf(current) !== -1 ? beforeIndex : currentIndex;
        while (_prevIndex >= 0) {
            var _type = classTypes[_prevIndex];
            if (_type === NU) {
                return BREAK_NOT_ALLOWED;
            } else if ([SY, IS].indexOf(_type) !== -1) {
                _prevIndex--;
            } else {
                break;
            }
        }
    }

    // LB26 Do not break a Korean syllable.
    if (JL === current && [JL, JV, H2, H3].indexOf(next) !== -1 || [JV, H2].indexOf(current) !== -1 && [JV, JT].indexOf(next) !== -1 || [JT, H3].indexOf(current) !== -1 && next === JT) {
        return BREAK_NOT_ALLOWED;
    }

    // LB27 Treat a Korean Syllable Block the same as ID.
    if (KOREAN_SYLLABLE_BLOCK.indexOf(current) !== -1 && [IN, PO].indexOf(next) !== -1 || KOREAN_SYLLABLE_BLOCK.indexOf(next) !== -1 && current === PR) {
        return BREAK_NOT_ALLOWED;
    }

    // LB28 Do not break between alphabetics (“at”).
    if (ALPHABETICS.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {
        return BREAK_NOT_ALLOWED;
    }

    // LB29 Do not break between numeric punctuation and alphabetics (“e.g.”).
    if (current === IS && ALPHABETICS.indexOf(next) !== -1) {
        return BREAK_NOT_ALLOWED;
    }

    // LB30 Do not break between letters, numbers, or ordinary symbols and opening or closing parentheses.
    if (ALPHABETICS.concat(NU).indexOf(current) !== -1 && next === OP || ALPHABETICS.concat(NU).indexOf(next) !== -1 && current === CP) {
        return BREAK_NOT_ALLOWED;
    }

    // LB30a Break between two regional indicator symbols if and only if there are an even number of regional
    // indicators preceding the position of the break.
    if (current === RI && next === RI) {
        var i = indicies[currentIndex];
        var count = 1;
        while (i > 0) {
            i--;
            if (classTypes[i] === RI) {
                count++;
            } else {
                break;
            }
        }
        if (count % 2 !== 0) {
            return BREAK_NOT_ALLOWED;
        }
    }

    // LB30b Do not break between an emoji base and an emoji modifier.
    if (current === EB && next === EM) {
        return BREAK_NOT_ALLOWED;
    }

    return BREAK_ALLOWED;
};

var lineBreakAtIndex = exports.lineBreakAtIndex = function lineBreakAtIndex(codePoints, index) {
    // LB2 Never break at the start of text.
    if (index === 0) {
        return BREAK_NOT_ALLOWED;
    }

    // LB3 Always break at the end of text.
    if (index >= codePoints.length) {
        return BREAK_MANDATORY;
    }

    var _codePointsToCharacte = codePointsToCharacterClasses(codePoints),
        _codePointsToCharacte2 = _slicedToArray(_codePointsToCharacte, 2),
        indicies = _codePointsToCharacte2[0],
        classTypes = _codePointsToCharacte2[1];

    return _lineBreakAtIndex(codePoints, classTypes, indicies, index);
};

var cssFormattedClasses = function cssFormattedClasses(codePoints, options) {
    if (!options) {
        options = { lineBreak: 'normal', wordBreak: 'normal' };
    }

    var _codePointsToCharacte3 = codePointsToCharacterClasses(codePoints, options.lineBreak),
        _codePointsToCharacte4 = _slicedToArray(_codePointsToCharacte3, 3),
        indicies = _codePointsToCharacte4[0],
        classTypes = _codePointsToCharacte4[1],
        isLetterNumber = _codePointsToCharacte4[2];

    if (options.wordBreak === 'break-all' || options.wordBreak === 'break-word') {
        classTypes = classTypes.map(function (type) {
            return [NU, AL, SA].indexOf(type) !== -1 ? ID : type;
        });
    }

    var forbiddenBreakpoints = options.wordBreak === 'keep-all' ? isLetterNumber.map(function (isLetterNumber, i) {
        return isLetterNumber && codePoints[i] >= 0x4e00 && codePoints[i] <= 0x9fff;
    }) : null;

    return [indicies, classTypes, forbiddenBreakpoints];
};

var inlineBreakOpportunities = exports.inlineBreakOpportunities = function inlineBreakOpportunities(str, options) {
    var codePoints = (0, _Util.toCodePoints)(str);
    var output = BREAK_NOT_ALLOWED;

    var _cssFormattedClasses = cssFormattedClasses(codePoints, options),
        _cssFormattedClasses2 = _slicedToArray(_cssFormattedClasses, 3),
        indicies = _cssFormattedClasses2[0],
        classTypes = _cssFormattedClasses2[1],
        forbiddenBreakpoints = _cssFormattedClasses2[2];

    codePoints.forEach(function (codePoint, i) {
        output += (0, _Util.fromCodePoint)(codePoint) + (i >= codePoints.length - 1 ? BREAK_MANDATORY : _lineBreakAtIndex(codePoints, classTypes, indicies, i + 1, forbiddenBreakpoints));
    });

    return output;
};

var Break = function () {
    function Break(codePoints, lineBreak, start, end) {
        _classCallCheck(this, Break);

        this._codePoints = codePoints;
        this.required = lineBreak === BREAK_MANDATORY;
        this.start = start;
        this.end = end;
    }

    _createClass(Break, [{
        key: 'slice',
        value: function slice() {
            return _Util.fromCodePoint.apply(undefined, _toConsumableArray(this._codePoints.slice(this.start, this.end)));
        }
    }]);

    return Break;
}();

var LineBreaker = exports.LineBreaker = function LineBreaker(str, options) {
    var codePoints = (0, _Util.toCodePoints)(str);

    var _cssFormattedClasses3 = cssFormattedClasses(codePoints, options),
        _cssFormattedClasses4 = _slicedToArray(_cssFormattedClasses3, 3),
        indicies = _cssFormattedClasses4[0],
        classTypes = _cssFormattedClasses4[1],
        forbiddenBreakpoints = _cssFormattedClasses4[2];

    var length = codePoints.length;
    var lastEnd = 0;
    var nextIndex = 0;

    return {
        next: function next() {
            if (nextIndex >= length) {
                return { done: true };
            }
            var lineBreak = BREAK_NOT_ALLOWED;
            while (nextIndex < length && (lineBreak = _lineBreakAtIndex(codePoints, classTypes, indicies, ++nextIndex, forbiddenBreakpoints)) === BREAK_NOT_ALLOWED) {}

            if (lineBreak !== BREAK_NOT_ALLOWED || nextIndex === length) {
                var value = new Break(codePoints, lineBreak, lastEnd, nextIndex);
                lastEnd = nextIndex;
                return { value: value, done: false };
            }

            return { done: true };
        }
    };
};
},{"./Trie":14,"./Util":15,"./linebreak-trie":17}],14:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Trie = exports.createTrieFromBase64 = exports.UTRIE2_INDEX_2_MASK = exports.UTRIE2_INDEX_2_BLOCK_LENGTH = exports.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = exports.UTRIE2_INDEX_1_OFFSET = exports.UTRIE2_UTF8_2B_INDEX_2_LENGTH = exports.UTRIE2_UTF8_2B_INDEX_2_OFFSET = exports.UTRIE2_INDEX_2_BMP_LENGTH = exports.UTRIE2_LSCP_INDEX_2_LENGTH = exports.UTRIE2_DATA_MASK = exports.UTRIE2_DATA_BLOCK_LENGTH = exports.UTRIE2_LSCP_INDEX_2_OFFSET = exports.UTRIE2_SHIFT_1_2 = exports.UTRIE2_INDEX_SHIFT = exports.UTRIE2_SHIFT_1 = exports.UTRIE2_SHIFT_2 = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Util = require('./Util');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/** Shift size for getting the index-2 table offset. */
var UTRIE2_SHIFT_2 = exports.UTRIE2_SHIFT_2 = 5;

/** Shift size for getting the index-1 table offset. */
var UTRIE2_SHIFT_1 = exports.UTRIE2_SHIFT_1 = 6 + 5;

/**
 * Shift size for shifting left the index array values.
 * Increases possible data size with 16-bit index values at the cost
 * of compactability.
 * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.
 */
var UTRIE2_INDEX_SHIFT = exports.UTRIE2_INDEX_SHIFT = 2;

/**
 * Difference between the two shift sizes,
 * for getting an index-1 offset from an index-2 offset. 6=11-5
 */
var UTRIE2_SHIFT_1_2 = exports.UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;

/**
 * The part of the index-2 table for U+D800..U+DBFF stores values for
 * lead surrogate code _units_ not code _points_.
 * Values for lead surrogate code _points_ are indexed with this portion of the table.
 * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)
 */
var UTRIE2_LSCP_INDEX_2_OFFSET = exports.UTRIE2_LSCP_INDEX_2_OFFSET = 0x10000 >> UTRIE2_SHIFT_2;

/** Number of entries in a data block. 32=0x20 */
var UTRIE2_DATA_BLOCK_LENGTH = exports.UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;
/** Mask for getting the lower bits for the in-data-block offset. */
var UTRIE2_DATA_MASK = exports.UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;

var UTRIE2_LSCP_INDEX_2_LENGTH = exports.UTRIE2_LSCP_INDEX_2_LENGTH = 0x400 >> UTRIE2_SHIFT_2;
/** Count the lengths of both BMP pieces. 2080=0x820 */
var UTRIE2_INDEX_2_BMP_LENGTH = exports.UTRIE2_INDEX_2_BMP_LENGTH = UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;
/**
 * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.
 * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.
 */
var UTRIE2_UTF8_2B_INDEX_2_OFFSET = exports.UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;
var UTRIE2_UTF8_2B_INDEX_2_LENGTH = exports.UTRIE2_UTF8_2B_INDEX_2_LENGTH = 0x800 >> 6; /* U+0800 is the first code point after 2-byte UTF-8 */
/**
 * The index-1 table, only used for supplementary code points, at offset 2112=0x840.
 * Variable length, for code points up to highStart, where the last single-value range starts.
 * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.
 * (For 0x100000 supplementary code points U+10000..U+10ffff.)
 *
 * The part of the index-2 table for supplementary code points starts
 * after this index-1 table.
 *
 * Both the index-1 table and the following part of the index-2 table
 * are omitted completely if there is only BMP data.
 */
var UTRIE2_INDEX_1_OFFSET = exports.UTRIE2_INDEX_1_OFFSET = UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;

/**
 * Number of index-1 entries for the BMP. 32=0x20
 * This part of the index-1 table is omitted from the serialized form.
 */
var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = exports.UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 0x10000 >> UTRIE2_SHIFT_1;

/** Number of entries in an index-2 block. 64=0x40 */
var UTRIE2_INDEX_2_BLOCK_LENGTH = exports.UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;
/** Mask for getting the lower bits for the in-index-2-block offset. */
var UTRIE2_INDEX_2_MASK = exports.UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;

var createTrieFromBase64 = exports.createTrieFromBase64 = function createTrieFromBase64(base64) {
    var buffer = (0, _Util.decode)(base64);
    var view32 = Array.isArray(buffer) ? (0, _Util.polyUint32Array)(buffer) : new Uint32Array(buffer);
    var view16 = Array.isArray(buffer) ? (0, _Util.polyUint16Array)(buffer) : new Uint16Array(buffer);
    var headerLength = 24;

    var index = view16.slice(headerLength / 2, view32[4] / 2);
    var data = view32[5] === 2 ? view16.slice((headerLength + view32[4]) / 2) : view32.slice(Math.ceil((headerLength + view32[4]) / 4));

    return new Trie(view32[0], view32[1], view32[2], view32[3], index, data);
};

var Trie = exports.Trie = function () {
    function Trie(initialValue, errorValue, highStart, highValueIndex, index, data) {
        _classCallCheck(this, Trie);

        this.initialValue = initialValue;
        this.errorValue = errorValue;
        this.highStart = highStart;
        this.highValueIndex = highValueIndex;
        this.index = index;
        this.data = data;
    }

    /**
     * Get the value for a code point as stored in the Trie.
     *
     * @param codePoint the code point
     * @return the value
     */


    _createClass(Trie, [{
        key: 'get',
        value: function get(codePoint) {
            var ix = void 0;
            if (codePoint >= 0) {
                if (codePoint < 0x0d800 || codePoint > 0x0dbff && codePoint <= 0x0ffff) {
                    // Ordinary BMP code point, excluding leading surrogates.
                    // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.
                    // 16 bit data is stored in the index array itself.
                    ix = this.index[codePoint >> UTRIE2_SHIFT_2];
                    ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
                    return this.data[ix];
                }

                if (codePoint <= 0xffff) {
                    // Lead Surrogate Code Point.  A Separate index section is stored for
                    // lead surrogate code units and code points.
                    //   The main index has the code unit data.
                    //   For this function, we need the code point data.
                    // Note: this expression could be refactored for slightly improved efficiency, but
                    //       surrogate code points will be so rare in practice that it's not worth it.
                    ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET + (codePoint - 0xd800 >> UTRIE2_SHIFT_2)];
                    ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
                    return this.data[ix];
                }

                if (codePoint < this.highStart) {
                    // Supplemental code point, use two-level lookup.
                    ix = UTRIE2_INDEX_1_OFFSET - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> UTRIE2_SHIFT_1);
                    ix = this.index[ix];
                    ix += codePoint >> UTRIE2_SHIFT_2 & UTRIE2_INDEX_2_MASK;
                    ix = this.index[ix];
                    ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
                    return this.data[ix];
                }
                if (codePoint <= 0x10ffff) {
                    return this.data[this.highValueIndex];
                }
            }

            // Fall through.  The code point is outside of the legal range of 0..0x10ffff.
            return this.errorValue;
        }
    }]);

    return Trie;
}();
},{"./Util":15}],15:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var toCodePoints = exports.toCodePoints = function toCodePoints(str) {
    var codePoints = [];
    var i = 0;
    var length = str.length;
    while (i < length) {
        var value = str.charCodeAt(i++);
        if (value >= 0xd800 && value <= 0xdbff && i < length) {
            var extra = str.charCodeAt(i++);
            if ((extra & 0xfc00) === 0xdc00) {
                codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);
            } else {
                codePoints.push(value);
                i--;
            }
        } else {
            codePoints.push(value);
        }
    }
    return codePoints;
};

var fromCodePoint = exports.fromCodePoint = function fromCodePoint() {
    if (String.fromCodePoint) {
        return String.fromCodePoint.apply(String, arguments);
    }

    var length = arguments.length;
    if (!length) {
        return '';
    }

    var codeUnits = [];

    var index = -1;
    var result = '';
    while (++index < length) {
        var codePoint = arguments.length <= index ? undefined : arguments[index];
        if (codePoint <= 0xffff) {
            codeUnits.push(codePoint);
        } else {
            codePoint -= 0x10000;
            codeUnits.push((codePoint >> 10) + 0xd800, codePoint % 0x400 + 0xdc00);
        }
        if (index + 1 === length || codeUnits.length > 0x4000) {
            result += String.fromCharCode.apply(String, codeUnits);
            codeUnits.length = 0;
        }
    }
    return result;
};

var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

// Use a lookup table to find the index.
var lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);
for (var i = 0; i < chars.length; i++) {
    lookup[chars.charCodeAt(i)] = i;
}

var decode = exports.decode = function decode(base64) {
    var bufferLength = base64.length * 0.75,
        len = base64.length,
        i = void 0,
        p = 0,
        encoded1 = void 0,
        encoded2 = void 0,
        encoded3 = void 0,
        encoded4 = void 0;

    if (base64[base64.length - 1] === '=') {
        bufferLength--;
        if (base64[base64.length - 2] === '=') {
            bufferLength--;
        }
    }

    var buffer = typeof ArrayBuffer !== 'undefined' && typeof Uint8Array !== 'undefined' && typeof Uint8Array.prototype.slice !== 'undefined' ? new ArrayBuffer(bufferLength) : new Array(bufferLength);
    var bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);

    for (i = 0; i < len; i += 4) {
        encoded1 = lookup[base64.charCodeAt(i)];
        encoded2 = lookup[base64.charCodeAt(i + 1)];
        encoded3 = lookup[base64.charCodeAt(i + 2)];
        encoded4 = lookup[base64.charCodeAt(i + 3)];

        bytes[p++] = encoded1 << 2 | encoded2 >> 4;
        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
    }

    return buffer;
};

var polyUint16Array = exports.polyUint16Array = function polyUint16Array(buffer) {
    var length = buffer.length;
    var bytes = [];
    for (var _i = 0; _i < length; _i += 2) {
        bytes.push(buffer[_i + 1] << 8 | buffer[_i]);
    }
    return bytes;
};

var polyUint32Array = exports.polyUint32Array = function polyUint32Array(buffer) {
    var length = buffer.length;
    var bytes = [];
    for (var _i2 = 0; _i2 < length; _i2 += 4) {
        bytes.push(buffer[_i2 + 3] << 24 | buffer[_i2 + 2] << 16 | buffer[_i2 + 1] << 8 | buffer[_i2]);
    }
    return bytes;
};
},{}],16:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _Util = require('./Util');

Object.defineProperty(exports, 'toCodePoints', {
  enumerable: true,
  get: function get() {
    return _Util.toCodePoints;
  }
});
Object.defineProperty(exports, 'fromCodePoint', {
  enumerable: true,
  get: function get() {
    return _Util.fromCodePoint;
  }
});

var _LineBreak = require('./LineBreak');

Object.defineProperty(exports, 'LineBreaker', {
  enumerable: true,
  get: function get() {
    return _LineBreak.LineBreaker;
  }
});
},{"./LineBreak":13,"./Util":15}],17:[function(require,module,exports){
'use strict';

module.exports = 'KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA';
},{}],18:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var ANGLE = /([+-]?\d*\.?\d+)(deg|grad|rad|turn)/i;

var parseAngle = exports.parseAngle = function parseAngle(angle) {
    var match = angle.match(ANGLE);

    if (match) {
        var value = parseFloat(match[1]);
        switch (match[2].toLowerCase()) {
            case 'deg':
                return Math.PI * value / 180;
            case 'grad':
                return Math.PI / 200 * value;
            case 'rad':
                return value;
            case 'turn':
                return Math.PI * 2 * value;
        }
    }

    return null;
};
},{}],19:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseBoundCurves = exports.calculatePaddingBoxPath = exports.calculateBorderBoxPath = exports.parsePathForBorder = exports.parseDocumentSize = exports.calculateContentBox = exports.calculatePaddingBox = exports.parseBounds = exports.Bounds = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Vector = require('./drawing/Vector');

var _Vector2 = _interopRequireDefault(_Vector);

var _BezierCurve = require('./drawing/BezierCurve');

var _BezierCurve2 = _interopRequireDefault(_BezierCurve);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var TOP = 0;
var RIGHT = 1;
var BOTTOM = 2;
var LEFT = 3;

var H = 0;
var V = 1;

var Bounds = exports.Bounds = function () {
    function Bounds(x, y, w, h) {
        _classCallCheck(this, Bounds);

        this.left = x;
        this.top = y;
        this.width = w;
        this.height = h;
    }

    _createClass(Bounds, null, [{
        key: 'fromClientRect',
        value: function fromClientRect(clientRect, scrollX, scrollY) {
            return new Bounds(clientRect.left + scrollX, clientRect.top + scrollY, clientRect.width, clientRect.height);
        }
    }]);

    return Bounds;
}();

var parseBounds = exports.parseBounds = function parseBounds(node, scrollX, scrollY) {
    return Bounds.fromClientRect(node.getBoundingClientRect(), scrollX, scrollY);
};

var calculatePaddingBox = exports.calculatePaddingBox = function calculatePaddingBox(bounds, borders) {
    return new Bounds(bounds.left + borders[LEFT].borderWidth, bounds.top + borders[TOP].borderWidth, bounds.width - (borders[RIGHT].borderWidth + borders[LEFT].borderWidth), bounds.height - (borders[TOP].borderWidth + borders[BOTTOM].borderWidth));
};

var calculateContentBox = exports.calculateContentBox = function calculateContentBox(bounds, padding, borders) {
    // TODO support percentage paddings
    var paddingTop = padding[TOP].value;
    var paddingRight = padding[RIGHT].value;
    var paddingBottom = padding[BOTTOM].value;
    var paddingLeft = padding[LEFT].value;

    return new Bounds(bounds.left + paddingLeft + borders[LEFT].borderWidth, bounds.top + paddingTop + borders[TOP].borderWidth, bounds.width - (borders[RIGHT].borderWidth + borders[LEFT].borderWidth + paddingLeft + paddingRight), bounds.height - (borders[TOP].borderWidth + borders[BOTTOM].borderWidth + paddingTop + paddingBottom));
};

var parseDocumentSize = exports.parseDocumentSize = function parseDocumentSize(document) {
    var body = document.body;
    var documentElement = document.documentElement;

    if (!body || !documentElement) {
        throw new Error(process.env.NODE_ENV !== 'production' ? 'Unable to get document size' : '');
    }
    var width = Math.max(Math.max(body.scrollWidth, documentElement.scrollWidth), Math.max(body.offsetWidth, documentElement.offsetWidth), Math.max(body.clientWidth, documentElement.clientWidth));

    var height = Math.max(Math.max(body.scrollHeight, documentElement.scrollHeight), Math.max(body.offsetHeight, documentElement.offsetHeight), Math.max(body.clientHeight, documentElement.clientHeight));

    return new Bounds(0, 0, width, height);
};

var parsePathForBorder = exports.parsePathForBorder = function parsePathForBorder(curves, borderSide) {
    switch (borderSide) {
        case TOP:
            return createPathFromCurves(curves.topLeftOuter, curves.topLeftInner, curves.topRightOuter, curves.topRightInner);
        case RIGHT:
            return createPathFromCurves(curves.topRightOuter, curves.topRightInner, curves.bottomRightOuter, curves.bottomRightInner);
        case BOTTOM:
            return createPathFromCurves(curves.bottomRightOuter, curves.bottomRightInner, curves.bottomLeftOuter, curves.bottomLeftInner);
        case LEFT:
        default:
            return createPathFromCurves(curves.bottomLeftOuter, curves.bottomLeftInner, curves.topLeftOuter, curves.topLeftInner);
    }
};

var createPathFromCurves = function createPathFromCurves(outer1, inner1, outer2, inner2) {
    var path = [];
    if (outer1 instanceof _BezierCurve2.default) {
        path.push(outer1.subdivide(0.5, false));
    } else {
        path.push(outer1);
    }

    if (outer2 instanceof _BezierCurve2.default) {
        path.push(outer2.subdivide(0.5, true));
    } else {
        path.push(outer2);
    }

    if (inner2 instanceof _BezierCurve2.default) {
        path.push(inner2.subdivide(0.5, true).reverse());
    } else {
        path.push(inner2);
    }

    if (inner1 instanceof _BezierCurve2.default) {
        path.push(inner1.subdivide(0.5, false).reverse());
    } else {
        path.push(inner1);
    }

    return path;
};

var calculateBorderBoxPath = exports.calculateBorderBoxPath = function calculateBorderBoxPath(curves) {
    return [curves.topLeftOuter, curves.topRightOuter, curves.bottomRightOuter, curves.bottomLeftOuter];
};

var calculatePaddingBoxPath = exports.calculatePaddingBoxPath = function calculatePaddingBoxPath(curves) {
    return [curves.topLeftInner, curves.topRightInner, curves.bottomRightInner, curves.bottomLeftInner];
};

var parseBoundCurves = exports.parseBoundCurves = function parseBoundCurves(bounds, borders, borderRadius) {
    var tlh = borderRadius[CORNER.TOP_LEFT][H].getAbsoluteValue(bounds.width);
    var tlv = borderRadius[CORNER.TOP_LEFT][V].getAbsoluteValue(bounds.height);
    var trh = borderRadius[CORNER.TOP_RIGHT][H].getAbsoluteValue(bounds.width);
    var trv = borderRadius[CORNER.TOP_RIGHT][V].getAbsoluteValue(bounds.height);
    var brh = borderRadius[CORNER.BOTTOM_RIGHT][H].getAbsoluteValue(bounds.width);
    var brv = borderRadius[CORNER.BOTTOM_RIGHT][V].getAbsoluteValue(bounds.height);
    var blh = borderRadius[CORNER.BOTTOM_LEFT][H].getAbsoluteValue(bounds.width);
    var blv = borderRadius[CORNER.BOTTOM_LEFT][V].getAbsoluteValue(bounds.height);

    var factors = [];
    factors.push((tlh + trh) / bounds.width);
    factors.push((blh + brh) / bounds.width);
    factors.push((tlv + blv) / bounds.height);
    factors.push((trv + brv) / bounds.height);
    var maxFactor = Math.max.apply(Math, factors);

    if (maxFactor > 1) {
        tlh /= maxFactor;
        tlv /= maxFactor;
        trh /= maxFactor;
        trv /= maxFactor;
        brh /= maxFactor;
        brv /= maxFactor;
        blh /= maxFactor;
        blv /= maxFactor;
    }

    var topWidth = bounds.width - trh;
    var rightHeight = bounds.height - brv;
    var bottomWidth = bounds.width - brh;
    var leftHeight = bounds.height - blv;

    return {
        topLeftOuter: tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left, bounds.top, tlh, tlv, CORNER.TOP_LEFT) : new _Vector2.default(bounds.left, bounds.top),
        topLeftInner: tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + borders[LEFT].borderWidth, bounds.top + borders[TOP].borderWidth, Math.max(0, tlh - borders[LEFT].borderWidth), Math.max(0, tlv - borders[TOP].borderWidth), CORNER.TOP_LEFT) : new _Vector2.default(bounds.left + borders[LEFT].borderWidth, bounds.top + borders[TOP].borderWidth),
        topRightOuter: trh > 0 || trv > 0 ? getCurvePoints(bounds.left + topWidth, bounds.top, trh, trv, CORNER.TOP_RIGHT) : new _Vector2.default(bounds.left + bounds.width, bounds.top),
        topRightInner: trh > 0 || trv > 0 ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width + borders[LEFT].borderWidth), bounds.top + borders[TOP].borderWidth, topWidth > bounds.width + borders[LEFT].borderWidth ? 0 : trh - borders[LEFT].borderWidth, trv - borders[TOP].borderWidth, CORNER.TOP_RIGHT) : new _Vector2.default(bounds.left + bounds.width - borders[RIGHT].borderWidth, bounds.top + borders[TOP].borderWidth),
        bottomRightOuter: brh > 0 || brv > 0 ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh, brv, CORNER.BOTTOM_RIGHT) : new _Vector2.default(bounds.left + bounds.width, bounds.top + bounds.height),
        bottomRightInner: brh > 0 || brv > 0 ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - borders[LEFT].borderWidth), bounds.top + Math.min(rightHeight, bounds.height + borders[TOP].borderWidth), Math.max(0, brh - borders[RIGHT].borderWidth), brv - borders[BOTTOM].borderWidth, CORNER.BOTTOM_RIGHT) : new _Vector2.default(bounds.left + bounds.width - borders[RIGHT].borderWidth, bounds.top + bounds.height - borders[BOTTOM].borderWidth),
        bottomLeftOuter: blh > 0 || blv > 0 ? getCurvePoints(bounds.left, bounds.top + leftHeight, blh, blv, CORNER.BOTTOM_LEFT) : new _Vector2.default(bounds.left, bounds.top + bounds.height),
        bottomLeftInner: blh > 0 || blv > 0 ? getCurvePoints(bounds.left + borders[LEFT].borderWidth, bounds.top + leftHeight, Math.max(0, blh - borders[LEFT].borderWidth), blv - borders[BOTTOM].borderWidth, CORNER.BOTTOM_LEFT) : new _Vector2.default(bounds.left + borders[LEFT].borderWidth, bounds.top + bounds.height - borders[BOTTOM].borderWidth)
    };
};

var CORNER = {
    TOP_LEFT: 0,
    TOP_RIGHT: 1,
    BOTTOM_RIGHT: 2,
    BOTTOM_LEFT: 3
};

var getCurvePoints = function getCurvePoints(x, y, r1, r2, position) {
    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);
    var ox = r1 * kappa; // control point offset horizontal
    var oy = r2 * kappa; // control point offset vertical
    var xm = x + r1; // x-middle
    var ym = y + r2; // y-middle

    switch (position) {
        case CORNER.TOP_LEFT:
            return new _BezierCurve2.default(new _Vector2.default(x, ym), new _Vector2.default(x, ym - oy), new _Vector2.default(xm - ox, y), new _Vector2.default(xm, y));
        case CORNER.TOP_RIGHT:
            return new _BezierCurve2.default(new _Vector2.default(x, y), new _Vector2.default(x + ox, y), new _Vector2.default(xm, ym - oy), new _Vector2.default(xm, ym));
        case CORNER.BOTTOM_RIGHT:
            return new _BezierCurve2.default(new _Vector2.default(xm, y), new _Vector2.default(xm, y + oy), new _Vector2.default(x + ox, ym), new _Vector2.default(x, ym));
        case CORNER.BOTTOM_LEFT:
        default:
            return new _BezierCurve2.default(new _Vector2.default(xm, ym), new _Vector2.default(xm - ox, ym), new _Vector2.default(x, y + oy), new _Vector2.default(x, y));
    }
};
}).call(this,require('_process'))
},{"./drawing/BezierCurve":41,"./drawing/Vector":45,"_process":72}],20:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.cloneWindow = exports.DocumentCloner = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Bounds = require('./Bounds');

var _Proxy = require('./Proxy');

var _ResourceLoader = require('./ResourceLoader');

var _ResourceLoader2 = _interopRequireDefault(_ResourceLoader);

var _Util = require('./Util');

var _background = require('./parsing/background');

var _CanvasRenderer = require('./renderer/CanvasRenderer');

var _CanvasRenderer2 = _interopRequireDefault(_CanvasRenderer);

var _PseudoNodeContent = require('./PseudoNodeContent');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';

var DocumentCloner = exports.DocumentCloner = function () {
    function DocumentCloner(element, options, logger, copyInline, renderer) {
        _classCallCheck(this, DocumentCloner);

        this.referenceElement = element;
        this.scrolledElements = [];
        this.copyStyles = copyInline;
        this.inlineImages = copyInline;
        this.logger = logger;
        this.options = options;
        this.renderer = renderer;
        this.resourceLoader = new _ResourceLoader2.default(options, logger, window);
        this.pseudoContentData = {
            counters: {},
            quoteDepth: 0
        };
        // $FlowFixMe
        this.documentElement = this.cloneNode(element.ownerDocument.documentElement);
    }

    _createClass(DocumentCloner, [{
        key: 'inlineAllImages',
        value: function inlineAllImages(node) {
            var _this = this;

            if (this.inlineImages && node) {
                var style = node.style;
                Promise.all((0, _background.parseBackgroundImage)(style.backgroundImage).map(function (backgroundImage) {
                    if (backgroundImage.method === 'url') {
                        return _this.resourceLoader.inlineImage(backgroundImage.args[0]).then(function (img) {
                            return img && typeof img.src === 'string' ? 'url("' + img.src + '")' : 'none';
                        }).catch(function (e) {
                            if (process.env.NODE_ENV !== 'production') {
                                _this.logger.log('Unable to load image', e);
                            }
                        });
                    }
                    return Promise.resolve('' + backgroundImage.prefix + backgroundImage.method + '(' + backgroundImage.args.join(',') + ')');
                })).then(function (backgroundImages) {
                    if (backgroundImages.length > 1) {
                        // TODO Multiple backgrounds somehow broken in Chrome
                        style.backgroundColor = '';
                    }
                    style.backgroundImage = backgroundImages.join(',');
                });

                if (node instanceof HTMLImageElement) {
                    this.resourceLoader.inlineImage(node.src).then(function (img) {
                        if (img && node instanceof HTMLImageElement && node.parentNode) {
                            var parentNode = node.parentNode;
                            var clonedChild = (0, _Util.copyCSSStyles)(node.style, img.cloneNode(false));
                            parentNode.replaceChild(clonedChild, node);
                        }
                    }).catch(function (e) {
                        if (process.env.NODE_ENV !== 'production') {
                            _this.logger.log('Unable to load image', e);
                        }
                    });
                }
            }
        }
    }, {
        key: 'inlineFonts',
        value: function inlineFonts(document) {
            var _this2 = this;

            return Promise.all(Array.from(document.styleSheets).map(function (sheet) {
                if (sheet.href) {
                    return fetch(sheet.href).then(function (res) {
                        return res.text();
                    }).then(function (text) {
                        return createStyleSheetFontsFromText(text, sheet.href);
                    }).catch(function (e) {
                        if (process.env.NODE_ENV !== 'production') {
                            _this2.logger.log('Unable to load stylesheet', e);
                        }
                        return [];
                    });
                }
                return getSheetFonts(sheet, document);
            })).then(function (fonts) {
                return fonts.reduce(function (acc, font) {
                    return acc.concat(font);
                }, []);
            }).then(function (fonts) {
                return Promise.all(fonts.map(function (font) {
                    return fetch(font.formats[0].src).then(function (response) {
                        return response.blob();
                    }).then(function (blob) {
                        return new Promise(function (resolve, reject) {
                            var reader = new FileReader();
                            reader.onerror = reject;
                            reader.onload = function () {
                                // $FlowFixMe
                                var result = reader.result;
                                resolve(result);
                            };
                            reader.readAsDataURL(blob);
                        });
                    }).then(function (dataUri) {
                        font.fontFace.setProperty('src', 'url("' + dataUri + '")');
                        return '@font-face {' + font.fontFace.cssText + ' ';
                    });
                }));
            }).then(function (fontCss) {
                var style = document.createElement('style');
                style.textContent = fontCss.join('\n');
                _this2.documentElement.appendChild(style);
            });
        }
    }, {
        key: 'createElementClone',
        value: function createElementClone(node) {
            var _this3 = this;

            if (this.copyStyles && node instanceof HTMLCanvasElement) {
                var img = node.ownerDocument.createElement('img');
                try {
                    img.src = node.toDataURL();
                    return img;
                } catch (e) {
                    if (process.env.NODE_ENV !== 'production') {
                        this.logger.log('Unable to clone canvas contents, canvas is tainted');
                    }
                }
            }

            if (node instanceof HTMLIFrameElement) {
                var tempIframe = node.cloneNode(false);
                var iframeKey = generateIframeKey();
                tempIframe.setAttribute('data-html2canvas-internal-iframe-key', iframeKey);

                var _parseBounds = (0, _Bounds.parseBounds)(node, 0, 0),
                    width = _parseBounds.width,
                    height = _parseBounds.height;

                this.resourceLoader.cache[iframeKey] = getIframeDocumentElement(node, this.options).then(function (documentElement) {
                    return _this3.renderer(documentElement, {
                        async: _this3.options.async,
                        allowTaint: _this3.options.allowTaint,
                        backgroundColor: '#ffffff',
                        canvas: null,
                        imageTimeout: _this3.options.imageTimeout,
                        logging: _this3.options.logging,
                        proxy: _this3.options.proxy,
                        removeContainer: _this3.options.removeContainer,
                        scale: _this3.options.scale,
                        foreignObjectRendering: _this3.options.foreignObjectRendering,
                        useCORS: _this3.options.useCORS,
                        target: new _CanvasRenderer2.default(),
                        width: width,
                        height: height,
                        x: 0,
                        y: 0,
                        windowWidth: documentElement.ownerDocument.defaultView.innerWidth,
                        windowHeight: documentElement.ownerDocument.defaultView.innerHeight,
                        scrollX: documentElement.ownerDocument.defaultView.pageXOffset,
                        scrollY: documentElement.ownerDocument.defaultView.pageYOffset
                    }, _this3.logger.child(iframeKey));
                }).then(function (canvas) {
                    return new Promise(function (resolve, reject) {
                        var iframeCanvas = document.createElement('img');
                        iframeCanvas.onload = function () {
                            return resolve(canvas);
                        };
                        iframeCanvas.onerror = reject;
                        iframeCanvas.src = canvas.toDataURL();
                        if (tempIframe.parentNode) {
                            tempIframe.parentNode.replaceChild((0, _Util.copyCSSStyles)(node.ownerDocument.defaultView.getComputedStyle(node), iframeCanvas), tempIframe);
                        }
                    });
                });
                return tempIframe;
            }

            if (node instanceof HTMLStyleElement && node.sheet && node.sheet.cssRules) {
                var self = this;
                var css = [].slice.call(node.sheet.cssRules, 0).reduce(function (css, rule) {
                    try {
                        if (rule && rule.cssText) {
                            return css + rule.cssText;
                        }
                        return css;
                    } catch (err) {
                        self.logger.log('Unable to access cssText property', rule.name);
                        return css;
                    }
                }, '');
                var style = node.cloneNode(false);
                style.textContent = css;
                return style;
            }

            return node.cloneNode(false);
        }
    }, {
        key: 'cloneNode',
        value: function cloneNode(node) {
            var clone = node.nodeType === Node.TEXT_NODE ? document.createTextNode(node.nodeValue) : this.createElementClone(node);

            var window = node.ownerDocument.defaultView;
            var style = node instanceof window.HTMLElement ? window.getComputedStyle(node) : null;
            var styleBefore = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':before') : null;
            var styleAfter = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':after') : null;

            if (this.referenceElement === node && clone instanceof window.HTMLElement) {
                this.clonedReferenceElement = clone;
            }

            if (clone instanceof window.HTMLBodyElement) {
                createPseudoHideStyles(clone);
            }

            var counters = (0, _PseudoNodeContent.parseCounterReset)(style, this.pseudoContentData);
            var contentBefore = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleBefore, this.pseudoContentData);

            for (var child = node.firstChild; child; child = child.nextSibling) {
                if (child.nodeType !== Node.ELEMENT_NODE || child.nodeName !== 'SCRIPT' &&
                // $FlowFixMe
                !child.hasAttribute(IGNORE_ATTRIBUTE) && (typeof this.options.ignoreElements !== 'function' ||
                // $FlowFixMe
                !this.options.ignoreElements(child))) {
                    if (!this.copyStyles || child.nodeName !== 'STYLE') {
                        clone.appendChild(this.cloneNode(child));
                    }
                }
            }

            var contentAfter = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleAfter, this.pseudoContentData);
            (0, _PseudoNodeContent.popCounters)(counters, this.pseudoContentData);

            if (node instanceof window.HTMLElement && clone instanceof window.HTMLElement) {
                if (styleBefore) {
                    this.inlineAllImages(inlinePseudoElement(node, clone, styleBefore, contentBefore, PSEUDO_BEFORE));
                }
                if (styleAfter) {
                    this.inlineAllImages(inlinePseudoElement(node, clone, styleAfter, contentAfter, PSEUDO_AFTER));
                }
                if (style && this.copyStyles && !(node instanceof HTMLIFrameElement)) {
                    (0, _Util.copyCSSStyles)(style, clone);
                }
                this.inlineAllImages(clone);
                if (node.scrollTop !== 0 || node.scrollLeft !== 0) {
                    this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);
                }
                switch (node.nodeName) {
                    case 'CANVAS':
                        if (!this.copyStyles) {
                            cloneCanvasContents(node, clone);
                        }
                        break;
                    case 'TEXTAREA':
                    case 'SELECT':
                        clone.value = node.value;
                        break;
                }
            }
            return clone;
        }
    }]);

    return DocumentCloner;
}();

var getSheetFonts = function getSheetFonts(sheet, document) {
    // $FlowFixMe
    return (sheet.cssRules ? Array.from(sheet.cssRules) : []).filter(function (rule) {
        return rule.type === CSSRule.FONT_FACE_RULE;
    }).map(function (rule) {
        var src = (0, _background.parseBackgroundImage)(rule.style.getPropertyValue('src'));
        var formats = [];
        for (var i = 0; i < src.length; i++) {
            if (src[i].method === 'url' && src[i + 1] && src[i + 1].method === 'format') {
                var a = document.createElement('a');
                a.href = src[i].args[0];
                if (document.body) {
                    document.body.appendChild(a);
                }

                var font = {
                    src: a.href,
                    format: src[i + 1].args[0]
                };
                formats.push(font);
            }
        }

        return {
            // TODO select correct format for browser),

            formats: formats.filter(function (font) {
                return (/^woff/i.test(font.format)
                );
            }),
            fontFace: rule.style
        };
    }).filter(function (font) {
        return font.formats.length;
    });
};

var createStyleSheetFontsFromText = function createStyleSheetFontsFromText(text, baseHref) {
    var doc = document.implementation.createHTMLDocument('');
    var base = document.createElement('base');
    // $FlowFixMe
    base.href = baseHref;
    var style = document.createElement('style');

    style.textContent = text;
    if (doc.head) {
        doc.head.appendChild(base);
    }
    if (doc.body) {
        doc.body.appendChild(style);
    }

    return style.sheet ? getSheetFonts(style.sheet, doc) : [];
};

var restoreOwnerScroll = function restoreOwnerScroll(ownerDocument, x, y) {
    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {
        ownerDocument.defaultView.scrollTo(x, y);
    }
};

var cloneCanvasContents = function cloneCanvasContents(canvas, clonedCanvas) {
    try {
        if (clonedCanvas) {
            clonedCanvas.width = canvas.width;
            clonedCanvas.height = canvas.height;
            var ctx = canvas.getContext('2d');
            var clonedCtx = clonedCanvas.getContext('2d');
            if (ctx) {
                clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);
            } else {
                clonedCtx.drawImage(canvas, 0, 0);
            }
        }
    } catch (e) {}
};

var inlinePseudoElement = function inlinePseudoElement(node, clone, style, contentItems, pseudoElt) {
    if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {
        return;
    }

    var anonymousReplacedElement = clone.ownerDocument.createElement('html2canvaspseudoelement');
    (0, _Util.copyCSSStyles)(style, anonymousReplacedElement);

    if (contentItems) {
        var len = contentItems.length;
        for (var i = 0; i < len; i++) {
            var item = contentItems[i];
            switch (item.type) {
                case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:
                    var img = clone.ownerDocument.createElement('img');
                    img.src = (0, _background.parseBackgroundImage)('url(' + item.value + ')')[0].args[0];
                    img.style.opacity = '1';
                    anonymousReplacedElement.appendChild(img);
                    break;
                case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.TEXT:
                    anonymousReplacedElement.appendChild(clone.ownerDocument.createTextNode(item.value));
                    break;
            }
        }
    }

    anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;
    clone.className += pseudoElt === PSEUDO_BEFORE ? ' ' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE : ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;
    if (pseudoElt === PSEUDO_BEFORE) {
        clone.insertBefore(anonymousReplacedElement, clone.firstChild);
    } else {
        clone.appendChild(anonymousReplacedElement);
    }

    return anonymousReplacedElement;
};

var URL_REGEXP = /^url\((.+)\)$/i;
var PSEUDO_BEFORE = ':before';
var PSEUDO_AFTER = ':after';
var PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';
var PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';

var PSEUDO_HIDE_ELEMENT_STYLE = '{\n    content: "" !important;\n    display: none !important;\n}';

var createPseudoHideStyles = function createPseudoHideStyles(body) {
    createStyles(body, '.' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + '\n         .' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);
};

var createStyles = function createStyles(body, styles) {
    var style = body.ownerDocument.createElement('style');
    style.innerHTML = styles;
    body.appendChild(style);
};

var initNode = function initNode(_ref) {
    var _ref2 = _slicedToArray(_ref, 3),
        element = _ref2[0],
        x = _ref2[1],
        y = _ref2[2];

    element.scrollLeft = x;
    element.scrollTop = y;
};

var generateIframeKey = function generateIframeKey() {
    return Math.ceil(Date.now() + Math.random() * 10000000).toString(16);
};

var DATA_URI_REGEXP = /^data:text\/(.+);(base64)?,(.*)$/i;

var getIframeDocumentElement = function getIframeDocumentElement(node, options) {
    try {
        return Promise.resolve(node.contentWindow.document.documentElement);
    } catch (e) {
        return options.proxy ? (0, _Proxy.Proxy)(node.src, options).then(function (html) {
            var match = html.match(DATA_URI_REGEXP);
            if (!match) {
                return Promise.reject();
            }

            return match[2] === 'base64' ? window.atob(decodeURIComponent(match[3])) : decodeURIComponent(match[3]);
        }).then(function (html) {
            return createIframeContainer(node.ownerDocument, (0, _Bounds.parseBounds)(node, 0, 0)).then(function (cloneIframeContainer) {
                var cloneWindow = cloneIframeContainer.contentWindow;
                var documentClone = cloneWindow.document;

                documentClone.open();
                documentClone.write(html);
                var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {
                    return documentClone.documentElement;
                });

                documentClone.close();
                return iframeLoad;
            });
        }) : Promise.reject();
    }
};

var createIframeContainer = function createIframeContainer(ownerDocument, bounds) {
    var cloneIframeContainer = ownerDocument.createElement('iframe');

    cloneIframeContainer.className = 'html2canvas-container';
    cloneIframeContainer.style.visibility = 'hidden';
    cloneIframeContainer.style.position = 'fixed';
    cloneIframeContainer.style.left = '-10000px';
    cloneIframeContainer.style.top = '0px';
    cloneIframeContainer.style.border = '0';
    cloneIframeContainer.width = bounds.width.toString();
    cloneIframeContainer.height = bounds.height.toString();
    cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it
    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');
    if (!ownerDocument.body) {
        return Promise.reject(process.env.NODE_ENV !== 'production' ? 'Body element not found in Document that is getting rendered' : '');
    }

    ownerDocument.body.appendChild(cloneIframeContainer);

    return Promise.resolve(cloneIframeContainer);
};

var iframeLoader = function iframeLoader(cloneIframeContainer) {
    var cloneWindow = cloneIframeContainer.contentWindow;
    var documentClone = cloneWindow.document;

    return new Promise(function (resolve, reject) {
        cloneWindow.onload = cloneIframeContainer.onload = documentClone.onreadystatechange = function () {
            var interval = setInterval(function () {
                if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {
                    clearInterval(interval);
                    resolve(cloneIframeContainer);
                }
            }, 50);
        };
    });
};

var cloneWindow = exports.cloneWindow = function cloneWindow(ownerDocument, bounds, referenceElement, options, logger, renderer) {
    var cloner = new DocumentCloner(referenceElement, options, logger, false, renderer);
    var scrollX = ownerDocument.defaultView.pageXOffset;
    var scrollY = ownerDocument.defaultView.pageYOffset;

    return createIframeContainer(ownerDocument, bounds).then(function (cloneIframeContainer) {
        var cloneWindow = cloneIframeContainer.contentWindow;
        var documentClone = cloneWindow.document;

        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle
             if window url is about:blank, we can assign the url to current by writing onto the document
             */

        var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {
            cloner.scrolledElements.forEach(initNode);
            cloneWindow.scrollTo(bounds.left, bounds.top);
            if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (cloneWindow.scrollY !== bounds.top || cloneWindow.scrollX !== bounds.left)) {
                documentClone.documentElement.style.top = -bounds.top + 'px';
                documentClone.documentElement.style.left = -bounds.left + 'px';
                documentClone.documentElement.style.position = 'absolute';
            }

            var result = Promise.resolve([cloneIframeContainer, cloner.clonedReferenceElement, cloner.resourceLoader]);

            var onclone = options.onclone;

            return cloner.clonedReferenceElement instanceof cloneWindow.HTMLElement || cloner.clonedReferenceElement instanceof ownerDocument.defaultView.HTMLElement || cloner.clonedReferenceElement instanceof HTMLElement ? typeof onclone === 'function' ? Promise.resolve().then(function () {
                return onclone(documentClone);
            }).then(function () {
                return result;
            }) : result : Promise.reject(process.env.NODE_ENV !== 'production' ? 'Error finding the ' + referenceElement.nodeName + ' in the cloned document' : '');
        });

        documentClone.open();
        documentClone.write(serializeDoctype(document.doctype) + '<html></html>');
        // Chrome scrolls the parent document for some reason after the write to the cloned window???
        restoreOwnerScroll(referenceElement.ownerDocument, scrollX, scrollY);
        documentClone.replaceChild(documentClone.adoptNode(cloner.documentElement), documentClone.documentElement);
        documentClone.close();

        return iframeLoad;
    });
};

var serializeDoctype = function serializeDoctype(doctype) {
    var str = '';
    if (doctype) {
        str += '<!DOCTYPE ';
        if (doctype.name) {
            str += doctype.name;
        }

        if (doctype.internalSubset) {
            str += doctype.internalSubset;
        }

        if (doctype.publicId) {
            str += '"' + doctype.publicId + '"';
        }

        if (doctype.systemId) {
            str += '"' + doctype.systemId + '"';
        }

        str += '>';
    }

    return str;
};
}).call(this,require('_process'))
},{"./Bounds":19,"./Proxy":31,"./PseudoNodeContent":32,"./ResourceLoader":34,"./Util":39,"./parsing/background":47,"./renderer/CanvasRenderer":68,"_process":72}],21:[function(require,module,exports){
'use strict';

// http://dev.w3.org/csswg/css-color/

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var HEX3 = /^#([a-f0-9]{3})$/i;
var hex3 = function hex3(value) {
    var match = value.match(HEX3);
    if (match) {
        return [parseInt(match[1][0] + match[1][0], 16), parseInt(match[1][1] + match[1][1], 16), parseInt(match[1][2] + match[1][2], 16), null];
    }
    return false;
};

var HEX6 = /^#([a-f0-9]{6})$/i;
var hex6 = function hex6(value) {
    var match = value.match(HEX6);
    if (match) {
        return [parseInt(match[1].substring(0, 2), 16), parseInt(match[1].substring(2, 4), 16), parseInt(match[1].substring(4, 6), 16), null];
    }
    return false;
};

var RGB = /^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;
var rgb = function rgb(value) {
    var match = value.match(RGB);
    if (match) {
        return [Number(match[1]), Number(match[2]), Number(match[3]), null];
    }
    return false;
};

var RGBA = /^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;
var rgba = function rgba(value) {
    var match = value.match(RGBA);
    if (match && match.length > 4) {
        return [Number(match[1]), Number(match[2]), Number(match[3]), Number(match[4])];
    }
    return false;
};

var fromArray = function fromArray(array) {
    return [Math.min(array[0], 255), Math.min(array[1], 255), Math.min(array[2], 255), array.length > 3 ? array[3] : null];
};

var namedColor = function namedColor(name) {
    var color = NAMED_COLORS[name.toLowerCase()];
    return color ? color : false;
};

var Color = function () {
    function Color(value) {
        _classCallCheck(this, Color);

        var _ref = Array.isArray(value) ? fromArray(value) : hex3(value) || rgb(value) || rgba(value) || namedColor(value) || hex6(value) || [0, 0, 0, null],
            _ref2 = _slicedToArray(_ref, 4),
            r = _ref2[0],
            g = _ref2[1],
            b = _ref2[2],
            a = _ref2[3];

        this.r = r;
        this.g = g;
        this.b = b;
        this.a = a;
    }

    _createClass(Color, [{
        key: 'isTransparent',
        value: function isTransparent() {
            return this.a === 0;
        }
    }, {
        key: 'toString',
        value: function toString() {
            return this.a !== null && this.a !== 1 ? 'rgba(' + this.r + ',' + this.g + ',' + this.b + ',' + this.a + ')' : 'rgb(' + this.r + ',' + this.g + ',' + this.b + ')';
        }
    }]);

    return Color;
}();

exports.default = Color;


var NAMED_COLORS = {
    transparent: [0, 0, 0, 0],
    aliceblue: [240, 248, 255, null],
    antiquewhite: [250, 235, 215, null],
    aqua: [0, 255, 255, null],
    aquamarine: [127, 255, 212, null],
    azure: [240, 255, 255, null],
    beige: [245, 245, 220, null],
    bisque: [255, 228, 196, null],
    black: [0, 0, 0, null],
    blanchedalmond: [255, 235, 205, null],
    blue: [0, 0, 255, null],
    blueviolet: [138, 43, 226, null],
    brown: [165, 42, 42, null],
    burlywood: [222, 184, 135, null],
    cadetblue: [95, 158, 160, null],
    chartreuse: [127, 255, 0, null],
    chocolate: [210, 105, 30, null],
    coral: [255, 127, 80, null],
    cornflowerblue: [100, 149, 237, null],
    cornsilk: [255, 248, 220, null],
    crimson: [220, 20, 60, null],
    cyan: [0, 255, 255, null],
    darkblue: [0, 0, 139, null],
    darkcyan: [0, 139, 139, null],
    darkgoldenrod: [184, 134, 11, null],
    darkgray: [169, 169, 169, null],
    darkgreen: [0, 100, 0, null],
    darkgrey: [169, 169, 169, null],
    darkkhaki: [189, 183, 107, null],
    darkmagenta: [139, 0, 139, null],
    darkolivegreen: [85, 107, 47, null],
    darkorange: [255, 140, 0, null],
    darkorchid: [153, 50, 204, null],
    darkred: [139, 0, 0, null],
    darksalmon: [233, 150, 122, null],
    darkseagreen: [143, 188, 143, null],
    darkslateblue: [72, 61, 139, null],
    darkslategray: [47, 79, 79, null],
    darkslategrey: [47, 79, 79, null],
    darkturquoise: [0, 206, 209, null],
    darkviolet: [148, 0, 211, null],
    deeppink: [255, 20, 147, null],
    deepskyblue: [0, 191, 255, null],
    dimgray: [105, 105, 105, null],
    dimgrey: [105, 105, 105, null],
    dodgerblue: [30, 144, 255, null],
    firebrick: [178, 34, 34, null],
    floralwhite: [255, 250, 240, null],
    forestgreen: [34, 139, 34, null],
    fuchsia: [255, 0, 255, null],
    gainsboro: [220, 220, 220, null],
    ghostwhite: [248, 248, 255, null],
    gold: [255, 215, 0, null],
    goldenrod: [218, 165, 32, null],
    gray: [128, 128, 128, null],
    green: [0, 128, 0, null],
    greenyellow: [173, 255, 47, null],
    grey: [128, 128, 128, null],
    honeydew: [240, 255, 240, null],
    hotpink: [255, 105, 180, null],
    indianred: [205, 92, 92, null],
    indigo: [75, 0, 130, null],
    ivory: [255, 255, 240, null],
    khaki: [240, 230, 140, null],
    lavender: [230, 230, 250, null],
    lavenderblush: [255, 240, 245, null],
    lawngreen: [124, 252, 0, null],
    lemonchiffon: [255, 250, 205, null],
    lightblue: [173, 216, 230, null],
    lightcoral: [240, 128, 128, null],
    lightcyan: [224, 255, 255, null],
    lightgoldenrodyellow: [250, 250, 210, null],
    lightgray: [211, 211, 211, null],
    lightgreen: [144, 238, 144, null],
    lightgrey: [211, 211, 211, null],
    lightpink: [255, 182, 193, null],
    lightsalmon: [255, 160, 122, null],
    lightseagreen: [32, 178, 170, null],
    lightskyblue: [135, 206, 250, null],
    lightslategray: [119, 136, 153, null],
    lightslategrey: [119, 136, 153, null],
    lightsteelblue: [176, 196, 222, null],
    lightyellow: [255, 255, 224, null],
    lime: [0, 255, 0, null],
    limegreen: [50, 205, 50, null],
    linen: [250, 240, 230, null],
    magenta: [255, 0, 255, null],
    maroon: [128, 0, 0, null],
    mediumaquamarine: [102, 205, 170, null],
    mediumblue: [0, 0, 205, null],
    mediumorchid: [186, 85, 211, null],
    mediumpurple: [147, 112, 219, null],
    mediumseagreen: [60, 179, 113, null],
    mediumslateblue: [123, 104, 238, null],
    mediumspringgreen: [0, 250, 154, null],
    mediumturquoise: [72, 209, 204, null],
    mediumvioletred: [199, 21, 133, null],
    midnightblue: [25, 25, 112, null],
    mintcream: [245, 255, 250, null],
    mistyrose: [255, 228, 225, null],
    moccasin: [255, 228, 181, null],
    navajowhite: [255, 222, 173, null],
    navy: [0, 0, 128, null],
    oldlace: [253, 245, 230, null],
    olive: [128, 128, 0, null],
    olivedrab: [107, 142, 35, null],
    orange: [255, 165, 0, null],
    orangered: [255, 69, 0, null],
    orchid: [218, 112, 214, null],
    palegoldenrod: [238, 232, 170, null],
    palegreen: [152, 251, 152, null],
    paleturquoise: [175, 238, 238, null],
    palevioletred: [219, 112, 147, null],
    papayawhip: [255, 239, 213, null],
    peachpuff: [255, 218, 185, null],
    peru: [205, 133, 63, null],
    pink: [255, 192, 203, null],
    plum: [221, 160, 221, null],
    powderblue: [176, 224, 230, null],
    purple: [128, 0, 128, null],
    rebeccapurple: [102, 51, 153, null],
    red: [255, 0, 0, null],
    rosybrown: [188, 143, 143, null],
    royalblue: [65, 105, 225, null],
    saddlebrown: [139, 69, 19, null],
    salmon: [250, 128, 114, null],
    sandybrown: [244, 164, 96, null],
    seagreen: [46, 139, 87, null],
    seashell: [255, 245, 238, null],
    sienna: [160, 82, 45, null],
    silver: [192, 192, 192, null],
    skyblue: [135, 206, 235, null],
    slateblue: [106, 90, 205, null],
    slategray: [112, 128, 144, null],
    slategrey: [112, 128, 144, null],
    snow: [255, 250, 250, null],
    springgreen: [0, 255, 127, null],
    steelblue: [70, 130, 180, null],
    tan: [210, 180, 140, null],
    teal: [0, 128, 128, null],
    thistle: [216, 191, 216, null],
    tomato: [255, 99, 71, null],
    turquoise: [64, 224, 208, null],
    violet: [238, 130, 238, null],
    wheat: [245, 222, 179, null],
    white: [255, 255, 255, null],
    whitesmoke: [245, 245, 245, null],
    yellow: [255, 255, 0, null],
    yellowgreen: [154, 205, 50, null]
};

var TRANSPARENT = exports.TRANSPARENT = new Color([0, 0, 0, 0]);
},{}],22:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _ForeignObjectRenderer = require('./renderer/ForeignObjectRenderer');

var testRangeBounds = function testRangeBounds(document) {
    var TEST_HEIGHT = 123;

    if (document.createRange) {
        var range = document.createRange();
        if (range.getBoundingClientRect) {
            var testElement = document.createElement('boundtest');
            testElement.style.height = TEST_HEIGHT + 'px';
            testElement.style.display = 'block';
            document.body.appendChild(testElement);

            range.selectNode(testElement);
            var rangeBounds = range.getBoundingClientRect();
            var rangeHeight = Math.round(rangeBounds.height);
            document.body.removeChild(testElement);
            if (rangeHeight === TEST_HEIGHT) {
                return true;
            }
        }
    }

    return false;
};

// iOS 10.3 taints canvas with base64 images unless crossOrigin = 'anonymous'
var testBase64 = function testBase64(document, src) {
    var img = new Image();
    var canvas = document.createElement('canvas');
    var ctx = canvas.getContext('2d');

    return new Promise(function (resolve) {
        // Single pixel base64 image renders fine on iOS 10.3???
        img.src = src;

        var onload = function onload() {
            try {
                ctx.drawImage(img, 0, 0);
                canvas.toDataURL();
            } catch (e) {
                return resolve(false);
            }

            return resolve(true);
        };

        img.onload = onload;
        img.onerror = function () {
            return resolve(false);
        };

        if (img.complete === true) {
            setTimeout(function () {
                onload();
            }, 500);
        }
    });
};

var testCORS = function testCORS() {
    return typeof new Image().crossOrigin !== 'undefined';
};

var testResponseType = function testResponseType() {
    return typeof new XMLHttpRequest().responseType === 'string';
};

var testSVG = function testSVG(document) {
    var img = new Image();
    var canvas = document.createElement('canvas');
    var ctx = canvas.getContext('2d');
    img.src = 'data:image/svg+xml,<svg xmlns=\'http://www.w3.org/2000/svg\'></svg>';

    try {
        ctx.drawImage(img, 0, 0);
        canvas.toDataURL();
    } catch (e) {
        return false;
    }
    return true;
};

var isGreenPixel = function isGreenPixel(data) {
    return data[0] === 0 && data[1] === 255 && data[2] === 0 && data[3] === 255;
};

var testForeignObject = function testForeignObject(document) {
    var canvas = document.createElement('canvas');
    var size = 100;
    canvas.width = size;
    canvas.height = size;
    var ctx = canvas.getContext('2d');
    ctx.fillStyle = 'rgb(0, 255, 0)';
    ctx.fillRect(0, 0, size, size);

    var img = new Image();
    var greenImageSrc = canvas.toDataURL();
    img.src = greenImageSrc;
    var svg = (0, _ForeignObjectRenderer.createForeignObjectSVG)(size, size, 0, 0, img);
    ctx.fillStyle = 'red';
    ctx.fillRect(0, 0, size, size);

    return (0, _ForeignObjectRenderer.loadSerializedSVG)(svg).then(function (img) {
        ctx.drawImage(img, 0, 0);
        var data = ctx.getImageData(0, 0, size, size).data;
        ctx.fillStyle = 'red';
        ctx.fillRect(0, 0, size, size);

        var node = document.createElement('div');
        node.style.backgroundImage = 'url(' + greenImageSrc + ')';
        node.style.height = size + 'px';
        // Firefox 55 does not render inline <img /> tags
        return isGreenPixel(data) ? (0, _ForeignObjectRenderer.loadSerializedSVG)((0, _ForeignObjectRenderer.createForeignObjectSVG)(size, size, 0, 0, node)) : Promise.reject(false);
    }).then(function (img) {
        ctx.drawImage(img, 0, 0);
        // Edge does not render background-images
        return isGreenPixel(ctx.getImageData(0, 0, size, size).data);
    }).catch(function (e) {
        return false;
    });
};

var FEATURES = {
    // $FlowFixMe - get/set properties not yet supported
    get SUPPORT_RANGE_BOUNDS() {
        'use strict';

        var value = testRangeBounds(document);
        Object.defineProperty(FEATURES, 'SUPPORT_RANGE_BOUNDS', { value: value });
        return value;
    },
    // $FlowFixMe - get/set properties not yet supported
    get SUPPORT_SVG_DRAWING() {
        'use strict';

        var value = testSVG(document);
        Object.defineProperty(FEATURES, 'SUPPORT_SVG_DRAWING', { value: value });
        return value;
    },
    // $FlowFixMe - get/set properties not yet supported
    get SUPPORT_BASE64_DRAWING() {
        'use strict';

        return function (src) {
            var _value = testBase64(document, src);
            Object.defineProperty(FEATURES, 'SUPPORT_BASE64_DRAWING', { value: function value() {
                    return _value;
                } });
            return _value;
        };
    },
    // $FlowFixMe - get/set properties not yet supported
    get SUPPORT_FOREIGNOBJECT_DRAWING() {
        'use strict';

        var value = typeof Array.from === 'function' && typeof window.fetch === 'function' ? testForeignObject(document) : Promise.resolve(false);
        Object.defineProperty(FEATURES, 'SUPPORT_FOREIGNOBJECT_DRAWING', { value: value });
        return value;
    },
    // $FlowFixMe - get/set properties not yet supported
    get SUPPORT_CORS_IMAGES() {
        'use strict';

        var value = testCORS();
        Object.defineProperty(FEATURES, 'SUPPORT_CORS_IMAGES', { value: value });
        return value;
    },
    // $FlowFixMe - get/set properties not yet supported
    get SUPPORT_RESPONSE_TYPE() {
        'use strict';

        var value = testResponseType();
        Object.defineProperty(FEATURES, 'SUPPORT_RESPONSE_TYPE', { value: value });
        return value;
    },
    // $FlowFixMe - get/set properties not yet supported
    get SUPPORT_CORS_XHR() {
        'use strict';

        var value = 'withCredentials' in new XMLHttpRequest();
        Object.defineProperty(FEATURES, 'SUPPORT_CORS_XHR', { value: value });
        return value;
    }
};

exports.default = FEATURES;
},{"./renderer/ForeignObjectRenderer":69}],23:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
        value: true
});
exports.FontMetrics = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Util = require('./Util');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SAMPLE_TEXT = 'Hidden Text';

var FontMetrics = exports.FontMetrics = function () {
        function FontMetrics(document) {
                _classCallCheck(this, FontMetrics);

                this._data = {};
                this._document = document;
        }

        _createClass(FontMetrics, [{
                key: '_parseMetrics',
                value: function _parseMetrics(font) {
                        var container = this._document.createElement('div');
                        var img = this._document.createElement('img');
                        var span = this._document.createElement('span');

                        var body = this._document.body;
                        if (!body) {
                                throw new Error(process.env.NODE_ENV !== 'production' ? 'No document found for font metrics' : '');
                        }

                        container.style.visibility = 'hidden';
                        container.style.fontFamily = font.fontFamily;
                        container.style.fontSize = font.fontSize;
                        container.style.margin = '0';
                        container.style.padding = '0';

                        body.appendChild(container);

                        img.src = _Util.SMALL_IMAGE;
                        img.width = 1;
                        img.height = 1;

                        img.style.margin = '0';
                        img.style.padding = '0';
                        img.style.verticalAlign = 'baseline';

                        span.style.fontFamily = font.fontFamily;
                        span.style.fontSize = font.fontSize;
                        span.style.margin = '0';
                        span.style.padding = '0';

                        span.appendChild(this._document.createTextNode(SAMPLE_TEXT));
                        container.appendChild(span);
                        container.appendChild(img);
                        var baseline = img.offsetTop - span.offsetTop + 2;

                        container.removeChild(span);
                        container.appendChild(this._document.createTextNode(SAMPLE_TEXT));

                        container.style.lineHeight = 'normal';
                        img.style.verticalAlign = 'super';

                        var middle = img.offsetTop - container.offsetTop + 2;

                        body.removeChild(container);

                        return { baseline: baseline, middle: middle };
                }
        }, {
                key: 'getMetrics',
                value: function getMetrics(font) {
                        var key = font.fontFamily + ' ' + font.fontSize;
                        if (this._data[key] === undefined) {
                                this._data[key] = this._parseMetrics(font);
                        }

                        return this._data[key];
                }
        }]);

        return FontMetrics;
}();
}).call(this,require('_process'))
},{"./Util":39,"_process":72}],24:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.transformWebkitRadialGradientArgs = exports.parseGradient = exports.RadialGradient = exports.LinearGradient = exports.RADIAL_GRADIENT_SHAPE = exports.GRADIENT_TYPE = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _NodeContainer = require('./NodeContainer');

var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

var _Angle = require('./Angle');

var _Color = require('./Color');

var _Color2 = _interopRequireDefault(_Color);

var _Length = require('./Length');

var _Length2 = _interopRequireDefault(_Length);

var _Util = require('./Util');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SIDE_OR_CORNER = /^(to )?(left|top|right|bottom)( (left|top|right|bottom))?$/i;
var PERCENTAGE_ANGLES = /^([+-]?\d*\.?\d+)% ([+-]?\d*\.?\d+)%$/i;
var ENDS_WITH_LENGTH = /(px)|%|( 0)$/i;
var FROM_TO_COLORSTOP = /^(from|to|color-stop)\((?:([\d.]+)(%)?,\s*)?(.+?)\)$/i;
var RADIAL_SHAPE_DEFINITION = /^\s*(circle|ellipse)?\s*((?:([\d.]+)(px|r?em|%)\s*(?:([\d.]+)(px|r?em|%))?)|closest-side|closest-corner|farthest-side|farthest-corner)?\s*(?:at\s*(?:(left|center|right)|([\d.]+)(px|r?em|%))\s+(?:(top|center|bottom)|([\d.]+)(px|r?em|%)))?(?:\s|$)/i;

var GRADIENT_TYPE = exports.GRADIENT_TYPE = {
    LINEAR_GRADIENT: 0,
    RADIAL_GRADIENT: 1
};

var RADIAL_GRADIENT_SHAPE = exports.RADIAL_GRADIENT_SHAPE = {
    CIRCLE: 0,
    ELLIPSE: 1
};

var LENGTH_FOR_POSITION = {
    left: new _Length2.default('0%'),
    top: new _Length2.default('0%'),
    center: new _Length2.default('50%'),
    right: new _Length2.default('100%'),
    bottom: new _Length2.default('100%')
};

var LinearGradient = exports.LinearGradient = function LinearGradient(colorStops, direction) {
    _classCallCheck(this, LinearGradient);

    this.type = GRADIENT_TYPE.LINEAR_GRADIENT;
    this.colorStops = colorStops;
    this.direction = direction;
};

var RadialGradient = exports.RadialGradient = function RadialGradient(colorStops, shape, center, radius) {
    _classCallCheck(this, RadialGradient);

    this.type = GRADIENT_TYPE.RADIAL_GRADIENT;
    this.colorStops = colorStops;
    this.shape = shape;
    this.center = center;
    this.radius = radius;
};

var parseGradient = exports.parseGradient = function parseGradient(container, _ref, bounds) {
    var args = _ref.args,
        method = _ref.method,
        prefix = _ref.prefix;

    if (method === 'linear-gradient') {
        return parseLinearGradient(args, bounds, !!prefix);
    } else if (method === 'gradient' && args[0] === 'linear') {
        // TODO handle correct angle
        return parseLinearGradient(['to bottom'].concat(transformObsoleteColorStops(args.slice(3))), bounds, !!prefix);
    } else if (method === 'radial-gradient') {
        return parseRadialGradient(container, prefix === '-webkit-' ? transformWebkitRadialGradientArgs(args) : args, bounds);
    } else if (method === 'gradient' && args[0] === 'radial') {
        return parseRadialGradient(container, transformObsoleteColorStops(transformWebkitRadialGradientArgs(args.slice(1))), bounds);
    }
};

var parseColorStops = function parseColorStops(args, firstColorStopIndex, lineLength) {
    var colorStops = [];

    for (var i = firstColorStopIndex; i < args.length; i++) {
        var value = args[i];
        var HAS_LENGTH = ENDS_WITH_LENGTH.test(value);
        var lastSpaceIndex = value.lastIndexOf(' ');
        var _color = new _Color2.default(HAS_LENGTH ? value.substring(0, lastSpaceIndex) : value);
        var _stop = HAS_LENGTH ? new _Length2.default(value.substring(lastSpaceIndex + 1)) : i === firstColorStopIndex ? new _Length2.default('0%') : i === args.length - 1 ? new _Length2.default('100%') : null;
        colorStops.push({ color: _color, stop: _stop });
    }

    var absoluteValuedColorStops = colorStops.map(function (_ref2) {
        var color = _ref2.color,
            stop = _ref2.stop;

        var absoluteStop = lineLength === 0 ? 0 : stop ? stop.getAbsoluteValue(lineLength) / lineLength : null;

        return {
            color: color,
            // $FlowFixMe
            stop: absoluteStop
        };
    });

    var previousColorStop = absoluteValuedColorStops[0].stop;
    for (var _i = 0; _i < absoluteValuedColorStops.length; _i++) {
        if (previousColorStop !== null) {
            var _stop2 = absoluteValuedColorStops[_i].stop;
            if (_stop2 === null) {
                var n = _i;
                while (absoluteValuedColorStops[n].stop === null) {
                    n++;
                }
                var steps = n - _i + 1;
                var nextColorStep = absoluteValuedColorStops[n].stop;
                var stepSize = (nextColorStep - previousColorStop) / steps;
                for (; _i < n; _i++) {
                    previousColorStop = absoluteValuedColorStops[_i].stop = previousColorStop + stepSize;
                }
            } else {
                previousColorStop = _stop2;
            }
        }
    }

    return absoluteValuedColorStops;
};

var parseLinearGradient = function parseLinearGradient(args, bounds, hasPrefix) {
    var angle = (0, _Angle.parseAngle)(args[0]);
    var HAS_SIDE_OR_CORNER = SIDE_OR_CORNER.test(args[0]);
    var HAS_DIRECTION = HAS_SIDE_OR_CORNER || angle !== null || PERCENTAGE_ANGLES.test(args[0]);
    var direction = HAS_DIRECTION ? angle !== null ? calculateGradientDirection(
    // if there is a prefix, the 0° angle points due East (instead of North per W3C)
    hasPrefix ? angle - Math.PI * 0.5 : angle, bounds) : HAS_SIDE_OR_CORNER ? parseSideOrCorner(args[0], bounds) : parsePercentageAngle(args[0], bounds) : calculateGradientDirection(Math.PI, bounds);
    var firstColorStopIndex = HAS_DIRECTION ? 1 : 0;

    // TODO: Fix some inaccuracy with color stops with px values
    var lineLength = Math.min((0, _Util.distance)(Math.abs(direction.x0) + Math.abs(direction.x1), Math.abs(direction.y0) + Math.abs(direction.y1)), bounds.width * 2, bounds.height * 2);

    return new LinearGradient(parseColorStops(args, firstColorStopIndex, lineLength), direction);
};

var parseRadialGradient = function parseRadialGradient(container, args, bounds) {
    var m = args[0].match(RADIAL_SHAPE_DEFINITION);
    var shape = m && (m[1] === 'circle' || // explicit shape specification
    m[3] !== undefined && m[5] === undefined) // only one radius coordinate
    ? RADIAL_GRADIENT_SHAPE.CIRCLE : RADIAL_GRADIENT_SHAPE.ELLIPSE;
    var radius = {};
    var center = {};

    if (m) {
        // Radius
        if (m[3] !== undefined) {
            radius.x = (0, _Length.calculateLengthFromValueWithUnit)(container, m[3], m[4]).getAbsoluteValue(bounds.width);
        }

        if (m[5] !== undefined) {
            radius.y = (0, _Length.calculateLengthFromValueWithUnit)(container, m[5], m[6]).getAbsoluteValue(bounds.height);
        }

        // Position
        if (m[7]) {
            center.x = LENGTH_FOR_POSITION[m[7].toLowerCase()];
        } else if (m[8] !== undefined) {
            center.x = (0, _Length.calculateLengthFromValueWithUnit)(container, m[8], m[9]);
        }

        if (m[10]) {
            center.y = LENGTH_FOR_POSITION[m[10].toLowerCase()];
        } else if (m[11] !== undefined) {
            center.y = (0, _Length.calculateLengthFromValueWithUnit)(container, m[11], m[12]);
        }
    }

    var gradientCenter = {
        x: center.x === undefined ? bounds.width / 2 : center.x.getAbsoluteValue(bounds.width),
        y: center.y === undefined ? bounds.height / 2 : center.y.getAbsoluteValue(bounds.height)
    };
    var gradientRadius = calculateRadius(m && m[2] || 'farthest-corner', shape, gradientCenter, radius, bounds);

    return new RadialGradient(parseColorStops(args, m ? 1 : 0, Math.min(gradientRadius.x, gradientRadius.y)), shape, gradientCenter, gradientRadius);
};

var calculateGradientDirection = function calculateGradientDirection(radian, bounds) {
    var width = bounds.width;
    var height = bounds.height;
    var HALF_WIDTH = width * 0.5;
    var HALF_HEIGHT = height * 0.5;
    var lineLength = Math.abs(width * Math.sin(radian)) + Math.abs(height * Math.cos(radian));
    var HALF_LINE_LENGTH = lineLength / 2;

    var x0 = HALF_WIDTH + Math.sin(radian) * HALF_LINE_LENGTH;
    var y0 = HALF_HEIGHT - Math.cos(radian) * HALF_LINE_LENGTH;
    var x1 = width - x0;
    var y1 = height - y0;

    return { x0: x0, x1: x1, y0: y0, y1: y1 };
};

var parseTopRight = function parseTopRight(bounds) {
    return Math.acos(bounds.width / 2 / ((0, _Util.distance)(bounds.width, bounds.height) / 2));
};

var parseSideOrCorner = function parseSideOrCorner(side, bounds) {
    switch (side) {
        case 'bottom':
        case 'to top':
            return calculateGradientDirection(0, bounds);
        case 'left':
        case 'to right':
            return calculateGradientDirection(Math.PI / 2, bounds);
        case 'right':
        case 'to left':
            return calculateGradientDirection(3 * Math.PI / 2, bounds);
        case 'top right':
        case 'right top':
        case 'to bottom left':
        case 'to left bottom':
            return calculateGradientDirection(Math.PI + parseTopRight(bounds), bounds);
        case 'top left':
        case 'left top':
        case 'to bottom right':
        case 'to right bottom':
            return calculateGradientDirection(Math.PI - parseTopRight(bounds), bounds);
        case 'bottom left':
        case 'left bottom':
        case 'to top right':
        case 'to right top':
            return calculateGradientDirection(parseTopRight(bounds), bounds);
        case 'bottom right':
        case 'right bottom':
        case 'to top left':
        case 'to left top':
            return calculateGradientDirection(2 * Math.PI - parseTopRight(bounds), bounds);
        case 'top':
        case 'to bottom':
        default:
            return calculateGradientDirection(Math.PI, bounds);
    }
};

var parsePercentageAngle = function parsePercentageAngle(angle, bounds) {
    var _angle$split$map = angle.split(' ').map(parseFloat),
        _angle$split$map2 = _slicedToArray(_angle$split$map, 2),
        left = _angle$split$map2[0],
        top = _angle$split$map2[1];

    var ratio = left / 100 * bounds.width / (top / 100 * bounds.height);

    return calculateGradientDirection(Math.atan(isNaN(ratio) ? 1 : ratio) + Math.PI / 2, bounds);
};

var findCorner = function findCorner(bounds, x, y, closest) {
    var corners = [{ x: 0, y: 0 }, { x: 0, y: bounds.height }, { x: bounds.width, y: 0 }, { x: bounds.width, y: bounds.height }];

    // $FlowFixMe
    return corners.reduce(function (stat, corner) {
        var d = (0, _Util.distance)(x - corner.x, y - corner.y);
        if (closest ? d < stat.optimumDistance : d > stat.optimumDistance) {
            return {
                optimumCorner: corner,
                optimumDistance: d
            };
        }

        return stat;
    }, {
        optimumDistance: closest ? Infinity : -Infinity,
        optimumCorner: null
    }).optimumCorner;
};

var calculateRadius = function calculateRadius(extent, shape, center, radius, bounds) {
    var x = center.x;
    var y = center.y;
    var rx = 0;
    var ry = 0;

    switch (extent) {
        case 'closest-side':
            // The ending shape is sized so that that it exactly meets the side of the gradient box closest to the gradient’s center.
            // If the shape is an ellipse, it exactly meets the closest side in each dimension.
            if (shape === RADIAL_GRADIENT_SHAPE.CIRCLE) {
                rx = ry = Math.min(Math.abs(x), Math.abs(x - bounds.width), Math.abs(y), Math.abs(y - bounds.height));
            } else if (shape === RADIAL_GRADIENT_SHAPE.ELLIPSE) {
                rx = Math.min(Math.abs(x), Math.abs(x - bounds.width));
                ry = Math.min(Math.abs(y), Math.abs(y - bounds.height));
            }
            break;

        case 'closest-corner':
            // The ending shape is sized so that that it passes through the corner of the gradient box closest to the gradient’s center.
            // If the shape is an ellipse, the ending shape is given the same aspect-ratio it would have if closest-side were specified.
            if (shape === RADIAL_GRADIENT_SHAPE.CIRCLE) {
                rx = ry = Math.min((0, _Util.distance)(x, y), (0, _Util.distance)(x, y - bounds.height), (0, _Util.distance)(x - bounds.width, y), (0, _Util.distance)(x - bounds.width, y - bounds.height));
            } else if (shape === RADIAL_GRADIENT_SHAPE.ELLIPSE) {
                // Compute the ratio ry/rx (which is to be the same as for "closest-side")
                var c = Math.min(Math.abs(y), Math.abs(y - bounds.height)) / Math.min(Math.abs(x), Math.abs(x - bounds.width));
                var corner = findCorner(bounds, x, y, true);
                rx = (0, _Util.distance)(corner.x - x, (corner.y - y) / c);
                ry = c * rx;
            }
            break;

        case 'farthest-side':
            // Same as closest-side, except the ending shape is sized based on the farthest side(s)
            if (shape === RADIAL_GRADIENT_SHAPE.CIRCLE) {
                rx = ry = Math.max(Math.abs(x), Math.abs(x - bounds.width), Math.abs(y), Math.abs(y - bounds.height));
            } else if (shape === RADIAL_GRADIENT_SHAPE.ELLIPSE) {
                rx = Math.max(Math.abs(x), Math.abs(x - bounds.width));
                ry = Math.max(Math.abs(y), Math.abs(y - bounds.height));
            }
            break;

        case 'farthest-corner':
            // Same as closest-corner, except the ending shape is sized based on the farthest corner.
            // If the shape is an ellipse, the ending shape is given the same aspect ratio it would have if farthest-side were specified.
            if (shape === RADIAL_GRADIENT_SHAPE.CIRCLE) {
                rx = ry = Math.max((0, _Util.distance)(x, y), (0, _Util.distance)(x, y - bounds.height), (0, _Util.distance)(x - bounds.width, y), (0, _Util.distance)(x - bounds.width, y - bounds.height));
            } else if (shape === RADIAL_GRADIENT_SHAPE.ELLIPSE) {
                // Compute the ratio ry/rx (which is to be the same as for "farthest-side")
                var _c = Math.max(Math.abs(y), Math.abs(y - bounds.height)) / Math.max(Math.abs(x), Math.abs(x - bounds.width));
                var _corner = findCorner(bounds, x, y, false);
                rx = (0, _Util.distance)(_corner.x - x, (_corner.y - y) / _c);
                ry = _c * rx;
            }
            break;

        default:
            // pixel or percentage values
            rx = radius.x || 0;
            ry = radius.y !== undefined ? radius.y : rx;
            break;
    }

    return {
        x: rx,
        y: ry
    };
};

var transformWebkitRadialGradientArgs = exports.transformWebkitRadialGradientArgs = function transformWebkitRadialGradientArgs(args) {
    var shape = '';
    var radius = '';
    var extent = '';
    var position = '';
    var idx = 0;

    var POSITION = /^(left|center|right|\d+(?:px|r?em|%)?)(?:\s+(top|center|bottom|\d+(?:px|r?em|%)?))?$/i;
    var SHAPE_AND_EXTENT = /^(circle|ellipse)?\s*(closest-side|closest-corner|farthest-side|farthest-corner|contain|cover)?$/i;
    var RADIUS = /^\d+(px|r?em|%)?(?:\s+\d+(px|r?em|%)?)?$/i;

    var matchStartPosition = args[idx].match(POSITION);
    if (matchStartPosition) {
        idx++;
    }

    var matchShapeExtent = args[idx].match(SHAPE_AND_EXTENT);
    if (matchShapeExtent) {
        shape = matchShapeExtent[1] || '';
        extent = matchShapeExtent[2] || '';
        if (extent === 'contain') {
            extent = 'closest-side';
        } else if (extent === 'cover') {
            extent = 'farthest-corner';
        }
        idx++;
    }

    var matchStartRadius = args[idx].match(RADIUS);
    if (matchStartRadius) {
        idx++;
    }

    var matchEndPosition = args[idx].match(POSITION);
    if (matchEndPosition) {
        idx++;
    }

    var matchEndRadius = args[idx].match(RADIUS);
    if (matchEndRadius) {
        idx++;
    }

    var matchPosition = matchEndPosition || matchStartPosition;
    if (matchPosition && matchPosition[1]) {
        position = matchPosition[1] + (/^\d+$/.test(matchPosition[1]) ? 'px' : '');
        if (matchPosition[2]) {
            position += ' ' + matchPosition[2] + (/^\d+$/.test(matchPosition[2]) ? 'px' : '');
        }
    }

    var matchRadius = matchEndRadius || matchStartRadius;
    if (matchRadius) {
        radius = matchRadius[0];
        if (!matchRadius[1]) {
            radius += 'px';
        }
    }

    if (position && !shape && !radius && !extent) {
        radius = position;
        position = '';
    }

    if (position) {
        position = 'at ' + position;
    }

    return [[shape, extent, radius, position].filter(function (s) {
        return !!s;
    }).join(' ')].concat(args.slice(idx));
};

var transformObsoleteColorStops = function transformObsoleteColorStops(args) {
    return args.map(function (color) {
        return color.match(FROM_TO_COLORSTOP);
    })
    // $FlowFixMe
    .map(function (v, index) {
        if (!v) {
            return args[index];
        }

        switch (v[1]) {
            case 'from':
                return v[4] + ' 0%';
            case 'to':
                return v[4] + ' 100%';
            case 'color-stop':
                if (v[3] === '%') {
                    return v[4] + ' ' + v[2];
                }
                return v[4] + ' ' + parseFloat(v[2]) * 100 + '%';
        }
    });
};
},{"./Angle":18,"./Color":21,"./Length":26,"./NodeContainer":29,"./Util":39}],25:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.reformatInputBounds = exports.inlineSelectElement = exports.inlineTextAreaElement = exports.inlineInputElement = exports.getInputBorderRadius = exports.INPUT_BACKGROUND = exports.INPUT_BORDERS = exports.INPUT_COLOR = undefined;

var _TextContainer = require('./TextContainer');

var _TextContainer2 = _interopRequireDefault(_TextContainer);

var _background = require('./parsing/background');

var _border = require('./parsing/border');

var _Circle = require('./drawing/Circle');

var _Circle2 = _interopRequireDefault(_Circle);

var _Vector = require('./drawing/Vector');

var _Vector2 = _interopRequireDefault(_Vector);

var _Color = require('./Color');

var _Color2 = _interopRequireDefault(_Color);

var _Length = require('./Length');

var _Length2 = _interopRequireDefault(_Length);

var _Bounds = require('./Bounds');

var _TextBounds = require('./TextBounds');

var _Util = require('./Util');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var INPUT_COLOR = exports.INPUT_COLOR = new _Color2.default([42, 42, 42]);
var INPUT_BORDER_COLOR = new _Color2.default([165, 165, 165]);
var INPUT_BACKGROUND_COLOR = new _Color2.default([222, 222, 222]);
var INPUT_BORDER = {
    borderWidth: 1,
    borderColor: INPUT_BORDER_COLOR,
    borderStyle: _border.BORDER_STYLE.SOLID
};
var INPUT_BORDERS = exports.INPUT_BORDERS = [INPUT_BORDER, INPUT_BORDER, INPUT_BORDER, INPUT_BORDER];
var INPUT_BACKGROUND = exports.INPUT_BACKGROUND = {
    backgroundColor: INPUT_BACKGROUND_COLOR,
    backgroundImage: [],
    backgroundClip: _background.BACKGROUND_CLIP.PADDING_BOX,
    backgroundOrigin: _background.BACKGROUND_ORIGIN.PADDING_BOX
};

var RADIO_BORDER_RADIUS = new _Length2.default('50%');
var RADIO_BORDER_RADIUS_TUPLE = [RADIO_BORDER_RADIUS, RADIO_BORDER_RADIUS];
var INPUT_RADIO_BORDER_RADIUS = [RADIO_BORDER_RADIUS_TUPLE, RADIO_BORDER_RADIUS_TUPLE, RADIO_BORDER_RADIUS_TUPLE, RADIO_BORDER_RADIUS_TUPLE];

var CHECKBOX_BORDER_RADIUS = new _Length2.default('3px');
var CHECKBOX_BORDER_RADIUS_TUPLE = [CHECKBOX_BORDER_RADIUS, CHECKBOX_BORDER_RADIUS];
var INPUT_CHECKBOX_BORDER_RADIUS = [CHECKBOX_BORDER_RADIUS_TUPLE, CHECKBOX_BORDER_RADIUS_TUPLE, CHECKBOX_BORDER_RADIUS_TUPLE, CHECKBOX_BORDER_RADIUS_TUPLE];

var getInputBorderRadius = exports.getInputBorderRadius = function getInputBorderRadius(node) {
    return node.type === 'radio' ? INPUT_RADIO_BORDER_RADIUS : INPUT_CHECKBOX_BORDER_RADIUS;
};

var inlineInputElement = exports.inlineInputElement = function inlineInputElement(node, container) {
    if (node.type === 'radio' || node.type === 'checkbox') {
        if (node.checked) {
            var size = Math.min(container.bounds.width, container.bounds.height);
            container.childNodes.push(node.type === 'checkbox' ? [new _Vector2.default(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79), new _Vector2.default(container.bounds.left + size * 0.16, container.bounds.top + size * 0.5549), new _Vector2.default(container.bounds.left + size * 0.27347, container.bounds.top + size * 0.44071), new _Vector2.default(container.bounds.left + size * 0.39694, container.bounds.top + size * 0.5649), new _Vector2.default(container.bounds.left + size * 0.72983, container.bounds.top + size * 0.23), new _Vector2.default(container.bounds.left + size * 0.84, container.bounds.top + size * 0.34085), new _Vector2.default(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79)] : new _Circle2.default(container.bounds.left + size / 4, container.bounds.top + size / 4, size / 4));
        }
    } else {
        inlineFormElement(getInputValue(node), node, container, false);
    }
};

var inlineTextAreaElement = exports.inlineTextAreaElement = function inlineTextAreaElement(node, container) {
    inlineFormElement(node.value, node, container, true);
};

var inlineSelectElement = exports.inlineSelectElement = function inlineSelectElement(node, container) {
    var option = node.options[node.selectedIndex || 0];
    inlineFormElement(option ? option.text || '' : '', node, container, false);
};

var reformatInputBounds = exports.reformatInputBounds = function reformatInputBounds(bounds) {
    if (bounds.width > bounds.height) {
        bounds.left += (bounds.width - bounds.height) / 2;
        bounds.width = bounds.height;
    } else if (bounds.width < bounds.height) {
        bounds.top += (bounds.height - bounds.width) / 2;
        bounds.height = bounds.width;
    }
    return bounds;
};

var inlineFormElement = function inlineFormElement(value, node, container, allowLinebreak) {
    var body = node.ownerDocument.body;
    if (value.length > 0 && body) {
        var wrapper = node.ownerDocument.createElement('html2canvaswrapper');
        (0, _Util.copyCSSStyles)(node.ownerDocument.defaultView.getComputedStyle(node, null), wrapper);
        wrapper.style.position = 'absolute';
        wrapper.style.left = container.bounds.left + 'px';
        wrapper.style.top = container.bounds.top + 'px';
        if (!allowLinebreak) {
            wrapper.style.whiteSpace = 'nowrap';
        }
        var text = node.ownerDocument.createTextNode(value);
        wrapper.appendChild(text);
        body.appendChild(wrapper);
        container.childNodes.push(_TextContainer2.default.fromTextNode(text, container));
        body.removeChild(wrapper);
    }
};

var getInputValue = function getInputValue(node) {
    var value = node.type === 'password' ? new Array(node.value.length + 1).join('\u2022') : node.value;

    return value.length === 0 ? node.placeholder || '' : value;
};
},{"./Bounds":19,"./Color":21,"./Length":26,"./TextBounds":36,"./TextContainer":37,"./Util":39,"./drawing/Circle":42,"./drawing/Vector":45,"./parsing/background":47,"./parsing/border":48}],26:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.calculateLengthFromValueWithUnit = exports.LENGTH_TYPE = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _NodeContainer = require('./NodeContainer');

var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var LENGTH_WITH_UNIT = /([\d.]+)(px|r?em|%)/i;

var LENGTH_TYPE = exports.LENGTH_TYPE = {
    PX: 0,
    PERCENTAGE: 1
};

var Length = function () {
    function Length(value) {
        _classCallCheck(this, Length);

        this.type = value.substr(value.length - 1) === '%' ? LENGTH_TYPE.PERCENTAGE : LENGTH_TYPE.PX;
        var parsedValue = parseFloat(value);
        if (process.env.NODE_ENV !== 'production' && isNaN(parsedValue)) {
            console.error('Invalid value given for Length: "' + value + '"');
        }
        this.value = isNaN(parsedValue) ? 0 : parsedValue;
    }

    _createClass(Length, [{
        key: 'isPercentage',
        value: function isPercentage() {
            return this.type === LENGTH_TYPE.PERCENTAGE;
        }
    }, {
        key: 'getAbsoluteValue',
        value: function getAbsoluteValue(parentLength) {
            return this.isPercentage() ? parentLength * (this.value / 100) : this.value;
        }
    }], [{
        key: 'create',
        value: function create(v) {
            return new Length(v);
        }
    }]);

    return Length;
}();

exports.default = Length;


var getRootFontSize = function getRootFontSize(container) {
    var parent = container.parent;
    return parent ? getRootFontSize(parent) : parseFloat(container.style.font.fontSize);
};

var calculateLengthFromValueWithUnit = exports.calculateLengthFromValueWithUnit = function calculateLengthFromValueWithUnit(container, value, unit) {
    switch (unit) {
        case 'px':
        case '%':
            return new Length(value + unit);
        case 'em':
        case 'rem':
            var length = new Length(value);
            length.value *= unit === 'em' ? parseFloat(container.style.font.fontSize) : getRootFontSize(container);
            return length;
        default:
            // TODO: handle correctly if unknown unit is used
            return new Length('0');
    }
};
}).call(this,require('_process'))
},{"./NodeContainer":29,"_process":72}],27:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.createCounterText = exports.inlineListItemElement = exports.getListOwner = undefined;

var _Util = require('./Util');

var _NodeContainer = require('./NodeContainer');

var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

var _TextContainer = require('./TextContainer');

var _TextContainer2 = _interopRequireDefault(_TextContainer);

var _listStyle = require('./parsing/listStyle');

var _Unicode = require('./Unicode');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// Margin between the enumeration and the list item content
var MARGIN_RIGHT = 7;

var ancestorTypes = ['OL', 'UL', 'MENU'];

var getListOwner = exports.getListOwner = function getListOwner(container) {
    var parent = container.parent;
    if (!parent) {
        return null;
    }

    do {
        var isAncestor = ancestorTypes.indexOf(parent.tagName) !== -1;
        if (isAncestor) {
            return parent;
        }
        parent = parent.parent;
    } while (parent);

    return container.parent;
};

var inlineListItemElement = exports.inlineListItemElement = function inlineListItemElement(node, container, resourceLoader) {
    var listStyle = container.style.listStyle;

    if (!listStyle) {
        return;
    }

    var style = node.ownerDocument.defaultView.getComputedStyle(node, null);
    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');
    (0, _Util.copyCSSStyles)(style, wrapper);

    wrapper.style.position = 'absolute';
    wrapper.style.bottom = 'auto';
    wrapper.style.display = 'block';
    wrapper.style.letterSpacing = 'normal';

    switch (listStyle.listStylePosition) {
        case _listStyle.LIST_STYLE_POSITION.OUTSIDE:
            wrapper.style.left = 'auto';
            wrapper.style.right = node.ownerDocument.defaultView.innerWidth - container.bounds.left - container.style.margin[1].getAbsoluteValue(container.bounds.width) + MARGIN_RIGHT + 'px';
            wrapper.style.textAlign = 'right';
            break;
        case _listStyle.LIST_STYLE_POSITION.INSIDE:
            wrapper.style.left = container.bounds.left - container.style.margin[3].getAbsoluteValue(container.bounds.width) + 'px';
            wrapper.style.right = 'auto';
            wrapper.style.textAlign = 'left';
            break;
    }

    var text = void 0;
    var MARGIN_TOP = container.style.margin[0].getAbsoluteValue(container.bounds.width);
    var styleImage = listStyle.listStyleImage;
    if (styleImage) {
        if (styleImage.method === 'url') {
            var image = node.ownerDocument.createElement('img');
            image.src = styleImage.args[0];
            wrapper.style.top = container.bounds.top - MARGIN_TOP + 'px';
            wrapper.style.width = 'auto';
            wrapper.style.height = 'auto';
            wrapper.appendChild(image);
        } else {
            var size = parseFloat(container.style.font.fontSize) * 0.5;
            wrapper.style.top = container.bounds.top - MARGIN_TOP + container.bounds.height - 1.5 * size + 'px';
            wrapper.style.width = size + 'px';
            wrapper.style.height = size + 'px';
            wrapper.style.backgroundImage = style.listStyleImage;
        }
    } else if (typeof container.listIndex === 'number') {
        text = node.ownerDocument.createTextNode(createCounterText(container.listIndex, listStyle.listStyleType, true));
        wrapper.appendChild(text);
        wrapper.style.top = container.bounds.top - MARGIN_TOP + 'px';
    }

    // $FlowFixMe
    var body = node.ownerDocument.body;
    body.appendChild(wrapper);

    if (text) {
        container.childNodes.push(_TextContainer2.default.fromTextNode(text, container));
        body.removeChild(wrapper);
    } else {
        // $FlowFixMe
        container.childNodes.push(new _NodeContainer2.default(wrapper, container, resourceLoader, 0));
    }
};

var ROMAN_UPPER = {
    integers: [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
    values: ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I']
};

var ARMENIAN = {
    integers: [9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
    values: ['Ք', 'Փ', 'Ւ', 'Ց', 'Ր', 'Տ', 'Վ', 'Ս', 'Ռ', 'Ջ', 'Պ', 'Չ', 'Ո', 'Շ', 'Ն', 'Յ', 'Մ', 'Ճ', 'Ղ', 'Ձ', 'Հ', 'Կ', 'Ծ', 'Խ', 'Լ', 'Ի', 'Ժ', 'Թ', 'Ը', 'Է', 'Զ', 'Ե', 'Դ', 'Գ', 'Բ', 'Ա']
};

var HEBREW = {
    integers: [10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 19, 18, 17, 16, 15, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
    values: ['י׳', 'ט׳', 'ח׳', 'ז׳', 'ו׳', 'ה׳', 'ד׳', 'ג׳', 'ב׳', 'א׳', 'ת', 'ש', 'ר', 'ק', 'צ', 'פ', 'ע', 'ס', 'נ', 'מ', 'ל', 'כ', 'יט', 'יח', 'יז', 'טז', 'טו', 'י', 'ט', 'ח', 'ז', 'ו', 'ה', 'ד', 'ג', 'ב', 'א']
};

var GEORGIAN = {
    integers: [10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
    values: ['ჵ', 'ჰ', 'ჯ', 'ჴ', 'ხ', 'ჭ', 'წ', 'ძ', 'ც', 'ჩ', 'შ', 'ყ', 'ღ', 'ქ', 'ფ', 'ჳ', 'ტ', 'ს', 'რ', 'ჟ', 'პ', 'ო', 'ჲ', 'ნ', 'მ', 'ლ', 'კ', 'ი', 'თ', 'ჱ', 'ზ', 'ვ', 'ე', 'დ', 'გ', 'ბ', 'ა']
};

var createAdditiveCounter = function createAdditiveCounter(value, min, max, symbols, fallback, suffix) {
    if (value < min || value > max) {
        return createCounterText(value, fallback, suffix.length > 0);
    }

    return symbols.integers.reduce(function (string, integer, index) {
        while (value >= integer) {
            value -= integer;
            string += symbols.values[index];
        }
        return string;
    }, '') + suffix;
};

var createCounterStyleWithSymbolResolver = function createCounterStyleWithSymbolResolver(value, codePointRangeLength, isNumeric, resolver) {
    var string = '';

    do {
        if (!isNumeric) {
            value--;
        }
        string = resolver(value) + string;
        value /= codePointRangeLength;
    } while (value * codePointRangeLength >= codePointRangeLength);

    return string;
};

var createCounterStyleFromRange = function createCounterStyleFromRange(value, codePointRangeStart, codePointRangeEnd, isNumeric, suffix) {
    var codePointRangeLength = codePointRangeEnd - codePointRangeStart + 1;

    return (value < 0 ? '-' : '') + (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, isNumeric, function (codePoint) {
        return (0, _Unicode.fromCodePoint)(Math.floor(codePoint % codePointRangeLength) + codePointRangeStart);
    }) + suffix);
};

var createCounterStyleFromSymbols = function createCounterStyleFromSymbols(value, symbols) {
    var suffix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '. ';

    var codePointRangeLength = symbols.length;
    return createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, false, function (codePoint) {
        return symbols[Math.floor(codePoint % codePointRangeLength)];
    }) + suffix;
};

var CJK_ZEROS = 1 << 0;
var CJK_TEN_COEFFICIENTS = 1 << 1;
var CJK_TEN_HIGH_COEFFICIENTS = 1 << 2;
var CJK_HUNDRED_COEFFICIENTS = 1 << 3;

var createCJKCounter = function createCJKCounter(value, numbers, multipliers, negativeSign, suffix, flags) {
    if (value < -9999 || value > 9999) {
        return createCounterText(value, _listStyle.LIST_STYLE_TYPE.CJK_DECIMAL, suffix.length > 0);
    }
    var tmp = Math.abs(value);
    var string = suffix;

    if (tmp === 0) {
        return numbers[0] + string;
    }

    for (var digit = 0; tmp > 0 && digit <= 4; digit++) {
        var coefficient = tmp % 10;

        if (coefficient === 0 && (0, _Util.contains)(flags, CJK_ZEROS) && string !== '') {
            string = numbers[coefficient] + string;
        } else if (coefficient > 1 || coefficient === 1 && digit === 0 || coefficient === 1 && digit === 1 && (0, _Util.contains)(flags, CJK_TEN_COEFFICIENTS) || coefficient === 1 && digit === 1 && (0, _Util.contains)(flags, CJK_TEN_HIGH_COEFFICIENTS) && value > 100 || coefficient === 1 && digit > 1 && (0, _Util.contains)(flags, CJK_HUNDRED_COEFFICIENTS)) {
            string = numbers[coefficient] + (digit > 0 ? multipliers[digit - 1] : '') + string;
        } else if (coefficient === 1 && digit > 0) {
            string = multipliers[digit - 1] + string;
        }
        tmp = Math.floor(tmp / 10);
    }

    return (value < 0 ? negativeSign : '') + string;
};

var CHINESE_INFORMAL_MULTIPLIERS = '十百千萬';
var CHINESE_FORMAL_MULTIPLIERS = '拾佰仟萬';
var JAPANESE_NEGATIVE = 'マイナス';
var KOREAN_NEGATIVE = '마이너스 ';

var createCounterText = exports.createCounterText = function createCounterText(value, type, appendSuffix) {
    var defaultSuffix = appendSuffix ? '. ' : '';
    var cjkSuffix = appendSuffix ? '、' : '';
    var koreanSuffix = appendSuffix ? ', ' : '';
    switch (type) {
        case _listStyle.LIST_STYLE_TYPE.DISC:
            return '•';
        case _listStyle.LIST_STYLE_TYPE.CIRCLE:
            return '◦';
        case _listStyle.LIST_STYLE_TYPE.SQUARE:
            return '◾';
        case _listStyle.LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:
            var string = createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);
            return string.length < 4 ? '0' + string : string;
        case _listStyle.LIST_STYLE_TYPE.CJK_DECIMAL:
            return createCounterStyleFromSymbols(value, '〇一二三四五六七八九', cjkSuffix);
        case _listStyle.LIST_STYLE_TYPE.LOWER_ROMAN:
            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix).toLowerCase();
        case _listStyle.LIST_STYLE_TYPE.UPPER_ROMAN:
            return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.LOWER_GREEK:
            return createCounterStyleFromRange(value, 945, 969, false, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.LOWER_ALPHA:
            return createCounterStyleFromRange(value, 97, 122, false, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.UPPER_ALPHA:
            return createCounterStyleFromRange(value, 65, 90, false, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.ARABIC_INDIC:
            return createCounterStyleFromRange(value, 1632, 1641, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.ARMENIAN:
        case _listStyle.LIST_STYLE_TYPE.UPPER_ARMENIAN:
            return createAdditiveCounter(value, 1, 9999, ARMENIAN, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.LOWER_ARMENIAN:
            return createAdditiveCounter(value, 1, 9999, ARMENIAN, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix).toLowerCase();
        case _listStyle.LIST_STYLE_TYPE.BENGALI:
            return createCounterStyleFromRange(value, 2534, 2543, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.CAMBODIAN:
        case _listStyle.LIST_STYLE_TYPE.KHMER:
            return createCounterStyleFromRange(value, 6112, 6121, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:
            return createCounterStyleFromSymbols(value, '子丑寅卯辰巳午未申酉戌亥', cjkSuffix);
        case _listStyle.LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:
            return createCounterStyleFromSymbols(value, '甲乙丙丁戊己庚辛壬癸', cjkSuffix);
        case _listStyle.LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:
        case _listStyle.LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:
            return createCJKCounter(value, '零一二三四五六七八九', CHINESE_INFORMAL_MULTIPLIERS, '負', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
        case _listStyle.LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:
            return createCJKCounter(value, '零壹貳參肆伍陸柒捌玖', CHINESE_FORMAL_MULTIPLIERS, '負', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
        case _listStyle.LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:
            return createCJKCounter(value, '零一二三四五六七八九', CHINESE_INFORMAL_MULTIPLIERS, '负', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
        case _listStyle.LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:
            return createCJKCounter(value, '零壹贰叁肆伍陆柒捌玖', CHINESE_FORMAL_MULTIPLIERS, '负', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);
        case _listStyle.LIST_STYLE_TYPE.JAPANESE_INFORMAL:
            return createCJKCounter(value, '〇一二三四五六七八九', '十百千万', JAPANESE_NEGATIVE, cjkSuffix, 0);
        case _listStyle.LIST_STYLE_TYPE.JAPANESE_FORMAL:
            return createCJKCounter(value, '零壱弐参四伍六七八九', '拾百千万', JAPANESE_NEGATIVE, cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);
        case _listStyle.LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:
            return createCJKCounter(value, '영일이삼사오육칠팔구', '십백천만', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);
        case _listStyle.LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:
            return createCJKCounter(value, '零一二三四五六七八九', '十百千萬', KOREAN_NEGATIVE, koreanSuffix, 0);
        case _listStyle.LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:
            return createCJKCounter(value, '零壹貳參四五六七八九', '拾百千', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);
        case _listStyle.LIST_STYLE_TYPE.DEVANAGARI:
            return createCounterStyleFromRange(value, 0x966, 0x96f, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.GEORGIAN:
            return createAdditiveCounter(value, 1, 19999, GEORGIAN, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.GUJARATI:
            return createCounterStyleFromRange(value, 0xae6, 0xaef, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.GURMUKHI:
            return createCounterStyleFromRange(value, 0xa66, 0xa6f, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.HEBREW:
            return createAdditiveCounter(value, 1, 10999, HEBREW, _listStyle.LIST_STYLE_TYPE.DECIMAL, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.HIRAGANA:
            return createCounterStyleFromSymbols(value, 'あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん');
        case _listStyle.LIST_STYLE_TYPE.HIRAGANA_IROHA:
            return createCounterStyleFromSymbols(value, 'いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす');
        case _listStyle.LIST_STYLE_TYPE.KANNADA:
            return createCounterStyleFromRange(value, 0xce6, 0xcef, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.KATAKANA:
            return createCounterStyleFromSymbols(value, 'アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン', cjkSuffix);
        case _listStyle.LIST_STYLE_TYPE.KATAKANA_IROHA:
            return createCounterStyleFromSymbols(value, 'イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス', cjkSuffix);
        case _listStyle.LIST_STYLE_TYPE.LAO:
            return createCounterStyleFromRange(value, 0xed0, 0xed9, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.MONGOLIAN:
            return createCounterStyleFromRange(value, 0x1810, 0x1819, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.MYANMAR:
            return createCounterStyleFromRange(value, 0x1040, 0x1049, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.ORIYA:
            return createCounterStyleFromRange(value, 0xb66, 0xb6f, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.PERSIAN:
            return createCounterStyleFromRange(value, 0x6f0, 0x6f9, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.TAMIL:
            return createCounterStyleFromRange(value, 0xbe6, 0xbef, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.TELUGU:
            return createCounterStyleFromRange(value, 0xc66, 0xc6f, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.THAI:
            return createCounterStyleFromRange(value, 0xe50, 0xe59, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.TIBETAN:
            return createCounterStyleFromRange(value, 0xf20, 0xf29, true, defaultSuffix);
        case _listStyle.LIST_STYLE_TYPE.DECIMAL:
        default:
            return createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);
    }
};
},{"./NodeContainer":29,"./TextContainer":37,"./Unicode":38,"./Util":39,"./parsing/listStyle":55}],28:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Logger = function () {
    function Logger(enabled, id, start) {
        _classCallCheck(this, Logger);

        this.enabled = typeof window !== 'undefined' && enabled;
        this.start = start ? start : Date.now();
        this.id = id;
    }

    _createClass(Logger, [{
        key: 'child',
        value: function child(id) {
            return new Logger(this.enabled, id, this.start);
        }

        // eslint-disable-next-line flowtype/no-weak-types

    }, {
        key: 'log',
        value: function log() {
            if (this.enabled && window.console && window.console.log) {
                for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                    args[_key] = arguments[_key];
                }

                Function.prototype.bind.call(window.console.log, window.console).apply(window.console, [Date.now() - this.start + 'ms', this.id ? 'html2canvas (' + this.id + '):' : 'html2canvas:'].concat([].slice.call(args, 0)));
            }
        }

        // eslint-disable-next-line flowtype/no-weak-types

    }, {
        key: 'error',
        value: function error() {
            if (this.enabled && window.console && window.console.error) {
                for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                    args[_key2] = arguments[_key2];
                }

                Function.prototype.bind.call(window.console.error, window.console).apply(window.console, [Date.now() - this.start + 'ms', this.id ? 'html2canvas (' + this.id + '):' : 'html2canvas:'].concat([].slice.call(args, 0)));
            }
        }
    }]);

    return Logger;
}();

exports.default = Logger;
},{}],29:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Color = require('./Color');

var _Color2 = _interopRequireDefault(_Color);

var _Util = require('./Util');

var _background = require('./parsing/background');

var _border = require('./parsing/border');

var _borderRadius = require('./parsing/borderRadius');

var _display = require('./parsing/display');

var _float = require('./parsing/float');

var _font = require('./parsing/font');

var _letterSpacing = require('./parsing/letterSpacing');

var _lineBreak = require('./parsing/lineBreak');

var _listStyle = require('./parsing/listStyle');

var _margin = require('./parsing/margin');

var _overflow = require('./parsing/overflow');

var _overflowWrap = require('./parsing/overflowWrap');

var _padding = require('./parsing/padding');

var _position = require('./parsing/position');

var _textDecoration = require('./parsing/textDecoration');

var _textShadow = require('./parsing/textShadow');

var _textTransform = require('./parsing/textTransform');

var _transform = require('./parsing/transform');

var _visibility = require('./parsing/visibility');

var _wordBreak = require('./parsing/word-break');

var _zIndex = require('./parsing/zIndex');

var _Bounds = require('./Bounds');

var _Input = require('./Input');

var _ListItem = require('./ListItem');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];

var NodeContainer = function () {
    function NodeContainer(node, parent, resourceLoader, index) {
        var _this = this;

        _classCallCheck(this, NodeContainer);

        this.parent = parent;
        this.tagName = node.tagName;
        this.index = index;
        this.childNodes = [];
        this.listItems = [];
        if (typeof node.start === 'number') {
            this.listStart = node.start;
        }
        var defaultView = node.ownerDocument.defaultView;
        var scrollX = defaultView.pageXOffset;
        var scrollY = defaultView.pageYOffset;
        var style = defaultView.getComputedStyle(node, null);
        var display = (0, _display.parseDisplay)(style.display);

        var IS_INPUT = node.type === 'radio' || node.type === 'checkbox';

        var position = (0, _position.parsePosition)(style.position);

        this.style = {
            background: IS_INPUT ? _Input.INPUT_BACKGROUND : (0, _background.parseBackground)(style, resourceLoader),
            border: IS_INPUT ? _Input.INPUT_BORDERS : (0, _border.parseBorder)(style),
            borderRadius: (node instanceof defaultView.HTMLInputElement || node instanceof HTMLInputElement) && IS_INPUT ? (0, _Input.getInputBorderRadius)(node) : (0, _borderRadius.parseBorderRadius)(style),
            color: IS_INPUT ? _Input.INPUT_COLOR : new _Color2.default(style.color),
            display: display,
            float: (0, _float.parseCSSFloat)(style.float),
            font: (0, _font.parseFont)(style),
            letterSpacing: (0, _letterSpacing.parseLetterSpacing)(style.letterSpacing),
            listStyle: display === _display.DISPLAY.LIST_ITEM ? (0, _listStyle.parseListStyle)(style) : null,
            lineBreak: (0, _lineBreak.parseLineBreak)(style.lineBreak),
            margin: (0, _margin.parseMargin)(style),
            opacity: parseFloat(style.opacity),
            overflow: INPUT_TAGS.indexOf(node.tagName) === -1 ? (0, _overflow.parseOverflow)(style.overflow) : _overflow.OVERFLOW.HIDDEN,
            overflowWrap: (0, _overflowWrap.parseOverflowWrap)(style.overflowWrap ? style.overflowWrap : style.wordWrap),
            padding: (0, _padding.parsePadding)(style),
            position: position,
            textDecoration: (0, _textDecoration.parseTextDecoration)(style),
            textShadow: (0, _textShadow.parseTextShadow)(style.textShadow),
            textTransform: (0, _textTransform.parseTextTransform)(style.textTransform),
            transform: (0, _transform.parseTransform)(style),
            visibility: (0, _visibility.parseVisibility)(style.visibility),
            wordBreak: (0, _wordBreak.parseWordBreak)(style.wordBreak),
            zIndex: (0, _zIndex.parseZIndex)(position !== _position.POSITION.STATIC ? style.zIndex : 'auto')
        };

        if (this.isTransformed()) {
            // getBoundingClientRect provides values post-transform, we want them without the transformation
            node.style.transform = 'matrix(1,0,0,1,0,0)';
        }

        if (display === _display.DISPLAY.LIST_ITEM) {
            var listOwner = (0, _ListItem.getListOwner)(this);
            if (listOwner) {
                var listIndex = listOwner.listItems.length;
                listOwner.listItems.push(this);
                this.listIndex = node.hasAttribute('value') && typeof node.value === 'number' ? node.value : listIndex === 0 ? typeof listOwner.listStart === 'number' ? listOwner.listStart : 1 : listOwner.listItems[listIndex - 1].listIndex + 1;
            }
        }

        // TODO move bound retrieval for all nodes to a later stage?
        if (node.tagName === 'IMG') {
            node.addEventListener('load', function () {
                _this.bounds = (0, _Bounds.parseBounds)(node, scrollX, scrollY);
                _this.curvedBounds = (0, _Bounds.parseBoundCurves)(_this.bounds, _this.style.border, _this.style.borderRadius);
            });
        }
        this.image = getImage(node, resourceLoader);
        this.bounds = IS_INPUT ? (0, _Input.reformatInputBounds)((0, _Bounds.parseBounds)(node, scrollX, scrollY)) : (0, _Bounds.parseBounds)(node, scrollX, scrollY);
        this.curvedBounds = (0, _Bounds.parseBoundCurves)(this.bounds, this.style.border, this.style.borderRadius);

        if (process.env.NODE_ENV !== 'production') {
            this.name = '' + node.tagName.toLowerCase() + (node.id ? '#' + node.id : '') + node.className.toString().split(' ').map(function (s) {
                return s.length ? '.' + s : '';
            }).join('');
        }
    }

    _createClass(NodeContainer, [{
        key: 'getClipPaths',
        value: function getClipPaths() {
            var parentClips = this.parent ? this.parent.getClipPaths() : [];
            var isClipped = this.style.overflow !== _overflow.OVERFLOW.VISIBLE;

            return isClipped ? parentClips.concat([(0, _Bounds.calculatePaddingBoxPath)(this.curvedBounds)]) : parentClips;
        }
    }, {
        key: 'isInFlow',
        value: function isInFlow() {
            return this.isRootElement() && !this.isFloating() && !this.isAbsolutelyPositioned();
        }
    }, {
        key: 'isVisible',
        value: function isVisible() {
            return !(0, _Util.contains)(this.style.display, _display.DISPLAY.NONE) && this.style.opacity > 0 && this.style.visibility === _visibility.VISIBILITY.VISIBLE;
        }
    }, {
        key: 'isAbsolutelyPositioned',
        value: function isAbsolutelyPositioned() {
            return this.style.position !== _position.POSITION.STATIC && this.style.position !== _position.POSITION.RELATIVE;
        }
    }, {
        key: 'isPositioned',
        value: function isPositioned() {
            return this.style.position !== _position.POSITION.STATIC;
        }
    }, {
        key: 'isFloating',
        value: function isFloating() {
            return this.style.float !== _float.FLOAT.NONE;
        }
    }, {
        key: 'isRootElement',
        value: function isRootElement() {
            return this.parent === null;
        }
    }, {
        key: 'isTransformed',
        value: function isTransformed() {
            return this.style.transform !== null;
        }
    }, {
        key: 'isPositionedWithZIndex',
        value: function isPositionedWithZIndex() {
            return this.isPositioned() && !this.style.zIndex.auto;
        }
    }, {
        key: 'isInlineLevel',
        value: function isInlineLevel() {
            return (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_BLOCK) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_FLEX) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_GRID) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_LIST_ITEM) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_TABLE);
        }
    }, {
        key: 'isInlineBlockOrInlineTable',
        value: function isInlineBlockOrInlineTable() {
            return (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_BLOCK) || (0, _Util.contains)(this.style.display, _display.DISPLAY.INLINE_TABLE);
        }
    }]);

    return NodeContainer;
}();

exports.default = NodeContainer;


var getImage = function getImage(node, resourceLoader) {
    if (node instanceof node.ownerDocument.defaultView.SVGSVGElement || node instanceof SVGSVGElement) {
        var s = new XMLSerializer();
        return resourceLoader.loadImage('data:image/svg+xml,' + encodeURIComponent(s.serializeToString(node)));
    }
    switch (node.tagName) {
        case 'IMG':
            // $FlowFixMe
            var img = node;
            return resourceLoader.loadImage(img.currentSrc || img.src);
        case 'CANVAS':
            // $FlowFixMe
            var canvas = node;
            return resourceLoader.loadCanvas(canvas);
        case 'IFRAME':
            var iframeKey = node.getAttribute('data-html2canvas-internal-iframe-key');
            if (iframeKey) {
                return iframeKey;
            }
            break;
    }

    return null;
};
}).call(this,require('_process'))
},{"./Bounds":19,"./Color":21,"./Input":25,"./ListItem":27,"./Util":39,"./parsing/background":47,"./parsing/border":48,"./parsing/borderRadius":49,"./parsing/display":50,"./parsing/float":51,"./parsing/font":52,"./parsing/letterSpacing":53,"./parsing/lineBreak":54,"./parsing/listStyle":55,"./parsing/margin":56,"./parsing/overflow":57,"./parsing/overflowWrap":58,"./parsing/padding":59,"./parsing/position":60,"./parsing/textDecoration":61,"./parsing/textShadow":62,"./parsing/textTransform":63,"./parsing/transform":64,"./parsing/visibility":65,"./parsing/word-break":66,"./parsing/zIndex":67,"_process":72}],30:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.NodeParser = undefined;

var _StackingContext = require('./StackingContext');

var _StackingContext2 = _interopRequireDefault(_StackingContext);

var _NodeContainer = require('./NodeContainer');

var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

var _TextContainer = require('./TextContainer');

var _TextContainer2 = _interopRequireDefault(_TextContainer);

var _Input = require('./Input');

var _ListItem = require('./ListItem');

var _listStyle = require('./parsing/listStyle');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var NodeParser = exports.NodeParser = function NodeParser(node, resourceLoader, logger) {
    if (process.env.NODE_ENV !== 'production') {
        logger.log('Starting node parsing');
    }

    var index = 0;

    var container = new _NodeContainer2.default(node, null, resourceLoader, index++);
    var stack = new _StackingContext2.default(container, null, true);

    parseNodeTree(node, container, stack, resourceLoader, index);

    if (process.env.NODE_ENV !== 'production') {
        logger.log('Finished parsing node tree');
    }

    return stack;
};

var IGNORED_NODE_NAMES = ['SCRIPT', 'HEAD', 'TITLE', 'OBJECT', 'BR', 'OPTION'];

var parseNodeTree = function parseNodeTree(node, parent, stack, resourceLoader, index) {
    if (process.env.NODE_ENV !== 'production' && index > 50000) {
        throw new Error('Recursion error while parsing node tree');
    }

    for (var childNode = node.firstChild, nextNode; childNode; childNode = nextNode) {
        nextNode = childNode.nextSibling;
        var defaultView = childNode.ownerDocument.defaultView;
        if (childNode instanceof defaultView.Text || childNode instanceof Text || defaultView.parent && childNode instanceof defaultView.parent.Text) {
            if (childNode.data.trim().length > 0) {
                parent.childNodes.push(_TextContainer2.default.fromTextNode(childNode, parent));
            }
        } else if (childNode instanceof defaultView.HTMLElement || childNode instanceof HTMLElement || defaultView.parent && childNode instanceof defaultView.parent.HTMLElement) {
            if (IGNORED_NODE_NAMES.indexOf(childNode.nodeName) === -1) {
                var container = new _NodeContainer2.default(childNode, parent, resourceLoader, index++);
                if (container.isVisible()) {
                    if (childNode.tagName === 'INPUT') {
                        // $FlowFixMe
                        (0, _Input.inlineInputElement)(childNode, container);
                    } else if (childNode.tagName === 'TEXTAREA') {
                        // $FlowFixMe
                        (0, _Input.inlineTextAreaElement)(childNode, container);
                    } else if (childNode.tagName === 'SELECT') {
                        // $FlowFixMe
                        (0, _Input.inlineSelectElement)(childNode, container);
                    } else if (container.style.listStyle && container.style.listStyle.listStyleType !== _listStyle.LIST_STYLE_TYPE.NONE) {
                        (0, _ListItem.inlineListItemElement)(childNode, container, resourceLoader);
                    }

                    var SHOULD_TRAVERSE_CHILDREN = childNode.tagName !== 'TEXTAREA';
                    var treatAsRealStackingContext = createsRealStackingContext(container, childNode);
                    if (treatAsRealStackingContext || createsStackingContext(container)) {
                        // for treatAsRealStackingContext:false, any positioned descendants and descendants
                        // which actually create a new stacking context should be considered part of the parent stacking context
                        var parentStack = treatAsRealStackingContext || container.isPositioned() ? stack.getRealParentStackingContext() : stack;
                        var childStack = new _StackingContext2.default(container, parentStack, treatAsRealStackingContext);
                        parentStack.contexts.push(childStack);
                        if (SHOULD_TRAVERSE_CHILDREN) {
                            parseNodeTree(childNode, container, childStack, resourceLoader, index);
                        }
                    } else {
                        stack.children.push(container);
                        if (SHOULD_TRAVERSE_CHILDREN) {
                            parseNodeTree(childNode, container, stack, resourceLoader, index);
                        }
                    }
                }
            }
        } else if (childNode instanceof defaultView.SVGSVGElement || childNode instanceof SVGSVGElement || defaultView.parent && childNode instanceof defaultView.parent.SVGSVGElement) {
            var _container = new _NodeContainer2.default(childNode, parent, resourceLoader, index++);
            var _treatAsRealStackingContext = createsRealStackingContext(_container, childNode);
            if (_treatAsRealStackingContext || createsStackingContext(_container)) {
                // for treatAsRealStackingContext:false, any positioned descendants and descendants
                // which actually create a new stacking context should be considered part of the parent stacking context
                var _parentStack = _treatAsRealStackingContext || _container.isPositioned() ? stack.getRealParentStackingContext() : stack;
                var _childStack = new _StackingContext2.default(_container, _parentStack, _treatAsRealStackingContext);
                _parentStack.contexts.push(_childStack);
            } else {
                stack.children.push(_container);
            }
        }
    }
};

var createsRealStackingContext = function createsRealStackingContext(container, node) {
    return container.isRootElement() || container.isPositionedWithZIndex() || container.style.opacity < 1 || container.isTransformed() || isBodyWithTransparentRoot(container, node);
};

var createsStackingContext = function createsStackingContext(container) {
    return container.isPositioned() || container.isFloating();
};

var isBodyWithTransparentRoot = function isBodyWithTransparentRoot(container, node) {
    return node.nodeName === 'BODY' && container.parent instanceof _NodeContainer2.default && container.parent.style.background.backgroundColor.isTransparent();
};
}).call(this,require('_process'))
},{"./Input":25,"./ListItem":27,"./NodeContainer":29,"./StackingContext":35,"./TextContainer":37,"./parsing/listStyle":55,"_process":72}],31:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Proxy = undefined;

var _Feature = require('./Feature');

var _Feature2 = _interopRequireDefault(_Feature);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Proxy = exports.Proxy = function Proxy(src, options) {
    if (!options.proxy) {
        return Promise.reject(process.env.NODE_ENV !== 'production' ? 'No proxy defined' : null);
    }
    var proxy = options.proxy;

    return new Promise(function (resolve, reject) {
        var responseType = _Feature2.default.SUPPORT_CORS_XHR && _Feature2.default.SUPPORT_RESPONSE_TYPE ? 'blob' : 'text';
        var xhr = _Feature2.default.SUPPORT_CORS_XHR ? new XMLHttpRequest() : new XDomainRequest();
        xhr.onload = function () {
            if (xhr instanceof XMLHttpRequest) {
                if (xhr.status === 200) {
                    if (responseType === 'text') {
                        resolve(xhr.response);
                    } else {
                        var reader = new FileReader();
                        // $FlowFixMe
                        reader.addEventListener('load', function () {
                            return resolve(reader.result);
                        }, false);
                        // $FlowFixMe
                        reader.addEventListener('error', function (e) {
                            return reject(e);
                        }, false);
                        reader.readAsDataURL(xhr.response);
                    }
                } else {
                    reject(process.env.NODE_ENV !== 'production' ? 'Failed to proxy resource ' + src.substring(0, 256) + ' with status code ' + xhr.status : '');
                }
            } else {
                resolve(xhr.responseText);
            }
        };

        xhr.onerror = reject;
        xhr.open('GET', proxy + '?url=' + encodeURIComponent(src) + '&responseType=' + responseType);

        if (responseType !== 'text' && xhr instanceof XMLHttpRequest) {
            xhr.responseType = responseType;
        }

        if (options.imageTimeout) {
            var timeout = options.imageTimeout;
            xhr.timeout = timeout;
            xhr.ontimeout = function () {
                return reject(process.env.NODE_ENV !== 'production' ? 'Timed out (' + timeout + 'ms) proxying ' + src.substring(0, 256) : '');
            };
        }

        xhr.send();
    });
};
}).call(this,require('_process'))
},{"./Feature":22,"_process":72}],32:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseContent = exports.resolvePseudoContent = exports.popCounters = exports.parseCounterReset = exports.TOKEN_TYPE = exports.PSEUDO_CONTENT_ITEM_TYPE = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _ListItem = require('./ListItem');

var _listStyle = require('./parsing/listStyle');

var PSEUDO_CONTENT_ITEM_TYPE = exports.PSEUDO_CONTENT_ITEM_TYPE = {
    TEXT: 0,
    IMAGE: 1
};

var TOKEN_TYPE = exports.TOKEN_TYPE = {
    STRING: 0,
    ATTRIBUTE: 1,
    URL: 2,
    COUNTER: 3,
    COUNTERS: 4,
    OPENQUOTE: 5,
    CLOSEQUOTE: 6
};

var parseCounterReset = exports.parseCounterReset = function parseCounterReset(style, data) {
    if (!style || !style.counterReset || style.counterReset === 'none') {
        return [];
    }

    var counterNames = [];
    var counterResets = style.counterReset.split(/\s*,\s*/);
    var lenCounterResets = counterResets.length;

    for (var i = 0; i < lenCounterResets; i++) {
        var _counterResets$i$spli = counterResets[i].split(/\s+/),
            _counterResets$i$spli2 = _slicedToArray(_counterResets$i$spli, 2),
            counterName = _counterResets$i$spli2[0],
            initialValue = _counterResets$i$spli2[1];

        counterNames.push(counterName);
        var counter = data.counters[counterName];
        if (!counter) {
            counter = data.counters[counterName] = [];
        }
        counter.push(parseInt(initialValue || 0, 10));
    }

    return counterNames;
};

var popCounters = exports.popCounters = function popCounters(counterNames, data) {
    var lenCounters = counterNames.length;
    for (var i = 0; i < lenCounters; i++) {
        data.counters[counterNames[i]].pop();
    }
};

var resolvePseudoContent = exports.resolvePseudoContent = function resolvePseudoContent(node, style, data) {
    if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {
        return null;
    }

    var tokens = parseContent(style.content);

    var len = tokens.length;
    var contentItems = [];
    var s = '';

    // increment the counter (if there is a "counter-increment" declaration)
    var counterIncrement = style.counterIncrement;
    if (counterIncrement && counterIncrement !== 'none') {
        var _counterIncrement$spl = counterIncrement.split(/\s+/),
            _counterIncrement$spl2 = _slicedToArray(_counterIncrement$spl, 2),
            counterName = _counterIncrement$spl2[0],
            incrementValue = _counterIncrement$spl2[1];

        var counter = data.counters[counterName];
        if (counter) {
            counter[counter.length - 1] += incrementValue === undefined ? 1 : parseInt(incrementValue, 10);
        }
    }

    // build the content string
    for (var i = 0; i < len; i++) {
        var token = tokens[i];
        switch (token.type) {
            case TOKEN_TYPE.STRING:
                s += token.value || '';
                break;

            case TOKEN_TYPE.ATTRIBUTE:
                if (node instanceof HTMLElement && token.value) {
                    s += node.getAttribute(token.value) || '';
                }
                break;

            case TOKEN_TYPE.COUNTER:
                var _counter = data.counters[token.name || ''];
                if (_counter) {
                    s += formatCounterValue([_counter[_counter.length - 1]], '', token.format);
                }
                break;

            case TOKEN_TYPE.COUNTERS:
                var _counters = data.counters[token.name || ''];
                if (_counters) {
                    s += formatCounterValue(_counters, token.glue, token.format);
                }
                break;

            case TOKEN_TYPE.OPENQUOTE:
                s += getQuote(style, true, data.quoteDepth);
                data.quoteDepth++;
                break;

            case TOKEN_TYPE.CLOSEQUOTE:
                data.quoteDepth--;
                s += getQuote(style, false, data.quoteDepth);
                break;

            case TOKEN_TYPE.URL:
                if (s) {
                    contentItems.push({ type: PSEUDO_CONTENT_ITEM_TYPE.TEXT, value: s });
                    s = '';
                }
                contentItems.push({ type: PSEUDO_CONTENT_ITEM_TYPE.IMAGE, value: token.value || '' });
                break;
        }
    }

    if (s) {
        contentItems.push({ type: PSEUDO_CONTENT_ITEM_TYPE.TEXT, value: s });
    }

    return contentItems;
};

var parseContent = exports.parseContent = function parseContent(content, cache) {
    if (cache && cache[content]) {
        return cache[content];
    }

    var tokens = [];
    var len = content.length;

    var isString = false;
    var isEscaped = false;
    var isFunction = false;
    var str = '';
    var functionName = '';
    var args = [];

    for (var i = 0; i < len; i++) {
        var c = content.charAt(i);

        switch (c) {
            case "'":
            case '"':
                if (isEscaped) {
                    str += c;
                } else {
                    isString = !isString;
                    if (!isFunction && !isString) {
                        tokens.push({ type: TOKEN_TYPE.STRING, value: str });
                        str = '';
                    }
                }
                break;

            case '\\':
                if (isEscaped) {
                    str += c;
                    isEscaped = false;
                } else {
                    isEscaped = true;
                }
                break;

            case '(':
                if (isString) {
                    str += c;
                } else {
                    isFunction = true;
                    functionName = str;
                    str = '';
                    args = [];
                }
                break;

            case ')':
                if (isString) {
                    str += c;
                } else if (isFunction) {
                    if (str) {
                        args.push(str);
                    }

                    switch (functionName) {
                        case 'attr':
                            if (args.length > 0) {
                                tokens.push({ type: TOKEN_TYPE.ATTRIBUTE, value: args[0] });
                            }
                            break;

                        case 'counter':
                            if (args.length > 0) {
                                var counter = {
                                    type: TOKEN_TYPE.COUNTER,
                                    name: args[0]
                                };
                                if (args.length > 1) {
                                    counter.format = args[1];
                                }
                                tokens.push(counter);
                            }
                            break;

                        case 'counters':
                            if (args.length > 0) {
                                var _counters2 = {
                                    type: TOKEN_TYPE.COUNTERS,
                                    name: args[0]
                                };
                                if (args.length > 1) {
                                    _counters2.glue = args[1];
                                }
                                if (args.length > 2) {
                                    _counters2.format = args[2];
                                }
                                tokens.push(_counters2);
                            }
                            break;

                        case 'url':
                            if (args.length > 0) {
                                tokens.push({ type: TOKEN_TYPE.URL, value: args[0] });
                            }
                            break;
                    }

                    isFunction = false;
                    str = '';
                }
                break;

            case ',':
                if (isString) {
                    str += c;
                } else if (isFunction) {
                    args.push(str);
                    str = '';
                }
                break;

            case ' ':
            case '\t':
                if (isString) {
                    str += c;
                } else if (str) {
                    addOtherToken(tokens, str);
                    str = '';
                }
                break;

            default:
                str += c;
        }

        if (c !== '\\') {
            isEscaped = false;
        }
    }

    if (str) {
        addOtherToken(tokens, str);
    }

    if (cache) {
        cache[content] = tokens;
    }

    return tokens;
};

var addOtherToken = function addOtherToken(tokens, identifier) {
    switch (identifier) {
        case 'open-quote':
            tokens.push({ type: TOKEN_TYPE.OPENQUOTE });
            break;
        case 'close-quote':
            tokens.push({ type: TOKEN_TYPE.CLOSEQUOTE });
            break;
    }
};

var getQuote = function getQuote(style, isOpening, quoteDepth) {
    var quotes = style.quotes ? style.quotes.split(/\s+/) : ["'\"'", "'\"'"];
    var idx = quoteDepth * 2;
    if (idx >= quotes.length) {
        idx = quotes.length - 2;
    }
    if (!isOpening) {
        ++idx;
    }
    return quotes[idx].replace(/^["']|["']$/g, '');
};

var formatCounterValue = function formatCounterValue(counter, glue, format) {
    var len = counter.length;
    var result = '';

    for (var i = 0; i < len; i++) {
        if (i > 0) {
            result += glue || '';
        }
        result += (0, _ListItem.createCounterText)(counter[i], (0, _listStyle.parseListStyleType)(format || 'decimal'), false);
    }

    return result;
};
},{"./ListItem":27,"./parsing/listStyle":55}],33:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Bounds = require('./Bounds');

var _Font = require('./Font');

var _Gradient = require('./Gradient');

var _TextContainer = require('./TextContainer');

var _TextContainer2 = _interopRequireDefault(_TextContainer);

var _background = require('./parsing/background');

var _border = require('./parsing/border');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Renderer = function () {
    function Renderer(target, options) {
        _classCallCheck(this, Renderer);

        this.target = target;
        this.options = options;
        target.render(options);
    }

    _createClass(Renderer, [{
        key: 'renderNode',
        value: function renderNode(container) {
            if (container.isVisible()) {
                this.renderNodeBackgroundAndBorders(container);
                this.renderNodeContent(container);
            }
        }
    }, {
        key: 'renderNodeContent',
        value: function renderNodeContent(container) {
            var _this = this;

            var callback = function callback() {
                if (container.childNodes.length) {
                    container.childNodes.forEach(function (child) {
                        if (child instanceof _TextContainer2.default) {
                            var style = child.parent.style;
                            _this.target.renderTextNode(child.bounds, style.color, style.font, style.textDecoration, style.textShadow);
                        } else {
                            _this.target.drawShape(child, container.style.color);
                        }
                    });
                }

                if (container.image) {
                    var _image = _this.options.imageStore.get(container.image);
                    if (_image) {
                        var contentBox = (0, _Bounds.calculateContentBox)(container.bounds, container.style.padding, container.style.border);
                        var _width = typeof _image.width === 'number' && _image.width > 0 ? _image.width : contentBox.width;
                        var _height = typeof _image.height === 'number' && _image.height > 0 ? _image.height : contentBox.height;
                        if (_width > 0 && _height > 0) {
                            _this.target.clip([(0, _Bounds.calculatePaddingBoxPath)(container.curvedBounds)], function () {
                                _this.target.drawImage(_image, new _Bounds.Bounds(0, 0, _width, _height), contentBox);
                            });
                        }
                    }
                }
            };
            var paths = container.getClipPaths();
            if (paths.length) {
                this.target.clip(paths, callback);
            } else {
                callback();
            }
        }
    }, {
        key: 'renderNodeBackgroundAndBorders',
        value: function renderNodeBackgroundAndBorders(container) {
            var _this2 = this;

            var HAS_BACKGROUND = !container.style.background.backgroundColor.isTransparent() || container.style.background.backgroundImage.length;

            var hasRenderableBorders = container.style.border.some(function (border) {
                return border.borderStyle !== _border.BORDER_STYLE.NONE && !border.borderColor.isTransparent();
            });

            var callback = function callback() {
                var backgroundPaintingArea = (0, _background.calculateBackgroungPaintingArea)(container.curvedBounds, container.style.background.backgroundClip);

                if (HAS_BACKGROUND) {
                    _this2.target.clip([backgroundPaintingArea], function () {
                        if (!container.style.background.backgroundColor.isTransparent()) {
                            _this2.target.fill(container.style.background.backgroundColor);
                        }

                        _this2.renderBackgroundImage(container);
                    });
                }

                container.style.border.forEach(function (border, side) {
                    if (border.borderStyle !== _border.BORDER_STYLE.NONE && !border.borderColor.isTransparent()) {
                        _this2.renderBorder(border, side, container.curvedBounds);
                    }
                });
            };

            if (HAS_BACKGROUND || hasRenderableBorders) {
                var paths = container.parent ? container.parent.getClipPaths() : [];
                if (paths.length) {
                    this.target.clip(paths, callback);
                } else {
                    callback();
                }
            }
        }
    }, {
        key: 'renderBackgroundImage',
        value: function renderBackgroundImage(container) {
            var _this3 = this;

            container.style.background.backgroundImage.slice(0).reverse().forEach(function (backgroundImage) {
                if (backgroundImage.source.method === 'url' && backgroundImage.source.args.length) {
                    _this3.renderBackgroundRepeat(container, backgroundImage);
                } else if (/gradient/i.test(backgroundImage.source.method)) {
                    _this3.renderBackgroundGradient(container, backgroundImage);
                }
            });
        }
    }, {
        key: 'renderBackgroundRepeat',
        value: function renderBackgroundRepeat(container, background) {
            var image = this.options.imageStore.get(background.source.args[0]);
            if (image) {
                var backgroundPositioningArea = (0, _background.calculateBackgroungPositioningArea)(container.style.background.backgroundOrigin, container.bounds, container.style.padding, container.style.border);
                var backgroundImageSize = (0, _background.calculateBackgroundSize)(background, image, backgroundPositioningArea);
                var position = (0, _background.calculateBackgroundPosition)(background.position, backgroundImageSize, backgroundPositioningArea);
                var _path = (0, _background.calculateBackgroundRepeatPath)(background, position, backgroundImageSize, backgroundPositioningArea, container.bounds);

                var _offsetX = Math.round(backgroundPositioningArea.left + position.x);
                var _offsetY = Math.round(backgroundPositioningArea.top + position.y);
                this.target.renderRepeat(_path, image, backgroundImageSize, _offsetX, _offsetY);
            }
        }
    }, {
        key: 'renderBackgroundGradient',
        value: function renderBackgroundGradient(container, background) {
            var backgroundPositioningArea = (0, _background.calculateBackgroungPositioningArea)(container.style.background.backgroundOrigin, container.bounds, container.style.padding, container.style.border);
            var backgroundImageSize = (0, _background.calculateGradientBackgroundSize)(background, backgroundPositioningArea);
            var position = (0, _background.calculateBackgroundPosition)(background.position, backgroundImageSize, backgroundPositioningArea);
            var gradientBounds = new _Bounds.Bounds(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y), backgroundImageSize.width, backgroundImageSize.height);

            var gradient = (0, _Gradient.parseGradient)(container, background.source, gradientBounds);
            if (gradient) {
                switch (gradient.type) {
                    case _Gradient.GRADIENT_TYPE.LINEAR_GRADIENT:
                        // $FlowFixMe
                        this.target.renderLinearGradient(gradientBounds, gradient);
                        break;
                    case _Gradient.GRADIENT_TYPE.RADIAL_GRADIENT:
                        // $FlowFixMe
                        this.target.renderRadialGradient(gradientBounds, gradient);
                        break;
                }
            }
        }
    }, {
        key: 'renderBorder',
        value: function renderBorder(border, side, curvePoints) {
            this.target.drawShape((0, _Bounds.parsePathForBorder)(curvePoints, side), border.borderColor);
        }
    }, {
        key: 'renderStack',
        value: function renderStack(stack) {
            var _this4 = this;

            if (stack.container.isVisible()) {
                var _opacity = stack.getOpacity();
                if (_opacity !== this._opacity) {
                    this.target.setOpacity(stack.getOpacity());
                    this._opacity = _opacity;
                }

                var _transform = stack.container.style.transform;
                if (_transform !== null) {
                    this.target.transform(stack.container.bounds.left + _transform.transformOrigin[0].value, stack.container.bounds.top + _transform.transformOrigin[1].value, _transform.transform, function () {
                        return _this4.renderStackContent(stack);
                    });
                } else {
                    this.renderStackContent(stack);
                }
            }
        }
    }, {
        key: 'renderStackContent',
        value: function renderStackContent(stack) {
            var _splitStackingContext = splitStackingContexts(stack),
                _splitStackingContext2 = _slicedToArray(_splitStackingContext, 5),
                negativeZIndex = _splitStackingContext2[0],
                zeroOrAutoZIndexOrTransformedOrOpacity = _splitStackingContext2[1],
                positiveZIndex = _splitStackingContext2[2],
                nonPositionedFloats = _splitStackingContext2[3],
                nonPositionedInlineLevel = _splitStackingContext2[4];

            var _splitDescendants = splitDescendants(stack),
                _splitDescendants2 = _slicedToArray(_splitDescendants, 2),
                inlineLevel = _splitDescendants2[0],
                nonInlineLevel = _splitDescendants2[1];

            // https://www.w3.org/TR/css-position-3/#painting-order
            // 1. the background and borders of the element forming the stacking context.


            this.renderNodeBackgroundAndBorders(stack.container);
            // 2. the child stacking contexts with negative stack levels (most negative first).
            negativeZIndex.sort(sortByZIndex).forEach(this.renderStack, this);
            // 3. For all its in-flow, non-positioned, block-level descendants in tree order:
            this.renderNodeContent(stack.container);
            nonInlineLevel.forEach(this.renderNode, this);
            // 4. All non-positioned floating descendants, in tree order. For each one of these,
            // treat the element as if it created a new stacking context, but any positioned descendants and descendants
            // which actually create a new stacking context should be considered part of the parent stacking context,
            // not this new one.
            nonPositionedFloats.forEach(this.renderStack, this);
            // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.
            nonPositionedInlineLevel.forEach(this.renderStack, this);
            inlineLevel.forEach(this.renderNode, this);
            // 6. All positioned, opacity or transform descendants, in tree order that fall into the following categories:
            //  All positioned descendants with 'z-index: auto' or 'z-index: 0', in tree order.
            //  For those with 'z-index: auto', treat the element as if it created a new stacking context,
            //  but any positioned descendants and descendants which actually create a new stacking context should be
            //  considered part of the parent stacking context, not this new one. For those with 'z-index: 0',
            //  treat the stacking context generated atomically.
            //
            //  All opacity descendants with opacity less than 1
            //
            //  All transform descendants with transform other than none
            zeroOrAutoZIndexOrTransformedOrOpacity.forEach(this.renderStack, this);
            // 7. Stacking contexts formed by positioned descendants with z-indices greater than or equal to 1 in z-index
            // order (smallest first) then tree order.
            positiveZIndex.sort(sortByZIndex).forEach(this.renderStack, this);
        }
    }, {
        key: 'render',
        value: function render(stack) {
            var _this5 = this;

            if (this.options.backgroundColor) {
                this.target.rectangle(this.options.x, this.options.y, this.options.width, this.options.height, this.options.backgroundColor);
            }
            this.renderStack(stack);
            var target = this.target.getTarget();
            if (process.env.NODE_ENV !== 'production') {
                return target.then(function (output) {
                    _this5.options.logger.log('Render completed');
                    return output;
                });
            }
            return target;
        }
    }]);

    return Renderer;
}();

exports.default = Renderer;


var splitDescendants = function splitDescendants(stack) {
    var inlineLevel = [];
    var nonInlineLevel = [];

    var length = stack.children.length;
    for (var i = 0; i < length; i++) {
        var child = stack.children[i];
        if (child.isInlineLevel()) {
            inlineLevel.push(child);
        } else {
            nonInlineLevel.push(child);
        }
    }
    return [inlineLevel, nonInlineLevel];
};

var splitStackingContexts = function splitStackingContexts(stack) {
    var negativeZIndex = [];
    var zeroOrAutoZIndexOrTransformedOrOpacity = [];
    var positiveZIndex = [];
    var nonPositionedFloats = [];
    var nonPositionedInlineLevel = [];
    var length = stack.contexts.length;
    for (var i = 0; i < length; i++) {
        var child = stack.contexts[i];
        if (child.container.isPositioned() || child.container.style.opacity < 1 || child.container.isTransformed()) {
            if (child.container.style.zIndex.order < 0) {
                negativeZIndex.push(child);
            } else if (child.container.style.zIndex.order > 0) {
                positiveZIndex.push(child);
            } else {
                zeroOrAutoZIndexOrTransformedOrOpacity.push(child);
            }
        } else {
            if (child.container.isFloating()) {
                nonPositionedFloats.push(child);
            } else {
                nonPositionedInlineLevel.push(child);
            }
        }
    }
    return [negativeZIndex, zeroOrAutoZIndexOrTransformedOrOpacity, positiveZIndex, nonPositionedFloats, nonPositionedInlineLevel];
};

var sortByZIndex = function sortByZIndex(a, b) {
    if (a.container.style.zIndex.order > b.container.style.zIndex.order) {
        return 1;
    } else if (a.container.style.zIndex.order < b.container.style.zIndex.order) {
        return -1;
    }

    return a.container.index > b.container.index ? 1 : -1;
};
}).call(this,require('_process'))
},{"./Bounds":19,"./Font":23,"./Gradient":24,"./TextContainer":37,"./parsing/background":47,"./parsing/border":48,"_process":72}],34:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.ResourceStore = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Feature = require('./Feature');

var _Feature2 = _interopRequireDefault(_Feature);

var _Proxy = require('./Proxy');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ResourceLoader = function () {
    function ResourceLoader(options, logger, window) {
        _classCallCheck(this, ResourceLoader);

        this.options = options;
        this._window = window;
        this.origin = this.getOrigin(window.location.href);
        this.cache = {};
        this.logger = logger;
        this._index = 0;
    }

    _createClass(ResourceLoader, [{
        key: 'loadImage',
        value: function loadImage(src) {
            var _this = this;

            if (this.hasResourceInCache(src)) {
                return src;
            }

            if (!isSVG(src) || _Feature2.default.SUPPORT_SVG_DRAWING) {
                if (this.options.allowTaint === true || isInlineImage(src) || this.isSameOrigin(src)) {
                    return this.addImage(src, src, false);
                } else if (!this.isSameOrigin(src)) {
                    if (typeof this.options.proxy === 'string') {
                        this.cache[src] = (0, _Proxy.Proxy)(src, this.options).then(function (src) {
                            return _loadImage(src, _this.options.imageTimeout || 0);
                        });
                        return src;
                    } else if (this.options.useCORS === true && _Feature2.default.SUPPORT_CORS_IMAGES) {
                        return this.addImage(src, src, true);
                    }
                }
            }
        }
    }, {
        key: 'inlineImage',
        value: function inlineImage(src) {
            var _this2 = this;

            if (isInlineImage(src)) {
                return _loadImage(src, this.options.imageTimeout || 0);
            }
            if (this.hasResourceInCache(src)) {
                return this.cache[src];
            }
            if (!this.isSameOrigin(src) && typeof this.options.proxy === 'string') {
                return this.cache[src] = (0, _Proxy.Proxy)(src, this.options).then(function (src) {
                    return _loadImage(src, _this2.options.imageTimeout || 0);
                });
            }

            return this.xhrImage(src);
        }
    }, {
        key: 'xhrImage',
        value: function xhrImage(src) {
            var _this3 = this;

            this.cache[src] = new Promise(function (resolve, reject) {
                var xhr = new XMLHttpRequest();
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        if (xhr.status !== 200) {
                            reject('Failed to fetch image ' + src.substring(0, 256) + ' with status code ' + xhr.status);
                        } else {
                            var reader = new FileReader();
                            reader.addEventListener('load', function () {
                                // $FlowFixMe
                                var result = reader.result;
                                resolve(result);
                            }, false);
                            reader.addEventListener('error', function (e) {
                                return reject(e);
                            }, false);
                            reader.readAsDataURL(xhr.response);
                        }
                    }
                };
                xhr.responseType = 'blob';
                if (_this3.options.imageTimeout) {
                    var timeout = _this3.options.imageTimeout;
                    xhr.timeout = timeout;
                    xhr.ontimeout = function () {
                        return reject(process.env.NODE_ENV !== 'production' ? 'Timed out (' + timeout + 'ms) fetching ' + src.substring(0, 256) : '');
                    };
                }
                xhr.open('GET', src, true);
                xhr.send();
            }).then(function (src) {
                return _loadImage(src, _this3.options.imageTimeout || 0);
            });

            return this.cache[src];
        }
    }, {
        key: 'loadCanvas',
        value: function loadCanvas(node) {
            var key = String(this._index++);
            this.cache[key] = Promise.resolve(node);
            return key;
        }
    }, {
        key: 'hasResourceInCache',
        value: function hasResourceInCache(key) {
            return typeof this.cache[key] !== 'undefined';
        }
    }, {
        key: 'addImage',
        value: function addImage(key, src, useCORS) {
            var _this4 = this;

            if (process.env.NODE_ENV !== 'production') {
                this.logger.log('Added image ' + key.substring(0, 256));
            }

            var imageLoadHandler = function imageLoadHandler(supportsDataImages) {
                return new Promise(function (resolve, reject) {
                    var img = new Image();
                    img.onload = function () {
                        return resolve(img);
                    };
                    //ios safari 10.3 taints canvas with data urls unless crossOrigin is set to anonymous
                    if (!supportsDataImages || useCORS) {
                        img.crossOrigin = 'anonymous';
                    }

                    img.onerror = reject;
                    img.src = src;
                    if (img.complete === true) {
                        // Inline XML images may fail to parse, throwing an Error later on
                        setTimeout(function () {
                            resolve(img);
                        }, 500);
                    }
                    if (_this4.options.imageTimeout) {
                        var timeout = _this4.options.imageTimeout;
                        setTimeout(function () {
                            return reject(process.env.NODE_ENV !== 'production' ? 'Timed out (' + timeout + 'ms) fetching ' + src.substring(0, 256) : '');
                        }, timeout);
                    }
                });
            };

            this.cache[key] = isInlineBase64Image(src) && !isSVG(src) ? // $FlowFixMe
            _Feature2.default.SUPPORT_BASE64_DRAWING(src).then(imageLoadHandler) : imageLoadHandler(true);
            return key;
        }
    }, {
        key: 'isSameOrigin',
        value: function isSameOrigin(url) {
            return this.getOrigin(url) === this.origin;
        }
    }, {
        key: 'getOrigin',
        value: function getOrigin(url) {
            var link = this._link || (this._link = this._window.document.createElement('a'));
            link.href = url;
            link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/
            return link.protocol + link.hostname + link.port;
        }
    }, {
        key: 'ready',
        value: function ready() {
            var _this5 = this;

            var keys = Object.keys(this.cache);
            var values = keys.map(function (str) {
                return _this5.cache[str].catch(function (e) {
                    if (process.env.NODE_ENV !== 'production') {
                        _this5.logger.log('Unable to load image', e);
                    }
                    return null;
                });
            });
            return Promise.all(values).then(function (images) {
                if (process.env.NODE_ENV !== 'production') {
                    _this5.logger.log('Finished loading ' + images.length + ' images', images);
                }
                return new ResourceStore(keys, images);
            });
        }
    }]);

    return ResourceLoader;
}();

exports.default = ResourceLoader;

var ResourceStore = exports.ResourceStore = function () {
    function ResourceStore(keys, resources) {
        _classCallCheck(this, ResourceStore);

        this._keys = keys;
        this._resources = resources;
    }

    _createClass(ResourceStore, [{
        key: 'get',
        value: function get(key) {
            var index = this._keys.indexOf(key);
            return index === -1 ? null : this._resources[index];
        }
    }]);

    return ResourceStore;
}();

var INLINE_SVG = /^data:image\/svg\+xml/i;
var INLINE_BASE64 = /^data:image\/.*;base64,/i;
var INLINE_IMG = /^data:image\/.*/i;

var isInlineImage = function isInlineImage(src) {
    return INLINE_IMG.test(src);
};
var isInlineBase64Image = function isInlineBase64Image(src) {
    return INLINE_BASE64.test(src);
};

var isSVG = function isSVG(src) {
    return src.substr(-3).toLowerCase() === 'svg' || INLINE_SVG.test(src);
};

var _loadImage = function _loadImage(src, timeout) {
    return new Promise(function (resolve, reject) {
        var img = new Image();
        img.onload = function () {
            return resolve(img);
        };
        img.onerror = reject;
        img.src = src;
        if (img.complete === true) {
            // Inline XML images may fail to parse, throwing an Error later on
            setTimeout(function () {
                resolve(img);
            }, 500);
        }
        if (timeout) {
            setTimeout(function () {
                return reject(process.env.NODE_ENV !== 'production' ? 'Timed out (' + timeout + 'ms) loading image' : '');
            }, timeout);
        }
    });
};
}).call(this,require('_process'))
},{"./Feature":22,"./Proxy":31,"_process":72}],35:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _NodeContainer = require('./NodeContainer');

var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

var _position = require('./parsing/position');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var StackingContext = function () {
    function StackingContext(container, parent, treatAsRealStackingContext) {
        _classCallCheck(this, StackingContext);

        this.container = container;
        this.parent = parent;
        this.contexts = [];
        this.children = [];
        this.treatAsRealStackingContext = treatAsRealStackingContext;
    }

    _createClass(StackingContext, [{
        key: 'getOpacity',
        value: function getOpacity() {
            return this.parent ? this.container.style.opacity * this.parent.getOpacity() : this.container.style.opacity;
        }
    }, {
        key: 'getRealParentStackingContext',
        value: function getRealParentStackingContext() {
            return !this.parent || this.treatAsRealStackingContext ? this : this.parent.getRealParentStackingContext();
        }
    }]);

    return StackingContext;
}();

exports.default = StackingContext;
},{"./NodeContainer":29,"./parsing/position":60}],36:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseTextBounds = exports.TextBounds = undefined;

var _Bounds = require('./Bounds');

var _textDecoration = require('./parsing/textDecoration');

var _Feature = require('./Feature');

var _Feature2 = _interopRequireDefault(_Feature);

var _Unicode = require('./Unicode');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var TextBounds = exports.TextBounds = function TextBounds(text, bounds) {
    _classCallCheck(this, TextBounds);

    this.text = text;
    this.bounds = bounds;
};

var parseTextBounds = exports.parseTextBounds = function parseTextBounds(value, parent, node) {
    var letterRendering = parent.style.letterSpacing !== 0;
    var textList = letterRendering ? (0, _Unicode.toCodePoints)(value).map(function (i) {
        return (0, _Unicode.fromCodePoint)(i);
    }) : (0, _Unicode.breakWords)(value, parent);
    var length = textList.length;
    var defaultView = node.parentNode ? node.parentNode.ownerDocument.defaultView : null;
    var scrollX = defaultView ? defaultView.pageXOffset : 0;
    var scrollY = defaultView ? defaultView.pageYOffset : 0;
    var textBounds = [];
    var offset = 0;
    for (var i = 0; i < length; i++) {
        var text = textList[i];
        if (parent.style.textDecoration !== _textDecoration.TEXT_DECORATION.NONE || text.trim().length > 0) {
            if (_Feature2.default.SUPPORT_RANGE_BOUNDS) {
                textBounds.push(new TextBounds(text, getRangeBounds(node, offset, text.length, scrollX, scrollY)));
            } else {
                var replacementNode = node.splitText(text.length);
                textBounds.push(new TextBounds(text, getWrapperBounds(node, scrollX, scrollY)));
                node = replacementNode;
            }
        } else if (!_Feature2.default.SUPPORT_RANGE_BOUNDS) {
            node = node.splitText(text.length);
        }
        offset += text.length;
    }
    return textBounds;
};

var getWrapperBounds = function getWrapperBounds(node, scrollX, scrollY) {
    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');
    wrapper.appendChild(node.cloneNode(true));
    var parentNode = node.parentNode;
    if (parentNode) {
        parentNode.replaceChild(wrapper, node);
        var bounds = (0, _Bounds.parseBounds)(wrapper, scrollX, scrollY);
        if (wrapper.firstChild) {
            parentNode.replaceChild(wrapper.firstChild, wrapper);
        }
        return bounds;
    }
    return new _Bounds.Bounds(0, 0, 0, 0);
};

var getRangeBounds = function getRangeBounds(node, offset, length, scrollX, scrollY) {
    var range = node.ownerDocument.createRange();
    range.setStart(node, offset);
    range.setEnd(node, offset + length);
    return _Bounds.Bounds.fromClientRect(range.getBoundingClientRect(), scrollX, scrollY);
};
},{"./Bounds":19,"./Feature":22,"./Unicode":38,"./parsing/textDecoration":61}],37:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _textTransform = require('./parsing/textTransform');

var _TextBounds = require('./TextBounds');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var TextContainer = function () {
    function TextContainer(text, parent, bounds) {
        _classCallCheck(this, TextContainer);

        this.text = text;
        this.parent = parent;
        this.bounds = bounds;
    }

    _createClass(TextContainer, null, [{
        key: 'fromTextNode',
        value: function fromTextNode(node, parent) {
            var text = transform(node.data, parent.style.textTransform);
            return new TextContainer(text, parent, (0, _TextBounds.parseTextBounds)(text, parent, node));
        }
    }]);

    return TextContainer;
}();

exports.default = TextContainer;


var CAPITALIZE = /(^|\s|:|-|\(|\))([a-z])/g;

var transform = function transform(text, _transform) {
    switch (_transform) {
        case _textTransform.TEXT_TRANSFORM.LOWERCASE:
            return text.toLowerCase();
        case _textTransform.TEXT_TRANSFORM.CAPITALIZE:
            return text.replace(CAPITALIZE, capitalize);
        case _textTransform.TEXT_TRANSFORM.UPPERCASE:
            return text.toUpperCase();
        default:
            return text;
    }
};

function capitalize(m, p1, p2) {
    if (m.length > 0) {
        return p1 + p2.toUpperCase();
    }

    return m;
}
},{"./TextBounds":36,"./parsing/textTransform":63}],38:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.breakWords = exports.fromCodePoint = exports.toCodePoints = undefined;

var _cssLineBreak = require('css-line-break');

Object.defineProperty(exports, 'toCodePoints', {
    enumerable: true,
    get: function get() {
        return _cssLineBreak.toCodePoints;
    }
});
Object.defineProperty(exports, 'fromCodePoint', {
    enumerable: true,
    get: function get() {
        return _cssLineBreak.fromCodePoint;
    }
});

var _NodeContainer = require('./NodeContainer');

var _NodeContainer2 = _interopRequireDefault(_NodeContainer);

var _overflowWrap = require('./parsing/overflowWrap');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var breakWords = exports.breakWords = function breakWords(str, parent) {
    var breaker = (0, _cssLineBreak.LineBreaker)(str, {
        lineBreak: parent.style.lineBreak,
        wordBreak: parent.style.overflowWrap === _overflowWrap.OVERFLOW_WRAP.BREAK_WORD ? 'break-word' : parent.style.wordBreak
    });

    var words = [];
    var bk = void 0;

    while (!(bk = breaker.next()).done) {
        words.push(bk.value.slice());
    }

    return words;
};
},{"./NodeContainer":29,"./parsing/overflowWrap":58,"css-line-break":16}],39:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var contains = exports.contains = function contains(bit, value) {
    return (bit & value) !== 0;
};

var distance = exports.distance = function distance(a, b) {
    return Math.sqrt(a * a + b * b);
};

var copyCSSStyles = exports.copyCSSStyles = function copyCSSStyles(style, target) {
    // Edge does not provide value for cssText
    for (var i = style.length - 1; i >= 0; i--) {
        var property = style.item(i);
        // Safari shows pseudoelements if content is set
        if (property !== 'content') {
            target.style.setProperty(property, style.getPropertyValue(property));
        }
    }
    return target;
};

var SMALL_IMAGE = exports.SMALL_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';
},{}],40:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.renderElement = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _Logger = require('./Logger');

var _Logger2 = _interopRequireDefault(_Logger);

var _NodeParser = require('./NodeParser');

var _Renderer = require('./Renderer');

var _Renderer2 = _interopRequireDefault(_Renderer);

var _ForeignObjectRenderer = require('./renderer/ForeignObjectRenderer');

var _ForeignObjectRenderer2 = _interopRequireDefault(_ForeignObjectRenderer);

var _Feature = require('./Feature');

var _Feature2 = _interopRequireDefault(_Feature);

var _Bounds = require('./Bounds');

var _Clone = require('./Clone');

var _Font = require('./Font');

var _Color = require('./Color');

var _Color2 = _interopRequireDefault(_Color);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var renderElement = exports.renderElement = function renderElement(element, options, logger) {
    var ownerDocument = element.ownerDocument;

    var windowBounds = new _Bounds.Bounds(options.scrollX, options.scrollY, options.windowWidth, options.windowHeight);

    // http://www.w3.org/TR/css3-background/#special-backgrounds
    var documentBackgroundColor = ownerDocument.documentElement ? new _Color2.default(getComputedStyle(ownerDocument.documentElement).backgroundColor) : _Color.TRANSPARENT;
    var bodyBackgroundColor = ownerDocument.body ? new _Color2.default(getComputedStyle(ownerDocument.body).backgroundColor) : _Color.TRANSPARENT;

    var backgroundColor = element === ownerDocument.documentElement ? documentBackgroundColor.isTransparent() ? bodyBackgroundColor.isTransparent() ? options.backgroundColor ? new _Color2.default(options.backgroundColor) : null : bodyBackgroundColor : documentBackgroundColor : options.backgroundColor ? new _Color2.default(options.backgroundColor) : null;

    return (options.foreignObjectRendering ? // $FlowFixMe
    _Feature2.default.SUPPORT_FOREIGNOBJECT_DRAWING : Promise.resolve(false)).then(function (supportForeignObject) {
        return supportForeignObject ? function (cloner) {
            if (process.env.NODE_ENV !== 'production') {
                logger.log('Document cloned, using foreignObject rendering');
            }

            return cloner.inlineFonts(ownerDocument).then(function () {
                return cloner.resourceLoader.ready();
            }).then(function () {
                var renderer = new _ForeignObjectRenderer2.default(cloner.documentElement);
                return renderer.render({
                    backgroundColor: backgroundColor,
                    logger: logger,
                    scale: options.scale,
                    x: options.x,
                    y: options.y,
                    width: options.width,
                    height: options.height,
                    windowWidth: options.windowWidth,
                    windowHeight: options.windowHeight,
                    scrollX: options.scrollX,
                    scrollY: options.scrollY
                });
            });
        }(new _Clone.DocumentCloner(element, options, logger, true, renderElement)) : (0, _Clone.cloneWindow)(ownerDocument, windowBounds, element, options, logger, renderElement).then(function (_ref) {
            var _ref2 = _slicedToArray(_ref, 3),
                container = _ref2[0],
                clonedElement = _ref2[1],
                resourceLoader = _ref2[2];

            if (process.env.NODE_ENV !== 'production') {
                logger.log('Document cloned, using computed rendering');
            }

            var stack = (0, _NodeParser.NodeParser)(clonedElement, resourceLoader, logger);
            var clonedDocument = clonedElement.ownerDocument;

            if (backgroundColor === stack.container.style.background.backgroundColor) {
                stack.container.style.background.backgroundColor = _Color.TRANSPARENT;
            }

            return resourceLoader.ready().then(function (imageStore) {
                var fontMetrics = new _Font.FontMetrics(clonedDocument);
                if (process.env.NODE_ENV !== 'production') {
                    logger.log('Starting renderer');
                }

                var renderOptions = {
                    backgroundColor: backgroundColor,
                    fontMetrics: fontMetrics,
                    imageStore: imageStore,
                    logger: logger,
                    scale: options.scale,
                    x: options.x,
                    y: options.y,
                    width: options.width,
                    height: options.height
                };

                if (Array.isArray(options.target)) {
                    return Promise.all(options.target.map(function (target) {
                        var renderer = new _Renderer2.default(target, renderOptions);
                        return renderer.render(stack);
                    }));
                } else {
                    var renderer = new _Renderer2.default(options.target, renderOptions);
                    var canvas = renderer.render(stack);
                    if (options.removeContainer === true) {
                        if (container.parentNode) {
                            container.parentNode.removeChild(container);
                        } else if (process.env.NODE_ENV !== 'production') {
                            logger.log('Cannot detach cloned iframe as it is not in the DOM anymore');
                        }
                    }

                    return canvas;
                }
            });
        });
    });
};
}).call(this,require('_process'))
},{"./Bounds":19,"./Clone":20,"./Color":21,"./Feature":22,"./Font":23,"./Logger":28,"./NodeParser":30,"./Renderer":33,"./renderer/ForeignObjectRenderer":69,"_process":72}],41:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Path = require('./Path');

var _Vector = require('./Vector');

var _Vector2 = _interopRequireDefault(_Vector);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var lerp = function lerp(a, b, t) {
    return new _Vector2.default(a.x + (b.x - a.x) * t, a.y + (b.y - a.y) * t);
};

var BezierCurve = function () {
    function BezierCurve(start, startControl, endControl, end) {
        _classCallCheck(this, BezierCurve);

        this.type = _Path.PATH.BEZIER_CURVE;
        this.start = start;
        this.startControl = startControl;
        this.endControl = endControl;
        this.end = end;
    }

    _createClass(BezierCurve, [{
        key: 'subdivide',
        value: function subdivide(t, firstHalf) {
            var ab = lerp(this.start, this.startControl, t);
            var bc = lerp(this.startControl, this.endControl, t);
            var cd = lerp(this.endControl, this.end, t);
            var abbc = lerp(ab, bc, t);
            var bccd = lerp(bc, cd, t);
            var dest = lerp(abbc, bccd, t);
            return firstHalf ? new BezierCurve(this.start, ab, abbc, dest) : new BezierCurve(dest, bccd, cd, this.end);
        }
    }, {
        key: 'reverse',
        value: function reverse() {
            return new BezierCurve(this.end, this.endControl, this.startControl, this.start);
        }
    }]);

    return BezierCurve;
}();

exports.default = BezierCurve;
},{"./Path":43,"./Vector":45}],42:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _Path = require('./Path');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Circle = function Circle(x, y, radius) {
    _classCallCheck(this, Circle);

    this.type = _Path.PATH.CIRCLE;
    this.x = x;
    this.y = y;
    this.radius = radius;
    if (process.env.NODE_ENV !== 'production') {
        if (isNaN(x)) {
            console.error('Invalid x value given for Circle');
        }
        if (isNaN(y)) {
            console.error('Invalid y value given for Circle');
        }
        if (isNaN(radius)) {
            console.error('Invalid radius value given for Circle');
        }
    }
};

exports.default = Circle;
}).call(this,require('_process'))
},{"./Path":43,"_process":72}],43:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var PATH = exports.PATH = {
    VECTOR: 0,
    BEZIER_CURVE: 1,
    CIRCLE: 2
};
},{}],44:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Size = function Size(width, height) {
    _classCallCheck(this, Size);

    this.width = width;
    this.height = height;
};

exports.default = Size;
},{}],45:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _Path = require('./Path');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Vector = function Vector(x, y) {
    _classCallCheck(this, Vector);

    this.type = _Path.PATH.VECTOR;
    this.x = x;
    this.y = y;
    if (process.env.NODE_ENV !== 'production') {
        if (isNaN(x)) {
            console.error('Invalid x value given for Vector');
        }
        if (isNaN(y)) {
            console.error('Invalid y value given for Vector');
        }
    }
};

exports.default = Vector;
}).call(this,require('_process'))
},{"./Path":43,"_process":72}],46:[function(require,module,exports){
(function (process){
'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _CanvasRenderer = require('./renderer/CanvasRenderer');

var _CanvasRenderer2 = _interopRequireDefault(_CanvasRenderer);

var _Logger = require('./Logger');

var _Logger2 = _interopRequireDefault(_Logger);

var _Window = require('./Window');

var _Bounds = require('./Bounds');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var html2canvas = function html2canvas(element, conf) {
    var config = conf || {};
    var logger = new _Logger2.default(typeof config.logging === 'boolean' ? config.logging : true);
    logger.log('html2canvas ' + '$npm_package_version');

    if (process.env.NODE_ENV !== 'production' && typeof config.onrendered === 'function') {
        logger.error('onrendered option is deprecated, html2canvas returns a Promise with the canvas as the value');
    }

    var ownerDocument = element.ownerDocument;
    if (!ownerDocument) {
        return Promise.reject('Provided element is not within a Document');
    }
    var defaultView = ownerDocument.defaultView;

    var scrollX = defaultView.pageXOffset;
    var scrollY = defaultView.pageYOffset;

    var isDocument = element.tagName === 'HTML' || element.tagName === 'BODY';

    var _ref = isDocument ? (0, _Bounds.parseDocumentSize)(ownerDocument) : (0, _Bounds.parseBounds)(element, scrollX, scrollY),
        width = _ref.width,
        height = _ref.height,
        left = _ref.left,
        top = _ref.top;

    var defaultOptions = {
        async: true,
        allowTaint: false,
        backgroundColor: '#ffffff',
        imageTimeout: 15000,
        logging: true,
        proxy: null,
        removeContainer: true,
        foreignObjectRendering: false,
        scale: defaultView.devicePixelRatio || 1,
        target: new _CanvasRenderer2.default(config.canvas),
        useCORS: false,
        x: left,
        y: top,
        width: Math.ceil(width),
        height: Math.ceil(height),
        windowWidth: defaultView.innerWidth,
        windowHeight: defaultView.innerHeight,
        scrollX: defaultView.pageXOffset,
        scrollY: defaultView.pageYOffset
    };

    var result = (0, _Window.renderElement)(element, _extends({}, defaultOptions, config), logger);

    if (process.env.NODE_ENV !== 'production') {
        return result.catch(function (e) {
            logger.error(e);
            throw e;
        });
    }
    return result;
};

html2canvas.CanvasRenderer = _CanvasRenderer2.default;

module.exports = html2canvas;
}).call(this,require('_process'))
},{"./Bounds":19,"./Logger":28,"./Window":40,"./renderer/CanvasRenderer":68,"_process":72}],47:[function(require,module,exports){
(function (process){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseBackgroundImage = exports.parseBackground = exports.calculateBackgroundRepeatPath = exports.calculateBackgroundPosition = exports.calculateBackgroungPositioningArea = exports.calculateBackgroungPaintingArea = exports.calculateGradientBackgroundSize = exports.calculateBackgroundSize = exports.BACKGROUND_ORIGIN = exports.BACKGROUND_CLIP = exports.BACKGROUND_SIZE = exports.BACKGROUND_REPEAT = undefined;

var _Color = require('../Color');

var _Color2 = _interopRequireDefault(_Color);

var _Length = require('../Length');

var _Length2 = _interopRequireDefault(_Length);

var _Size = require('../drawing/Size');

var _Size2 = _interopRequireDefault(_Size);

var _Vector = require('../drawing/Vector');

var _Vector2 = _interopRequireDefault(_Vector);

var _Bounds = require('../Bounds');

var _padding = require('./padding');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var BACKGROUND_REPEAT = exports.BACKGROUND_REPEAT = {
    REPEAT: 0,
    NO_REPEAT: 1,
    REPEAT_X: 2,
    REPEAT_Y: 3
};

var BACKGROUND_SIZE = exports.BACKGROUND_SIZE = {
    AUTO: 0,
    CONTAIN: 1,
    COVER: 2,
    LENGTH: 3
};

var BACKGROUND_CLIP = exports.BACKGROUND_CLIP = {
    BORDER_BOX: 0,
    PADDING_BOX: 1,
    CONTENT_BOX: 2
};

var BACKGROUND_ORIGIN = exports.BACKGROUND_ORIGIN = BACKGROUND_CLIP;

var AUTO = 'auto';

var BackgroundSize = function BackgroundSize(size) {
    _classCallCheck(this, BackgroundSize);

    switch (size) {
        case 'contain':
            this.size = BACKGROUND_SIZE.CONTAIN;
            break;
        case 'cover':
            this.size = BACKGROUND_SIZE.COVER;
            break;
        case 'auto':
            this.size = BACKGROUND_SIZE.AUTO;
            break;
        default:
            this.value = new _Length2.default(size);
    }
};

var calculateBackgroundSize = exports.calculateBackgroundSize = function calculateBackgroundSize(backgroundImage, image, bounds) {
    var width = 0;
    var height = 0;
    var size = backgroundImage.size;
    if (size[0].size === BACKGROUND_SIZE.CONTAIN || size[0].size === BACKGROUND_SIZE.COVER) {
        var targetRatio = bounds.width / bounds.height;
        var currentRatio = image.width / image.height;
        return targetRatio < currentRatio !== (size[0].size === BACKGROUND_SIZE.COVER) ? new _Size2.default(bounds.width, bounds.width / currentRatio) : new _Size2.default(bounds.height * currentRatio, bounds.height);
    }

    if (size[0].value) {
        width = size[0].value.getAbsoluteValue(bounds.width);
    }

    if (size[0].size === BACKGROUND_SIZE.AUTO && size[1].size === BACKGROUND_SIZE.AUTO) {
        height = image.height;
    } else if (size[1].size === BACKGROUND_SIZE.AUTO) {
        height = width / image.width * image.height;
    } else if (size[1].value) {
        height = size[1].value.getAbsoluteValue(bounds.height);
    }

    if (size[0].size === BACKGROUND_SIZE.AUTO) {
        width = height / image.height * image.width;
    }

    return new _Size2.default(width, height);
};

var calculateGradientBackgroundSize = exports.calculateGradientBackgroundSize = function calculateGradientBackgroundSize(backgroundImage, bounds) {
    var size = backgroundImage.size;
    var width = size[0].value ? size[0].value.getAbsoluteValue(bounds.width) : bounds.width;
    var height = size[1].value ? size[1].value.getAbsoluteValue(bounds.height) : size[0].value ? width : bounds.height;

    return new _Size2.default(width, height);
};

var AUTO_SIZE = new BackgroundSize(AUTO);

var calculateBackgroungPaintingArea = exports.calculateBackgroungPaintingArea = function calculateBackgroungPaintingArea(curves, clip) {
    switch (clip) {
        case BACKGROUND_CLIP.BORDER_BOX:
            return (0, _Bounds.calculateBorderBoxPath)(curves);
        case BACKGROUND_CLIP.PADDING_BOX:
        default:
            return (0, _Bounds.calculatePaddingBoxPath)(curves);
    }
};

var calculateBackgroungPositioningArea = exports.calculateBackgroungPositioningArea = function calculateBackgroungPositioningArea(backgroundOrigin, bounds, padding, border) {
    var paddingBox = (0, _Bounds.calculatePaddingBox)(bounds, border);

    switch (backgroundOrigin) {
        case BACKGROUND_ORIGIN.BORDER_BOX:
            return bounds;
        case BACKGROUND_ORIGIN.CONTENT_BOX:
            var paddingLeft = padding[_padding.PADDING_SIDES.LEFT].getAbsoluteValue(bounds.width);
            var paddingRight = padding[_padding.PADDING_SIDES.RIGHT].getAbsoluteValue(bounds.width);
            var paddingTop = padding[_padding.PADDING_SIDES.TOP].getAbsoluteValue(bounds.width);
            var paddingBottom = padding[_padding.PADDING_SIDES.BOTTOM].getAbsoluteValue(bounds.width);
            return new _Bounds.Bounds(paddingBox.left + paddingLeft, paddingBox.top + paddingTop, paddingBox.width - paddingLeft - paddingRight, paddingBox.height - paddingTop - paddingBottom);
        case BACKGROUND_ORIGIN.PADDING_BOX:
        default:
            return paddingBox;
    }
};

var calculateBackgroundPosition = exports.calculateBackgroundPosition = function calculateBackgroundPosition(position, size, bounds) {
    return new _Vector2.default(position[0].getAbsoluteValue(bounds.width - size.width), position[1].getAbsoluteValue(bounds.height - size.height));
};

var calculateBackgroundRepeatPath = exports.calculateBackgroundRepeatPath = function calculateBackgroundRepeatPath(background, position, size, backgroundPositioningArea, bounds) {
    var repeat = background.repeat;
    switch (repeat) {
        case BACKGROUND_REPEAT.REPEAT_X:
            return [new _Vector2.default(Math.round(bounds.left), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(size.height + backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left), Math.round(size.height + backgroundPositioningArea.top + position.y))];
        case BACKGROUND_REPEAT.REPEAT_Y:
            return [new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(bounds.height + bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(bounds.height + bounds.top))];
        case BACKGROUND_REPEAT.NO_REPEAT:
            return [new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(backgroundPositioningArea.top + position.y + size.height)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y + size.height))];
        default:
            return [new _Vector2.default(Math.round(bounds.left), Math.round(bounds.top)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(bounds.top)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(bounds.height + bounds.top)), new _Vector2.default(Math.round(bounds.left), Math.round(bounds.height + bounds.top))];
    }
};

var parseBackground = exports.parseBackground = function parseBackground(style, resourceLoader) {
    return {
        backgroundColor: new _Color2.default(style.backgroundColor),
        backgroundImage: parseBackgroundImages(style, resourceLoader),
        backgroundClip: parseBackgroundClip(style.backgroundClip),
        backgroundOrigin: parseBackgroundOrigin(style.backgroundOrigin)
    };
};

var parseBackgroundClip = function parseBackgroundClip(backgroundClip) {
    switch (backgroundClip) {
        case 'padding-box':
            return BACKGROUND_CLIP.PADDING_BOX;
        case 'content-box':
            return BACKGROUND_CLIP.CONTENT_BOX;
    }
    return BACKGROUND_CLIP.BORDER_BOX;
};

var parseBackgroundOrigin = function parseBackgroundOrigin(backgroundOrigin) {
    switch (backgroundOrigin) {
        case 'padding-box':
            return BACKGROUND_ORIGIN.PADDING_BOX;
        case 'content-box':
            return BACKGROUND_ORIGIN.CONTENT_BOX;
    }
    return BACKGROUND_ORIGIN.BORDER_BOX;
};

var parseBackgroundRepeat = function parseBackgroundRepeat(backgroundRepeat) {
    switch (backgroundRepeat.trim()) {
        case 'no-repeat':
            return BACKGROUND_REPEAT.NO_REPEAT;
        case 'repeat-x':
        case 'repeat no-repeat':
            return BACKGROUND_REPEAT.REPEAT_X;
        case 'repeat-y':
        case 'no-repeat repeat':
            return BACKGROUND_REPEAT.REPEAT_Y;
        case 'repeat':
            return BACKGROUND_REPEAT.REPEAT;
    }

    if (process.env.NODE_ENV !== 'production') {
        console.error('Invalid background-repeat value "' + backgroundRepeat + '"');
    }

    return BACKGROUND_REPEAT.REPEAT;
};

var parseBackgroundImages = function parseBackgroundImages(style, resourceLoader) {
    var sources = parseBackgroundImage(style.backgroundImage).map(function (backgroundImage) {
        if (backgroundImage.method === 'url') {
            var key = resourceLoader.loadImage(backgroundImage.args[0]);
            backgroundImage.args = key ? [key] : [];
        }
        return backgroundImage;
    });
    var positions = style.backgroundPosition.split(',');
    var repeats = style.backgroundRepeat.split(',');
    var sizes = style.backgroundSize.split(',');

    return sources.map(function (source, index) {
        var size = (sizes[index] || AUTO).trim().split(' ').map(parseBackgroundSize);
        var position = (positions[index] || AUTO).trim().split(' ').map(parseBackgoundPosition);

        return {
            source: source,
            repeat: parseBackgroundRepeat(typeof repeats[index] === 'string' ? repeats[index] : repeats[0]),
            size: size.length < 2 ? [size[0], AUTO_SIZE] : [size[0], size[1]],
            position: position.length < 2 ? [position[0], position[0]] : [position[0], position[1]]
        };
    });
};

var parseBackgroundSize = function parseBackgroundSize(size) {
    return size === 'auto' ? AUTO_SIZE : new BackgroundSize(size);
};

var parseBackgoundPosition = function parseBackgoundPosition(position) {
    switch (position) {
        case 'bottom':
        case 'right':
            return new _Length2.default('100%');
        case 'left':
        case 'top':
            return new _Length2.default('0%');
        case 'auto':
            return new _Length2.default('0');
    }
    return new _Length2.default(position);
};

var parseBackgroundImage = exports.parseBackgroundImage = function parseBackgroundImage(image) {
    var whitespace = /^\s$/;
    var results = [];

    var args = [];
    var method = '';
    var quote = null;
    var definition = '';
    var mode = 0;
    var numParen = 0;

    var appendResult = function appendResult() {
        var prefix = '';
        if (method) {
            if (definition.substr(0, 1) === '"') {
                definition = definition.substr(1, definition.length - 2);
            }

            if (definition) {
                args.push(definition.trim());
            }

            var prefix_i = method.indexOf('-', 1) + 1;
            if (method.substr(0, 1) === '-' && prefix_i > 0) {
                prefix = method.substr(0, prefix_i).toLowerCase();
                method = method.substr(prefix_i);
            }
            method = method.toLowerCase();
            if (method !== 'none') {
                results.push({
                    prefix: prefix,
                    method: method,
                    args: args
                });
            }
        }
        args = [];
        method = definition = '';
    };

    image.split('').forEach(function (c) {
        if (mode === 0 && whitespace.test(c)) {
            return;
        }
        switch (c) {
            case '"':
                if (!quote) {
                    quote = c;
                } else if (quote === c) {
                    quote = null;
                }
                break;
            case '(':
                if (quote) {
                    break;
                } else if (mode === 0) {
                    mode = 1;
                    return;
                } else {
                    numParen++;
                }
                break;
            case ')':
                if (quote) {
                    break;
                } else if (mode === 1) {
                    if (numParen === 0) {
                        mode = 0;
                        appendResult();
                        return;
                    } else {
                        numParen--;
                    }
                }
                break;

            case ',':
                if (quote) {
                    break;
                } else if (mode === 0) {
                    appendResult();
                    return;
                } else if (mode === 1) {
                    if (numParen === 0 && !method.match(/^url$/i)) {
                        args.push(definition.trim());
                        definition = '';
                        return;
                    }
                }
                break;
        }

        if (mode === 0) {
            method += c;
        } else {
            definition += c;
        }
    });

    appendResult();
    return results;
};
}).call(this,require('_process'))
},{"../Bounds":19,"../Color":21,"../Length":26,"../drawing/Size":44,"../drawing/Vector":45,"./padding":59,"_process":72}],48:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseBorder = exports.BORDER_SIDES = exports.BORDER_STYLE = undefined;

var _Color = require('../Color');

var _Color2 = _interopRequireDefault(_Color);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var BORDER_STYLE = exports.BORDER_STYLE = {
    NONE: 0,
    SOLID: 1
};

var BORDER_SIDES = exports.BORDER_SIDES = {
    TOP: 0,
    RIGHT: 1,
    BOTTOM: 2,
    LEFT: 3
};

var SIDES = Object.keys(BORDER_SIDES).map(function (s) {
    return s.toLowerCase();
});

var parseBorderStyle = function parseBorderStyle(style) {
    switch (style) {
        case 'none':
            return BORDER_STYLE.NONE;
    }
    return BORDER_STYLE.SOLID;
};

var parseBorder = exports.parseBorder = function parseBorder(style) {
    return SIDES.map(function (side) {
        var borderColor = new _Color2.default(style.getPropertyValue('border-' + side + '-color'));
        var borderStyle = parseBorderStyle(style.getPropertyValue('border-' + side + '-style'));
        var borderWidth = parseFloat(style.getPropertyValue('border-' + side + '-width'));
        return {
            borderColor: borderColor,
            borderStyle: borderStyle,
            borderWidth: isNaN(borderWidth) ? 0 : borderWidth
        };
    });
};
},{"../Color":21}],49:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseBorderRadius = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _Length = require('../Length');

var _Length2 = _interopRequireDefault(_Length);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SIDES = ['top-left', 'top-right', 'bottom-right', 'bottom-left'];

var parseBorderRadius = exports.parseBorderRadius = function parseBorderRadius(style) {
    return SIDES.map(function (side) {
        var value = style.getPropertyValue('border-' + side + '-radius');

        var _value$split$map = value.split(' ').map(_Length2.default.create),
            _value$split$map2 = _slicedToArray(_value$split$map, 2),
            horizontal = _value$split$map2[0],
            vertical = _value$split$map2[1];

        return typeof vertical === 'undefined' ? [horizontal, horizontal] : [horizontal, vertical];
    });
};
},{"../Length":26}],50:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var DISPLAY = exports.DISPLAY = {
    NONE: 1 << 0,
    BLOCK: 1 << 1,
    INLINE: 1 << 2,
    RUN_IN: 1 << 3,
    FLOW: 1 << 4,
    FLOW_ROOT: 1 << 5,
    TABLE: 1 << 6,
    FLEX: 1 << 7,
    GRID: 1 << 8,
    RUBY: 1 << 9,
    SUBGRID: 1 << 10,
    LIST_ITEM: 1 << 11,
    TABLE_ROW_GROUP: 1 << 12,
    TABLE_HEADER_GROUP: 1 << 13,
    TABLE_FOOTER_GROUP: 1 << 14,
    TABLE_ROW: 1 << 15,
    TABLE_CELL: 1 << 16,
    TABLE_COLUMN_GROUP: 1 << 17,
    TABLE_COLUMN: 1 << 18,
    TABLE_CAPTION: 1 << 19,
    RUBY_BASE: 1 << 20,
    RUBY_TEXT: 1 << 21,
    RUBY_BASE_CONTAINER: 1 << 22,
    RUBY_TEXT_CONTAINER: 1 << 23,
    CONTENTS: 1 << 24,
    INLINE_BLOCK: 1 << 25,
    INLINE_LIST_ITEM: 1 << 26,
    INLINE_TABLE: 1 << 27,
    INLINE_FLEX: 1 << 28,
    INLINE_GRID: 1 << 29
};

var parseDisplayValue = function parseDisplayValue(display) {
    switch (display) {
        case 'block':
            return DISPLAY.BLOCK;
        case 'inline':
            return DISPLAY.INLINE;
        case 'run-in':
            return DISPLAY.RUN_IN;
        case 'flow':
            return DISPLAY.FLOW;
        case 'flow-root':
            return DISPLAY.FLOW_ROOT;
        case 'table':
            return DISPLAY.TABLE;
        case 'flex':
            return DISPLAY.FLEX;
        case 'grid':
            return DISPLAY.GRID;
        case 'ruby':
            return DISPLAY.RUBY;
        case 'subgrid':
            return DISPLAY.SUBGRID;
        case 'list-item':
            return DISPLAY.LIST_ITEM;
        case 'table-row-group':
            return DISPLAY.TABLE_ROW_GROUP;
        case 'table-header-group':
            return DISPLAY.TABLE_HEADER_GROUP;
        case 'table-footer-group':
            return DISPLAY.TABLE_FOOTER_GROUP;
        case 'table-row':
            return DISPLAY.TABLE_ROW;
        case 'table-cell':
            return DISPLAY.TABLE_CELL;
        case 'table-column-group':
            return DISPLAY.TABLE_COLUMN_GROUP;
        case 'table-column':
            return DISPLAY.TABLE_COLUMN;
        case 'table-caption':
            return DISPLAY.TABLE_CAPTION;
        case 'ruby-base':
            return DISPLAY.RUBY_BASE;
        case 'ruby-text':
            return DISPLAY.RUBY_TEXT;
        case 'ruby-base-container':
            return DISPLAY.RUBY_BASE_CONTAINER;
        case 'ruby-text-container':
            return DISPLAY.RUBY_TEXT_CONTAINER;
        case 'contents':
            return DISPLAY.CONTENTS;
        case 'inline-block':
            return DISPLAY.INLINE_BLOCK;
        case 'inline-list-item':
            return DISPLAY.INLINE_LIST_ITEM;
        case 'inline-table':
            return DISPLAY.INLINE_TABLE;
        case 'inline-flex':
            return DISPLAY.INLINE_FLEX;
        case 'inline-grid':
            return DISPLAY.INLINE_GRID;
    }

    return DISPLAY.NONE;
};

var setDisplayBit = function setDisplayBit(bit, display) {
    return bit | parseDisplayValue(display);
};

var parseDisplay = exports.parseDisplay = function parseDisplay(display) {
    return display.split(' ').reduce(setDisplayBit, 0);
};
},{}],51:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var FLOAT = exports.FLOAT = {
    NONE: 0,
    LEFT: 1,
    RIGHT: 2,
    INLINE_START: 3,
    INLINE_END: 4
};

var parseCSSFloat = exports.parseCSSFloat = function parseCSSFloat(float) {
    switch (float) {
        case 'left':
            return FLOAT.LEFT;
        case 'right':
            return FLOAT.RIGHT;
        case 'inline-start':
            return FLOAT.INLINE_START;
        case 'inline-end':
            return FLOAT.INLINE_END;
    }
    return FLOAT.NONE;
};
},{}],52:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});


var parseFontWeight = function parseFontWeight(weight) {
    switch (weight) {
        case 'normal':
            return 400;
        case 'bold':
            return 700;
    }

    var value = parseInt(weight, 10);
    return isNaN(value) ? 400 : value;
};

var parseFont = exports.parseFont = function parseFont(style) {
    var fontFamily = style.fontFamily;
    var fontSize = style.fontSize;
    var fontStyle = style.fontStyle;
    var fontVariant = style.fontVariant;
    var fontWeight = parseFontWeight(style.fontWeight);

    return {
        fontFamily: fontFamily,
        fontSize: fontSize,
        fontStyle: fontStyle,
        fontVariant: fontVariant,
        fontWeight: fontWeight
    };
};
},{}],53:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var parseLetterSpacing = exports.parseLetterSpacing = function parseLetterSpacing(letterSpacing) {
    if (letterSpacing === 'normal') {
        return 0;
    }
    var value = parseFloat(letterSpacing);
    return isNaN(value) ? 0 : value;
};
},{}],54:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var LINE_BREAK = exports.LINE_BREAK = {
    NORMAL: 'normal',
    STRICT: 'strict'
};

var parseLineBreak = exports.parseLineBreak = function parseLineBreak(wordBreak) {
    switch (wordBreak) {
        case 'strict':
            return LINE_BREAK.STRICT;
        case 'normal':
        default:
            return LINE_BREAK.NORMAL;
    }
};
},{}],55:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseListStyle = exports.parseListStyleType = exports.LIST_STYLE_TYPE = exports.LIST_STYLE_POSITION = undefined;

var _background = require('./background');

var LIST_STYLE_POSITION = exports.LIST_STYLE_POSITION = {
    INSIDE: 0,
    OUTSIDE: 1
};

var LIST_STYLE_TYPE = exports.LIST_STYLE_TYPE = {
    NONE: -1,
    DISC: 0,
    CIRCLE: 1,
    SQUARE: 2,
    DECIMAL: 3,
    CJK_DECIMAL: 4,
    DECIMAL_LEADING_ZERO: 5,
    LOWER_ROMAN: 6,
    UPPER_ROMAN: 7,
    LOWER_GREEK: 8,
    LOWER_ALPHA: 9,
    UPPER_ALPHA: 10,
    ARABIC_INDIC: 11,
    ARMENIAN: 12,
    BENGALI: 13,
    CAMBODIAN: 14,
    CJK_EARTHLY_BRANCH: 15,
    CJK_HEAVENLY_STEM: 16,
    CJK_IDEOGRAPHIC: 17,
    DEVANAGARI: 18,
    ETHIOPIC_NUMERIC: 19,
    GEORGIAN: 20,
    GUJARATI: 21,
    GURMUKHI: 22,
    HEBREW: 22,
    HIRAGANA: 23,
    HIRAGANA_IROHA: 24,
    JAPANESE_FORMAL: 25,
    JAPANESE_INFORMAL: 26,
    KANNADA: 27,
    KATAKANA: 28,
    KATAKANA_IROHA: 29,
    KHMER: 30,
    KOREAN_HANGUL_FORMAL: 31,
    KOREAN_HANJA_FORMAL: 32,
    KOREAN_HANJA_INFORMAL: 33,
    LAO: 34,
    LOWER_ARMENIAN: 35,
    MALAYALAM: 36,
    MONGOLIAN: 37,
    MYANMAR: 38,
    ORIYA: 39,
    PERSIAN: 40,
    SIMP_CHINESE_FORMAL: 41,
    SIMP_CHINESE_INFORMAL: 42,
    TAMIL: 43,
    TELUGU: 44,
    THAI: 45,
    TIBETAN: 46,
    TRAD_CHINESE_FORMAL: 47,
    TRAD_CHINESE_INFORMAL: 48,
    UPPER_ARMENIAN: 49,
    DISCLOSURE_OPEN: 50,
    DISCLOSURE_CLOSED: 51
};

var parseListStyleType = exports.parseListStyleType = function parseListStyleType(type) {
    switch (type) {
        case 'disc':
            return LIST_STYLE_TYPE.DISC;
        case 'circle':
            return LIST_STYLE_TYPE.CIRCLE;
        case 'square':
            return LIST_STYLE_TYPE.SQUARE;
        case 'decimal':
            return LIST_STYLE_TYPE.DECIMAL;
        case 'cjk-decimal':
            return LIST_STYLE_TYPE.CJK_DECIMAL;
        case 'decimal-leading-zero':
            return LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO;
        case 'lower-roman':
            return LIST_STYLE_TYPE.LOWER_ROMAN;
        case 'upper-roman':
            return LIST_STYLE_TYPE.UPPER_ROMAN;
        case 'lower-greek':
            return LIST_STYLE_TYPE.LOWER_GREEK;
        case 'lower-alpha':
            return LIST_STYLE_TYPE.LOWER_ALPHA;
        case 'upper-alpha':
            return LIST_STYLE_TYPE.UPPER_ALPHA;
        case 'arabic-indic':
            return LIST_STYLE_TYPE.ARABIC_INDIC;
        case 'armenian':
            return LIST_STYLE_TYPE.ARMENIAN;
        case 'bengali':
            return LIST_STYLE_TYPE.BENGALI;
        case 'cambodian':
            return LIST_STYLE_TYPE.CAMBODIAN;
        case 'cjk-earthly-branch':
            return LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH;
        case 'cjk-heavenly-stem':
            return LIST_STYLE_TYPE.CJK_HEAVENLY_STEM;
        case 'cjk-ideographic':
            return LIST_STYLE_TYPE.CJK_IDEOGRAPHIC;
        case 'devanagari':
            return LIST_STYLE_TYPE.DEVANAGARI;
        case 'ethiopic-numeric':
            return LIST_STYLE_TYPE.ETHIOPIC_NUMERIC;
        case 'georgian':
            return LIST_STYLE_TYPE.GEORGIAN;
        case 'gujarati':
            return LIST_STYLE_TYPE.GUJARATI;
        case 'gurmukhi':
            return LIST_STYLE_TYPE.GURMUKHI;
        case 'hebrew':
            return LIST_STYLE_TYPE.HEBREW;
        case 'hiragana':
            return LIST_STYLE_TYPE.HIRAGANA;
        case 'hiragana-iroha':
            return LIST_STYLE_TYPE.HIRAGANA_IROHA;
        case 'japanese-formal':
            return LIST_STYLE_TYPE.JAPANESE_FORMAL;
        case 'japanese-informal':
            return LIST_STYLE_TYPE.JAPANESE_INFORMAL;
        case 'kannada':
            return LIST_STYLE_TYPE.KANNADA;
        case 'katakana':
            return LIST_STYLE_TYPE.KATAKANA;
        case 'katakana-iroha':
            return LIST_STYLE_TYPE.KATAKANA_IROHA;
        case 'khmer':
            return LIST_STYLE_TYPE.KHMER;
        case 'korean-hangul-formal':
            return LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL;
        case 'korean-hanja-formal':
            return LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL;
        case 'korean-hanja-informal':
            return LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL;
        case 'lao':
            return LIST_STYLE_TYPE.LAO;
        case 'lower-armenian':
            return LIST_STYLE_TYPE.LOWER_ARMENIAN;
        case 'malayalam':
            return LIST_STYLE_TYPE.MALAYALAM;
        case 'mongolian':
            return LIST_STYLE_TYPE.MONGOLIAN;
        case 'myanmar':
            return LIST_STYLE_TYPE.MYANMAR;
        case 'oriya':
            return LIST_STYLE_TYPE.ORIYA;
        case 'persian':
            return LIST_STYLE_TYPE.PERSIAN;
        case 'simp-chinese-formal':
            return LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL;
        case 'simp-chinese-informal':
            return LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL;
        case 'tamil':
            return LIST_STYLE_TYPE.TAMIL;
        case 'telugu':
            return LIST_STYLE_TYPE.TELUGU;
        case 'thai':
            return LIST_STYLE_TYPE.THAI;
        case 'tibetan':
            return LIST_STYLE_TYPE.TIBETAN;
        case 'trad-chinese-formal':
            return LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL;
        case 'trad-chinese-informal':
            return LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL;
        case 'upper-armenian':
            return LIST_STYLE_TYPE.UPPER_ARMENIAN;
        case 'disclosure-open':
            return LIST_STYLE_TYPE.DISCLOSURE_OPEN;
        case 'disclosure-closed':
            return LIST_STYLE_TYPE.DISCLOSURE_CLOSED;
        case 'none':
        default:
            return LIST_STYLE_TYPE.NONE;
    }
};

var parseListStyle = exports.parseListStyle = function parseListStyle(style) {
    var listStyleImage = (0, _background.parseBackgroundImage)(style.getPropertyValue('list-style-image'));
    return {
        listStyleType: parseListStyleType(style.getPropertyValue('list-style-type')),
        listStyleImage: listStyleImage.length ? listStyleImage[0] : null,
        listStylePosition: parseListStylePosition(style.getPropertyValue('list-style-position'))
    };
};

var parseListStylePosition = function parseListStylePosition(position) {
    switch (position) {
        case 'inside':
            return LIST_STYLE_POSITION.INSIDE;
        case 'outside':
        default:
            return LIST_STYLE_POSITION.OUTSIDE;
    }
};
},{"./background":47}],56:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseMargin = undefined;

var _Length = require('../Length');

var _Length2 = _interopRequireDefault(_Length);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var SIDES = ['top', 'right', 'bottom', 'left'];

var parseMargin = exports.parseMargin = function parseMargin(style) {
    return SIDES.map(function (side) {
        return new _Length2.default(style.getPropertyValue('margin-' + side));
    });
};
},{"../Length":26}],57:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var OVERFLOW = exports.OVERFLOW = {
    VISIBLE: 0,
    HIDDEN: 1,
    SCROLL: 2,
    AUTO: 3
};

var parseOverflow = exports.parseOverflow = function parseOverflow(overflow) {
    switch (overflow) {
        case 'hidden':
            return OVERFLOW.HIDDEN;
        case 'scroll':
            return OVERFLOW.SCROLL;
        case 'auto':
            return OVERFLOW.AUTO;
        case 'visible':
        default:
            return OVERFLOW.VISIBLE;
    }
};
},{}],58:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var OVERFLOW_WRAP = exports.OVERFLOW_WRAP = {
    NORMAL: 0,
    BREAK_WORD: 1
};

var parseOverflowWrap = exports.parseOverflowWrap = function parseOverflowWrap(overflow) {
    switch (overflow) {
        case 'break-word':
            return OVERFLOW_WRAP.BREAK_WORD;
        case 'normal':
        default:
            return OVERFLOW_WRAP.NORMAL;
    }
};
},{}],59:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parsePadding = exports.PADDING_SIDES = undefined;

var _Length = require('../Length');

var _Length2 = _interopRequireDefault(_Length);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PADDING_SIDES = exports.PADDING_SIDES = {
    TOP: 0,
    RIGHT: 1,
    BOTTOM: 2,
    LEFT: 3
};

var SIDES = ['top', 'right', 'bottom', 'left'];

var parsePadding = exports.parsePadding = function parsePadding(style) {
    return SIDES.map(function (side) {
        return new _Length2.default(style.getPropertyValue('padding-' + side));
    });
};
},{"../Length":26}],60:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var POSITION = exports.POSITION = {
    STATIC: 0,
    RELATIVE: 1,
    ABSOLUTE: 2,
    FIXED: 3,
    STICKY: 4
};

var parsePosition = exports.parsePosition = function parsePosition(position) {
    switch (position) {
        case 'relative':
            return POSITION.RELATIVE;
        case 'absolute':
            return POSITION.ABSOLUTE;
        case 'fixed':
            return POSITION.FIXED;
        case 'sticky':
            return POSITION.STICKY;
    }

    return POSITION.STATIC;
};
},{}],61:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseTextDecoration = exports.TEXT_DECORATION_LINE = exports.TEXT_DECORATION = exports.TEXT_DECORATION_STYLE = undefined;

var _Color = require('../Color');

var _Color2 = _interopRequireDefault(_Color);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var TEXT_DECORATION_STYLE = exports.TEXT_DECORATION_STYLE = {
    SOLID: 0,
    DOUBLE: 1,
    DOTTED: 2,
    DASHED: 3,
    WAVY: 4
};

var TEXT_DECORATION = exports.TEXT_DECORATION = {
    NONE: null
};

var TEXT_DECORATION_LINE = exports.TEXT_DECORATION_LINE = {
    UNDERLINE: 1,
    OVERLINE: 2,
    LINE_THROUGH: 3,
    BLINK: 4
};

var parseLine = function parseLine(line) {
    switch (line) {
        case 'underline':
            return TEXT_DECORATION_LINE.UNDERLINE;
        case 'overline':
            return TEXT_DECORATION_LINE.OVERLINE;
        case 'line-through':
            return TEXT_DECORATION_LINE.LINE_THROUGH;
    }
    return TEXT_DECORATION_LINE.BLINK;
};

var parseTextDecorationLine = function parseTextDecorationLine(line) {
    if (line === 'none') {
        return null;
    }

    return line.split(' ').map(parseLine);
};

var parseTextDecorationStyle = function parseTextDecorationStyle(style) {
    switch (style) {
        case 'double':
            return TEXT_DECORATION_STYLE.DOUBLE;
        case 'dotted':
            return TEXT_DECORATION_STYLE.DOTTED;
        case 'dashed':
            return TEXT_DECORATION_STYLE.DASHED;
        case 'wavy':
            return TEXT_DECORATION_STYLE.WAVY;
    }
    return TEXT_DECORATION_STYLE.SOLID;
};

var parseTextDecoration = exports.parseTextDecoration = function parseTextDecoration(style) {
    var textDecorationLine = parseTextDecorationLine(style.textDecorationLine ? style.textDecorationLine : style.textDecoration);
    if (textDecorationLine === null) {
        return TEXT_DECORATION.NONE;
    }

    var textDecorationColor = style.textDecorationColor ? new _Color2.default(style.textDecorationColor) : null;
    var textDecorationStyle = parseTextDecorationStyle(style.textDecorationStyle);

    return {
        textDecorationLine: textDecorationLine,
        textDecorationColor: textDecorationColor,
        textDecorationStyle: textDecorationStyle
    };
};
},{"../Color":21}],62:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseTextShadow = undefined;

var _Color = require('../Color');

var _Color2 = _interopRequireDefault(_Color);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var NUMBER = /^([+-]|\d|\.)$/i;

var parseTextShadow = exports.parseTextShadow = function parseTextShadow(textShadow) {
    if (textShadow === 'none' || typeof textShadow !== 'string') {
        return null;
    }

    var currentValue = '';
    var isLength = false;
    var values = [];
    var shadows = [];
    var numParens = 0;
    var color = null;

    var appendValue = function appendValue() {
        if (currentValue.length) {
            if (isLength) {
                values.push(parseFloat(currentValue));
            } else {
                color = new _Color2.default(currentValue);
            }
        }
        isLength = false;
        currentValue = '';
    };

    var appendShadow = function appendShadow() {
        if (values.length && color !== null) {
            shadows.push({
                color: color,
                offsetX: values[0] || 0,
                offsetY: values[1] || 0,
                blur: values[2] || 0
            });
        }
        values.splice(0, values.length);
        color = null;
    };

    for (var i = 0; i < textShadow.length; i++) {
        var c = textShadow[i];
        switch (c) {
            case '(':
                currentValue += c;
                numParens++;
                break;
            case ')':
                currentValue += c;
                numParens--;
                break;
            case ',':
                if (numParens === 0) {
                    appendValue();
                    appendShadow();
                } else {
                    currentValue += c;
                }
                break;
            case ' ':
                if (numParens === 0) {
                    appendValue();
                } else {
                    currentValue += c;
                }
                break;
            default:
                if (currentValue.length === 0 && NUMBER.test(c)) {
                    isLength = true;
                }
                currentValue += c;
        }
    }

    appendValue();
    appendShadow();

    if (shadows.length === 0) {
        return null;
    }

    return shadows;
};
},{"../Color":21}],63:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var TEXT_TRANSFORM = exports.TEXT_TRANSFORM = {
    NONE: 0,
    LOWERCASE: 1,
    UPPERCASE: 2,
    CAPITALIZE: 3
};

var parseTextTransform = exports.parseTextTransform = function parseTextTransform(textTransform) {
    switch (textTransform) {
        case 'uppercase':
            return TEXT_TRANSFORM.UPPERCASE;
        case 'lowercase':
            return TEXT_TRANSFORM.LOWERCASE;
        case 'capitalize':
            return TEXT_TRANSFORM.CAPITALIZE;
    }

    return TEXT_TRANSFORM.NONE;
};
},{}],64:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.parseTransform = undefined;

var _Length = require('../Length');

var _Length2 = _interopRequireDefault(_Length);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var toFloat = function toFloat(s) {
    return parseFloat(s.trim());
};

var MATRIX = /(matrix|matrix3d)\((.+)\)/;

var parseTransform = exports.parseTransform = function parseTransform(style) {
    var transform = parseTransformMatrix(style.transform || style.webkitTransform || style.mozTransform ||
    // $FlowFixMe
    style.msTransform ||
    // $FlowFixMe
    style.oTransform);
    if (transform === null) {
        return null;
    }

    return {
        transform: transform,
        transformOrigin: parseTransformOrigin(style.transformOrigin || style.webkitTransformOrigin || style.mozTransformOrigin ||
        // $FlowFixMe
        style.msTransformOrigin ||
        // $FlowFixMe
        style.oTransformOrigin)
    };
};

// $FlowFixMe
var parseTransformOrigin = function parseTransformOrigin(origin) {
    if (typeof origin !== 'string') {
        var v = new _Length2.default('0');
        return [v, v];
    }
    var values = origin.split(' ').map(_Length2.default.create);
    return [values[0], values[1]];
};

// $FlowFixMe
var parseTransformMatrix = function parseTransformMatrix(transform) {
    if (transform === 'none' || typeof transform !== 'string') {
        return null;
    }

    var match = transform.match(MATRIX);
    if (match) {
        if (match[1] === 'matrix') {
            var matrix = match[2].split(',').map(toFloat);
            return [matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]];
        } else {
            var matrix3d = match[2].split(',').map(toFloat);
            return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];
        }
    }
    return null;
};
},{"../Length":26}],65:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var VISIBILITY = exports.VISIBILITY = {
    VISIBLE: 0,
    HIDDEN: 1,
    COLLAPSE: 2
};

var parseVisibility = exports.parseVisibility = function parseVisibility(visibility) {
    switch (visibility) {
        case 'hidden':
            return VISIBILITY.HIDDEN;
        case 'collapse':
            return VISIBILITY.COLLAPSE;
        case 'visible':
        default:
            return VISIBILITY.VISIBLE;
    }
};
},{}],66:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var WORD_BREAK = exports.WORD_BREAK = {
    NORMAL: 'normal',
    BREAK_ALL: 'break-all',
    KEEP_ALL: 'keep-all'
};

var parseWordBreak = exports.parseWordBreak = function parseWordBreak(wordBreak) {
    switch (wordBreak) {
        case 'break-all':
            return WORD_BREAK.BREAK_ALL;
        case 'keep-all':
            return WORD_BREAK.KEEP_ALL;
        case 'normal':
        default:
            return WORD_BREAK.NORMAL;
    }
};
},{}],67:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
var parseZIndex = exports.parseZIndex = function parseZIndex(zIndex) {
    var auto = zIndex === 'auto';
    return {
        auto: auto,
        order: auto ? 0 : parseInt(zIndex, 10)
    };
};
},{}],68:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Path = require('../drawing/Path');

var _textDecoration = require('../parsing/textDecoration');

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var addColorStops = function addColorStops(gradient, canvasGradient) {
    var maxStop = Math.max.apply(null, gradient.colorStops.map(function (colorStop) {
        return colorStop.stop;
    }));
    var f = 1 / Math.max(1, maxStop);
    gradient.colorStops.forEach(function (colorStop) {
        canvasGradient.addColorStop(f * colorStop.stop, colorStop.color.toString());
    });
};

var CanvasRenderer = function () {
    function CanvasRenderer(canvas) {
        _classCallCheck(this, CanvasRenderer);

        this.canvas = canvas ? canvas : document.createElement('canvas');
    }

    _createClass(CanvasRenderer, [{
        key: 'render',
        value: function render(options) {
            this.ctx = this.canvas.getContext('2d');
            this.options = options;
            this.canvas.width = Math.floor(options.width * options.scale);
            this.canvas.height = Math.floor(options.height * options.scale);
            this.canvas.style.width = options.width + 'px';
            this.canvas.style.height = options.height + 'px';

            this.ctx.scale(this.options.scale, this.options.scale);
            this.ctx.translate(-options.x, -options.y);
            this.ctx.textBaseline = 'bottom';
            options.logger.log('Canvas renderer initialized (' + options.width + 'x' + options.height + ' at ' + options.x + ',' + options.y + ') with scale ' + this.options.scale);
        }
    }, {
        key: 'clip',
        value: function clip(clipPaths, callback) {
            var _this = this;

            if (clipPaths.length) {
                this.ctx.save();
                clipPaths.forEach(function (path) {
                    _this.path(path);
                    _this.ctx.clip();
                });
            }

            callback();

            if (clipPaths.length) {
                this.ctx.restore();
            }
        }
    }, {
        key: 'drawImage',
        value: function drawImage(image, source, destination) {
            this.ctx.drawImage(image, source.left, source.top, source.width, source.height, destination.left, destination.top, destination.width, destination.height);
        }
    }, {
        key: 'drawShape',
        value: function drawShape(path, color) {
            this.path(path);
            this.ctx.fillStyle = color.toString();
            this.ctx.fill();
        }
    }, {
        key: 'fill',
        value: function fill(color) {
            this.ctx.fillStyle = color.toString();
            this.ctx.fill();
        }
    }, {
        key: 'getTarget',
        value: function getTarget() {
            return Promise.resolve(this.canvas);
        }
    }, {
        key: 'path',
        value: function path(_path) {
            var _this2 = this;

            this.ctx.beginPath();
            if (Array.isArray(_path)) {
                _path.forEach(function (point, index) {
                    var start = point.type === _Path.PATH.VECTOR ? point : point.start;
                    if (index === 0) {
                        _this2.ctx.moveTo(start.x, start.y);
                    } else {
                        _this2.ctx.lineTo(start.x, start.y);
                    }

                    if (point.type === _Path.PATH.BEZIER_CURVE) {
                        _this2.ctx.bezierCurveTo(point.startControl.x, point.startControl.y, point.endControl.x, point.endControl.y, point.end.x, point.end.y);
                    }
                });
            } else {
                this.ctx.arc(_path.x + _path.radius, _path.y + _path.radius, _path.radius, 0, Math.PI * 2, true);
            }

            this.ctx.closePath();
        }
    }, {
        key: 'rectangle',
        value: function rectangle(x, y, width, height, color) {
            this.ctx.fillStyle = color.toString();
            this.ctx.fillRect(x, y, width, height);
        }
    }, {
        key: 'renderLinearGradient',
        value: function renderLinearGradient(bounds, gradient) {
            var linearGradient = this.ctx.createLinearGradient(bounds.left + gradient.direction.x1, bounds.top + gradient.direction.y1, bounds.left + gradient.direction.x0, bounds.top + gradient.direction.y0);

            addColorStops(gradient, linearGradient);
            this.ctx.fillStyle = linearGradient;
            this.ctx.fillRect(bounds.left, bounds.top, bounds.width, bounds.height);
        }
    }, {
        key: 'renderRadialGradient',
        value: function renderRadialGradient(bounds, gradient) {
            var _this3 = this;

            var x = bounds.left + gradient.center.x;
            var y = bounds.top + gradient.center.y;

            var radialGradient = this.ctx.createRadialGradient(x, y, 0, x, y, gradient.radius.x);
            if (!radialGradient) {
                return;
            }

            addColorStops(gradient, radialGradient);
            this.ctx.fillStyle = radialGradient;

            if (gradient.radius.x !== gradient.radius.y) {
                // transforms for elliptical radial gradient
                var midX = bounds.left + 0.5 * bounds.width;
                var midY = bounds.top + 0.5 * bounds.height;
                var f = gradient.radius.y / gradient.radius.x;
                var invF = 1 / f;

                this.transform(midX, midY, [1, 0, 0, f, 0, 0], function () {
                    return _this3.ctx.fillRect(bounds.left, invF * (bounds.top - midY) + midY, bounds.width, bounds.height * invF);
                });
            } else {
                this.ctx.fillRect(bounds.left, bounds.top, bounds.width, bounds.height);
            }
        }
    }, {
        key: 'renderRepeat',
        value: function renderRepeat(path, image, imageSize, offsetX, offsetY) {
            this.path(path);
            this.ctx.fillStyle = this.ctx.createPattern(this.resizeImage(image, imageSize), 'repeat');
            this.ctx.translate(offsetX, offsetY);
            this.ctx.fill();
            this.ctx.translate(-offsetX, -offsetY);
        }
    }, {
        key: 'renderTextNode',
        value: function renderTextNode(textBounds, color, font, textDecoration, textShadows) {
            var _this4 = this;

            this.ctx.font = [font.fontStyle, font.fontVariant, font.fontWeight, font.fontSize, font.fontFamily].join(' ');

            textBounds.forEach(function (text) {
                _this4.ctx.fillStyle = color.toString();
                if (textShadows && text.text.trim().length) {
                    textShadows.slice(0).reverse().forEach(function (textShadow) {
                        _this4.ctx.shadowColor = textShadow.color.toString();
                        _this4.ctx.shadowOffsetX = textShadow.offsetX * _this4.options.scale;
                        _this4.ctx.shadowOffsetY = textShadow.offsetY * _this4.options.scale;
                        _this4.ctx.shadowBlur = textShadow.blur;

                        _this4.ctx.fillText(text.text, text.bounds.left, text.bounds.top + text.bounds.height);
                    });
                } else {
                    _this4.ctx.fillText(text.text, text.bounds.left, text.bounds.top + text.bounds.height);
                }

                if (textDecoration !== null) {
                    var textDecorationColor = textDecoration.textDecorationColor || color;
                    textDecoration.textDecorationLine.forEach(function (textDecorationLine) {
                        switch (textDecorationLine) {
                            case _textDecoration.TEXT_DECORATION_LINE.UNDERLINE:
                                // Draws a line at the baseline of the font
                                // TODO As some browsers display the line as more than 1px if the font-size is big,
                                // need to take that into account both in position and size
                                var _options$fontMetrics$ = _this4.options.fontMetrics.getMetrics(font),
                                    baseline = _options$fontMetrics$.baseline;

                                _this4.rectangle(text.bounds.left, Math.round(text.bounds.top + baseline), text.bounds.width, 1, textDecorationColor);
                                break;
                            case _textDecoration.TEXT_DECORATION_LINE.OVERLINE:
                                _this4.rectangle(text.bounds.left, Math.round(text.bounds.top), text.bounds.width, 1, textDecorationColor);
                                break;
                            case _textDecoration.TEXT_DECORATION_LINE.LINE_THROUGH:
                                // TODO try and find exact position for line-through
                                var _options$fontMetrics$2 = _this4.options.fontMetrics.getMetrics(font),
                                    middle = _options$fontMetrics$2.middle;

                                _this4.rectangle(text.bounds.left, Math.ceil(text.bounds.top + middle), text.bounds.width, 1, textDecorationColor);
                                break;
                        }
                    });
                }
            });
        }
    }, {
        key: 'resizeImage',
        value: function resizeImage(image, size) {
            if (image.width === size.width && image.height === size.height) {
                return image;
            }

            var canvas = this.canvas.ownerDocument.createElement('canvas');
            canvas.width = size.width;
            canvas.height = size.height;
            var ctx = canvas.getContext('2d');
            ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height);
            return canvas;
        }
    }, {
        key: 'setOpacity',
        value: function setOpacity(opacity) {
            this.ctx.globalAlpha = opacity;
        }
    }, {
        key: 'transform',
        value: function transform(offsetX, offsetY, matrix, callback) {
            this.ctx.save();
            this.ctx.translate(offsetX, offsetY);
            this.ctx.transform(matrix[0], matrix[1], matrix[2], matrix[3], matrix[4], matrix[5]);
            this.ctx.translate(-offsetX, -offsetY);

            callback();

            this.ctx.restore();
        }
    }]);

    return CanvasRenderer;
}();

exports.default = CanvasRenderer;
},{"../drawing/Path":43,"../parsing/textDecoration":61}],69:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ForeignObjectRenderer = function () {
    function ForeignObjectRenderer(element) {
        _classCallCheck(this, ForeignObjectRenderer);

        this.element = element;
    }

    _createClass(ForeignObjectRenderer, [{
        key: 'render',
        value: function render(options) {
            var _this = this;

            this.options = options;
            this.canvas = document.createElement('canvas');
            this.ctx = this.canvas.getContext('2d');
            this.canvas.width = Math.floor(options.width) * options.scale;
            this.canvas.height = Math.floor(options.height) * options.scale;
            this.canvas.style.width = options.width + 'px';
            this.canvas.style.height = options.height + 'px';

            options.logger.log('ForeignObject renderer initialized (' + options.width + 'x' + options.height + ' at ' + options.x + ',' + options.y + ') with scale ' + options.scale);
            var svg = createForeignObjectSVG(Math.max(options.windowWidth, options.width) * options.scale, Math.max(options.windowHeight, options.height) * options.scale, options.scrollX * options.scale, options.scrollY * options.scale, this.element);

            return loadSerializedSVG(svg).then(function (img) {
                if (options.backgroundColor) {
                    _this.ctx.fillStyle = options.backgroundColor.toString();
                    _this.ctx.fillRect(0, 0, options.width * options.scale, options.height * options.scale);
                }

                _this.ctx.drawImage(img, -options.x * options.scale, -options.y * options.scale);
                return _this.canvas;
            });
        }
    }]);

    return ForeignObjectRenderer;
}();

exports.default = ForeignObjectRenderer;
var createForeignObjectSVG = exports.createForeignObjectSVG = function createForeignObjectSVG(width, height, x, y, node) {
    var xmlns = 'http://www.w3.org/2000/svg';
    var svg = document.createElementNS(xmlns, 'svg');
    var foreignObject = document.createElementNS(xmlns, 'foreignObject');
    svg.setAttributeNS(null, 'width', width);
    svg.setAttributeNS(null, 'height', height);

    foreignObject.setAttributeNS(null, 'width', '100%');
    foreignObject.setAttributeNS(null, 'height', '100%');
    foreignObject.setAttributeNS(null, 'x', x);
    foreignObject.setAttributeNS(null, 'y', y);
    foreignObject.setAttributeNS(null, 'externalResourcesRequired', 'true');
    svg.appendChild(foreignObject);

    foreignObject.appendChild(node);

    return svg;
};

var loadSerializedSVG = exports.loadSerializedSVG = function loadSerializedSVG(svg) {
    return new Promise(function (resolve, reject) {
        var img = new Image();
        img.onload = function () {
            return resolve(img);
        };
        img.onerror = reject;

        img.src = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(new XMLSerializer().serializeToString(svg));
    });
};
},{}],70:[function(require,module,exports){
(function (global){
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.jspdf=e()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=(function(){function t(t){this.value=t}function e(e){function n(i,o){try{var a=e[i](o),s=a.value;s instanceof t?Promise.resolve(s.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):o=null}var i,o;this._invoke=function(t,e){return new Promise(function(r,a){var s={key:t,arg:e,resolve:r,reject:a,next:null};o?o=o.next=s:(i=o=s,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(e){function n(t){var n={};this.subscribe=function(t,e,r){if("function"!=typeof e)return!1;n.hasOwnProperty(t)||(n[t]={});var i=Math.random().toString(35);return n[t][i]=[e,!!r],i},this.unsubscribe=function(t){for(var e in n)if(n[e][t])return delete n[e][t],!0;return!1},this.publish=function(r){if(n.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var a in n[r]){var s=n[r][a];try{s[0].apply(t,i)}catch(t){e.console&&console.error("jsPDF PubSub Error",t.message,t)}s[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}}}function i(c,l,u,h){var f={};"object"===(void 0===c?"undefined":t(c))&&(c=(f=c).orientation,l=f.unit||l,u=f.format||u,h=f.compress||f.compressPdf||h),l=l||"mm",u=u||"a4",c=(""+(c||"P")).toLowerCase();(""+u).toLowerCase();var d,p,m,g,w,y,v,b,x,k=!!h&&"function"==typeof Uint8Array,_=f.textColor||"0 g",C=f.drawColor||"0 G",A=f.fontSize||16,S=f.lineHeight||1.15,q=f.lineWidth||.200025,T=2,P=!1,I=[],E={},O={},F=0,B=[],R=[],D=[],j=[],z=[],N=0,L=0,M=0,U={title:"",subject:"",author:"",keywords:"",creator:""},H={},W=new n(H),X=f.hotfixes||[],V=function(t){return t.toFixed(2)},G=function(t){return t.toFixed(3)},Y=function(t){return("0"+parseInt(t)).slice(-2)},J=function(t){P?B[g].push(t):(M+=t.length+1,j.push(t))},Q=function(){return T++,I[T]=M,J(T+" 0 obj"),T},K=function(t){J("stream"),J(t),J("endstream")},$=function(){var t,n,r,a,s,c,l,u,h,f=[];for(l=e.adler32cs||i.adler32cs,k&&void 0===l&&(k=!1),t=1;t<=F;t++){if(f.push(Q()),u=(w=D[t].width)*p,h=(y=D[t].height)*p,J("<</Type /Page"),J("/Parent 1 0 R"),J("/Resources 2 0 R"),J("/MediaBox [0 0 "+V(u)+" "+V(h)+"]"),W.publish("putPage",{pageNumber:t,page:B[t]}),J("/Contents "+(T+1)+" 0 R"),J(">>"),J("endobj"),n=B[t].join("\n"),Q(),k){for(r=[],a=n.length;a--;)r[a]=n.charCodeAt(a);c=l.from(n),(s=new o(6)).append(new Uint8Array(r)),n=s.flush(),(r=new Uint8Array(n.length+6)).set(new Uint8Array([120,156])),r.set(n,2),r.set(new Uint8Array([255&c,c>>8&255,c>>16&255,c>>24&255]),n.length+2),n=String.fromCharCode.apply(null,r),J("<</Length "+n.length+" /Filter [/FlateDecode]>>")}else J("<</Length "+n.length+">>");K(n),J("endobj")}I[1]=M,J("1 0 obj"),J("<</Type /Pages");var d="/Kids [";for(a=0;a<F;a++)d+=f[a]+" 0 R ";J(d+"]"),J("/Count "+F),J(">>"),J("endobj"),W.publish("postPutPages")},Z=function(t){t.objectNumber=Q(),J("<</BaseFont/"+t.PostScriptName+"/Type/Font"),"string"==typeof t.encoding&&J("/Encoding/"+t.encoding),J("/Subtype/Type1>>"),J("endobj")},tt=function(){for(var t in E)E.hasOwnProperty(t)&&Z(E[t])},et=function(){W.publish("putXobjectDict")},nt=function(){J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),J("/Font <<");for(var t in E)E.hasOwnProperty(t)&&J("/"+t+" "+E[t].objectNumber+" 0 R");J(">>"),J("/XObject <<"),et(),J(">>")},rt=function(){tt(),W.publish("putResources"),I[2]=M,J("2 0 obj"),J("<<"),nt(),J(">>"),J("endobj"),W.publish("postPutResources")},it=function(){W.publish("putAdditionalObjects");for(var t=0;t<z.length;t++){var e=z[t];I[e.objId]=M,J(e.objId+" 0 obj"),J(e.content),J("endobj")}T+=z.length,W.publish("postPutAdditionalObjects")},ot=function(t,e,n){O.hasOwnProperty(e)||(O[e]={}),O[e][n]=t},at=function(t,e,n,r){var i="F"+(Object.keys(E).length+1).toString(10),o=E[i]={id:i,PostScriptName:t,fontName:e,fontStyle:n,encoding:r,metadata:{}};return ot(i,e,n),W.publish("addFont",o),i},st=function(t,e){var n,r,i,o,a,s,c,l,u;if(e=e||{},i=e.sourceEncoding||"Unicode",a=e.outputEncoding,(e.autoencode||a)&&E[d].metadata&&E[d].metadata[i]&&E[d].metadata[i].encoding&&(o=E[d].metadata[i].encoding,!a&&E[d].encoding&&(a=E[d].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(c=!1,s=[],n=0,r=t.length;n<r;n++)(l=a[t.charCodeAt(n)])?s.push(String.fromCharCode(l)):s.push(t[n]),s[n].charCodeAt(0)>>8&&(c=!0);t=s.join("")}for(n=t.length;void 0===c&&0!==n;)t.charCodeAt(n-1)>>8&&(c=!0),n--;if(!c)return t;for(s=e.noBOM?[]:[254,255],n=0,r=t.length;n<r;n++){if(l=t.charCodeAt(n),(u=l>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(u),s.push(l-(u<<8))}return String.fromCharCode.apply(void 0,s)},ct=function(t,e){return st(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},lt=function(){J("/Producer (jsPDF "+i.version+")");for(var t in U)U.hasOwnProperty(t)&&U[t]&&J("/"+t.substr(0,1).toUpperCase()+t.substr(1)+" ("+ct(U[t])+")");var e=new Date,n=e.getTimezoneOffset(),r=n<0?"+":"-",o=Math.floor(Math.abs(n/60)),a=Math.abs(n%60),s=[r,Y(o),"'",Y(a),"'"].join("");J(["/CreationDate (D:",e.getFullYear(),Y(e.getMonth()+1),Y(e.getDate()),Y(e.getHours()),Y(e.getMinutes()),Y(e.getSeconds()),s,")"].join(""))},ut=function(){switch(J("/Type /Catalog"),J("/Pages 1 0 R"),b||(b="fullwidth"),b){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var t=""+b;"%"===t.substr(t.length-1)&&(b=parseInt(b)/100),"number"==typeof b&&J("/OpenAction [3 0 R /XYZ null null "+V(b)+"]")}switch(x||(x="continuous"),x){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}v&&J("/PageMode /"+v),W.publish("putCatalog")},ht=function(){J("/Size "+(T+1)),J("/Root "+T+" 0 R"),J("/Info "+(T-1)+" 0 R")},ft=function(t,e){var n="string"==typeof e&&e.toLowerCase();if("string"==typeof t){var r=t.toLowerCase();s.hasOwnProperty(r)&&(t=s[r][0]/p,e=s[r][1]/p)}if(Array.isArray(t)&&(e=t[1],t=t[0]),n){switch(n.substr(0,1)){case"l":e>t&&(n="s");break;case"p":t>e&&(n="s")}"s"===n&&(m=t,t=e,e=m)}P=!0,B[++F]=[],D[F]={width:Number(t)||w,height:Number(e)||y},R[F]={},mt(F)},dt=function(){ft.apply(this,arguments),J(V(q*p)+" w"),J(C),0!==N&&J(N+" J"),0!==L&&J(L+" j"),W.publish("addPage",{pageNumber:F})},pt=function(t){t>0&&t<=F&&(B.splice(t,1),D.splice(t,1),g>--F&&(g=F),this.setPage(g))},mt=function(t){t>0&&t<=F&&(g=t,w=D[t].width,y=D[t].height)},gt=function(t,e){var n;switch(t=void 0!==t?t:E[d].fontName,e=void 0!==e?e:E[d].fontStyle,void 0!==t&&(t=t.toLowerCase()),t){case"sans-serif":case"verdana":case"arial":case"helvetica":t="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":t="courier";break;case"serif":case"cursive":case"fantasy":default:t="times"}try{n=O[t][e]}catch(t){}return n||null==(n=O.times[e])&&(n=O.times.normal),n},wt=function(){P=!1,T=2,M=0,j=[],I=[],z=[],W.publish("buildDocument"),J("%PDF-"+a),$(),it(),rt(),Q(),J("<<"),lt(),J(">>"),J("endobj"),Q(),J("<<"),ut(),J(">>"),J("endobj");var t,e=M,n="0000000000";for(J("xref"),J("0 "+(T+1)),J(n+" 65535 f "),t=1;t<=T;t++){var r=I[t];J("function"==typeof r?(n+I[t]()).slice(-10)+" 00000 n ":(n+I[t]).slice(-10)+" 00000 n ")}return J("trailer"),J("<<"),ht(),J(">>"),J("startxref"),J(""+e),J("%%EOF"),P=!0,j.join("\n")},yt=function(t){var e="S";return"F"===t?e="f":"FD"===t||"DF"===t?e="B":"f"!==t&&"f*"!==t&&"B"!==t&&"B*"!==t||(e=t),e},vt=function(){for(var t=wt(),e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n);e--;)r[e]=t.charCodeAt(e);return n},bt=function(){return new Blob([vt()],{type:"application/pdf"})},xt=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var n=t.stack||"";~n.indexOf(" at ")&&(n=n.split(" at ")[1]);var r="Error in function "+n.split("\n")[0].split("<")[0]+": "+t.message;if(!e.console)throw new Error(r);e.console.error(r,t),e.alert&&alert(r)}},t.foo.bar=t,t.foo}(function(t,n){var i="dataur"===(""+t).substr(0,6)?"data:application/pdf;base64,"+btoa(wt()):0;switch(t){case void 0:return wt();case"save":if(navigator.getUserMedia&&(void 0===e.URL||void 0===e.URL.createObjectURL))return H.output("dataurlnewwindow");r(bt(),n),"function"==typeof r.unload&&e.setTimeout&&setTimeout(r.unload,911);break;case"arraybuffer":return vt();case"blob":return bt();case"bloburi":case"bloburl":return e.URL&&e.URL.createObjectURL(bt())||void 0;case"datauristring":case"dataurlstring":return i;case"dataurlnewwindow":var o=e.open(i);if(o||"undefined"==typeof safari)return o;case"datauri":case"dataurl":return e.document.location.href=i;default:throw new Error('Output type "'+t+'" is not supported.')}}),kt=function(t){return!0===Array.isArray(X)&&X.indexOf(t)>-1};switch(l){case"pt":p=1;break;case"mm":p=72/25.4000508;break;case"cm":p=72/2.54000508;break;case"in":p=72;break;case"px":p=1==kt("px_scaling")?.75:96/72;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}H.internal={pdfEscape:ct,getStyle:yt,getFont:function(){return E[gt.apply(H,arguments)]},getFontSize:function(){return A},getLineHeight:function(){return A*S},write:function(t){J(1===arguments.length?t:Array.prototype.join.call(arguments," "))},getCoordinateString:function(t){return V(t*p)},getVerticalCoordinateString:function(t){return V((y-t)*p)},collections:{},newObject:Q,newAdditionalObject:function(){var t=2*B.length+1,e={objId:t+=z.length,content:""};return z.push(e),e},newObjectDeferred:function(){return T++,I[T]=function(){return M},T},newObjectDeferredBegin:function(t){I[t]=M},putStream:K,events:W,scaleFactor:p,pageSize:{get width(){return w},get height(){return y}},output:function(t,e){return xt(t,e)},getNumberOfPages:function(){return B.length-1},pages:B,out:J,f2:V,getPageInfo:function(t){return{objId:2*(t-1)+3,pageNumber:t,pageContext:R[t]}},getCurrentPageInfo:function(){return{objId:2*(g-1)+3,pageNumber:g,pageContext:R[g]}},getPDFVersion:function(){return a},hasHotfix:kt},H.addPage=function(){return dt.apply(this,arguments),this},H.setPage=function(){return mt.apply(this,arguments),this},H.insertPage=function(t){return this.addPage(),this.movePage(g,t),this},H.movePage=function(t,e){if(t>e){for(var n=B[t],r=D[t],i=R[t],o=t;o>e;o--)B[o]=B[o-1],D[o]=D[o-1],R[o]=R[o-1];B[e]=n,D[e]=r,R[e]=i,this.setPage(e)}else if(t<e){for(var n=B[t],r=D[t],i=R[t],o=t;o<e;o++)B[o]=B[o+1],D[o]=D[o+1],R[o]=R[o+1];B[e]=n,D[e]=r,R[e]=i,this.setPage(e)}return this},H.deletePage=function(){return pt.apply(this,arguments),this},H.setDisplayMode=function(t,e,n){if(b=t,x=e,v=n,-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(n))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+n+'" is not recognized.');return this},H.text=function(t,e,n,r,i,o){function a(t){return t=t.split("\t").join(Array(f.TabLen||9).join(" ")),ct(t,r)}"number"==typeof t&&(m=n,n=e,e=t,t=m),"string"==typeof t&&(t=t.match(/[\n\r]/)?t.split(/\r\n|\r|\n/g):[t]),"string"==typeof i&&(o=i,i=null),"string"==typeof r&&(o=r,r=null),"number"==typeof r&&(i=r,r=null);var s="",c="Td";if(i){i*=Math.PI/180;var l=Math.cos(i),u=Math.sin(i);s=[V(l),V(u),V(-1*u),V(l),""].join(" "),c="Tm"}"noBOM"in(r=r||{})||(r.noBOM=!0),"autoencode"in r||(r.autoencode=!0);var h="",g=this.internal.getCurrentPageInfo().pageContext;if(!0===r.stroke?!0!==g.lastTextWasStroke&&(h="1 Tr\n",g.lastTextWasStroke=!0):(g.lastTextWasStroke&&(h="0 Tr\n"),g.lastTextWasStroke=!1),void 0===this._runningPageHeight&&(this._runningPageHeight=0),"string"==typeof t)t=a(t);else{if("[object Array]"!==Object.prototype.toString.call(t))throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');for(var w=t.concat(),v=[],b=w.length;b--;)v.push(a(w.shift()));if(o){var x,k,C,q=A*S,T=t.map(function(t){return this.getStringUnitWidth(t)*A/p},this);if(C=Math.max.apply(Math,T),"center"===o)x=e-C/2,e-=T[0]/2;else{if("right"!==o)throw new Error('Unrecognized alignment option, use "center" or "right".');x=e-C,e-=T[0]}k=e,t=v[0];for(var P=1,b=v.length;P<b;P++){var I=C-T[P];"center"===o&&(I/=2),t+=") Tj\n"+(x-k+I)+" -"+q+" Td ("+v[P],k=x+I}}else t=v.join(") Tj\nT* (")}var E;return E=V((y-n)*p),J("BT\n/"+d+" "+A+" Tf\n"+A*S+" TL\n"+h+_+"\n"+s+V(e*p)+" "+E+" "+c+"\n("+t+") Tj\nET"),this},H.lstext=function(t,e,n,r){console.warn("jsPDF.lstext is deprecated");for(var i=0,o=t.length;i<o;i++,e+=r)this.text(t[i],e,n);return this},H.line=function(t,e,n,r){return this.lines([[n-t,r-e]],t,e)},H.clip=function(){J("W"),J("S")},H.clip_fixed=function(t){J("evenodd"===t?"W*":"W"),J("n")},H.lines=function(t,e,n,r,i,o){var a,s,c,l,u,h,f,d,g,w,v;for("number"==typeof t&&(m=n,n=e,e=t,t=m),r=r||[1,1],J(G(e*p)+" "+G((y-n)*p)+" m "),a=r[0],s=r[1],l=t.length,w=e,v=n,c=0;c<l;c++)2===(u=t[c]).length?(w=u[0]*a+w,v=u[1]*s+v,J(G(w*p)+" "+G((y-v)*p)+" l")):(h=u[0]*a+w,f=u[1]*s+v,d=u[2]*a+w,g=u[3]*s+v,w=u[4]*a+w,v=u[5]*s+v,J(G(h*p)+" "+G((y-f)*p)+" "+G(d*p)+" "+G((y-g)*p)+" "+G(w*p)+" "+G((y-v)*p)+" c"));return o&&J(" h"),null!==i&&J(yt(i)),this},H.rect=function(t,e,n,r,i){yt(i);return J([V(t*p),V((y-e)*p),V(n*p),V(-r*p),"re"].join(" ")),null!==i&&J(yt(i)),this},H.triangle=function(t,e,n,r,i,o,a){return this.lines([[n-t,r-e],[i-n,o-r],[t-i,e-o]],t,e,[1,1],a,!0),this},H.roundedRect=function(t,e,n,r,i,o,a){var s=4/3*(Math.SQRT2-1);return this.lines([[n-2*i,0],[i*s,0,i,o-o*s,i,o],[0,r-2*o],[0,o*s,-i*s,o,-i,o],[2*i-n,0],[-i*s,0,-i,-o*s,-i,-o],[0,2*o-r],[0,-o*s,i*s,-o,i,-o]],t+i,e,[1,1],a),this},H.ellipse=function(t,e,n,r,i){var o=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return J([V((t+n)*p),V((y-e)*p),"m",V((t+n)*p),V((y-(e-a))*p),V((t+o)*p),V((y-(e-r))*p),V(t*p),V((y-(e-r))*p),"c"].join(" ")),J([V((t-o)*p),V((y-(e-r))*p),V((t-n)*p),V((y-(e-a))*p),V((t-n)*p),V((y-e)*p),"c"].join(" ")),J([V((t-n)*p),V((y-(e+a))*p),V((t-o)*p),V((y-(e+r))*p),V(t*p),V((y-(e+r))*p),"c"].join(" ")),J([V((t+o)*p),V((y-(e+r))*p),V((t+n)*p),V((y-(e+a))*p),V((t+n)*p),V((y-e)*p),"c"].join(" ")),null!==i&&J(yt(i)),this},H.circle=function(t,e,n,r){return this.ellipse(t,e,n,n,r)},H.setProperties=function(t){for(var e in U)U.hasOwnProperty(e)&&t[e]&&(U[e]=t[e]);return this},H.setFontSize=function(t){return A=t,this},H.setFont=function(t,e){return d=gt(t,e),this},H.setFontStyle=H.setFontType=function(t){return d=gt(void 0,t),this},H.getFontList=function(){var t,e,n,r={};for(t in O)if(O.hasOwnProperty(t)){r[t]=n=[];for(e in O[t])O[t].hasOwnProperty(e)&&n.push(e)}return r},H.addFont=function(t,e,n){at(t,e,n,"StandardEncoding")},H.setLineWidth=function(t){return J((t*p).toFixed(2)+" w"),this},H.setDrawColor=function(t,e,n,r){var i;return i=void 0===e||void 0===r&&t===e===n?"string"==typeof t?t+" G":V(t/255)+" G":void 0===r?"string"==typeof t?[t,e,n,"RG"].join(" "):[V(t/255),V(e/255),V(n/255),"RG"].join(" "):"string"==typeof t?[t,e,n,r,"K"].join(" "):[V(t),V(e),V(n),V(r),"K"].join(" "),J(i),this},H.setFillColor=function(e,n,r,i){var o;return void 0===n||void 0===i&&e===n===r?o="string"==typeof e?e+" g":V(e/255)+" g":void 0===i||"object"===(void 0===i?"undefined":t(i))?(o="string"==typeof e?[e,n,r,"rg"].join(" "):[V(e/255),V(n/255),V(r/255),"rg"].join(" "),i&&0===i.a&&(o=["255","255","255","rg"].join(" "))):o="string"==typeof e?[e,n,r,i,"k"].join(" "):[V(e),V(n),V(r),V(i),"k"].join(" "),J(o),this},H.setTextColor=function(t,e,n){if("string"==typeof t&&/^#[0-9A-Fa-f]{6}$/.test(t)){var r=parseInt(t.substr(1),16);t=r>>16&255,e=r>>8&255,n=255&r}return _=0===t&&0===e&&0===n||void 0===e?G(t/255)+" g":[G(t/255),G(e/255),G(n/255),"rg"].join(" "),this},H.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},H.setLineCap=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return N=e,J(e+" J"),this},H.setLineJoin=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return L=e,J(e+" j"),this},H.output=xt,H.save=function(t){H.output("save",t)};for(var _t in i.API)i.API.hasOwnProperty(_t)&&("events"===_t&&i.API.events.length?function(t,e){var n,r,i;for(i=e.length-1;-1!==i;i--)n=e[i][0],r=e[i][1],t.subscribe.apply(t,[n].concat("function"==typeof r?[r]:r))}(W,i.API.events):H[_t]=i.API[_t]);return function(){for(var t=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"],["ZapfDingbats","zapfdingbats"]],e=0,n=t.length;e<n;e++){var r=at(t[e][0],t[e][1],t[e][2],"StandardEncoding"),i=t[e][0].split("-");ot(r,i[0],i[1]||"")}W.publish("addFonts",{fonts:E,dictionary:O})}(),d="F1",dt(u,c),W.publish("initialized"),H}var a="1.3",s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return i.API={events:[]},i.version="1.x-master","function"==typeof define&&define.amd?define("jsPDF",function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:e.jsPDF=i,i}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0));/**
 * jsPDF AcroForm Plugin
 * Copyright (c) 2016 Alexander Weidt, https://github.com/BiggA94
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
(window.AcroForm=function(t){var n=window.AcroForm;n.scale=function(t){return t*(r.internal.scaleFactor/1)},n.antiScale=function(t){return 1/r.internal.scaleFactor*t};var r={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null};e.API.acroformPlugin=r;var i=function(){for(var t in this.acroformPlugin.acroFormDictionaryRoot.Fields){var e=this.acroformPlugin.acroFormDictionaryRoot.Fields[t];e.hasAnnotation&&a.call(this,e)}},o=function(){if(this.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");this.acroformPlugin.acroFormDictionaryRoot=new n.AcroFormDictionary,this.acroformPlugin.internal=this.internal,this.acroformPlugin.acroFormDictionaryRoot._eventID=this.internal.events.subscribe("postPutResources",l),this.internal.events.subscribe("buildDocument",i),this.internal.events.subscribe("putCatalog",c),this.internal.events.subscribe("postPutPages",u)},a=function(t){var n={type:"reference",object:t};e.API.annotationPlugin.annotations[this.internal.getPageInfo(t.page).pageNumber].push(n)},s=function(t){this.acroformPlugin.printedOut&&(this.acroformPlugin.printedOut=!1,this.acroformPlugin.acroFormDictionaryRoot=null),this.acroformPlugin.acroFormDictionaryRoot||o.call(this),this.acroformPlugin.acroFormDictionaryRoot.Fields.push(t)},c=function(){void 0!==this.acroformPlugin.acroFormDictionaryRoot?this.internal.write("/AcroForm "+this.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R"):console.log("Root missing...")},l=function(){this.internal.events.unsubscribe(this.acroformPlugin.acroFormDictionaryRoot._eventID),delete this.acroformPlugin.acroFormDictionaryRoot._eventID,this.acroformPlugin.printedOut=!0},u=function(t){var e=!t;t||(this.internal.newObjectDeferredBegin(this.acroformPlugin.acroFormDictionaryRoot.objId),this.internal.out(this.acroformPlugin.acroFormDictionaryRoot.getString()));var t=t||this.acroformPlugin.acroFormDictionaryRoot.Kids;for(var r in t){var i=t[r],o=i.Rect;i.Rect&&(i.Rect=n.internal.calculateCoordinates.call(this,i.Rect)),this.internal.newObjectDeferredBegin(i.objId);var a="";if(a+=i.objId+" 0 obj\n",a+="<<\n"+i.getContent(),i.Rect=o,i.hasAppearanceStream&&!i.appearanceStreamContent){var s=n.internal.calculateAppearanceStream.call(this,i);a+="/AP << /N "+s+" >>\n",this.acroformPlugin.xForms.push(s)}if(i.appearanceStreamContent){a+="/AP << ";for(var c in i.appearanceStreamContent){var l=i.appearanceStreamContent[c];if(a+="/"+c+" ",a+="<< ",Object.keys(l).length>=1||Array.isArray(l))for(var r in l)"function"==typeof(u=l[r])&&(u=u.call(this,i)),a+="/"+r+" "+u+" ",this.acroformPlugin.xForms.indexOf(u)>=0||this.acroformPlugin.xForms.push(u);else{var u=l;"function"==typeof u&&(u=u.call(this,i)),a+="/"+r+" "+u+" \n",this.acroformPlugin.xForms.indexOf(u)>=0||this.acroformPlugin.xForms.push(u)}a+=" >>\n"}a+=">>\n"}a+=">>\nendobj\n",this.internal.out(a)}e&&h.call(this,this.acroformPlugin.xForms)},h=function(t){for(var e in t){var n=e,r=t[e];this.internal.newObjectDeferredBegin(r&&r.objId);var i="";i+=r?r.getString():"",this.internal.out(i),delete t[n]}};t.addField=function(t){return t instanceof n.TextField?d.call(this,t):t instanceof n.ChoiceField?p.call(this,t):t instanceof n.Button?f.call(this,t):t instanceof n.ChildClass?s.call(this,t):t&&s.call(this,t),t.page=this.acroformPlugin.internal.getCurrentPageInfo().pageNumber,this};var f=function(t){(t=t||new n.Field).FT="/Btn";var e=t.Ff||0;t.pushbutton&&(e=n.internal.setBitPosition(e,17),delete t.pushbutton),t.radio&&(e=n.internal.setBitPosition(e,16),delete t.radio),t.noToggleToOff&&(e=n.internal.setBitPosition(e,15)),t.Ff=e,s.call(this,t)},d=function(t){(t=t||new n.Field).FT="/Tx";var e=t.Ff||0;t.multiline&&(e|=4096),t.password&&(e|=8192),t.fileSelect&&(e|=1<<20),t.doNotSpellCheck&&(e|=1<<22),t.doNotScroll&&(e|=1<<23),t.Ff=t.Ff||e,s.call(this,t)},p=function(t){var e=t||new n.Field;e.FT="/Ch";var r=e.Ff||0;e.combo&&(r=n.internal.setBitPosition(r,18),delete e.combo),e.edit&&(r=n.internal.setBitPosition(r,19),delete e.edit),e.sort&&(r=n.internal.setBitPosition(r,20),delete e.sort),e.multiSelect&&this.internal.getPDFVersion()>=1.4&&(r=n.internal.setBitPosition(r,22),delete e.multiSelect),e.doNotSpellCheck&&this.internal.getPDFVersion()>=1.4&&(r=n.internal.setBitPosition(r,23),delete e.doNotSpellCheck),e.Ff=r,s.call(this,e)}})(e.API);var n=window.AcroForm;n.internal={},n.createFormXObject=function(t){var e=new n.FormXObject,r=n.Appearance.internal.getHeight(t)||0,i=n.Appearance.internal.getWidth(t)||0;return e.BBox=[0,0,i,r],e},n.Appearance={CheckBox:{createAppearanceStream:function(){return{N:{On:n.Appearance.CheckBox.YesNormal},D:{On:n.Appearance.CheckBox.YesPushDown,Off:n.Appearance.CheckBox.OffPushDown}}},createMK:function(){return"<< /CA (3)>>"},YesPushDown:function(t){var e=n.createFormXObject(t),r="";t.Q=1;var i=n.internal.calculateX(t,"3","ZapfDingbats",50);return r+="0.749023 g\n             0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\n             f\n             BMC\n             q\n             0 0 1 rg\n             /F13 "+i.fontSize+" Tf 0 g\n             BT\n",r+=i.text,r+="ET\n             Q\n             EMC\n",e.stream=r,e},YesNormal:function(t){var e=n.createFormXObject(t),r="";t.Q=1;var i=n.internal.calculateX(t,"3","ZapfDingbats",.9*n.Appearance.internal.getHeight(t));return r+="1 g\n0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\nf\nq\n0 0 1 rg\n0 0 "+(n.Appearance.internal.getWidth(t)-1)+" "+(n.Appearance.internal.getHeight(t)-1)+" re\nW\nn\n0 g\nBT\n/F13 "+i.fontSize+" Tf 0 g\n",r+=i.text,r+="ET\n             Q\n",e.stream=r,e},OffPushDown:function(t){var e=n.createFormXObject(t),r="";return r+="0.749023 g\n            0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\n            f\n",e.stream=r,e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:n.Appearance.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=n.Appearance.RadioButton.Circle.YesNormal,e.D[t]=n.Appearance.RadioButton.Circle.YesPushDown,e},createMK:function(){return"<< /CA (l)>>"},YesNormal:function(t){var e=n.createFormXObject(t),r="",i=n.Appearance.internal.getWidth(t)<=n.Appearance.internal.getHeight(t)?n.Appearance.internal.getWidth(t)/4:n.Appearance.internal.getHeight(t)/4;i*=.9;var o=n.Appearance.internal.Bezier_C;return r+="q\n1 0 0 1 "+n.Appearance.internal.getWidth(t)/2+" "+n.Appearance.internal.getHeight(t)/2+" cm\n"+i+" 0 m\n"+i+" "+i*o+" "+i*o+" "+i+" 0 "+i+" c\n-"+i*o+" "+i+" -"+i+" "+i*o+" -"+i+" 0 c\n-"+i+" -"+i*o+" -"+i*o+" -"+i+" 0 -"+i+" c\n"+i*o+" -"+i+" "+i+" -"+i*o+" "+i+" 0 c\nf\nQ\n",e.stream=r,e},YesPushDown:function(t){var e=n.createFormXObject(t),r="",i=n.Appearance.internal.getWidth(t)<=n.Appearance.internal.getHeight(t)?n.Appearance.internal.getWidth(t)/4:n.Appearance.internal.getHeight(t)/4,o=2*(i*=.9),a=o*n.Appearance.internal.Bezier_C,s=i*n.Appearance.internal.Bezier_C;return r+="0.749023 g\n            q\n           1 0 0 1 "+n.Appearance.internal.getWidth(t)/2+" "+n.Appearance.internal.getHeight(t)/2+" cm\n"+o+" 0 m\n"+o+" "+a+" "+a+" "+o+" 0 "+o+" c\n-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c\n-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c\n"+a+" -"+o+" "+o+" -"+a+" "+o+" 0 c\n            f\n            Q\n            0 g\n            q\n            1 0 0 1 "+n.Appearance.internal.getWidth(t)/2+" "+n.Appearance.internal.getHeight(t)/2+" cm\n"+i+" 0 m\n"+i+" "+s+" "+s+" "+i+" 0 "+i+" c\n-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c\n-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c\n"+s+" -"+i+" "+i+" -"+s+" "+i+" 0 c\n            f\n            Q\n",e.stream=r,e},OffPushDown:function(t){var e=n.createFormXObject(t),r="",i=n.Appearance.internal.getWidth(t)<=n.Appearance.internal.getHeight(t)?n.Appearance.internal.getWidth(t)/4:n.Appearance.internal.getHeight(t)/4,o=2*(i*=.9),a=o*n.Appearance.internal.Bezier_C;return r+="0.749023 g\n            q\n 1 0 0 1 "+n.Appearance.internal.getWidth(t)/2+" "+n.Appearance.internal.getHeight(t)/2+" cm\n"+o+" 0 m\n"+o+" "+a+" "+a+" "+o+" 0 "+o+" c\n-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c\n-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c\n"+a+" -"+o+" "+o+" -"+a+" "+o+" 0 c\n            f\n            Q\n",e.stream=r,e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:n.Appearance.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=n.Appearance.RadioButton.Cross.YesNormal,e.D[t]=n.Appearance.RadioButton.Cross.YesPushDown,e},createMK:function(){return"<< /CA (8)>>"},YesNormal:function(t){var e=n.createFormXObject(t),r="",i=n.Appearance.internal.calculateCross(t);return r+="q\n            1 1 "+(n.Appearance.internal.getWidth(t)-2)+" "+(n.Appearance.internal.getHeight(t)-2)+" re\n            W\n            n\n            "+i.x1.x+" "+i.x1.y+" m\n            "+i.x2.x+" "+i.x2.y+" l\n            "+i.x4.x+" "+i.x4.y+" m\n            "+i.x3.x+" "+i.x3.y+" l\n            s\n            Q\n",e.stream=r,e},YesPushDown:function(t){var e=n.createFormXObject(t),r=n.Appearance.internal.calculateCross(t),i="";return i+="0.749023 g\n            0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\n            f\n            q\n            1 1 "+(n.Appearance.internal.getWidth(t)-2)+" "+(n.Appearance.internal.getHeight(t)-2)+" re\n            W\n            n\n            "+r.x1.x+" "+r.x1.y+" m\n            "+r.x2.x+" "+r.x2.y+" l\n            "+r.x4.x+" "+r.x4.y+" m\n            "+r.x3.x+" "+r.x3.y+" l\n            s\n            Q\n",e.stream=i,e},OffPushDown:function(t){var e=n.createFormXObject(t),r="";return r+="0.749023 g\n            0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\n            f\n",e.stream=r,e}}},createDefaultAppearanceStream:function(t){var e="";return e+="/Helv 0 Tf 0 g"}},n.Appearance.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=n.Appearance.internal.getWidth(t),r=n.Appearance.internal.getHeight(t),i=function(t,e){return t>e?e:t}(e,r);return{x1:{x:(e-i)/2,y:(r-i)/2+i},x2:{x:(e-i)/2+i,y:(r-i)/2},x3:{x:(e-i)/2,y:(r-i)/2},x4:{x:(e-i)/2+i,y:(r-i)/2+i}}}},n.Appearance.internal.getWidth=function(t){return t.Rect[2]},n.Appearance.internal.getHeight=function(t){return t.Rect[3]},n.internal.inherit=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},n.internal.arrayToPdfArray=function(t){if(Array.isArray(t)){var e=" [";for(var n in t)e+=t[n].toString(),e+=n<t.length-1?" ":"";return e+="]"}},n.internal.toPdfString=function(t){return 0!==(t=t||"").indexOf("(")&&(t="("+t),")"!=t.substring(t.length-1)&&(t+="("),t},n.PDFObject=function(){var t;Object.defineProperty(this,"objId",{get:function(){return t||(this.internal?t=this.internal.newObjectDeferred():e.API.acroformPlugin.internal&&(t=e.API.acroformPlugin.internal.newObjectDeferred())),t||console.log("Couldn't create Object ID"),t},configurable:!1})},n.PDFObject.prototype.toString=function(){return this.objId+" 0 R"},n.PDFObject.prototype.getString=function(){var t=this.objId+" 0 obj\n<<";return t+=this.getContent()+">>\n",this.stream&&(t+="stream\n",t+=this.stream,t+="endstream\n"),t+="endobj\n"},n.PDFObject.prototype.getContent=function(){var t="";return t+=function(t){var e="",r=Object.keys(t).filter(function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"_"!=t.substring(0,1)});for(var i in r){var o=r[i],a=t[o];a&&(Array.isArray(a)?e+="/"+o+" "+n.internal.arrayToPdfArray(a)+"\n":a instanceof n.PDFObject?e+="/"+o+" "+a.objId+" 0 R\n":e+="/"+o+" "+a+"\n")}return e}(this)},n.FormXObject=function(){n.PDFObject.call(this),this.Type="/XObject",this.Subtype="/Form",this.FormType=1,this.BBox,this.Matrix,this.Resources="2 0 R",this.PieceInfo;var t;Object.defineProperty(this,"Length",{enumerable:!0,get:function(){return void 0!==t?t.length:0}}),Object.defineProperty(this,"stream",{enumerable:!1,set:function(e){t=e},get:function(){return t||null}})},n.internal.inherit(n.FormXObject,n.PDFObject),n.AcroFormDictionary=function(){n.PDFObject.call(this);var t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!0,configurable:!0,get:function(){return t}}),this.DA},n.internal.inherit(n.AcroFormDictionary,n.PDFObject),n.Field=function(){n.PDFObject.call(this);var t;Object.defineProperty(this,"Rect",{enumerable:!0,configurable:!1,get:function(){if(t)return t},set:function(e){t=e}});var e="";Object.defineProperty(this,"FT",{enumerable:!0,set:function(t){e=t},get:function(){return e}});var r;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,set:function(t){r=t},get:function(){if(!r||r.length<1){if(this instanceof n.ChildClass)return;return"(FieldObject"+n.Field.FieldNum+++")"}return"("==r.substring(0,1)&&r.substring(r.length-1)?r:"("+r+")"}});var i;Object.defineProperty(this,"DA",{enumerable:!0,get:function(){if(i)return"("+i+")"},set:function(t){i=t}});var o;Object.defineProperty(this,"DV",{enumerable:!0,configurable:!0,get:function(){if(o)return o},set:function(t){o=t}}),Object.defineProperty(this,"Type",{enumerable:!0,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,get:function(){return this.hasAnnotation?"/Widget":null}}),this.BG,Object.defineProperty(this,"hasAnnotation",{enumerable:!1,get:function(){return!!(this.Rect||this.BC||this.BG)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(this,"page",{enumerable:!1,configurable:!0,writable:!0})},n.Field.FieldNum=0,n.internal.inherit(n.Field,n.PDFObject),n.ChoiceField=function(){n.Field.call(this),this.FT="/Ch",this.Opt=[],this.V="()",this.TI=0,this.combo=!1,Object.defineProperty(this,"edit",{enumerable:!0,set:function(t){1==t?(this._edit=!0,this.combo=!0):this._edit=!1},get:function(){return!!this._edit&&this._edit},configurable:!1}),this.hasAppearanceStream=!0,Object.defineProperty(this,"V",{get:function(){n.internal.toPdfString()}})},n.internal.inherit(n.ChoiceField,n.Field),window.ChoiceField=n.ChoiceField,n.ListBox=function(){n.ChoiceField.call(this)},n.internal.inherit(n.ListBox,n.ChoiceField),window.ListBox=n.ListBox,n.ComboBox=function(){n.ListBox.call(this),this.combo=!0},n.internal.inherit(n.ComboBox,n.ListBox),window.ComboBox=n.ComboBox,n.EditBox=function(){n.ComboBox.call(this),this.edit=!0},n.internal.inherit(n.EditBox,n.ComboBox),window.EditBox=n.EditBox,n.Button=function(){n.Field.call(this),this.FT="/Btn"},n.internal.inherit(n.Button,n.Field),window.Button=n.Button,n.PushButton=function(){n.Button.call(this),this.pushbutton=!0},n.internal.inherit(n.PushButton,n.Button),window.PushButton=n.PushButton,n.RadioButton=function(){n.Button.call(this),this.radio=!0;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,get:function(){if(t.length>0)return t}}),Object.defineProperty(this,"__Kids",{get:function(){return t}});var e;Object.defineProperty(this,"noToggleToOff",{enumerable:!1,get:function(){return e},set:function(t){e=t}})},n.internal.inherit(n.RadioButton,n.Button),window.RadioButton=n.RadioButton,n.ChildClass=function(t,e){n.Field.call(this),this.Parent=t,this._AppearanceType=n.Appearance.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(e),this.F=n.internal.setBitPosition(this.F,3,1),this.MK=this._AppearanceType.createMK(),this.AS="/Off",this._Name=e},n.internal.inherit(n.ChildClass,n.Field),n.RadioButton.prototype.setAppearance=function(t){if("createAppearanceStream"in t&&"createMK"in t)for(var e in this.__Kids){var n=this.__Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n._Name),n.MK=t.createMK()}else console.log("Couldn't assign Appearance to RadioButton. Appearance was Invalid!")},n.RadioButton.prototype.createOption=function(t){var r=this,i=new n.ChildClass(r,t);return this.__Kids.push(i),e.API.addField(i),i},n.CheckBox=function(){Button.call(this),this.appearanceStreamContent=n.Appearance.CheckBox.createAppearanceStream(),this.MK=n.Appearance.CheckBox.createMK(),this.AS="/On",this.V="/On"},n.internal.inherit(n.CheckBox,n.Button),window.CheckBox=n.CheckBox,n.TextField=function(){n.Field.call(this),this.DA=n.Appearance.createDefaultAppearanceStream(),this.F=4;var t;Object.defineProperty(this,"V",{get:function(){return t?"("+t+")":t},enumerable:!0,set:function(e){t=e}});var e;Object.defineProperty(this,"DV",{get:function(){return e?"("+e+")":e},enumerable:!0,set:function(t){e=t}});var r=!1;Object.defineProperty(this,"multiline",{enumerable:!1,get:function(){return r},set:function(t){r=t}});var i=!1;Object.defineProperty(this,"MaxLen",{enumerable:!0,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,get:function(){return this.V||this.DV}})},n.internal.inherit(n.TextField,n.Field),window.TextField=n.TextField,n.PasswordField=function(){TextField.call(this),Object.defineProperty(this,"password",{value:!0,enumerable:!1,configurable:!1,writable:!1})},n.internal.inherit(n.PasswordField,n.TextField),window.PasswordField=n.PasswordField,n.internal.calculateFontSpace=function(t,e,r){var r=r||"helvetica",i=n.internal.calculateFontSpace.canvas||(n.internal.calculateFontSpace.canvas=document.createElement("canvas"));(s=i.getContext("2d")).save();var o=e+" "+r;s.font=o;var a=s.measureText(t);s.fontcolor="black";var s=i.getContext("2d");return a.height=1.5*s.measureText("3").width,s.restore(),a},n.internal.calculateX=function(t,e,r,i){var i=i||12,r=r||"helvetica",o={text:"",fontSize:""},a=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" "),s=i,c=n.Appearance.internal.getHeight(t)||0;c=c<0?-c:c;var l=n.Appearance.internal.getWidth(t)||0;l=l<0?-l:l;s++;t:for(;;){var e="";s--;var u=n.internal.calculateFontSpace("3",s+"px",r).height,h=t.multiline?c-s:(c-u)/2,f=-2,d=h+=2,p=0,m=0,g=0;if(0==s){s=12,e="(...) Tj\n",e+="% Width of Text: "+n.internal.calculateFontSpace(e,"1px").width+", FieldWidth:"+l+"\n";break}g=n.internal.calculateFontSpace(a[0]+" ",s+"px",r).width;var w="",y=0;for(var v in a){w=" "==(w+=a[v]+" ").substr(w.length-1)?w.substr(0,w.length-1):w;var b=parseInt(v);g=n.internal.calculateFontSpace(w+" ",s+"px",r).width;var x=function(t,e,i){if(t+1<a.length){var o=e+" "+a[t+1];return n.internal.calculateFontSpace(o,i+"px",r).width<=l-4}return!1}(b,w,s),k=v>=a.length-1;if(!x||k){if(x||k){if(k)m=b;else if(t.multiline&&(u+2)*(y+2)+2>c)continue t}else{if(!t.multiline)continue t;if((u+2)*(y+2)+2>c)continue t;m=b}for(var _="",C=p;C<=m;C++)_+=a[C]+" ";switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,g=n.internal.calculateFontSpace(_,s+"px",r).width,t.Q){case 2:f=l-g-2;break;case 1:f=(l-g)/2;break;case 0:default:f=2}e+=f+" "+d+" Td\n",e+="("+_+") Tj\n",e+=-f+" 0 Td\n",d=-(s+2),g=0,p=m+1,y++,w=""}else w+=" "}break}return o.text=e,o.fontSize=s,o},n.internal.calculateAppearanceStream=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e="",r=t.V||t.DV,i=n.internal.calculateX(t,r);e+="/Tx BMC\nq\n/F1 "+i.fontSize+" Tf\n1 0 0 1 0 0 Tm\n",e+="BT\n",e+=i.text,e+="ET\n",e+="Q\nEMC\n";var o=new n.createFormXObject(t);return o.stream=e,o}},n.internal.calculateCoordinates=function(t,e,r,i){var o={};if(this.internal){var a=function(t){return t*this.internal.scaleFactor};Array.isArray(t)?(t[0]=n.scale(t[0]),t[1]=n.scale(t[1]),t[2]=n.scale(t[2]),t[3]=n.scale(t[3]),o.lowerLeft_X=t[0]||0,o.lowerLeft_Y=a.call(this,this.internal.pageSize.height)-t[3]-t[1]||0,o.upperRight_X=t[0]+t[2]||0,o.upperRight_Y=a.call(this,this.internal.pageSize.height)-t[1]||0):(t=n.scale(t),e=n.scale(e),r=n.scale(r),i=n.scale(i),o.lowerLeft_X=t||0,o.lowerLeft_Y=this.internal.pageSize.height-e||0,o.upperRight_X=t+r||0,o.upperRight_Y=this.internal.pageSize.height-e+i||0)}else Array.isArray(t)?(o.lowerLeft_X=t[0]||0,o.lowerLeft_Y=t[1]||0,o.upperRight_X=t[0]+t[2]||0,o.upperRight_Y=t[1]+t[3]||0):(o.lowerLeft_X=t||0,o.lowerLeft_Y=e||0,o.upperRight_X=t+r||0,o.upperRight_Y=e+i||0);return[o.lowerLeft_X,o.lowerLeft_Y,o.upperRight_X,o.upperRight_Y]},n.internal.calculateColor=function(t,e,n){var r=new Array(3);return r.r=0|t,r.g=0|e,r.b=0|n,r},n.internal.getBitPosition=function(t,e){var n=1;return n<<=e-1,(t=t||0)|n},n.internal.setBitPosition=function(t,e,n){t=t||0;var r=1;if(r<<=e-1,1==(n=n||1))t=t|r;else var t=t&~r;return t},e.API.addHTML=function(t,e,n,r,i){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof e&&(r=e,i=n),"function"==typeof r&&(i=r,r=null);var o=this.internal,a=o.scaleFactor,s=o.pageSize.width,c=o.pageSize.height;if(r=r||{},r.onrendered=function(t){e=parseInt(e)||0,n=parseInt(n)||0;var o=r.dim||{},l=o.h||0,u=o.w||Math.min(s,t.width/a)-e,h="JPEG";if(r.format&&(h=r.format),t.height>c&&r.pagesplit){var f=function(){for(var r=0;;){var o=document.createElement("canvas");o.width=Math.min(s*a,t.width),o.height=Math.min(c*a,t.height-r),o.getContext("2d").drawImage(t,0,r,t.width,o.height,0,0,o.width,o.height);var l=[o,e,r?0:n,o.width/a,o.height/a,h,null,"SLOW"];if(this.addImage.apply(this,l),(r+=o.height)>=t.height)break;this.addPage()}i(u,r,null,l)}.bind(this);if("CANVAS"===t.nodeName){var d=new Image;d.onload=f,d.src=t.toDataURL("image/png"),t=d}else f()}else{var p=Math.random().toString(35),m=[t,e,n,u,l,h,p,"SLOW"];this.addImage.apply(this,m),i(u,l,p,m)}}.bind(this),"undefined"!=typeof html2canvas&&!r.rstz)return html2canvas(t,r);if("undefined"!=typeof rasterizeHTML){var l="drawDocument";return"string"==typeof t&&(l=/^http/.test(t)?"drawURL":"drawHTML"),r.width=r.width||s*a,rasterizeHTML[l](t,void 0,r).then(function(t){r.onrendered(t.image)},function(t){i(null,t)})}return null},/** @preserve
 * jsPDF addImage plugin
 * Copyright (c) 2012 Jason Siefken, https://github.com/siefkenj/
 *               2013 Chris Dowling, https://github.com/gingerchris
 *               2013 Trinh Ho, https://github.com/ineedfat
 *               2013 Edwin Alejandro Perez, https://github.com/eaparango
 *               2013 Norah Smith, https://github.com/burnburnrocket
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 James Robb, https://github.com/jamesbrobb
 *
 * 
 */
function(e){var n=["jpeg","jpg","png"],r=function t(e){var n=this.internal.newObject(),r=this.internal.write,i=this.internal.putStream;if(e.n=n,r("<</Type /XObject"),r("/Subtype /Image"),r("/Width "+e.w),r("/Height "+e.h),e.cs===this.color_spaces.INDEXED?r("/ColorSpace [/Indexed /DeviceRGB "+(e.pal.length/3-1)+" "+("smask"in e?n+2:n+1)+" 0 R]"):(r("/ColorSpace /"+e.cs),e.cs===this.color_spaces.DEVICE_CMYK&&r("/Decode [1 0 1 0 1 0 1 0]")),r("/BitsPerComponent "+e.bpc),"f"in e&&r("/Filter /"+e.f),"dp"in e&&r("/DecodeParms <<"+e.dp+">>"),"trns"in e&&e.trns.constructor==Array){for(var o="",a=0,s=e.trns.length;a<s;a++)o+=e.trns[a]+" "+e.trns[a]+" ";r("/Mask ["+o+"]")}if("smask"in e&&r("/SMask "+(n+1)+" 0 R"),r("/Length "+e.data.length+">>"),i(e.data),r("endobj"),"smask"in e){var c="/Predictor "+e.p+" /Colors 1 /BitsPerComponent "+e.bpc+" /Columns "+e.w,l={w:e.w,h:e.h,cs:"DeviceGray",bpc:e.bpc,dp:c,data:e.smask};"f"in e&&(l.f=e.f),t.call(this,l)}e.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),r("<< /Length "+e.pal.length+">>"),i(this.arrayBufferToBinaryString(new Uint8Array(e.pal))),r("endobj"))},i=function(){var t=this.internal.collections.addImage_images;for(var e in t)r.call(this,t[e])},o=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var r in e)n("/I"+(t=e[r]).i,t.n,"0","R")},a=function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:e.image_compression.NONE},s=function(){var t=this.internal.collections.addImage_images;return t||(this.internal.collections.addImage_images=t={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o)),t},c=function(t){var e=0;return t&&(e=Object.keys?Object.keys(t).length:function(t){var e=0;for(var n in t)t.hasOwnProperty(n)&&e++;return e}(t)),e},l=function(t){return void 0===t||null===t},u=function(t){return"string"==typeof t&&e.sHashCode(t)},h=function(t){return-1===n.indexOf(t)},f=function(t){return"function"!=typeof e["process"+t.toUpperCase()]},d=function(e){return"object"===(void 0===e?"undefined":t(e))&&1===e.nodeType},p=function(e,n,r){if("IMG"===e.nodeName&&e.hasAttribute("src")){var i=""+e.getAttribute("src");if(!r&&0===i.indexOf("data:image/"))return i;!n&&/\.png(?:[?#].*)?$/i.test(i)&&(n="png")}if("CANVAS"===e.nodeName)var o=e;else{(o=document.createElement("canvas")).width=e.clientWidth||e.width,o.height=e.clientHeight||e.height;var a=o.getContext("2d");if(!a)throw"addImage requires canvas to be supported by browser.";if(r){var s,c,l,u,h,f,d,p,m=Math.PI/180;"object"===(void 0===r?"undefined":t(r))&&(s=r.x,c=r.y,l=r.bg,r=r.angle),p=r*m,u=Math.abs(Math.cos(p)),h=Math.abs(Math.sin(p)),f=o.width,d=o.height,o.width=d*h+f*u,o.height=d*u+f*h,isNaN(s)&&(s=o.width/2),isNaN(c)&&(c=o.height/2),a.clearRect(0,0,o.width,o.height),a.fillStyle=l||"white",a.fillRect(0,0,o.width,o.height),a.save(),a.translate(s,c),a.rotate(p),a.drawImage(e,-f/2,-d/2),a.rotate(-p),a.translate(-s,-c),a.restore()}else a.drawImage(e,0,0,o.width,o.height)}return o.toDataURL("png"==(""+n).toLowerCase()?"image/png":"image/jpeg")},m=function(t,e){var n;if(e)for(var r in e)if(t===e[r].alias){n=e[r];break}return n},g=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.w*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.h*72/e/this.internal.scaleFactor),0===t&&(t=e*n.w/n.h),0===e&&(e=t*n.h/n.w),[t,e]},w=function(t,e,n,r,i,o,a){var s=g.call(this,n,r,i),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;n=s[0],r=s[1],a[o]=i,this.internal.write("q",c(n),"0 0",c(r),c(t),l(e+r),"cm /I"+i.i,"Do Q")};e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"},e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},e.sHashCode=function(t){return Array.prototype.reduce&&t.split("").reduce(function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t},0)},e.isString=function(t){return"string"==typeof t},e.extractInfoFromBase64DataURI=function(t){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(t)},e.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},e.isArrayBuffer=function(t){return!!this.supportsArrayBuffer()&&t instanceof ArrayBuffer},e.isArrayBufferView=function(t){return!!this.supportsArrayBuffer()&&("undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array))},e.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n},e.arrayBufferToBinaryString=function(t){if("function"==typeof window.atob)return atob(this.arrayBufferToBase64(t));for(var e=this.isArrayBuffer(t)?t:new Uint8Array(t),n="",r=Math.round(e.byteLength/20480),i=0;i<r;i++)n+=String.fromCharCode.apply(null,e.slice(20480*i,20480*i+20480));return n},e.arrayBufferToBase64=function(t){for(var e,n,r,i,o="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(t),c=s.byteLength,l=c%3,u=c-l,h=0;h<u;h+=3)e=(258048&(i=s[h]<<16|s[h+1]<<8|s[h+2]))>>12,n=(4032&i)>>6,r=63&i,o+=a[(16515072&i)>>18]+a[e]+a[n]+a[r];return 1==l?(e=(3&(i=s[u]))<<4,o+=a[(252&i)>>2]+a[e]+"=="):2==l&&(e=(1008&(i=s[u]<<8|s[u+1]))>>4,n=(15&i)<<2,o+=a[(64512&i)>>10]+a[e]+a[n]+"="),o},e.createImageInfo=function(t,e,n,r,i,o,a,s,c,l,u,h,f){var d={alias:s,w:e,h:n,cs:r,bpc:i,i:a,data:t};return o&&(d.f=o),c&&(d.dp=c),l&&(d.trns=l),u&&(d.pal=u),h&&(d.smask=h),f&&(d.p=f),d},e.addImage=function(e,r,i,o,g,y,v,b,x){if("string"!=typeof r){var k=y;y=g,g=o,o=i,i=r,r=k}if("object"===(void 0===e?"undefined":t(e))&&!d(e)&&"imageData"in e){var _=e;e=_.imageData,r=_.format||r,i=_.x||i||0,o=_.y||o||0,g=_.w||g,y=_.h||y,v=_.alias||v,b=_.compression||b,x=_.rotation||_.angle||x}if(isNaN(i)||isNaN(o))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var C,A=s.call(this);if(!(C=m(e,A))){var S;if(d(e)&&(e=p(e,r,x)),l(v)&&(v=u(e)),!(C=m(v,A))){if(this.isString(e)){var q=this.extractInfoFromBase64DataURI(e);q?(r=q[2],e=atob(q[3])):137===e.charCodeAt(0)&&80===e.charCodeAt(1)&&78===e.charCodeAt(2)&&71===e.charCodeAt(3)&&(r="png")}if(r=(r||"JPEG").toLowerCase(),h(r))throw new Error("addImage currently only supports formats "+n+", not '"+r+"'");if(f(r))throw new Error("please ensure that the plugin for '"+r+"' support is added");if(this.supportsArrayBuffer()&&(e instanceof Uint8Array||(S=e,e=this.binaryStringToUint8Array(e))),!(C=this["process"+r.toUpperCase()](e,c(A),v,a(b),S)))throw new Error("An unkwown error occurred whilst processing the image")}}return w.call(this,i,o,g,y,C,C.i,A),this};var y=function(t){var e,n,r;if(255===!t.charCodeAt(0)||216===!t.charCodeAt(1)||255===!t.charCodeAt(2)||224===!t.charCodeAt(3)||!t.charCodeAt(6)==="J".charCodeAt(0)||!t.charCodeAt(7)==="F".charCodeAt(0)||!t.charCodeAt(8)==="I".charCodeAt(0)||!t.charCodeAt(9)==="F".charCodeAt(0)||0===!t.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var i=256*t.charCodeAt(4)+t.charCodeAt(5),o=4,a=t.length;o<a;){if(o+=i,255!==t.charCodeAt(o))throw new Error("getJpegSize could not find the size of the image");if(192===t.charCodeAt(o+1)||193===t.charCodeAt(o+1)||194===t.charCodeAt(o+1)||195===t.charCodeAt(o+1)||196===t.charCodeAt(o+1)||197===t.charCodeAt(o+1)||198===t.charCodeAt(o+1)||199===t.charCodeAt(o+1))return n=256*t.charCodeAt(o+5)+t.charCodeAt(o+6),e=256*t.charCodeAt(o+7)+t.charCodeAt(o+8),r=t.charCodeAt(o+9),[e,n,r];o+=2,i=256*t.charCodeAt(o)+t.charCodeAt(o+1)}},v=function(t){if(65496!==(t[0]<<8|t[1]))throw new Error("Supplied data is not a JPEG");for(var e,n,r,i,o=t.length,a=(t[4]<<8)+t[5],s=4;s<o;){if(s+=a,e=b(t,s),a=(e[2]<<8)+e[3],(192===e[1]||194===e[1])&&255===e[0]&&a>7)return e=b(t,s+5),n=(e[2]<<8)+e[3],r=(e[0]<<8)+e[1],i=e[4],{width:n,height:r,numcomponents:i};s+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")},b=function(t,e){return t.subarray(e,e+5)};e.processJPEG=function(t,e,n,r,i){var o,a=this.color_spaces.DEVICE_RGB,s=this.decode.DCT_DECODE;return this.isString(t)?(o=y(t),this.createImageInfo(t,o[0],o[1],1==o[3]?this.color_spaces.DEVICE_GRAY:a,8,s,e,n)):(this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)?(o=v(t),t=i||this.arrayBufferToBinaryString(t),this.createImageInfo(t,o.width,o.height,1==o.numcomponents?this.color_spaces.DEVICE_GRAY:a,8,s,e,n)):null)},e.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(e.API),/**
 * jsPDF Annotations PlugIn
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var n={annotations:[],f2:function(t){return t.toFixed(2)},notEmpty:function(t){if(void 0!==t&&""!=t)return!0}};e.API.annotationPlugin=n,e.API.events.push(["addPage",function(t){this.annotationPlugin.annotations[t.pageNumber]=[]}]),t.events.push(["putPage",function(t){for(var e=this.annotationPlugin.annotations[t.pageNumber],r=!1,i=0;i<e.length&&!r;i++)switch((l=e[i]).type){case"link":if(n.notEmpty(l.options.url)||n.notEmpty(l.options.pageNumber)){r=!0;break}case"reference":case"text":case"freetext":r=!0}if(0!=r){this.internal.write("/Annots [");for(var o=this.annotationPlugin.f2,a=this.internal.scaleFactor,s=this.internal.pageSize.height,c=this.internal.getPageInfo(t.pageNumber),i=0;i<e.length;i++){var l=e[i];switch(l.type){case"reference":this.internal.write(" "+l.object.objId+" 0 R ");break;case"text":var u=this.internal.newAdditionalObject(),h=this.internal.newAdditionalObject(),f=l.title||"Note";w="<</Type /Annot /Subtype /Text "+(p="/Rect ["+o(l.bounds.x*a)+" "+o(s-(l.bounds.y+l.bounds.h)*a)+" "+o((l.bounds.x+l.bounds.w)*a)+" "+o((s-l.bounds.y)*a)+"] ")+"/Contents ("+l.contents+")",w+=" /Popup "+h.objId+" 0 R",w+=" /P "+c.objId+" 0 R",w+=" /T ("+f+") >>",u.content=w;var d=u.objId+" 0 R";w="<</Type /Annot /Subtype /Popup "+(p="/Rect ["+o((l.bounds.x+30)*a)+" "+o(s-(l.bounds.y+l.bounds.h)*a)+" "+o((l.bounds.x+l.bounds.w+30)*a)+" "+o((s-l.bounds.y)*a)+"] ")+" /Parent "+d,l.open&&(w+=" /Open true"),w+=" >>",h.content=w,this.internal.write(u.objId,"0 R",h.objId,"0 R");break;case"freetext":var p="/Rect ["+o(l.bounds.x*a)+" "+o((s-l.bounds.y)*a)+" "+o(l.bounds.x+l.bounds.w*a)+" "+o(s-(l.bounds.y+l.bounds.h)*a)+"] ",m=l.color||"#000000";w="<</Type /Annot /Subtype /FreeText "+p+"/Contents ("+l.contents+")",w+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+m+")",w+=" /Border [0 0 0]",w+=" >>",this.internal.write(w);break;case"link":if(l.options.name){var g=this.annotations._nameMap[l.options.name];l.options.pageNumber=g.page,l.options.top=g.y}else l.options.top||(l.options.top=0);var p="/Rect ["+o(l.x*a)+" "+o((s-l.y)*a)+" "+o((l.x+l.w)*a)+" "+o((s-(l.y+l.h))*a)+"] ",w="";if(l.options.url)w="<</Type /Annot /Subtype /Link "+p+"/Border [0 0 0] /A <</S /URI /URI ("+l.options.url+") >>";else if(l.options.pageNumber)switch(w="<</Type /Annot /Subtype /Link "+p+"/Border [0 0 0] /Dest ["+(t=this.internal.getPageInfo(l.options.pageNumber)).objId+" 0 R",l.options.magFactor=l.options.magFactor||"XYZ",l.options.magFactor){case"Fit":w+=" /Fit]";break;case"FitH":w+=" /FitH "+l.options.top+"]";break;case"FitV":l.options.left=l.options.left||0,w+=" /FitV "+l.options.left+"]";break;case"XYZ":default:var y=o((s-l.options.top)*a);l.options.left=l.options.left||0,void 0===l.options.zoom&&(l.options.zoom=0),w+=" /XYZ "+l.options.left+" "+y+" "+l.options.zoom+"]"}""!=w&&(w+=" >>",this.internal.write(w))}}this.internal.write("]")}}]),t.createAnnotation=function(t){switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(t)}},t.link=function(t,e,n,r,i){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:t,y:e,w:n,h:r,options:i,type:"link"})},t.textWithLink=function(t,e,n,r){var i=this.getTextWidth(t),o=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(t,e,n),n+=.2*o,this.link(e,n-o,i,o,r),i},t.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},t.getLineHeight=function(){return this.internal.getLineHeight()}}(e.API),e.API.autoPrint=function(){var t;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")}),this},/**
 * jsPDF Canvas PlugIn
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.events.push(["initialized",function(){this.canvas.pdf=this}]),t.canvas={getContext:function(t){return this.pdf.context2d._canvas=this,this.pdf.context2d},style:{}},Object.defineProperty(t.canvas,"width",{get:function(){return this._width},set:function(t){this._width=t,this.getContext("2d").pageWrapX=t+1}}),Object.defineProperty(t.canvas,"height",{get:function(){return this._height},set:function(t){this._height=t,this.getContext("2d").pageWrapY=t+1}})}(e.API),/** ====================================================================
 * jsPDF Cell plugin
 * Copyright (c) 2013 Youssef Beddad, youssef.beddad@gmail.com
 *               2013 Eduardo Menezes de Morais, eduardo.morais@usp.br
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Hall, james@parall.ax
 *               2014 Diego Casorran, https://github.com/diegocr
 *
 * 
 * ====================================================================
 */
function(t){var e,n,r,i,o={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1,s=function(t,e,n,r,i){o={x:t,y:e,w:n,h:r,ln:i}},c=function(){return o},l={left:0,top:0,bottom:0};t.setHeaderFunction=function(t){i=t},t.getTextDimensions=function(t){e=this.internal.getFont().fontName,n=this.table_font_size||this.internal.getFontSize(),r=this.internal.getFont().fontStyle;var i,o;(o=document.createElement("font")).id="jsPDFCell";try{o.style.fontStyle=r}catch(t){o.style.fontWeight=r}o.style.fontName=e,o.style.fontSize=n+"pt";try{o.textContent=t}catch(e){o.innerText=t}return document.body.appendChild(o),i={w:(o.offsetWidth+1)*(19.049976/25.4),h:(o.offsetHeight+1)*(19.049976/25.4)},document.body.removeChild(o),i},t.cellAddPage=function(){var t=this.margins||l;this.addPage(),s(t.left,t.top,void 0,void 0),a+=1},t.cellInitialize=function(){o={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1},t.cell=function(t,e,n,r,i,o,a){var u=c(),h=!1;if(void 0!==u.ln)if(u.ln===o)t=u.x+u.w,e=u.y;else{var f=this.margins||l;u.y+u.h+r+13>=this.internal.pageSize.height-f.bottom&&(this.cellAddPage(),h=!0,this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(o,!0)),e=c().y+c().h,h&&(e=23)}if(void 0!==i[0])if(this.printingHeaderRow?this.rect(t,e,n,r,"FD"):this.rect(t,e,n,r),"right"===a){i instanceof Array||(i=[i]);for(var d=0;d<i.length;d++){var p=i[d],m=this.getStringUnitWidth(p)*this.internal.getFontSize();this.text(p,t+n-m-3,e+this.internal.getLineHeight()*(d+1))}}else this.text(i,t+3,e+this.internal.getLineHeight());return s(t,e,n,r,o),this},t.arrayMax=function(t,e){var n,r,i,o=t[0];for(n=0,r=t.length;n<r;n+=1)i=t[n],e?-1===e(o,i)&&(o=i):i>o&&(o=i);return o},t.table=function(e,n,r,i,s){if(!r)throw"No data for PDF table";var c,u,h,f,d,p,m,g,w,y,v=[],b=[],x={},k={},_=[],C=[],A=!1,S=!0,q=12,T=l;if(T.width=this.internal.pageSize.width,s&&(!0===s.autoSize&&(A=!0),!1===s.printHeaders&&(S=!1),s.fontSize&&(q=s.fontSize),s.css&&void 0!==s.css["font-size"]&&(q=16*s.css["font-size"]),s.margins&&(T=s.margins)),this.lnMod=0,o={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1,this.printHeaders=S,this.margins=T,this.setFontSize(q),this.table_font_size=q,void 0===i||null===i)v=Object.keys(r[0]);else if(i[0]&&"string"!=typeof i[0]){for(u=0,h=i.length;u<h;u+=1)c=i[u],v.push(c.name),b.push(c.prompt),k[c.name]=c.width*(19.049976/25.4)}else v=i;if(A)for(y=function(t){return t[c]},u=0,h=v.length;u<h;u+=1){for(x[c=v[u]]=r.map(y),_.push(this.getTextDimensions(b[u]||c).w),m=0,f=(p=x[c]).length;m<f;m+=1)d=p[m],_.push(this.getTextDimensions(d).w);k[c]=t.arrayMax(_),_=[]}if(S){P=this.calculateLineHeight(v,k,b.length?b:v);for(u=0,h=v.length;u<h;u+=1)c=v[u],C.push([e,n,k[c],P,String(b.length?b[u]:c)]);this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}for(u=0,h=r.length;u<h;u+=1){var P;for(g=r[u],P=this.calculateLineHeight(v,k,g),m=0,w=v.length;m<w;m+=1)c=v[m],this.cell(e,n,k[c],P,g[c],u+2,c.align)}return this.lastCellPos=o,this.table_x=e,this.table_y=n,this},t.calculateLineHeight=function(t,e,n){for(var r,i=0,o=0;o<t.length;o++){n[r=t[o]]=this.splitTextToSize(String(n[r]),e[r]-3);var a=this.internal.getLineHeight()*n[r].length+3;a>i&&(i=a)}return i},t.setTableHeaderRow=function(t){this.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var n,r,o,c;if(this.printingHeaderRow=!0,void 0!==i){var l=i(this,a);s(l[0],l[1],l[2],l[3],-1)}this.setFontStyle("bold");var u=[];for(o=0,c=this.tableHeaderRow.length;o<c;o+=1)this.setFillColor(200,200,200),n=this.tableHeaderRow[o],e&&(this.margins.top=13,n[1]=this.margins&&this.margins.top||0,u.push(n)),r=[].concat(n),this.cell.apply(this,r.concat(t));u.length>0&&this.setTableHeaderRow(u),this.setFontStyle("normal"),this.printingHeaderRow=!1}}(e.API),/**
 * jsPDF Context2D PlugIn Copyright (c) 2014 Steven Spungin (TwelveTone LLC) steven@twelvetone.tv
 *
 * Licensed under the MIT License. http://opensource.org/licenses/mit-license
 */
function(t){function e(){this._isStrokeTransparent=!1,this._strokeOpacity=1,this.strokeStyle="#000000",this.fillStyle="#000000",this._isFillTransparent=!1,this._fillOpacity=1,this.font="12pt times",this.textBaseline="alphabetic",this.textAlign="start",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this._transform=[1,0,0,1,0,0],this.globalCompositeOperation="normal",this.globalAlpha=1,this._clip_path=[],this.ignoreClearRect=!1,this.copy=function(t){this._isStrokeTransparent=t._isStrokeTransparent,this._strokeOpacity=t._strokeOpacity,this.strokeStyle=t.strokeStyle,this._isFillTransparent=t._isFillTransparent,this._fillOpacity=t._fillOpacity,this.fillStyle=t.fillStyle,this.font=t.font,this.lineWidth=t.lineWidth,this.lineJoin=t.lineJoin,this.lineCap=t.lineCap,this.textBaseline=t.textBaseline,this.textAlign=t.textAlign,this._fontSize=t._fontSize,this._transform=t._transform.slice(0),this.globalCompositeOperation=t.globalCompositeOperation,this.globalAlpha=t.globalAlpha,this._clip_path=t._clip_path.slice(0),this.ignoreClearRect=t.ignoreClearRect}}t.events.push(["initialized",function(){this.context2d.pdf=this,this.context2d.internal.pdf=this,this.context2d.ctx=new e,this.context2d.ctxStack=[],this.context2d.path=[]}]),t.context2d={pageWrapXEnabled:!1,pageWrapYEnabled:!1,pageWrapX:9999999,pageWrapY:9999999,ctx:new e,f2:function(t){return t.toFixed(2)},fillRect:function(t,e,n,r){if(!this._isFillTransparent()){t=this._wrapX(t),e=this._wrapY(e);var i=this._matrix_map_rect(this.ctx._transform,{x:t,y:e,w:n,h:r});this.pdf.rect(i.x,i.y,i.w,i.h,"f")}},strokeRect:function(t,e,n,r){if(!this._isStrokeTransparent()){t=this._wrapX(t),e=this._wrapY(e);var i=this._matrix_map_rect(this.ctx._transform,{x:t,y:e,w:n,h:r});this.pdf.rect(i.x,i.y,i.w,i.h,"s")}},clearRect:function(t,e,n,r){if(!this.ctx.ignoreClearRect){t=this._wrapX(t),e=this._wrapY(e);var i=this._matrix_map_rect(this.ctx._transform,{x:t,y:e,w:n,h:r});this.save(),this.setFillStyle("#ffffff"),this.pdf.rect(i.x,i.y,i.w,i.h,"f"),this.restore()}},save:function(){this.ctx._fontSize=this.pdf.internal.getFontSize();var t=new e;t.copy(this.ctx),this.ctxStack.push(this.ctx),this.ctx=t},restore:function(){this.ctx=this.ctxStack.pop(),this.setFillStyle(this.ctx.fillStyle),this.setStrokeStyle(this.ctx.strokeStyle),this.setFont(this.ctx.font),this.pdf.setFontSize(this.ctx._fontSize),this.setLineCap(this.ctx.lineCap),this.setLineWidth(this.ctx.lineWidth),this.setLineJoin(this.ctx.lineJoin)},rect:function(t,e,n,r){this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.closePath()},beginPath:function(){this.path=[]},closePath:function(){this.path.push({type:"close"})},_getRGBA:function(t){var e,n,r,o;if(!t)return{r:0,g:0,b:0,a:0,style:t};if(this.internal.rxTransparent.test(t))e=0,n=0,r=0,o=0;else{var a=this.internal.rxRgb.exec(t);null!=a?(e=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),o=1):null!=(a=this.internal.rxRgba.exec(t))?(e=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),o=parseFloat(a[4])):(o=1,"#"!=t.charAt(0)&&((t=i.colorNameToHex(t))||(t="#000000")),4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,r=t.substring(3,4),r+=r):(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),r=parseInt(r,16))}return{r:e,g:n,b:r,a:o,style:t}},setFillStyle:function(t){var e=this._getRGBA(t);this.ctx.fillStyle=t,this.ctx._isFillTransparent=0===e.a,this.ctx._fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})},setStrokeStyle:function(t){var e=this._getRGBA(t);this.ctx.strokeStyle=e.style,this.ctx._isStrokeTransparent=0===e.a,this.ctx._strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))},fillText:function(t,e,n,r){if(!this._isFillTransparent()){e=this._wrapX(e),n=this._wrapY(n);var i=this._matrix_map_point(this.ctx._transform,[e,n]);e=i[0],n=i[1];var o=57.2958*this._matrix_rotation(this.ctx._transform);if(this.ctx._clip_path.length>0){var a;(a=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var s=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=s}var c=1;try{c=this._matrix_decompose(this._getTransform()).scale[0]}catch(t){console.warn(t)}if(c<.01)this.pdf.text(t,e,this._getBaseline(n),null,o);else{var l=this.pdf.internal.getFontSize();this.pdf.setFontSize(l*c),this.pdf.text(t,e,this._getBaseline(n),null,o),this.pdf.setFontSize(l)}this.ctx._clip_path.length>0&&a.push("Q")}},strokeText:function(t,e,n,r){if(!this._isStrokeTransparent()){e=this._wrapX(e),n=this._wrapY(n);var i=this._matrix_map_point(this.ctx._transform,[e,n]);e=i[0],n=i[1];var o=57.2958*this._matrix_rotation(this.ctx._transform);if(this.ctx._clip_path.length>0){var a;(a=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var s=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=s}var c=1;try{c=this._matrix_decompose(this._getTransform()).scale[0]}catch(t){console.warn(t)}if(1===c)this.pdf.text(t,e,this._getBaseline(n),{stroke:!0},o);else{var l=this.pdf.internal.getFontSize();this.pdf.setFontSize(l*c),this.pdf.text(t,e,this._getBaseline(n),{stroke:!0},o),this.pdf.setFontSize(l)}this.ctx._clip_path.length>0&&a.push("Q")}},setFont:function(t){this.ctx.font=t;var e=/\s*(\w+)\s+(\w+)\s+(\w+)\s+([\d\.]+)(px|pt|em)\s+(.*)?/;if(null!=(u=e.exec(t))){var n=u[1],r=u[3],i=u[4],o=u[5],a=u[6];i="px"===o?Math.floor(parseFloat(i)):"em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)),this.pdf.setFontSize(i),"bold"===r||"700"===r?this.pdf.setFontStyle("bold"):"italic"===n?this.pdf.setFontStyle("italic"):this.pdf.setFontStyle("normal");var s,c=(f=a).toLowerCase().split(/\s*,\s*/);s=-1!=c.indexOf("arial")?"Arial":-1!=c.indexOf("verdana")?"Verdana":-1!=c.indexOf("helvetica")?"Helvetica":-1!=c.indexOf("sans-serif")?"sans-serif":-1!=c.indexOf("fixed")?"Fixed":-1!=c.indexOf("monospace")?"Monospace":-1!=c.indexOf("terminal")?"Terminal":-1!=c.indexOf("courier")?"Courier":-1!=c.indexOf("times")?"Times":-1!=c.indexOf("cursive")?"Cursive":-1!=c.indexOf("fantasy")?"Fantasy":(c.indexOf("serif"),"Serif");var l;l="bold"===r?"bold":"normal",this.pdf.setFont(s,l)}else{var u=(e=/\s*(\d+)(pt|px|em)\s+([\w "]+)\s*([\w "]+)?/).exec(t);if(null!=u){var h=u[1],f=u[3];(l=u[4])||(l="normal"),h="em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(h)),this.pdf.setFontSize(h),this.pdf.setFont(f,l)}}},setTextBaseline:function(t){this.ctx.textBaseline=t},getTextBaseline:function(){return this.ctx.textBaseline},setTextAlign:function(t){this.ctx.textAlign=t},getTextAlign:function(){return this.ctx.textAlign},setLineWidth:function(t){this.ctx.lineWidth=t,this.pdf.setLineWidth(t)},setLineCap:function(t){this.ctx.lineCap=t,this.pdf.setLineCap(t)},setLineJoin:function(t){this.ctx.lineJoin=t,this.pdf.setLineJoin(t)},moveTo:function(t,e){t=this._wrapX(t),e=this._wrapY(e);var n=this._matrix_map_point(this.ctx._transform,[t,e]),r={type:"mt",x:t=n[0],y:e=n[1]};this.path.push(r)},_wrapX:function(t){return this.pageWrapXEnabled?t%this.pageWrapX:t},_wrapY:function(t){return this.pageWrapYEnabled?(this._gotoPage(this._page(t)),(t-this.lastBreak)%this.pageWrapY):t},transform:function(t,e,n,r,i,o){this.ctx._transform=[t,e,n,r,i,o]},setTransform:function(t,e,n,r,i,o){this.ctx._transform=[t,e,n,r,i,o]},_getTransform:function(){return this.ctx._transform},lastBreak:0,pageBreaks:[],_page:function(t){if(this.pageWrapYEnabled){this.lastBreak=0;for(var e=0,n=0,r=0;r<this.pageBreaks.length;r++)if(t>=this.pageBreaks[r]){e++,0===this.lastBreak&&n++;var i=this.pageBreaks[r]-this.lastBreak;this.lastBreak=this.pageBreaks[r],n+=o=Math.floor(i/this.pageWrapY)}if(0===this.lastBreak){var o=Math.floor(t/this.pageWrapY)+1;n+=o}return n+e}return this.pdf.internal.getCurrentPageInfo().pageNumber},_gotoPage:function(t){},lineTo:function(t,e){t=this._wrapX(t),e=this._wrapY(e);var n=this._matrix_map_point(this.ctx._transform,[t,e]),r={type:"lt",x:t=n[0],y:e=n[1]};this.path.push(r)},bezierCurveTo:function(t,e,n,r,i,o){t=this._wrapX(t),e=this._wrapY(e),n=this._wrapX(n),r=this._wrapY(r),i=this._wrapX(i),o=this._wrapY(o);var a;i=(a=this._matrix_map_point(this.ctx._transform,[i,o]))[0],o=a[1];var s={type:"bct",x1:t=(a=this._matrix_map_point(this.ctx._transform,[t,e]))[0],y1:e=a[1],x2:n=(a=this._matrix_map_point(this.ctx._transform,[n,r]))[0],y2:r=a[1],x:i,y:o};this.path.push(s)},quadraticCurveTo:function(t,e,n,r){t=this._wrapX(t),e=this._wrapY(e),n=this._wrapX(n),r=this._wrapY(r);var i;n=(i=this._matrix_map_point(this.ctx._transform,[n,r]))[0],r=i[1];var o={type:"qct",x1:t=(i=this._matrix_map_point(this.ctx._transform,[t,e]))[0],y1:e=i[1],x:n,y:r};this.path.push(o)},arc:function(t,e,n,r,i,o){if(t=this._wrapX(t),e=this._wrapY(e),!this._matrix_is_identity(this.ctx._transform)){var a=this._matrix_map_point(this.ctx._transform,[t,e]);t=a[0],e=a[1];var s=this._matrix_map_point(this.ctx._transform,[0,0]),c=this._matrix_map_point(this.ctx._transform,[0,n]);n=Math.sqrt(Math.pow(c[0]-s[0],2)+Math.pow(c[1]-s[1],2))}var l={type:"arc",x:t,y:e,radius:n,startAngle:r,endAngle:i,anticlockwise:o};this.path.push(l)},drawImage:function(t,e,n,r,i,o,a,s,c){void 0!==o&&(e=o,n=a,r=s,i=c),e=this._wrapX(e),n=this._wrapY(n);var l,u=this._matrix_map_rect(this.ctx._transform,{x:e,y:n,w:r,h:i}),h=(this._matrix_map_rect(this.ctx._transform,{x:o,y:a,w:s,h:c}),/data:image\/(\w+).*/i.exec(t));l=null!=h?h[1]:"png",this.pdf.addImage(t,l,u.x,u.y,u.w,u.h)},_matrix_multiply:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=n*t[0]+r*t[2],l=i*t[0]+o*t[2],u=a*t[0]+s*t[2]+t[4];return r=n*t[1]+r*t[3],o=i*t[1]+o*t[3],s=a*t[1]+s*t[3]+t[5],n=c,i=l,a=u,[n,r,i,o,a,s]},_matrix_rotation:function(t){return Math.atan2(t[2],t[0])},_matrix_decompose:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=Math.sqrt(e*e+n*n),a=(e/=o)*r+(n/=o)*i;r-=e*a,i-=n*a;var s=Math.sqrt(r*r+i*i);return r/=s,i/=s,a/=s,e*i<n*r&&(e=-e,n=-n,a=-a,o=-o),{scale:[o,0,0,s,0,0],translate:[1,0,0,1,t[4],t[5]],rotate:[e,n,-n,e,0,0],skew:[1,0,a,1,0,0]}},_matrix_map_point:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=e[0],l=e[1];return[c*n+l*i+a,c*r+l*o+s]},_matrix_map_point_obj:function(t,e){var n=this._matrix_map_point(t,[e.x,e.y]);return{x:n[0],y:n[1]}},_matrix_map_rect:function(t,e){var n=this._matrix_map_point(t,[e.x,e.y]),r=this._matrix_map_point(t,[e.x+e.w,e.y+e.h]);return{x:n[0],y:n[1],w:r[0]-n[0],h:r[1]-n[1]}},_matrix_is_identity:function(t){return 1==t[0]&&(0==t[1]&&(0==t[2]&&(1==t[3]&&(0==t[4]&&0==t[5]))))},rotate:function(t){var e=[Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,e)},scale:function(t,e){var n=[t,0,0,e,0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,n)},translate:function(t,e){var n=[1,0,0,1,t,e];this.ctx._transform=this._matrix_multiply(this.ctx._transform,n)},stroke:function(){if(this.ctx._clip_path.length>0){var t;(t=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var e=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._stroke(!0),this.ctx._clip_path=this.path,this.path=e,this._stroke(!1),t.push("Q")}else this._stroke(!1)},_stroke:function(t){if(t||!this._isStrokeTransparent()){for(var e=[],n=this.path,r=0;r<n.length;r++){var i=n[r];switch(i.type){case"mt":e.push({start:i,deltas:[],abs:[]});break;case"lt":h=[i.x-n[r-1].x,i.y-n[r-1].y];e[e.length-1].deltas.push(h),e[e.length-1].abs.push(i);break;case"bct":h=[i.x1-n[r-1].x,i.y1-n[r-1].y,i.x2-n[r-1].x,i.y2-n[r-1].y,i.x-n[r-1].x,i.y-n[r-1].y];e[e.length-1].deltas.push(h);break;case"qct":var o=n[r-1].x+2/3*(i.x1-n[r-1].x),a=n[r-1].y+2/3*(i.y1-n[r-1].y),s=i.x+2/3*(i.x1-i.x),c=i.y+2/3*(i.y1-i.y),l=i.x,u=i.y,h=[o-n[r-1].x,a-n[r-1].y,s-n[r-1].x,c-n[r-1].y,l-n[r-1].x,u-n[r-1].y];e[e.length-1].deltas.push(h);break;case"arc":0==e.length&&e.push({start:{x:0,y:0},deltas:[],abs:[]}),e[e.length-1].arc=!0,e[e.length-1].abs.push(i)}}for(r=0;r<e.length;r++){var f;if(f=r==e.length-1?"s":null,e[r].arc)for(var d=e[r].abs,p=0;p<d.length;p++){var m=d[p],g=360*m.startAngle/(2*Math.PI),w=360*m.endAngle/(2*Math.PI),y=m.x,v=m.y;this.internal.arc2(this,y,v,m.radius,g,w,m.anticlockwise,f,t)}else{var y=e[r].start.x,v=e[r].start.y;t?(this.pdf.lines(e[r].deltas,y,v,null,null),this.pdf.clip_fixed()):this.pdf.lines(e[r].deltas,y,v,null,f)}}}},_isFillTransparent:function(){return this.ctx._isFillTransparent||0==this.globalAlpha},_isStrokeTransparent:function(){return this.ctx._isStrokeTransparent||0==this.globalAlpha},fill:function(t){if(this.ctx._clip_path.length>0){var e;(e=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var n=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(t,!0),this.ctx._clip_path=this.path,this.path=n,this._fill(t,!1),e.push("Q")}else this._fill(t,!1)},_fill:function(t,e){if(!this._isFillTransparent()){var r,i="function"==typeof this.pdf.internal.newObject2;r=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage();var o=[],a=window.outIntercept;if(i)switch(this.ctx.globalCompositeOperation){case"normal":case"source-over":break;case"destination-in":case"destination-out":var s=this.pdf.internal.newStreamObject(),c=this.pdf.internal.newObject2();c.push("<</Type /ExtGState"),c.push("/SMask <</S /Alpha /G "+s.objId+" 0 R>>"),c.push(">>");d="MASK"+c.objId;this.pdf.internal.addGraphicsState(d,c.objId);var l="/"+d+" gs";r.splice(0,0,"q"),r.splice(1,0,l),r.push("Q"),window.outIntercept=s;break;default:var u="/"+this.pdf.internal.blendModeMap[this.ctx.globalCompositeOperation.toUpperCase()];u&&this.pdf.internal.out(u+" gs")}var h=this.ctx.globalAlpha;if(this.ctx._fillOpacity<1&&(h=this.ctx._fillOpacity),i){var f=this.pdf.internal.newObject2();f.push("<</Type /ExtGState"),f.push("/CA "+h),f.push("/ca "+h),f.push(">>");var d="GS_O_"+f.objId;this.pdf.internal.addGraphicsState(d,f.objId),this.pdf.internal.out("/"+d+" gs")}for(var p=this.path,m=0;m<p.length;m++){var g=p[m];switch(g.type){case"mt":o.push({start:g,deltas:[],abs:[]});break;case"lt":_=[g.x-p[m-1].x,g.y-p[m-1].y];o[o.length-1].deltas.push(_),o[o.length-1].abs.push(g);break;case"bct":_=[g.x1-p[m-1].x,g.y1-p[m-1].y,g.x2-p[m-1].x,g.y2-p[m-1].y,g.x-p[m-1].x,g.y-p[m-1].y];o[o.length-1].deltas.push(_);break;case"qct":var w=p[m-1].x+2/3*(g.x1-p[m-1].x),y=p[m-1].y+2/3*(g.y1-p[m-1].y),v=g.x+2/3*(g.x1-g.x),b=g.y+2/3*(g.y1-g.y),x=g.x,k=g.y,_=[w-p[m-1].x,y-p[m-1].y,v-p[m-1].x,b-p[m-1].y,x-p[m-1].x,k-p[m-1].y];o[o.length-1].deltas.push(_);break;case"arc":0===o.length&&o.push({deltas:[],abs:[]}),o[o.length-1].arc=!0,o[o.length-1].abs.push(g);break;case"close":o.push({close:!0})}}for(m=0;m<o.length;m++){var C;if(m==o.length-1?(C="f","evenodd"===t&&(C+="*")):C=null,o[m].close)this.pdf.internal.out("h"),this.pdf.internal.out("f");else if(o[m].arc){o[m].start&&this.internal.move2(this,o[m].start.x,o[m].start.y);for(var A=o[m].abs,S=0;S<A.length;S++){var q=A[S];if(void 0!==q.startAngle){var T=360*q.startAngle/(2*Math.PI),P=360*q.endAngle/(2*Math.PI),I=q.x,E=q.y;if(0===S&&this.internal.move2(this,I,E),this.internal.arc2(this,I,E,q.radius,T,P,q.anticlockwise,null,e),S===A.length-1&&o[m].start){var I=o[m].start.x,E=o[m].start.y;this.internal.line2(n,I,E)}}else this.internal.line2(n,q.x,q.y)}}else{var I=o[m].start.x,E=o[m].start.y;e?(this.pdf.lines(o[m].deltas,I,E,null,null),this.pdf.clip_fixed()):this.pdf.lines(o[m].deltas,I,E,null,C)}}window.outIntercept=a}},pushMask:function(){if("function"==typeof this.pdf.internal.newObject2){var t=this.pdf.internal.newStreamObject(),e=this.pdf.internal.newObject2();e.push("<</Type /ExtGState"),e.push("/SMask <</S /Alpha /G "+t.objId+" 0 R>>"),e.push(">>");var n="MASK"+e.objId;this.pdf.internal.addGraphicsState(n,e.objId);var r="/"+n+" gs";this.pdf.internal.out(r)}else console.log("jsPDF v2 not enabled")},clip:function(){if(this.ctx._clip_path.length>0)for(var t=0;t<this.path.length;t++)this.ctx._clip_path.push(this.path[t]);else this.ctx._clip_path=this.path;this.path=[]},measureText:function(t){var e=this.pdf;return{getWidth:function(){var n=e.internal.getFontSize(),r=e.getStringUnitWidth(t)*n/e.internal.scaleFactor;return r*=1.3333},get width(){return this.getWidth(t)}}},_getBaseline:function(t){var e=parseInt(this.pdf.internal.getFontSize()),n=.25*e;switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e;case"hanging":return t+e-n;case"middle":return t+e/2-n;case"ideographic":return t;case"alphabetic":default:return t}}};var n=t.context2d;Object.defineProperty(n,"fillStyle",{set:function(t){this.setFillStyle(t)},get:function(){return this.ctx.fillStyle}}),Object.defineProperty(n,"strokeStyle",{set:function(t){this.setStrokeStyle(t)},get:function(){return this.ctx.strokeStyle}}),Object.defineProperty(n,"lineWidth",{set:function(t){this.setLineWidth(t)},get:function(){return this.ctx.lineWidth}}),Object.defineProperty(n,"lineCap",{set:function(t){this.setLineCap(t)},get:function(){return this.ctx.lineCap}}),Object.defineProperty(n,"lineJoin",{set:function(t){this.setLineJoin(t)},get:function(){return this.ctx.lineJoin}}),Object.defineProperty(n,"miterLimit",{set:function(t){this.ctx.miterLimit=t},get:function(){return this.ctx.miterLimit}}),Object.defineProperty(n,"textBaseline",{set:function(t){this.setTextBaseline(t)},get:function(){return this.getTextBaseline()}}),Object.defineProperty(n,"textAlign",{set:function(t){this.setTextAlign(t)},get:function(){return this.getTextAlign()}}),Object.defineProperty(n,"font",{set:function(t){this.setFont(t)},get:function(){return this.ctx.font}}),Object.defineProperty(n,"globalCompositeOperation",{set:function(t){this.ctx.globalCompositeOperation=t},get:function(){return this.ctx.globalCompositeOperation}}),Object.defineProperty(n,"globalAlpha",{set:function(t){this.ctx.globalAlpha=t},get:function(){return this.ctx.globalAlpha}}),Object.defineProperty(n,"ignoreClearRect",{set:function(t){this.ctx.ignoreClearRect=t},get:function(){return this.ctx.ignoreClearRect}}),n.internal={},n.internal.rxRgb=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n.internal.rxRgba=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/,n.internal.rxTransparent=/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/,n.internal.arc=function(t,e,n,r,i,o,a,s){for(var c=this.pdf.internal.scaleFactor,l=this.pdf.internal.pageSize.height,u=this.pdf.internal.f2,h=i*(Math.PI/180),f=o*(Math.PI/180),d=this.createArc(r,h,f,a),p=0;p<d.length;p++){var m=d[p];0===p?this.pdf.internal.out([u((m.x1+e)*c),u((l-(m.y1+n))*c),"m",u((m.x2+e)*c),u((l-(m.y2+n))*c),u((m.x3+e)*c),u((l-(m.y3+n))*c),u((m.x4+e)*c),u((l-(m.y4+n))*c),"c"].join(" ")):this.pdf.internal.out([u((m.x2+e)*c),u((l-(m.y2+n))*c),u((m.x3+e)*c),u((l-(m.y3+n))*c),u((m.x4+e)*c),u((l-(m.y4+n))*c),"c"].join(" ")),t._lastPoint={x:e,y:n}}null!==s&&this.pdf.internal.out(this.pdf.internal.getStyle(s))},n.internal.arc2=function(t,e,n,r,i,o,a,s,c){var l=e,u=n;c?(this.arc(t,l,u,r,i,o,a,null),this.pdf.clip_fixed()):this.arc(t,l,u,r,i,o,a,s)},n.internal.move2=function(t,e,n){var r=this.pdf.internal.scaleFactor,i=this.pdf.internal.pageSize.height,o=this.pdf.internal.f2;this.pdf.internal.out([o(e*r),o((i-n)*r),"m"].join(" ")),t._lastPoint={x:e,y:n}},n.internal.line2=function(t,e,n){var r=this.pdf.internal.scaleFactor,i=this.pdf.internal.pageSize.height,o=this.pdf.internal.f2,a={x:e,y:n};this.pdf.internal.out([o(a.x*r),o((i-a.y)*r),"l"].join(" ")),t._lastPoint=a},n.internal.createArc=function(t,e,n,r){var i=2*Math.PI,o=Math.PI/2,a=e;for((a<i||a>i)&&(a%=i),a<0&&(a=i+a);e>n;)e-=i;var s=Math.abs(n-e);s<i&&r&&(s=i-s);for(var c=[],l=r?-1:1,u=a;s>1e-5;){var h=u+l*Math.min(s,o);c.push(this.createSmallArc(t,u,h)),s-=Math.abs(h-u),u=h}return c},n.internal.getCurrentPage=function(){return this.pdf.internal.pages[this.pdf.internal.getCurrentPageInfo().pageNumber]},n.internal.createSmallArc=function(t,e,n){var r=(n-e)/2,i=t*Math.cos(r),o=t*Math.sin(r),a=i,s=-o,c=a*a+s*s,l=c+a*i+s*o,u=4/3*(Math.sqrt(2*c*l)-l)/(a*o-s*i),h=a-u*s,f=s+u*a,d=h,p=-f,m=r+e,g=Math.cos(m),w=Math.sin(m);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*g-f*w,y2:h*w+f*g,x3:d*g-p*w,y3:d*w+p*g,x4:t*Math.cos(n),y4:t*Math.sin(n)}}}(e.API),/** @preserve
 * jsPDF fromHTML plugin. BETA stage. API subject to change. Needs browser
 * Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Daniel Husar, https://github.com/danielhusar
 *               2014 Wolfgang Gassler, https://github.com/woolfg
 *               2014 Steven Spungin, https://github.com/flamenco
 *
 * 
 * ====================================================================
 */
function(e){var n,r,o,a,s,c,l,u,h,f,d,p,m,g,w,y,v,b,x,k;n=function(){function t(){}return function(e){return t.prototype=e,new t}}(),f=function(t){var e,n,r,i,o,a,s;for(n=0,r=t.length,e=void 0,i=!1,a=!1;!i&&n!==r;)(e=t[n]=t[n].trimLeft())&&(i=!0),n++;for(n=r-1;r&&!a&&-1!==n;)(e=t[n]=t[n].trimRight())&&(a=!0),n--;for(o=/\s+$/g,s=!0,n=0;n!==r;)"\u2028"!=t[n]&&(e=t[n].replace(/\s+/g," "),s&&(e=e.trimLeft()),e&&(s=o.test(e)),t[n]=e),n++;return t},p=function(t){var e,n,r;for(e=void 0,n=(r=t.split(",")).shift();!e&&n;)e=o[n.trim().toLowerCase()],n=r.shift();return e},m=function(t){(t="auto"===t?"0px":t).indexOf("em")>-1&&!isNaN(Number(t.replace("em","")))&&(t=18.719*Number(t.replace("em",""))+"px"),t.indexOf("pt")>-1&&!isNaN(Number(t.replace("pt","")))&&(t=1.333*Number(t.replace("pt",""))+"px");var e;return void 0,16,(e=g[t])?e:void 0!==(e={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:t}])?g[t]=e/16:(e=parseFloat(t))?g[t]=e/16:3===(e=t.match(/([\d\.]+)(px)/)).length?g[t]=parseFloat(e[1])/16:g[t]=1},h=function(t){var e,n,r;return r=function(e){var n;return n=function(t){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle?t.currentStyle:t.style}(t),function(t){return t=t.replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()}),n[t]}}(),e={},n=void 0,e["font-family"]=p(r("font-family"))||"times",e["font-style"]=a[r("font-style")]||"normal",e["text-align"]=s[r("text-align")]||"left","bold"===(n=c[r("font-weight")]||"normal")&&("normal"===e["font-style"]?e["font-style"]=n:e["font-style"]=n+e["font-style"]),e["font-size"]=m(r("font-size"))||1,e["line-height"]=m(r("line-height"))||1,e.display="inline"===r("display")?"inline":"block",n="block"===e.display,e["margin-top"]=n&&m(r("margin-top"))||0,e["margin-bottom"]=n&&m(r("margin-bottom"))||0,e["padding-top"]=n&&m(r("padding-top"))||0,e["padding-bottom"]=n&&m(r("padding-bottom"))||0,e["margin-left"]=n&&m(r("margin-left"))||0,e["margin-right"]=n&&m(r("margin-right"))||0,e["padding-left"]=n&&m(r("padding-left"))||0,e["padding-right"]=n&&m(r("padding-right"))||0,e["page-break-before"]=r("page-break-before")||"auto",e.float=l[r("cssFloat")]||"none",e.clear=u[r("clear")]||"none",e.color=r("color"),e},w=function(t,e,n){var r,i,o,a,s;if(o=!1,i=void 0,a=void 0,r=n["#"+t.id])if("function"==typeof r)o=r(t,e);else for(i=0,a=r.length;!o&&i!==a;)o=r[i](t,e),i++;if(r=n[t.nodeName],!o&&r)if("function"==typeof r)o=r(t,e);else for(i=0,a=r.length;!o&&i!==a;)o=r[i](t,e),i++;for(s=t.className?t.className.split(" "):[],i=0;i<s.length;i++)if(r=n["."+s[i]],!o&&r)if("function"==typeof r)o=r(t,e);else for(i=0,a=r.length;!o&&i!==a;)o=r[i](t,e),i++;return o},k=function(t,e){var n,r,i,o,a,s,c,l,u;for(n=[],r=[],i=0,u=t.rows[0].cells.length,c=t.clientWidth;i<u;)l=t.rows[0].cells[i],r[i]={name:l.textContent.toLowerCase().replace(/\s+/g,""),prompt:l.textContent.replace(/\r?\n/g,""),width:l.clientWidth/c*e.pdf.internal.pageSize.width},i++;for(i=1;i<t.rows.length;){for(s=t.rows[i],a={},o=0;o<s.cells.length;)a[r[o].name]=s.cells[o].textContent.replace(/\r?\n/g,""),o++;n.push(a),i++}return{rows:n,headers:r}};var _={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},C=1;r=function(e,i,o){var a,s,c,l,u,f,d,p;for(s=e.childNodes,a=void 0,(u="block"===(c=h(e)).display)&&(i.setBlockBoundary(),i.setBlockStyle(c)),l=0,f=s.length;l<f;){if("object"===(void 0===(a=s[l])?"undefined":t(a))){if(i.executeWatchFunctions(a),1===a.nodeType&&"HEADER"===a.nodeName){var m=a,g=i.pdf.margins_doc.top;i.pdf.internal.events.subscribe("addPage",function(t){i.y=g,r(m,i,o),i.pdf.margins_doc.top=i.y+10,i.y+=10},!1)}if(8===a.nodeType&&"#comment"===a.nodeName)~a.textContent.indexOf("ADD_PAGE")&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top);else if(1!==a.nodeType||_[a.nodeName])if(3===a.nodeType){var v=a.nodeValue;if(a.nodeValue&&"LI"===a.parentNode.nodeName)if("OL"===a.parentNode.parentNode.nodeName)v=C+++". "+v;else{var b=c["font-size"],x=(3-.75*b)*i.pdf.internal.scaleFactor,A=.75*b*i.pdf.internal.scaleFactor,S=1.74*b/i.pdf.internal.scaleFactor;p=function(t,e){this.pdf.circle(t+x,e+A,S,"FD")}}16&a.ownerDocument.body.compareDocumentPosition(a)&&i.addText(v,c)}else"string"==typeof a&&i.addText(a,c);else{var q;if("IMG"===a.nodeName){var T=a.getAttribute("src");q=y[i.pdf.sHashCode(T)||T]}if(q){i.pdf.internal.pageSize.height-i.pdf.margins_doc.bottom<i.y+a.height&&i.y>i.pdf.margins_doc.top&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top,i.executeWatchFunctions(a));var P=h(a),I=i.x,E=12/i.pdf.internal.scaleFactor,O=(P["margin-left"]+P["padding-left"])*E,F=(P["margin-right"]+P["padding-right"])*E,B=(P["margin-top"]+P["padding-top"])*E,R=(P["margin-bottom"]+P["padding-bottom"])*E;void 0!==P.float&&"right"===P.float?I+=i.settings.width-a.width-F:I+=O,i.pdf.addImage(q,I,i.y+B,a.width,a.height),q=void 0,"right"===P.float||"left"===P.float?(i.watchFunctions.push(function(t,e,n,r){return i.y>=e?(i.x+=t,i.settings.width+=n,!0):!!(r&&1===r.nodeType&&!_[r.nodeName]&&i.x+r.width>i.pdf.margins_doc.left+i.pdf.margins_doc.width)&&(i.x+=t,i.y=e,i.settings.width+=n,!0)}.bind(this,"left"===P.float?-a.width-O-F:0,i.y+a.height+B+R,a.width)),i.watchFunctions.push(function(t,e,n){return!(i.y<t&&e===i.pdf.internal.getNumberOfPages())||1===n.nodeType&&"both"===h(n).clear&&(i.y=t,!0)}.bind(this,i.y+a.height,i.pdf.internal.getNumberOfPages())),i.settings.width-=a.width+O+F,"left"===P.float&&(i.x+=a.width+O+F)):i.y+=a.height+B+R}else if("TABLE"===a.nodeName)d=k(a,i),i.y+=10,i.pdf.table(i.x,i.y,d.rows,d.headers,{autoSize:!1,printHeaders:o.printHeaders,margins:i.pdf.margins_doc,css:h(a)}),i.y=i.pdf.lastCellPos.y+i.pdf.lastCellPos.h+20;else if("OL"===a.nodeName||"UL"===a.nodeName)C=1,w(a,i,o)||r(a,i,o),i.y+=10;else if("LI"===a.nodeName){var D=i.x;i.x+=20/i.pdf.internal.scaleFactor,i.y+=3,w(a,i,o)||r(a,i,o),i.x=D}else"BR"===a.nodeName?(i.y+=c["font-size"]*i.pdf.internal.scaleFactor,i.addText("\u2028",n(c))):w(a,i,o)||r(a,i,o)}}l++}if(o.outY=i.y,u)return i.setBlockBoundary(p)},y={},v=function(t,e,n,r){function i(){e.pdf.internal.events.publish("imagesLoaded"),r(o)}for(var o,a=t.getElementsByTagName("img"),s=a.length,c=0;s--;)!function(t,n,r){if(t){var a=new Image;o=++c,a.crossOrigin="",a.onerror=a.onload=function(){if(a.complete&&(0===a.src.indexOf("data:image/")&&(a.width=n||a.width||0,a.height=r||a.height||0),a.width+a.height)){var o=e.pdf.sHashCode(t)||t;y[o]=y[o]||a}--c||i()},a.src=t}}(a[s].getAttribute("src"),a[s].width,a[s].height);return c||i()},b=function(t,e,n){var i=t.getElementsByTagName("footer");if(i.length>0){i=i[0];var o=e.pdf.internal.write,a=e.y;e.pdf.internal.write=function(){},r(i,e,n);var s=Math.ceil(e.y-a)+5;e.y=a,e.pdf.internal.write=o,e.pdf.margins_doc.bottom+=s;for(var c=function(t){var o=void 0!==t?t.pageNumber:1,a=e.y;e.y=e.pdf.internal.pageSize.height-e.pdf.margins_doc.bottom,e.pdf.margins_doc.bottom-=s;for(var c=i.getElementsByTagName("span"),l=0;l<c.length;++l)(" "+c[l].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1&&(c[l].innerHTML=o),(" "+c[l].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&(c[l].innerHTML="###jsPDFVarTotalPages###");r(i,e,n),e.pdf.margins_doc.bottom+=s,e.y=a},l=i.getElementsByTagName("span"),u=0;u<l.length;++u)(" "+l[u].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&e.pdf.internal.events.subscribe("htmlRenderingFinished",e.pdf.putTotalPages.bind(e.pdf,"###jsPDFVarTotalPages###"),!0);e.pdf.internal.events.subscribe("addPage",c,!1),c(),_.FOOTER=1}},x=function(t,e,n,i,o,a){if(!e)return!1;"string"==typeof e||e.parentNode||(e=""+e.innerHTML),"string"==typeof e&&(e=function(t){var e,n,r,i;return r="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),i="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",n=document.createElement("div"),n.style.cssText=i,n.innerHTML='<iframe style="height:1px;width:1px" name="'+r+'" />',document.body.appendChild(n),(e=window.frames[r]).document.open(),e.document.writeln(t),e.document.close(),e.document.body}(e.replace(/<\/?script[^>]*?>/gi,"")));var s,c=new d(t,n,i,o);return v.call(this,e,c,o.elementHandlers,function(t){b(e,c,o.elementHandlers),r(e,c,o.elementHandlers),c.pdf.internal.events.publish("htmlRenderingFinished"),s=c.dispose(),"function"==typeof a?a(s):t&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")}),s||{x:c.x,y:c.y}},(d=function(t,e,n,r){return this.pdf=t,this.x=e,this.y=n,this.settings=r,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},d.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},d.prototype.executeWatchFunctions=function(t){var e=!1,n=[];if(this.watchFunctions.length>0){for(var r=0;r<this.watchFunctions.length;++r)!0===this.watchFunctions[r](t)?e=!0:n.push(this.watchFunctions[r]);this.watchFunctions=n}return e},d.prototype.splitFragmentsIntoLines=function(t,e){var r,i,o,a,s,c,l,u,h,f,d,p,m,g;for(12,f=this.pdf.internal.scaleFactor,a={},i=void 0,h=void 0,o=void 0,s=void 0,g=void 0,u=void 0,l=void 0,c=void 0,p=[d=[]],r=0,m=this.settings.width;t.length;)if(s=t.shift(),g=e.shift(),s)if(i=g["font-family"],h=g["font-style"],(o=a[i+h])||(o=this.pdf.internal.getFont(i,h).metadata.Unicode,a[i+h]=o),u={widths:o.widths,kerning:o.kerning,fontSize:12*g["font-size"],textIndent:r},l=this.pdf.getStringUnitWidth(s,u)*u.fontSize/f,"\u2028"==s)d=[],p.push(d);else if(r+l>m){for(c=this.pdf.splitTextToSize(s,m,u),d.push([c.shift(),g]);c.length;)d=[[c.shift(),g]],p.push(d);r=this.pdf.getStringUnitWidth(d[0][0],u)*u.fontSize/f}else d.push([s,g]),r+=l;if(void 0!==g["text-align"]&&("center"===g["text-align"]||"right"===g["text-align"]||"justify"===g["text-align"]))for(var w=0;w<p.length;++w){var y=this.pdf.getStringUnitWidth(p[w][0][0],u)*u.fontSize/f;w>0&&(p[w][0][1]=n(p[w][0][1]));var v=m-y;if("right"===g["text-align"])p[w][0][1]["margin-left"]=v;else if("center"===g["text-align"])p[w][0][1]["margin-left"]=v/2;else if("justify"===g["text-align"]){var b=p[w][0][0].split(" ").length-1;p[w][0][1]["word-spacing"]=v/b,w===p.length-1&&(p[w][0][1]["word-spacing"]=0)}}return p},d.prototype.RenderTextFragment=function(t,e){var n,r;r=0,this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),e.color,"Td"),r=Math.max(r,e["line-height"],e["font-size"]),this.pdf.internal.write(0,(-12*r).toFixed(2),"Td")),n=this.pdf.internal.getFont(e["font-family"],e["font-style"]);var i=this.getPdfColor(e.color);i!==this.lastTextColor&&(this.pdf.internal.write(i),this.lastTextColor=i),void 0!==e["word-spacing"]&&e["word-spacing"]>0&&this.pdf.internal.write(e["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+n.id,(12*e["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(t)+") Tj"),void 0!==e["word-spacing"]&&this.pdf.internal.write(0,"Tw")},d.prototype.getPdfColor=function(t){var e,n,r,o=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(t);if(null!=o?(e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3])):("#"!=t.charAt(0)&&((t=i.colorNameToHex(t))||(t="#000000")),e=t.substring(1,3),e=parseInt(e,16),n=t.substring(3,5),n=parseInt(n,16),r=t.substring(5,7),r=parseInt(r,16)),"string"==typeof e&&/^#[0-9A-Fa-f]{6}$/.test(e)){var a=parseInt(e.substr(1),16);e=a>>16&255,n=a>>8&255,r=255&a}var s=this.f3;return 0===e&&0===n&&0===r||void 0===n?s(e/255)+" g":[s(e/255),s(n/255),s(r/255),"rg"].join(" ")},d.prototype.f3=function(t){return t.toFixed(3)},d.prototype.renderParagraph=function(t){var e,n,r,i,o,a,s,c,l,u,h,d,p;if(r=f(this.paragraph.text),d=this.paragraph.style,e=this.paragraph.blockstyle,this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:e},r.join("").trim()){s=this.splitFragmentsIntoLines(r,d),a=void 0,c=void 0,12,n=12/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,h=(Math.max((e["margin-top"]||0)-this.priorMarginBottom,0)+(e["padding-top"]||0))*n,u=((e["margin-bottom"]||0)+(e["padding-bottom"]||0))*n,this.priorMarginBottom=e["margin-bottom"]||0,"always"===e["page-break-before"]&&(this.pdf.addPage(),this.y=0,h=((e["margin-top"]||0)+(e["padding-top"]||0))*n),l=this.pdf.internal.write,i=void 0,o=void 0,this.y+=h,l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var m=0;s.length;){for(c=0,i=0,o=(a=s.shift()).length;i!==o;)a[i][0].trim()&&(c=Math.max(c,a[i][1]["line-height"],a[i][1]["font-size"]),p=7*a[i][1]["font-size"]),i++;var g=0,w=0;for(void 0!==a[0][1]["margin-left"]&&a[0][1]["margin-left"]>0&&(g=(w=this.pdf.internal.getCoordinateString(a[0][1]["margin-left"]))-m,m=w),l(g+Math.max(e["margin-left"]||0,0)*n,(-12*c).toFixed(2),"Td"),i=0,o=a.length;i!==o;)a[i][0]&&this.RenderTextFragment(a[i][0],a[i][1]),i++;if(this.y+=c*n,this.executeWatchFunctions(a[0][1])&&s.length>0){var y=[],v=[];s.forEach(function(t){for(var e=0,n=t.length;e!==n;)t[e][0]&&(y.push(t[e][0]+" "),v.push(t[e][1])),++e}),s=this.splitFragmentsIntoLines(f(y),v),l("ET","Q"),l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return t&&"function"==typeof t&&t.call(this,this.x-9,this.y-p/2),l("ET","Q"),this.y+=u}},d.prototype.setBlockBoundary=function(t){return this.renderParagraph(t)},d.prototype.setBlockStyle=function(t){return this.paragraph.blockstyle=t},d.prototype.addText=function(t,e){return this.paragraph.text.push(t),this.paragraph.style.push(e)},o={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},c={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},a={normal:"normal",italic:"italic",oblique:"italic"},s={left:"left",right:"right",center:"center",justify:"justify"},l={none:"none",right:"right",left:"left"},u={none:"none",both:"both"},g={normal:1},e.fromHTML=function(t,e,n,r,i,o){return this.margins_doc=o||{top:0,bottom:0},r||(r={}),r.elementHandlers||(r.elementHandlers={}),x(this,t,isNaN(e)?4:e,isNaN(n)?4:n,r,i)}}(e.API),/** ==================================================================== 
 * jsPDF JavaScript plugin
 * Copyright (c) 2013 Youssef Beddad, youssef.beddad@gmail.com
 * 
 * 
 * ====================================================================
 */
function(t){var n,r,i;e.API.addJS=function(t){return i=t,this.internal.events.subscribe("postPutResources",function(t){n=this.internal.newObject(),this.internal.write("<< /Names [(EmbeddedJS) "+(n+1)+" 0 R] >>","endobj"),r=this.internal.newObject(),this.internal.write("<< /S /JavaScript /JS (",i,") >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==n&&void 0!==r&&this.internal.write("/Names <</JavaScript "+n+" 0 R>>")}),this}}(),/**
 * jsPDF Outline PlugIn
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.events.push(["postPutResources",function(){var t=this,e=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=t.outline.render().split(/\r\n/),r=0;r<n.length;r++){var i=n[r],o=e.exec(i);if(null!=o){var a=o[1];t.internal.newObjectDeferredBegin(a)}t.internal.write(i)}if(this.outline.createNamedDestinations){for(var s=this.internal.pages.length,c=[],r=0;r<s;r++){var l=t.internal.newObject();c.push(l);var u=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();t.internal.write("<< /Names [ ");for(r=0;r<c.length;r++)t.internal.write("(page_"+(r+1)+")"+c[r]+" 0 R");t.internal.write(" ] >>","endobj");t.internal.newObject();t.internal.write("<< /Dests "+h+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+namesOid+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var r={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(i=0;i<e.children.length;i++){o=e.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(e)),i>0&&this.line("/Prev "+this.makeRef(e.children[i-1])),i<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var n=this.count=this.count_r({count:0},o);if(n>0&&this.line("/Count "+n),o.options&&o.options.pageNumber){var r=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+r.objId+" 0 R /XYZ 0 "+this.ctx.pdf.internal.pageSize.height+" 0]")}this.objEnd()}for(var i=0;i<e.children.length;i++){var o=e.children[i];this.renderItems(o)}},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(t){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(e.API),/**@preserve
 *  ====================================================================
 * jsPDF PNG PlugIn
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * 
 * ====================================================================
 */
function(t){var e=function(){return"function"!=typeof PNG||"function"!=typeof s},n=function(e){return e!==t.image_compression.NONE&&r()},r=function(){var t="function"==typeof o;if(!t)throw new Error("requires deflate.js for compression");return t},i=function(e,n,r,i){var s=5,u=f;switch(i){case t.image_compression.FAST:s=3,u=h;break;case t.image_compression.MEDIUM:s=6,u=d;break;case t.image_compression.SLOW:s=9,u=p}e=l(e,n,r,u);var m=new Uint8Array(a(s)),g=c(e),w=new o(s),y=w.append(e),v=w.flush(),b=m.length+y.length+v.length,x=new Uint8Array(b+4);return x.set(m),x.set(y,m.length),x.set(v,m.length+y.length),x[b++]=g>>>24&255,x[b++]=g>>>16&255,x[b++]=g>>>8&255,x[b++]=255&g,t.arrayBufferToBinaryString(x)},a=function(t,e){var n=Math.LOG2E*Math.log(32768)-8<<4|8,r=n<<8;return r|=Math.min(3,(e-1&255)>>1)<<6,r|=0,r+=31-r%31,[n,255&r]},c=function(t,e){for(var n,r=1,i=0,o=t.length,a=0;o>0;){o-=n=o>e?e:o;do{i+=r+=t[a++]}while(--n);r%=65521,i%=65521}return(i<<16|r)>>>0},l=function(t,e,n,r){for(var i,o,a,s=t.length/e,c=new Uint8Array(t.length+s),l=g(),u=0;u<s;u++){if(a=u*e,i=t.subarray(a,a+e),r)c.set(r(i,n,o),a+u);else{for(var h=0,f=l.length,d=[];h<f;h++)d[h]=l[h](i,n,o);var p=w(d.concat());c.set(d[p],a+u)}o=i}return c},u=function(t,e,n){var r=Array.apply([],t);return r.unshift(0),r},h=function(t,e,n){var r,i=[],o=0,a=t.length;for(i[0]=1;o<a;o++)r=t[o-e]||0,i[o+1]=t[o]-r+256&255;return i},f=function(t,e,n){var r,i=[],o=0,a=t.length;for(i[0]=2;o<a;o++)r=n&&n[o]||0,i[o+1]=t[o]-r+256&255;return i},d=function(t,e,n){var r,i,o=[],a=0,s=t.length;for(o[0]=3;a<s;a++)r=t[a-e]||0,i=n&&n[a]||0,o[a+1]=t[a]+256-(r+i>>>1)&255;return o},p=function(t,e,n){var r,i,o,a,s=[],c=0,l=t.length;for(s[0]=4;c<l;c++)r=t[c-e]||0,i=n&&n[c]||0,o=n&&n[c-e]||0,a=m(r,i,o),s[c+1]=t[c]-a+256&255;return s},m=function(t,e,n){var r=t+e-n,i=Math.abs(r-t),o=Math.abs(r-e),a=Math.abs(r-n);return i<=o&&i<=a?t:o<=a?e:n},g=function(){return[u,h,f,d,p]},w=function(t){for(var e,n,r,i=0,o=t.length;i<o;)((e=y(t[i].slice(1)))<n||!n)&&(n=e,r=i),i++;return r},y=function(t){for(var e=0,n=t.length,r=0;e<n;)r+=Math.abs(t[e++]);return r},v=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n};t.processPNG=function(t,r,o,a,s){var c,l,u,h,f,d,p=this.color_spaces.DEVICE_RGB,m=this.decode.FLATE_DECODE,g=8;if(this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)){if(e())throw new Error("PNG support requires png.js and zlib.js");if(c=new PNG(t),t=c.imgData,g=c.bits,p=c.colorSpace,h=c.colors,-1!==[4,6].indexOf(c.colorType)){if(8===c.bits)for(var w,y=(I=32==c.pixelBitlength?new Uint32Array(c.decodePixels().buffer):16==c.pixelBitlength?new Uint16Array(c.decodePixels().buffer):new Uint8Array(c.decodePixels().buffer)).length,b=new Uint8Array(y*c.colors),x=new Uint8Array(y),k=c.pixelBitlength-c.bits,_=0,C=0;_<y;_++){for(A=I[_],w=0;w<k;)b[C++]=A>>>w&255,w+=c.bits;x[_]=A>>>w&255}if(16===c.bits){for(var A,y=(I=new Uint32Array(c.decodePixels().buffer)).length,b=new Uint8Array(y*(32/c.pixelBitlength)*c.colors),x=new Uint8Array(y*(32/c.pixelBitlength)),S=c.colors>1,_=0,C=0,q=0;_<y;)A=I[_++],b[C++]=A>>>0&255,S&&(b[C++]=A>>>16&255,A=I[_++],b[C++]=A>>>0&255),x[q++]=A>>>16&255;g=8}n(a)?(t=i(b,c.width*c.colors,c.colors,a),d=i(x,c.width,1,a)):(t=b,d=x,m=null)}if(3===c.colorType&&(p=this.color_spaces.INDEXED,f=c.palette,c.transparency.indexed)){for(var T=c.transparency.indexed,P=0,_=0,y=T.length;_<y;++_)P+=T[_];if((P/=255)===y-1&&-1!==T.indexOf(0))u=[T.indexOf(0)];else if(P!==y){for(var I=c.decodePixels(),x=new Uint8Array(I.length),_=0,y=I.length;_<y;_++)x[_]=T[I[_]];d=i(x,c.width,1)}}var E=v(a);return l=m===this.decode.FLATE_DECODE?"/Predictor "+E+" /Colors "+h+" /BitsPerComponent "+g+" /Columns "+c.width:"/Colors "+h+" /BitsPerComponent "+g+" /Columns "+c.width,(this.isArrayBuffer(t)||this.isArrayBufferView(t))&&(t=this.arrayBufferToBinaryString(t)),(d&&this.isArrayBuffer(d)||this.isArrayBufferView(d))&&(d=this.arrayBufferToBinaryString(d)),this.createImageInfo(t,c.width,c.height,p,g,m,r,o,l,u,f,d,E)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(e.API),e.API.autoPrint=function(){var t;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")}),this},/** @preserve
 * jsPDF split_text_to_size plugin - MIT license.
 * Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
 *               2014 Diego Casorran, https://github.com/diegocr
 */
function(t){var e=t.getCharWidthsArray=function(t,e){e||(e={});var n,r,i,o=e.widths?e.widths:this.internal.getFont().metadata.Unicode.widths,a=o.fof?o.fof:1,s=e.kerning?e.kerning:this.internal.getFont().metadata.Unicode.kerning,c=s.fof?s.fof:1,l=0,u=o[0]||a,h=[];for(n=0,r=t.length;n<r;n++)i=t.charCodeAt(n),h.push((o[i]||u)/a+(s[i]&&s[i][l]||0)/c),l=i;return h},n=function(t){for(var e=t.length,n=0;e;)n+=t[--e];return n},r=t.getStringUnitWidth=function(t,r){return n(e.call(this,t,r))},i=function(t,e,n,r){for(var i=[],o=0,a=t.length,s=0;o!==a&&s+e[o]<n;)s+=e[o],o++;i.push(t.slice(0,o));var c=o;for(s=0;o!==a;)s+e[o]>r&&(i.push(t.slice(c,o)),s=0,c=o),s+=e[o],o++;return c!==o&&i.push(t.slice(c,o)),i},o=function(t,o,a){a||(a={});var s,c,l,u,h,f,d=[],p=[d],m=a.textIndent||0,g=0,w=0,y=t.split(" "),v=e(" ",a)[0];if(f=-1===a.lineIndent?y[0].length+2:a.lineIndent||0){var b=Array(f).join(" "),x=[];y.map(function(t){(t=t.split(/\s*\n/)).length>1?x=x.concat(t.map(function(t,e){return(e&&t.length?"\n":"")+t})):x.push(t[0])}),y=x,f=r(b,a)}for(l=0,u=y.length;l<u;l++){var k=0;if(s=y[l],f&&"\n"==s[0]&&(s=s.substr(1),k=1),c=e(s,a),w=n(c),m+g+w>o||k){if(w>o){for(h=i(s,c,o-(m+g),o),d.push(h.shift()),d=[h.pop()];h.length;)p.push([h.shift()]);w=n(c.slice(s.length-d[0].length))}else d=[s];p.push(d),m=w+f,g=v}else d.push(s),m+=g+w,g=v}if(f)_=function(t,e){return(e?b:"")+t.join(" ")};else var _=function(t){return t.join(" ")};return p.map(_)};t.splitTextToSize=function(t,e,n){n||(n={});var r,i=n.fontSize||this.internal.getFontSize(),a=function(t){var e={0:1},n={};if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var r=this.internal.getFont(t.fontName,t.fontStyle);return r.metadata.Unicode?{widths:r.metadata.Unicode.widths||e,kerning:r.metadata.Unicode.kerning||n}:{widths:e,kerning:n}}.call(this,n);r=Array.isArray(t)?t:t.split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var c,l,u=[];for(c=0,l=r.length;c<l;c++)u=u.concat(o(r[c],s,a));return u}}(e.API),/** @preserve 
jsPDF standard_fonts_metrics plugin
Copyright (c) 2012 Willow Systems Corporation, willow-systems.com
MIT license.
*/
function(t){var e=function(t){for(var e={},n=0;n<"klmnopqrstuvwxyz".length;n++)e["klmnopqrstuvwxyz"[n]]="0123456789abcdef"[n];var r,i,o,a,s={},c=1,l=s,u=[],h="",f="",d=t.length-1;for(n=1;n!=d;)a=t[n],n+=1,"'"==a?r?(o=r.join(""),r=void 0):r=[]:r?r.push(a):"{"==a?(u.push([l,o]),l={},o=void 0):"}"==a?((i=u.pop())[0][i[1]]=l,o=void 0,l=i[0]):"-"==a?c=-1:void 0===o?e.hasOwnProperty(a)?(h+=e[a],o=parseInt(h,16)*c,c=1,h=""):h+=a:e.hasOwnProperty(a)?(f+=e[a],l[o]=parseInt(f,16)*c,c=1,o=void 0,f=""):f+=a;return s},n={codePages:["WinAnsiEncoding"],WinAnsiEncoding:e("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},r={Unicode:{Courier:n,"Courier-Bold":n,"Courier-BoldOblique":n,"Courier-Oblique":n,Helvetica:n,"Helvetica-Bold":n,"Helvetica-BoldOblique":n,"Helvetica-Oblique":n,"Times-Roman":n,"Times-Bold":n,"Times-BoldItalic":n,"Times-Italic":n}},i={Unicode:{"Courier-Oblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":e("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":e("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":e("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":e("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e,n,o;(e=i.Unicode[t.PostScriptName])&&((n=t.metadata.Unicode?t.metadata.Unicode:t.metadata.Unicode={}).widths=e.widths,n.kerning=e.kerning),(o=r.Unicode[t.PostScriptName])&&((n=t.metadata.Unicode?t.metadata.Unicode:t.metadata.Unicode={}).encoding=o,o.codePages&&o.codePages.length&&(t.encoding=o.codePages[0]))}])}(e.API),e.API.addSVG=function(t,e,n,r,i){function o(t,e){var n=e.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.createTextNode(t)),e.getElementsByTagName("head")[0].appendChild(n)}if(void 0===e||void 0===n)throw new Error("addSVG needs values for 'x' and 'y'");var a=function(t,e){var n=(e.contentWindow||e.contentDocument).document;return n.write(t),n.close(),n.getElementsByTagName("svg")[0]}(t,function(t){var e=t.createElement("iframe");return o(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",t),e.name="childframe",e.setAttribute("width",0),e.setAttribute("height",0),e.setAttribute("frameborder","0"),e.setAttribute("scrolling","no"),e.setAttribute("seamless","seamless"),e.setAttribute("class","jsPDF_sillysvg_iframe"),t.body.appendChild(e),e}(document)),s=[1,1],c=parseFloat(a.getAttribute("width")),l=parseFloat(a.getAttribute("height"));c&&l&&(r&&i?s=[r/c,i/l]:r?s=[r/c,r/c]:i&&(s=[i/l,i/l]));var u,h,f,d,p=a.childNodes;for(u=0,h=p.length;u<h;u++)(f=p[u]).tagName&&"PATH"===f.tagName.toUpperCase()&&((d=function(t){for(var e=parseFloat(t[1]),n=parseFloat(t[2]),r=[],i=3,o=t.length;i<o;)"c"===t[i]?(r.push([parseFloat(t[i+1]),parseFloat(t[i+2]),parseFloat(t[i+3]),parseFloat(t[i+4]),parseFloat(t[i+5]),parseFloat(t[i+6])]),i+=7):"l"===t[i]?(r.push([parseFloat(t[i+1]),parseFloat(t[i+2])]),i+=3):i+=1;return[e,n,r]}(f.getAttribute("d").split(" ")))[0]=d[0]*s[0]+e,d[1]=d[1]*s[1]+n,this.lines.call(this,d[2],d[0],d[1],s));return this},e.API.putTotalPages=function(t){for(var e=new RegExp(t,"g"),n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(e,this.internal.getNumberOfPages());return this},/** ==================================================================== 
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 * 
 * 
 * ====================================================================
 */
function(t){var n="",r="",i="";e.API.addMetadata=function(t,e){return r=e||"http://jspdf.default.namespaceuri/",n=t,this.internal.events.subscribe("postPutResources",function(){if(n){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+r+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(t)),a=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+a.length+s.length+e.length+c.length;i=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(e+o+a+s+c),this.internal.write("endstream"),this.internal.write("endobj")}else i=""}),this.internal.events.subscribe("putCatalog",function(){i&&this.internal.write("/Metadata "+i+" 0 R")}),this}}(),function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},r=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},i=n.prototype,o=r.prototype,a=t.FileReaderSync,s=function(t){this.code=this[this.name=t]},c="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),l=c.length,u=t.URL||t.webkitURL||t,h=u.createObjectURL,f=u.revokeObjectURL,d=u,p=t.btoa,m=t.atob,g=t.ArrayBuffer,w=t.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(r.fake=o.fake=!0;l--;)s.prototype[c[l]]=l+1;return u.createObjectURL||(d=t.URL=function(t){var e,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=t,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(e=t.match(y),n.origin=e&&e[1])),n}),d.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof r?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):h?h.call(u,t):void 0},d.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&f&&f.call(u,t)},i.append=function(t){var n=this.data;if(w&&(t instanceof g||t instanceof w)){for(var i="",o=new w(t),c=0,l=o.length;c<l;c++)i+=String.fromCharCode(o[c]);n.push(i)}else if("Blob"===e(t)||"File"===e(t)){if(!a)throw new s("NOT_READABLE_ERR");var u=new a;n.push(u.readAsBinaryString(t))}else t instanceof r?"base64"===t.encoding&&m?n.push(m(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!=typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},i.getBlob=function(t){return arguments.length||(t=null),new r(this.data.join(""),t,"raw")},i.toString=function(){return"[object BlobBuilder]"},o.slice=function(t,e,n){var i=arguments.length;return i<3&&(n=null),new r(this.data.slice(t,i>1?e:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(t);t.Blob=function(t,n){var r=n?n.type||"":"",i=new e;if(t)for(var o=0,a=t.length;o<a;o++)Uint8Array&&t[o]instanceof Uint8Array?i.append(t[o].buffer):i.append(t[o]);var s=i.getBlob(r);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=n(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content||void 0);var r=r||function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=function(){return t.URL||t.webkitURL||t},n=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},o=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c=function(t){setTimeout(function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()},4e4)},l=function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){s(t)}}},u=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},h=function(s,h,f){f||(s=u(s));var d,p=this,m="application/octet-stream"===s.type,g=function(){l(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return d=e().createObjectURL(s),void setTimeout(function(){n.href=d,n.download=h,i(n),g(),c(d),p.readyState=p.DONE});!function(){if((a||m&&o)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=a?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,p.readyState=p.DONE,g()},n.readAsDataURL(s),void(p.readyState=p.INIT)}d||(d=e().createObjectURL(s)),m?t.location.href=d:t.open(d,"_blank")||(t.location.href=d),p.readyState=p.DONE,g(),c(d)}()},f=h.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=u(t)),navigator.msSaveOrOpenBlob(t,e)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(t,e,n){return new h(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return r}),function(t,e){"object"==typeof module?module.exports=e():"function"==typeof define?define(e):t.adler32cs=e()}(e,function(){var t="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,e=null,n=function(){if(!t)return function(){return!1};try{var n={};"function"==typeof n.Buffer&&(e=n.Buffer)}catch(t){}return function(t){return t instanceof ArrayBuffer||null!==e&&t instanceof e}}(),r=null!==e?function(t){return new e(t,"utf8").toString("binary")}:function(t){return unescape(encodeURIComponent(t))},i=function(t,e){for(var n=65535&t,r=t>>>16,i=0,o=e.length;i<o;i++)r=(r+(n=(n+(255&e.charCodeAt(i)))%65521))%65521;return(r<<16|n)>>>0},o=function(t,e){for(var n=65535&t,r=t>>>16,i=0,o=e.length;i<o;i++)r=(r+(n=(n+e[i])%65521))%65521;return(r<<16|n)>>>0},a={},s=a.Adler32=function(){var e=function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(t=null==t?1:+t))throw new Error("First arguments needs to be a finite number.");this.checksum=t>>>0},a=e.prototype={};return a.constructor=e,e.from=function(t){return t.prototype=a,t}(function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");this.checksum=i(1,t.toString())}),e.fromUtf8=function(t){return t.prototype=a,t}(function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");var n=r(t.toString());this.checksum=i(1,n)}),t&&(e.fromBuffer=function(t){return t.prototype=a,t}(function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(!n(t))throw new Error("First argument needs to be ArrayBuffer.");var r=new Uint8Array(t);return this.checksum=o(1,r)})),a.update=function(t){if(null==t)throw new Error("First argument needs to be a string.");return t=t.toString(),this.checksum=i(this.checksum,t)},a.updateUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=r(t.toString());return this.checksum=i(this.checksum,e)},t&&(a.updateBuffer=function(t){if(!n(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=o(this.checksum,e)}),a.clone=function(){return new s(this.checksum)},e}();return a.from=function(t){if(null==t)throw new Error("First argument needs to be a string.");return i(1,t.toString())},a.fromUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=r(t.toString());return i(1,e)},t&&(a.fromBuffer=function(t){if(!n(t))throw new Error("First argument need to be ArrayBuffer.");var e=new Uint8Array(t);return o(1,e)}),a});/**
 * CssColors
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
var i={};i._colorsTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},i.colorNameToHex=function(t){return t=t.toLowerCase(),void 0!==this._colorsTable[t]&&this._colorsTable[t]};/*
 Deflate.js - https://github.com/gildas-lormeau/zip.js
 Copyright (c) 2013 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright 
 notice, this list of conditions and the following disclaimer in 
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
var o=function(t){function e(){function t(t){var e,n,i,o,a,c,l=r.dyn_tree,u=r.stat_desc.static_tree,h=r.stat_desc.extra_bits,d=r.stat_desc.extra_base,p=r.stat_desc.max_length,m=0;for(o=0;o<=s;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;e<f;e++)(o=l[2*l[2*(n=t.heap[e])+1]+1]+1)>p&&(o=p,m++),l[2*n+1]=o,n>r.max_code||(t.bl_count[o]++,a=0,n>=d&&(a=h[n-d]),c=l[2*n],t.opt_len+=c*(o+a),u&&(t.static_len+=c*(u[2*n+1]+a)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--e])>r.max_code||(l[2*i+1]!=o&&(t.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}}function e(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function n(t,n,r){var i,o,a,c=[],l=0;for(i=1;i<=s;i++)c[i]=l=l+r[i-1]<<1;for(o=0;o<=n;o++)0!==(a=t[2*o+1])&&(t[2*o]=e(c[a]++,a))}var r=this;r.build_tree=function(e){var i,o,a,s=r.dyn_tree,c=r.stat_desc.static_tree,l=r.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=f,i=0;i<l;i++)0!==s[2*i]?(e.heap[++e.heap_len]=u=i,e.depth[i]=0):s[2*i+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,c&&(e.static_len-=c[2*a+1]);for(r.max_code=u,i=Math.floor(e.heap_len/2);i>=1;i--)e.pqdownheap(s,i);a=l;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],e.pqdownheap(s,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,s[2*a]=s[2*i]+s[2*o],e.depth[a]=Math.max(e.depth[i],e.depth[o])+1,s[2*i+1]=s[2*o+1]=a,e.heap[1]=a++,e.pqdownheap(s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],t(e),n(s,r.max_code,e.bl_count)}}function n(t,e,n,r,i){var o=this;o.static_tree=t,o.extra_bits=e,o.extra_base=n,o.elems=r,o.max_length=i}function r(t,e,n,r,i){var o=this;o.good_length=t,o.max_lazy=e,o.nice_length=n,o.max_chain=r,o.func=i}function i(t,e,n,r){var i=t[2*e],o=t[2*n];return i<o||i==o&&r[e]<=r[n]}function o(){function t(){var t;for(Pt=2*At,Et[Ft-1]=0,t=0;t<Ft-1;t++)Et[t]=0;Vt=z[Gt].max_lazy,Jt=z[Gt].good_length,Qt=z[Gt].nice_length,Xt=z[Gt].max_chain,Mt=0,jt=0,Ht=0,zt=Wt=$-1,Lt=0,Ot=0}function r(){var t;for(t=0;t<h;t++)Kt[2*t]=0;for(t=0;t<c;t++)$t[2*t]=0;for(t=0;t<l;t++)Zt[2*t]=0;Kt[2*d]=1,te.opt_len=te.static_len=0,ae=ce=0}function o(){ee.dyn_tree=Kt,ee.stat_desc=n.static_l_desc,ne.dyn_tree=$t,ne.stat_desc=n.static_d_desc,re.dyn_tree=Zt,re.stat_desc=n.static_bl_desc,ue=0,he=0,le=8,r()}function a(t,e){var n,r,i=-1,o=t[1],a=0,s=7,c=4;for(0===o&&(s=138,c=3),t[2*(e+1)+1]=65535,n=0;n<=e;n++)r=o,o=t[2*(n+1)+1],++a<s&&r==o||(a<c?Zt[2*r]+=a:0!==r?(r!=i&&Zt[2*r]++,Zt[2*p]++):a<=10?Zt[2*m]++:Zt[2*g]++,a=0,i=r,0===o?(s=138,c=3):r==o?(s=6,c=3):(s=7,c=4))}function s(){var t;for(a(Kt,ee.max_code),a($t,ne.max_code),re.build_tree(te),t=l-1;t>=3&&0===Zt[2*e.bl_order[t]+1];t--);return te.opt_len+=3*(t+1)+5+5+4,t}function f(t){te.pending_buf[te.pending++]=t}function O(t){f(255&t),f(t>>>8&255)}function et(t){f(t>>8&255),f(255&t)}function nt(t,e){var n,r=e;he>w-r?(O(ue|=(n=t)<<he&65535),ue=n>>>w-he,he+=r-w):(ue|=t<<he&65535,he+=r)}function rt(t,e){var n=2*t;nt(65535&e[n],65535&e[n+1])}function it(t,e){var n,r,i=-1,o=t[1],a=0,s=7,c=4;for(0===o&&(s=138,c=3),n=0;n<=e;n++)if(r=o,o=t[2*(n+1)+1],!(++a<s&&r==o)){if(a<c)do{rt(r,Zt)}while(0!=--a);else 0!==r?(r!=i&&(rt(r,Zt),a--),rt(p,Zt),nt(a-3,2)):a<=10?(rt(m,Zt),nt(a-3,3)):(rt(g,Zt),nt(a-11,7));a=0,i=r,0===o?(s=138,c=3):r==o?(s=6,c=3):(s=7,c=4)}}function ot(t,n,r){var i;for(nt(t-257,5),nt(n-1,5),nt(r-4,4),i=0;i<r;i++)nt(Zt[2*e.bl_order[i]+1],3);it(Kt,t-1),it($t,n-1)}function at(){16==he?(O(ue),ue=0,he=0):he>=8&&(f(255&ue),ue>>>=8,he-=8)}function st(){nt(Q<<1,3),rt(d,n.static_ltree),at(),1+le+10-he<9&&(nt(Q<<1,3),rt(d,n.static_ltree),at()),le=7}function ct(t,n){var r,i,o;if(te.pending_buf[se+2*ae]=t>>>8&255,te.pending_buf[se+2*ae+1]=255&t,te.pending_buf[ie+ae]=255&n,ae++,0===t?Kt[2*n]++:(ce++,t--,Kt[2*(e._length_code[n]+u+1)]++,$t[2*e.d_code(t)]++),0==(8191&ae)&&Gt>2){for(r=8*ae,i=Mt-jt,o=0;o<c;o++)r+=$t[2*o]*(5+e.extra_dbits[o]);if(r>>>=3,ce<Math.floor(ae/2)&&r<Math.floor(i/2))return!0}return ae==oe-1}function lt(t,n){var r,i,o,a,s=0;if(0!==ae)do{r=te.pending_buf[se+2*s]<<8&65280|255&te.pending_buf[se+2*s+1],i=255&te.pending_buf[ie+s],s++,0===r?rt(i,t):(rt((o=e._length_code[i])+u+1,t),0!==(a=e.extra_lbits[o])&&nt(i-=e.base_length[o],a),r--,rt(o=e.d_code(r),n),0!==(a=e.extra_dbits[o])&&nt(r-=e.base_dist[o],a))}while(s<ae);rt(d,t),le=t[2*d+1]}function ut(){he>8?O(ue):he>0&&f(255&ue),ue=0,he=0}function ht(t,e,n){ut(),le=8,n&&(O(e),O(~e)),te.pending_buf.set(Tt.subarray(t,t+e),te.pending),te.pending+=e}function ft(t,e,n){nt((J<<1)+(n?1:0),3),ht(t,e,!0)}function dt(t,e,i){var o,a,c=0;Gt>0?(ee.build_tree(te),ne.build_tree(te),c=s(),o=te.opt_len+3+7>>>3,(a=te.static_len+3+7>>>3)<=o&&(o=a)):o=a=e+5,e+4<=o&&-1!=t?ft(t,e,i):a==o?(nt((Q<<1)+(i?1:0),3),lt(n.static_ltree,n.static_dtree)):(nt((K<<1)+(i?1:0),3),ot(ee.max_code+1,ne.max_code+1,c+1),lt(Kt,$t)),r(),i&&ut()}function pt(t){dt(jt>=0?jt:-1,Mt-jt,t),jt=Mt,xt.flush_pending()}function mt(){var t,e,n,r;do{if(0===(r=Pt-Ht-Mt)&&0===Mt&&0===Ht)r=At;else if(-1==r)r--;else if(Mt>=At+At-tt){Tt.set(Tt.subarray(At,At+At),0),Ut-=At,Mt-=At,jt-=At,n=t=Ft;do{e=65535&Et[--n],Et[n]=e>=At?e-At:0}while(0!=--t);n=t=At;do{e=65535&It[--n],It[n]=e>=At?e-At:0}while(0!=--t);r+=At}if(0===xt.avail_in)return;t=xt.read_buf(Tt,Mt+Ht,r),(Ht+=t)>=$&&(Ot=255&Tt[Mt],Ot=(Ot<<Dt^255&Tt[Mt+1])&Rt)}while(Ht<tt&&0!==xt.avail_in)}function gt(t){var e,n=65535;for(n>_t-5&&(n=_t-5);;){if(Ht<=1){if(mt(),0===Ht&&t==k)return L;if(0===Ht)break}if(Mt+=Ht,Ht=0,e=jt+n,(0===Mt||Mt>=e)&&(Ht=Mt-e,Mt=e,pt(!1),0===xt.avail_out))return L;if(Mt-jt>=At-tt&&(pt(!1),0===xt.avail_out))return L}return pt(t==A),0===xt.avail_out?t==A?U:L:t==A?H:M}function wt(t){var e,n,r=Xt,i=Mt,o=Wt,a=Mt>At-tt?Mt-(At-tt):0,s=Qt,c=qt,l=Mt+Z,u=Tt[i+o-1],h=Tt[i+o];Wt>=Jt&&(r>>=2),s>Ht&&(s=Ht);do{if(e=t,Tt[e+o]==h&&Tt[e+o-1]==u&&Tt[e]==Tt[i]&&Tt[++e]==Tt[i+1]){i+=2,e++;do{}while(Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&i<l);if(n=Z-(l-i),i=l-Z,n>o){if(Ut=t,o=n,n>=s)break;u=Tt[i+o-1],h=Tt[i+o]}}}while((t=65535&It[t&c])>a&&0!=--r);return o<=Ht?o:Ht}function yt(t){for(var e,n=0;;){if(Ht<tt){if(mt(),Ht<tt&&t==k)return L;if(0===Ht)break}if(Ht>=$&&(Ot=(Ot<<Dt^255&Tt[Mt+($-1)])&Rt,n=65535&Et[Ot],It[Mt&qt]=Et[Ot],Et[Ot]=Mt),0!==n&&(Mt-n&65535)<=At-tt&&Yt!=b&&(zt=wt(n)),zt>=$)if(e=ct(Mt-Ut,zt-$),Ht-=zt,zt<=Vt&&Ht>=$){zt--;do{Ot=(Ot<<Dt^255&Tt[++Mt+($-1)])&Rt,n=65535&Et[Ot],It[Mt&qt]=Et[Ot],Et[Ot]=Mt}while(0!=--zt);Mt++}else Mt+=zt,zt=0,Ot=255&Tt[Mt],Ot=(Ot<<Dt^255&Tt[Mt+1])&Rt;else e=ct(0,255&Tt[Mt]),Ht--,Mt++;if(e&&(pt(!1),0===xt.avail_out))return L}return pt(t==A),0===xt.avail_out?t==A?U:L:t==A?H:M}function vt(t){for(var e,n,r=0;;){if(Ht<tt){if(mt(),Ht<tt&&t==k)return L;if(0===Ht)break}if(Ht>=$&&(Ot=(Ot<<Dt^255&Tt[Mt+($-1)])&Rt,r=65535&Et[Ot],It[Mt&qt]=Et[Ot],Et[Ot]=Mt),Wt=zt,Nt=Ut,zt=$-1,0!==r&&Wt<Vt&&(Mt-r&65535)<=At-tt&&(Yt!=b&&(zt=wt(r)),zt<=5&&(Yt==v||zt==$&&Mt-Ut>4096)&&(zt=$-1)),Wt>=$&&zt<=Wt){n=Mt+Ht-$,e=ct(Mt-1-Nt,Wt-$),Ht-=Wt-1,Wt-=2;do{++Mt<=n&&(Ot=(Ot<<Dt^255&Tt[Mt+($-1)])&Rt,r=65535&Et[Ot],It[Mt&qt]=Et[Ot],Et[Ot]=Mt)}while(0!=--Wt);if(Lt=0,zt=$-1,Mt++,e&&(pt(!1),0===xt.avail_out))return L}else if(0!==Lt){if((e=ct(0,255&Tt[Mt-1]))&&pt(!1),Mt++,Ht--,0===xt.avail_out)return L}else Lt=1,Mt++,Ht--}return 0!==Lt&&(e=ct(0,255&Tt[Mt-1]),Lt=0),pt(t==A),0===xt.avail_out?t==A?U:L:t==A?H:M}function bt(e){return e.total_in=e.total_out=0,e.msg=null,te.pending=0,te.pending_out=0,kt=V,Ct=k,o(),t(),S}var xt,kt,_t,Ct,At,St,qt,Tt,Pt,It,Et,Ot,Ft,Bt,Rt,Dt,jt,zt,Nt,Lt,Mt,Ut,Ht,Wt,Xt,Vt,Gt,Yt,Jt,Qt,Kt,$t,Zt,te=this,ee=new e,ne=new e,re=new e;te.depth=[];var ie,oe,ae,se,ce,le,ue,he;te.bl_count=[],te.heap=[],Kt=[],$t=[],Zt=[],te.pqdownheap=function(t,e){for(var n=te.heap,r=n[e],o=e<<1;o<=te.heap_len&&(o<te.heap_len&&i(t,n[o+1],n[o],te.depth)&&o++,!i(t,r,n[o],te.depth));)n[e]=n[o],e=o,o<<=1;n[e]=r},te.deflateInit=function(t,e,n,r,i,o){return r||(r=Y),i||(i=B),o||(o=x),t.msg=null,e==y&&(e=6),i<1||i>F||r!=Y||n<9||n>15||e<0||e>9||o<0||o>b?P:(t.dstate=te,St=n,At=1<<St,qt=At-1,Bt=i+7,Ft=1<<Bt,Rt=Ft-1,Dt=Math.floor((Bt+$-1)/$),Tt=new Uint8Array(2*At),It=[],Et=[],oe=1<<i+6,te.pending_buf=new Uint8Array(4*oe),_t=4*oe,se=Math.floor(oe/2),ie=3*oe,Gt=e,Yt=o,bt(t))},te.deflateEnd=function(){return kt!=X&&kt!=V&&kt!=G?P:(te.pending_buf=null,Et=null,It=null,Tt=null,te.dstate=null,kt==V?I:S)},te.deflateParams=function(t,e,n){var r=S;return e==y&&(e=6),e<0||e>9||n<0||n>b?P:(z[Gt].func!=z[e].func&&0!==t.total_in&&(r=t.deflate(_)),Gt!=e&&(Vt=z[Gt=e].max_lazy,Jt=z[Gt].good_length,Qt=z[Gt].nice_length,Xt=z[Gt].max_chain),Yt=n,r)},te.deflateSetDictionary=function(t,e,n){var r,i=n,o=0;if(!e||kt!=X)return P;if(i<$)return S;for(i>At-tt&&(o=n-(i=At-tt)),Tt.set(e.subarray(o,o+i),0),Mt=i,jt=i,Ot=255&Tt[0],Ot=(Ot<<Dt^255&Tt[1])&Rt,r=0;r<=i-$;r++)Ot=(Ot<<Dt^255&Tt[r+($-1)])&Rt,It[r&qt]=Et[Ot],Et[Ot]=r;return S},te.deflate=function(t,e){var n,r,i,o,a;if(e>A||e<0)return P;if(!t.next_out||!t.next_in&&0!==t.avail_in||kt==G&&e!=A)return t.msg=N[T-P],P;if(0===t.avail_out)return t.msg=N[T-E],E;if(xt=t,o=Ct,Ct=e,kt==X&&(r=Y+(St-8<<4)<<8,(i=(Gt-1&255)>>1)>3&&(i=3),r|=i<<6,0!==Mt&&(r|=W),kt=V,et(r+=31-r%31)),0!==te.pending){if(xt.flush_pending(),0===xt.avail_out)return Ct=-1,S}else if(0===xt.avail_in&&e<=o&&e!=A)return xt.msg=N[T-E],E;if(kt==G&&0!==xt.avail_in)return t.msg=N[T-E],E;if(0!==xt.avail_in||0!==Ht||e!=k&&kt!=G){switch(a=-1,z[Gt].func){case R:a=gt(e);break;case D:a=yt(e);break;case j:a=vt(e)}if(a!=U&&a!=H||(kt=G),a==L||a==U)return 0===xt.avail_out&&(Ct=-1),S;if(a==M){if(e==_)st();else if(ft(0,0,!1),e==C)for(n=0;n<Ft;n++)Et[n]=0;if(xt.flush_pending(),0===xt.avail_out)return Ct=-1,S}}return e!=A?S:q}}function a(){var t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}var s=15,c=30,l=19,u=256,h=u+1+29,f=2*h+1,d=256,p=16,m=17,g=18,w=16,y=-1,v=1,b=2,x=0,k=0,_=1,C=3,A=4,S=0,q=1,T=2,P=-2,I=-3,E=-5,O=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];e._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],e.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],e.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],e.d_code=function(t){return t<256?O[t]:O[256+(t>>>7)]},e.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],e.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],e.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],e.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],n.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],n.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],n.static_l_desc=new n(n.static_ltree,e.extra_lbits,u+1,h,s),n.static_d_desc=new n(n.static_dtree,e.extra_dbits,0,c,s),n.static_bl_desc=new n(null,e.extra_blbits,0,l,7);var F=9,B=8,R=0,D=1,j=2,z=[new r(0,0,0,0,R),new r(4,4,8,4,D),new r(4,5,16,8,D),new r(4,6,32,32,D),new r(4,4,16,16,j),new r(8,16,32,32,j),new r(8,16,128,128,j),new r(8,32,128,256,j),new r(32,128,258,1024,j),new r(32,258,258,4096,j)],N=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],L=0,M=1,U=2,H=3,W=32,X=42,V=113,G=666,Y=8,J=0,Q=1,K=2,$=3,Z=258,tt=Z+$+1;return a.prototype={deflateInit:function(t,e){var n=this;return n.dstate=new o,e||(e=s),n.dstate.deflateInit(n,t,e)},deflate:function(t){var e=this;return e.dstate?e.dstate.deflate(e,t):P},deflateEnd:function(){var t=this;if(!t.dstate)return P;var e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams:function(t,e){var n=this;return n.dstate?n.dstate.deflateParams(n,t,e):P},deflateSetDictionary:function(t,e){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,t,e):P},read_buf:function(t,e,n){var r=this,i=r.avail_in;return i>n&&(i=n),0===i?0:(r.avail_in-=i,t.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),e),r.next_in_index+=i,r.total_in+=i,i)},flush_pending:function(){var t=this,e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}},function(t){var e=this,n=new a,r=k,i=new Uint8Array(512);void 0===t&&(t=y),n.deflateInit(t),n.next_out=i,e.append=function(t,e){var o,a=[],s=0,c=0,l=0;if(t.length){n.next_in_index=0,n.next_in=t,n.avail_in=t.length;do{if(n.next_out_index=0,n.avail_out=512,n.deflate(r)!=S)throw"deflating: "+n.msg;n.next_out_index&&(512==n.next_out_index?a.push(new Uint8Array(i)):a.push(new Uint8Array(i.subarray(0,n.next_out_index)))),l+=n.next_out_index,e&&n.next_in_index>0&&n.next_in_index!=s&&(e(n.next_in_index),s=n.next_in_index)}while(n.avail_in>0||0===n.avail_out);return o=new Uint8Array(l),a.forEach(function(t){o.set(t,c),c+=t.length}),o}},e.flush=function(){var t,e,r=[],o=0,a=0;do{if(n.next_out_index=0,n.avail_out=512,(t=n.deflate(A))!=q&&t!=S)throw"deflating: "+n.msg;512-n.avail_out>0&&r.push(new Uint8Array(i.subarray(0,n.next_out_index))),a+=n.next_out_index}while(n.avail_in>0||0===n.avail_out);return n.deflateEnd(),e=new Uint8Array(a),r.forEach(function(t){e.set(t,o),o+=t.length}),e}}}();/*
  html2canvas 0.5.0-beta3 <http://html2canvas.hertzen.com>
  Copyright (c) 2016 Niklas von Hertzen

  Released under  License
*/
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.html2canvas=t()}}(function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n||t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){(function(t){!function(r){function i(t){throw RangeError(E[t])}function o(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function a(t,e){return o(t.split(I),e).join(".")}function s(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function c(t){return o(t,function(t){var e="";return t>65535&&(e+=B((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=B(t)}).join("")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:b}function u(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function h(t,e,n){var r=0;for(t=n?F(t/C):t>>1,t+=F(t/e);t>O*k>>1;r+=b)t=F(t/O);return F(r+(O+1)*t/(t+_))}function f(t){var e,n,r,o,a,s,u,f,d,p,m=[],g=t.length,w=0,y=S,_=A;for((n=t.lastIndexOf(q))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&i("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<g;){for(a=w,s=1,u=b;o>=g&&i("invalid-input"),((f=l(t.charCodeAt(o++)))>=b||f>F((v-w)/s))&&i("overflow"),w+=f*s,d=u<=_?x:u>=_+k?k:u-_,!(f<d);u+=b)s>F(v/(p=b-d))&&i("overflow"),s*=p;_=h(w-a,e=m.length+1,0==a),F(w/e)>v-y&&i("overflow"),y+=F(w/e),w%=e,m.splice(w++,0,y)}return c(m)}function d(t){var e,n,r,o,a,c,l,f,d,p,m,g,w,y,_,C=[];for(g=(t=s(t)).length,e=S,n=0,a=A,c=0;c<g;++c)(m=t[c])<128&&C.push(B(m));for(r=o=C.length,o&&C.push(q);r<g;){for(l=v,c=0;c<g;++c)(m=t[c])>=e&&m<l&&(l=m);for(l-e>F((v-n)/(w=r+1))&&i("overflow"),n+=(l-e)*w,e=l,c=0;c<g;++c)if((m=t[c])<e&&++n>v&&i("overflow"),m==e){for(f=n,d=b;p=d<=a?x:d>=a+k?k:d-a,!(f<p);d+=b)_=f-p,y=b-p,C.push(B(u(p+_%y,0))),f=F(_/y);C.push(B(u(f,0))),a=h(n,w,r==o),n=0,++r}++n,++e}return C.join("")}var p="object"==typeof n&&n,m="object"==typeof e&&e&&e.exports==p&&e,g="object"==typeof t&&t;g.global!==g&&g.window!==g||(r=g);var w,y,v=2147483647,b=36,x=1,k=26,_=38,C=700,A=72,S=128,q="-",T=/^xn--/,P=/[^ -~]/,I=/\x2E|\u3002|\uFF0E|\uFF61/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=b-x,F=Math.floor,B=String.fromCharCode;if(w={version:"1.2.4",ucs2:{decode:s,encode:c},decode:f,encode:d,toASCII:function(t){return a(t,function(t){return P.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return a(t,function(t){return T.test(t)?f(t.slice(4).toLowerCase()):t})}},p&&!p.nodeType)if(m)m.exports=w;else for(y in w)w.hasOwnProperty(y)&&(p[y]=w[y]);else r.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){function r(t,e,n){!t.defaultView||e===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)}function i(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(e){s("Unable to copy canvas content from",t,e)}}function o(t,e){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),r=t.firstChild;r;)!0!==e&&1===r.nodeType&&"SCRIPT"===r.nodeName||n.appendChild(o(r,e)),r=r.nextSibling;return 1===t.nodeType&&(n._scrollTop=t.scrollTop,n._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?i(t,n):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value)),n}function a(t){if(1===t.nodeType){t.scrollTop=t._scrollTop,t.scrollLeft=t._scrollLeft;for(var e=t.firstChild;e;)a(e),e=e.nextSibling}}var s=t("./log");e.exports=function(t,e,n,i,s,c,l){var u=o(t.documentElement,s.javascriptEnabled),h=e.createElement("iframe");return h.className="html2canvas-container",h.style.visibility="hidden",h.style.position="fixed",h.style.left="-10000px",h.style.top="0px",h.style.border="0",h.width=n,h.height=i,h.scrolling="no",e.body.appendChild(h),new Promise(function(e){var n=h.contentWindow.document;h.contentWindow.onload=h.onload=function(){var t=setInterval(function(){n.body.childNodes.length>0&&(a(n.documentElement),clearInterval(t),"view"===s.type&&(h.contentWindow.scrollTo(c,l),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||h.contentWindow.scrollY===l&&h.contentWindow.scrollX===c||(n.documentElement.style.top=-l+"px",n.documentElement.style.left=-c+"px",n.documentElement.style.position="absolute")),e(h))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),r(t,c,l),n.replaceChild(n.adoptNode(u),n.documentElement),n.close()})}},{"./log":13}],3:[function(t,e,n){function r(t){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}r.prototype.darken=function(t){var e=1-t;return new r([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},r.prototype.isTransparent=function(){return 0===this.a},r.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},r.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),t.length>3&&(this.a=t[3])),Array.isArray(t)};var i=/^#([a-f0-9]{3})$/i;r.prototype.hex3=function(t){var e=null;return null!==(e=t.match(i))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var o=/^#([a-f0-9]{6})$/i;r.prototype.hex6=function(t){var e=null;return null!==(e=t.match(o))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;r.prototype.rgb=function(t){var e=null;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;r.prototype.rgba=function(t){var e=null;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},r.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},r.prototype.namedColor=function(t){t=t.toLowerCase();var e=c[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},r.prototype.isColor=!0;var c={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=r},{}],4:[function(t,e,n){function r(t,e){var n=k++;if((e=e||{}).logging&&(g.options.logging=!0,g.options.start=Date.now()),e.async=void 0===e.async||e.async,e.allowTaint=void 0!==e.allowTaint&&e.allowTaint,e.removeContainer=void 0===e.removeContainer||e.removeContainer,e.javascriptEnabled=void 0!==e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout=void 0===e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:f,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var r=null!=e.width?e.width:window.innerWidth,a=null!=e.height?e.height:window.innerHeight;return v(u(t),e.proxy,document,r,a,e).then(function(t){return o(t.contentWindow.document.documentElement,t,e,r,a)})}var s=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return s.setAttribute(x+n,n),i(s.ownerDocument,e,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,n).then(function(t){return"function"==typeof e.onrendered&&(g("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}function i(t,e,n,r,i){return y(t,t,n,r,e,t.defaultView.pageXOffset,t.defaultView.pageYOffset).then(function(a){g("Document cloned");var s=x+i,c="["+s+"='"+i+"']";t.querySelector(c).removeAttribute(s);var l=a.contentWindow,u=l.document.querySelector(c);return("function"==typeof e.onclone?Promise.resolve(e.onclone(l.document)):Promise.resolve(!0)).then(function(){return o(u,a,e,n,r)})})}function o(t,e,n,r,i){var o=e.contentWindow,u=new h(o.document),f=new d(n,u),m=b(t),w="view"===n.type?r:c(o.document),y="view"===n.type?i:l(o.document),v=new n.renderer(w,y,f,n,document);return new p(t,v,u,f,n).ready.then(function(){g("Finished rendering");var r;return r="view"===n.type?s(v.canvas,{width:v.canvas.width,height:v.canvas.height,top:0,left:0,x:0,y:0}):t===o.document.body||t===o.document.documentElement||null!=n.canvas?v.canvas:s(v.canvas,{width:null!=n.width?n.width:m.width,height:null!=n.height?n.height:m.height,top:m.top,left:m.left,x:0,y:0}),a(e,n),r})}function a(t,e){e.removeContainer&&(t.parentNode.removeChild(t),g("Cleaned up container"))}function s(t,e){var n=document.createElement("canvas"),r=Math.min(t.width-1,Math.max(0,e.left)),i=Math.min(t.width,Math.max(1,e.left+e.width)),o=Math.min(t.height-1,Math.max(0,e.top)),a=Math.min(t.height,Math.max(1,e.top+e.height));n.width=e.width,n.height=e.height;var s=i-r,c=a-o;return g("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",s,"height:",c),g("Resulting crop with width",e.width,"and height",e.height,"with x",r,"and y",o),n.getContext("2d").drawImage(t,r,o,s,c,e.x,e.y,s,c),n}function c(t){return Math.max(Math.max(t.body.scrollWidth,t.documentElement.scrollWidth),Math.max(t.body.offsetWidth,t.documentElement.offsetWidth),Math.max(t.body.clientWidth,t.documentElement.clientWidth))}function l(t){return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))}function u(t){var e=document.createElement("a");return e.href=t,e.href=e.href,e}var h=t("./support"),f=t("./renderers/canvas"),d=t("./imageloader"),p=t("./nodeparser"),m=t("./nodecontainer"),g=t("./log"),w=t("./utils"),y=t("./clone"),v=t("./proxy").loadUrlDocument,b=w.getBounds,x="data-html2canvas-node",k=0;r.CanvasRenderer=f,r.NodeContainer=m,r.log=g,r.utils=w;var _="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:r;e.exports=_},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e,n){function r(t){if(this.src=t,i("DummyImageContainer for",t),!this.promise||!this.image){i("Initiating DummyImageContainer"),r.prototype.image=new Image;var e=this.image;r.prototype.promise=new Promise(function(t,n){e.onload=t,e.onerror=n,e.src=o(),!0===e.complete&&t(e)})}}var i=t("./log"),o=t("./utils").smallImage;e.exports=r},{"./log":13,"./utils":26}],6:[function(t,e,n){var r=t("./utils").smallImage;e.exports=function(t,e){var n,i,o=document.createElement("div"),a=document.createElement("img"),s=document.createElement("span");o.style.visibility="hidden",o.style.fontFamily=t,o.style.fontSize=e,o.style.margin=0,o.style.padding=0,document.body.appendChild(o),a.src=r(),a.width=1,a.height=1,a.style.margin=0,a.style.padding=0,a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode("Hidden Text")),o.appendChild(s),o.appendChild(a),n=a.offsetTop-s.offsetTop+1,o.removeChild(s),o.appendChild(document.createTextNode("Hidden Text")),o.style.lineHeight="normal",a.style.verticalAlign="super",i=a.offsetTop-o.offsetTop+1,document.body.removeChild(o),this.baseline=n,this.lineWidth=1,this.middle=i}},{"./utils":26}],7:[function(t,e,n){function r(){this.data={}}var i=t("./font");r.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new i(t,e)),this.data[t+"-"+e]},e.exports=r},{"./font":6}],8:[function(t,e,n){function r(e,n,r){this.image=null,this.src=e;var o=this,a=i(e);this.promise=(n?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(r.proxy,a,r)).then(function(e){return t("./core")(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(t){return o.image=t})}var i=t("./utils").getBounds,o=t("./proxy").loadUrlDocument;r.prototype.proxyLoad=function(t,e,n){var r=this.src;return o(r.src,t,r.ownerDocument,e.width,e.height,n)},e.exports=r},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e,n){function r(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}r.TYPES={LINEAR:1,RADIAL:2},r.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=r},{}],10:[function(t,e,n){e.exports=function(t,e){this.src=t,this.image=new Image;var n=this;this.tainted=null,this.promise=new Promise(function(r,i){n.image.onload=r,n.image.onerror=i,e&&(n.image.crossOrigin="anonymous"),n.image.src=t,!0===n.image.complete&&r(n.image)})}},{}],11:[function(t,e,n){function r(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}var i=t("./log"),o=t("./imagecontainer"),a=t("./dummyimagecontainer"),s=t("./proxyimagecontainer"),c=t("./framecontainer"),l=t("./svgcontainer"),u=t("./svgnodecontainer"),h=t("./lineargradientcontainer"),f=t("./webkitgradientcontainer"),d=t("./utils").bind;r.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},r.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},r.prototype.addImage=function(t,e){return function(n){n.args.forEach(function(r){this.imageExists(t,r)||(t.splice(0,0,e.call(this,n)),i("Added image #"+t.length,"string"==typeof r?r.substring(0,100):r))},this)}},r.prototype.hasImageBackground=function(t){return"none"!==t.method},r.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new o(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new o(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new o(e,!0):this.options.proxy?new s(e,this.options.proxy):new a(e):new l(e)}return"linear-gradient"===t.method?new h(t):"gradient"===t.method?new f(t):"svg"===t.method?new u(t.args[0],this.support.svg):"IFRAME"===t.method?new c(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new a(t)},r.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||l.prototype.isInline(t)},r.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},r.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},r.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},r.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout).catch(function(){return new a(t.src).promise.then(function(e){t.image=e})})},r.prototype.get=function(t){var e=null;return this.images.some(function(n){return(e=n).src===t})?e:null},r.prototype.fetch=function(t){return this.images=t.reduce(d(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(t,e){t.promise.then(function(){i("Succesfully loaded image #"+(e+1),t)},function(n){i("Failed loading image #"+(e+1),t,n)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),i("Finished searching images"),this},r.prototype.timeout=function(t,e){var n,r=Promise.race([t.promise,new Promise(function(r,o){n=setTimeout(function(){i("Timed out loading image",t),o(t)},e)})]).then(function(t){return clearTimeout(n),t});return r.catch(function(){clearTimeout(n)}),r},e.exports=r},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e,n){function r(t){i.apply(this,arguments),this.type=i.TYPES.LINEAR;var e=r.REGEXP_DIRECTION.test(t.args[0])||!i.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=n;break;case"center":break;default:var i=.01*parseFloat(t,10);if(isNaN(i))break;0===e?(this.y0=i,this.y1=1-this.y0):(this.x0=i,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(i.REGEXP_COLORSTOP),n=+e[2],r=0===n?"%":e[3];return{color:new o(e[1]),stop:"%"===r?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(t,e){null===t.stop&&this.colorStops.slice(e).some(function(n,r){return null!==n.stop&&(t.stop=(n.stop-this.colorStops[e-1].stop)/(r+1)+this.colorStops[e-1].stop,!0)},this)},this)}var i=t("./gradientcontainer"),o=t("./color");r.prototype=Object.create(i.prototype),r.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=r},{"./color":3,"./gradientcontainer":9}],13:[function(t,e,n){var r=function(){r.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-r.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};r.options={logging:!1},e.exports=r},{}],14:[function(t,e,n){function r(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function i(t){var e=t.options[t.selectedIndex||0];return e?e.text||"":""}function o(t){if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[e[0],e[1],e[4],e[5],e[12],e[13]]}}function a(t){return-1!==t.toString().indexOf("%")}function s(t){return t.replace("px","")}function c(t){return parseFloat(t)}var l=t("./color"),u=t("./utils"),h=u.getBounds,f=u.parseBackgrounds,d=u.offsetBounds;r.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},r.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},r.prototype.assignStack=function(t){this.stack=t,t.children.push(this)},r.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},r.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},r.prototype.prefixedCss=function(t){var e=["webkit","moz","ms","o"],n=this.css(t);return void 0===n&&e.some(function(e){return void 0!==(n=this.css(e+t.substr(0,1).toUpperCase()+t.substr(1)))},this),void 0===n?null:n},r.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},r.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},r.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new l(this.css(t)))},r.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},r.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},r.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},r.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=f(this.css("backgroundImage")))},r.prototype.cssList=function(t,e){var n=(this.css(t)||"").split(",");return n=n[e||0]||n[0]||"auto",1===(n=n.trim().split(" ")).length&&(n=[n[0],a(n[0])?"auto":n[0]]),n},r.prototype.parseBackgroundSize=function(t,e,n){var r,i,o=this.cssList("backgroundSize",n);if(a(o[0]))r=t.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var s=t.width/t.height,c=e.width/e.height;return s<c^"contain"===o[0]?{width:t.height*c,height:t.height}:{width:t.width,height:t.width/c}}r=parseInt(o[0],10)}return i="auto"===o[0]&&"auto"===o[1]?e.height:"auto"===o[1]?r/e.width*e.height:a(o[1])?t.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&&(r=i/e.height*e.width),{width:r,height:i}},r.prototype.parseBackgroundPosition=function(t,e,n,r){var i,o,s=this.cssList("backgroundPosition",n);return i=a(s[0])?(t.width-(r||e).width)*(parseFloat(s[0])/100):parseInt(s[0],10),o="auto"===s[1]?i/e.width*e.height:a(s[1])?(t.height-(r||e).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(i=o/e.height*e.width),{left:i,top:o}},r.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},r.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var n=t.match(this.TEXT_SHADOW_PROPERTY),r=0;n&&r<n.length;r++){var i=n[r].match(this.TEXT_SHADOW_VALUES);e.push({color:new l(i[0]),offsetX:i[1]?parseFloat(i[1].replace("px","")):0,offsetY:i[2]?parseFloat(i[2].replace("px","")):0,blur:i[3]?i[3].replace("px",""):0})}return e},r.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(s).map(c);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},r.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?o(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},r.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?d(this.node):h(this.node))},r.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},r.prototype.getValue=function(){var t=this.node.value||"";return"SELECT"===this.node.tagName?t=i(this.node):"password"===this.node.type&&(t=Array(t.length+1).join("•")),0===t.length?this.node.placeholder||"":t},r.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,r.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,r.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,r.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=r},{"./color":3,"./utils":26}],15:[function(t,e,n){function r(t,e,n,r,i){L("Starting NodeParser"),this.renderer=e,this.options=i,this.range=null,this.support=n,this.renderQueue=[],this.stack=new G(!0,1,t.ownerDocument,null);var o=new U(t,null);if(i.background&&e.rectangle(0,0,e.width,e.height,new V(i.background)),t===t.ownerDocument.documentElement){var a=new U(o.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,a.color("backgroundColor"))}o.visibile=o.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=R([o].concat(this.getChildren(o)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new X,L("Fetched nodes, total:",this.nodes.length),L("Calculate overflow clips"),this.calculateOverflowClips(),L("Start fetching images"),this.images=r.fetch(this.nodes.filter(q)),this.ready=this.images.ready.then(J(function(){return L("Images loaded, starting parsing"),L("Creating stacking contexts"),this.createStackingContexts(),L("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),L("Render queue created with "+this.renderQueue.length+" items"),new Promise(J(function(t){i.async?"function"==typeof i.async?i.async.call(this,this.renderQueue,t):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function i(t){return t.parent&&t.parent.clip.length}function o(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function a(){}function s(t,e,n,r){return t.map(function(i,o){if(i.width>0){var a=e.left,s=e.top,c=e.width,l=e.height-t[2].width;switch(o){case 0:l=t[0].width,i.args=h({c1:[a,s],c2:[a+c,s],c3:[a+c-t[1].width,s+l],c4:[a+t[3].width,s+l]},r[0],r[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:a=e.left+e.width-t[1].width,c=t[1].width,i.args=h({c1:[a+c,s],c2:[a+c,s+l+t[2].width],c3:[a,s+l],c4:[a,s+t[0].width]},r[1],r[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:s=s+e.height-t[2].width,l=t[2].width,i.args=h({c1:[a+c,s+l],c2:[a,s+l],c3:[a+t[3].width,s],c4:[a+c-t[3].width,s]},r[2],r[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:c=t[3].width,i.args=h({c1:[a,s+l+t[2].width],c2:[a,s],c3:[a+c,s+t[0].width],c4:[a+c,s+l]},r[3],r[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return i})}function c(t,e,n,r){var i=(Math.sqrt(2)-1)/3*4,o=n*i,a=r*i,s=t+n,c=e+r;return{topLeft:u({x:t,y:c},{x:t,y:c-a},{x:s-o,y:e},{x:s,y:e}),topRight:u({x:t,y:e},{x:t+o,y:e},{x:s,y:c-a},{x:s,y:c}),bottomRight:u({x:s,y:e},{x:s,y:e+a},{x:t+o,y:c},{x:t,y:c}),bottomLeft:u({x:s,y:c},{x:s-o,y:c},{x:t,y:e+a},{x:t,y:e})}}function l(t,e,n){var r=t.left,i=t.top,o=t.width,a=t.height,s=e[0][0]<o/2?e[0][0]:o/2,l=e[0][1]<a/2?e[0][1]:a/2,u=e[1][0]<o/2?e[1][0]:o/2,h=e[1][1]<a/2?e[1][1]:a/2,f=e[2][0]<o/2?e[2][0]:o/2,d=e[2][1]<a/2?e[2][1]:a/2,p=e[3][0]<o/2?e[3][0]:o/2,m=e[3][1]<a/2?e[3][1]:a/2,g=o-u,w=a-d,y=o-f,v=a-m;return{topLeftOuter:c(r,i,s,l).topLeft.subdivide(.5),topLeftInner:c(r+n[3].width,i+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:c(r+g,i,u,h).topRight.subdivide(.5),topRightInner:c(r+Math.min(g,o+n[3].width),i+n[0].width,g>o+n[3].width?0:u-n[3].width,h-n[0].width).topRight.subdivide(.5),bottomRightOuter:c(r+y,i+w,f,d).bottomRight.subdivide(.5),bottomRightInner:c(r+Math.min(y,o-n[3].width),i+Math.min(w,a+n[0].width),Math.max(0,f-n[1].width),d-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:c(r,i+v,p,m).bottomLeft.subdivide(.5),bottomLeftInner:c(r+n[3].width,i+v,Math.max(0,p-n[3].width),m-n[2].width).bottomLeft.subdivide(.5)}}function u(t,e,n,r){var i=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:r,subdivide:function(o){var a=i(t,e,o),s=i(e,n,o),c=i(n,r,o),l=i(a,s,o),h=i(s,c,o),f=i(l,h,o);return[u(t,a,l,f),u(f,h,c,r)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function h(t,e,n,r,i,o,a){var s=[];return e[0]>0||e[1]>0?(s.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(s.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function f(t,e,n,r,i,o,a){e[0]>0||e[1]>0?(t.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(t),r[1].curveTo(t)):t.push(["line",o,a]),(n[0]>0||n[1]>0)&&t.push(["line",i[0].start.x,i[0].start.y])}function d(t){return t.cssInt("zIndex")<0}function p(t){return t.cssInt("zIndex")>0}function m(t){return 0===t.cssInt("zIndex")}function g(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function w(t){return t instanceof G}function y(t){return t.node.data.trim().length>0}function v(t){return/^(normal|none|0px)$/.test(t.parent.css("letterSpacing"))}function b(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){var n=t.css("border"+e+"Radius").split(" ");return n.length<=1&&(n[1]=n[0]),n.map(O)})}function x(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function k(t){var e=t.css("position");return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(e)?t.css("zIndex"):"auto")}function _(t){return"static"!==t.css("position")}function C(t){return"none"!==t.css("float")}function A(t){return-1!==["inline-block","inline-table"].indexOf(t.css("display"))}function S(t){var e=this;return function(){return!t.apply(e,arguments)}}function q(t){return t.node.nodeType===Node.ELEMENT_NODE}function T(t){return!0===t.isPseudoElement}function P(t){return t.node.nodeType===Node.TEXT_NODE}function I(t){return function(e,n){return e.cssInt("zIndex")+t.indexOf(e)/t.length-(n.cssInt("zIndex")+t.indexOf(n)/t.length)}}function E(t){return t.getOpacity()<1}function O(t){return parseInt(t,10)}function F(t){return t.width}function B(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function R(t){return[].concat.apply([],t)}function D(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/'|"/)?t.substr(1,t.length-2):t}function j(t){for(var e,n=[],r=0,i=!1;t.length;)z(t[r])===i?((e=t.splice(0,r)).length&&n.push(M.ucs2.encode(e)),i=!i,r=0):r++,r>=t.length&&(e=t.splice(0,r)).length&&n.push(M.ucs2.encode(e));return n}function z(t){return-1!==[32,13,10,9,45].indexOf(t)}function N(t){return/[^\u0000-\u00ff]/.test(t)}var L=t("./log"),M=t("punycode"),U=t("./nodecontainer"),H=t("./textcontainer"),W=t("./pseudoelementcontainer"),X=t("./fontmetrics"),V=t("./color"),G=t("./stackingcontext"),Y=t("./utils"),J=Y.bind,Q=Y.getBounds,K=Y.parseBackgrounds,$=Y.offsetBounds;r.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(q(t)){T(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],n=t.parseClip();n&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+n.left,t.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),t.clip=i(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,T(t)&&t.cleanDOM()}else P(t)&&(t.clip=i(t)?t.parent.clip:[]);T(t)||(t.bounds=null)},this)},r.prototype.asyncRenderer=function(t,e,n){n=n||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():n+20>Date.now()?this.asyncRenderer(t,e,n):setTimeout(J(function(){this.asyncRenderer(t,e)},this),0)},r.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},r.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},r.prototype.createStyles=function(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},r.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(t,":before"),r=this.getPseudoElement(t,":after");n&&e.push(n),r&&e.push(r)}return R(e)},r.prototype.getPseudoElement=function(t,e){var n=t.computedStyle(e);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var r=D(n.content),i="url"===r.substr(0,3),a=document.createElement(i?"img":"html2canvaspseudoelement"),s=new W(a,t,e),c=n.length-1;c>=0;c--){var l=o(n.item(c));a.style[l]=n[l]}if(a.className=W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,i)return a.src=K(r)[0].args[0],[s];var u=document.createTextNode(r);return a.appendChild(u),[s,new H(u,s)]},r.prototype.getChildren=function(t){return R([].filter.call(t.node.childNodes,x).map(function(e){var n=[e.nodeType===Node.TEXT_NODE?new H(e,t):new U(e,t)].filter(B);return e.nodeType===Node.ELEMENT_NODE&&n.length&&"TEXTAREA"!==e.tagName?n[0].isElementVisible()?n.concat(this.getChildren(n[0])):[]:n},this))},r.prototype.newStackingContext=function(t,e){var n=new G(e,t.getOpacity(),t.node,t.parent);t.cloneTo(n),(e?n.getParentStack(this):n.parent.stack).contexts.push(n),t.stack=n},r.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){q(t)&&(this.isRootElement(t)||E(t)||k(t)||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):q(t)&&(_(t)&&m(t)||A(t)||C(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},r.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},r.prototype.isRootElement=function(t){return null===t.parent},r.prototype.sortStackingContexts=function(t){t.contexts.sort(I(t.contexts.slice(0))),t.contexts.forEach(this.sortStackingContexts,this)},r.prototype.parseTextBounds=function(t){return function(e,n,r){if("none"!==t.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&&!t.parent.hasTransform()){var i=r.slice(0,n).join("").length;return this.getRangeBounds(t.node,i,e.length)}if(t.node&&"string"==typeof t.node.data){var o=t.node.splitText(e.length),a=this.getWrapperBounds(t.node,t.parent.hasTransform());return t.node=o,a}}else this.support.rangeBounds&&!t.parent.hasTransform()||(t.node=t.node.splitText(e.length));return{}}},r.prototype.getWrapperBounds=function(t,e){var n=t.ownerDocument.createElement("html2canvaswrapper"),r=t.parentNode,i=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),r.replaceChild(n,t);var o=e?$(n):Q(n);return r.replaceChild(i,n),o},r.prototype.getRangeBounds=function(t,e,n){var r=this.range||(this.range=t.ownerDocument.createRange());return r.setStart(t,e),r.setEnd(t,e+n),r.getBoundingClientRect()},r.prototype.parse=function(t){var e=t.contexts.filter(d),n=t.children.filter(q),r=n.filter(S(C)),i=r.filter(S(_)).filter(S(g)),o=n.filter(S(_)).filter(C),s=r.filter(S(_)).filter(g),c=t.contexts.concat(r.filter(_)).filter(m),l=t.children.filter(P).filter(y),u=t.contexts.filter(p);e.concat(i).concat(o).concat(s).concat(c).concat(l).concat(u).forEach(function(t){this.renderQueue.push(t),w(t)&&(this.parse(t),this.renderQueue.push(new a))},this)},r.prototype.paint=function(t){try{t instanceof a?this.renderer.ctx.restore():P(t)?(T(t.parent)&&t.parent.appendToDOM(),this.paintText(t),T(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(L(t),this.options.strict)throw t}},r.prototype.paintNode=function(t){w(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},r.prototype.paintElement=function(t){var e=t.parseBounds();this.renderer.clip(t.backgroundClip,function(){this.renderer.renderBackground(t,e,t.borders.borders.map(F))},this),this.renderer.clip(t.clip,function(){this.renderer.renderBorders(t.borders.borders)},this),this.renderer.clip(t.backgroundClip,function(){switch(t.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(t.node);n?this.renderer.renderImage(t,e,t.borders,n):L("Error loading <"+t.node.nodeName+">",t.node);break;case"IMG":var r=this.images.get(t.node.src);r?this.renderer.renderImage(t,e,t.borders,r):L("Error loading <img>",t.node.src);break;case"CANVAS":this.renderer.renderImage(t,e,t.borders,{image:t.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(t)}},this)},r.prototype.paintCheckbox=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height),r={width:n-1,height:n-1,top:e.top,left:e.left},i=[3,3],o=[i,i,i,i],a=[1,1,1,1].map(function(t){return{color:new V("#A5A5A5"),width:t}}),c=l(r,o,a);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,new V("#DEDEDE")),this.renderer.renderBorders(s(a,r,c,o)),t.node.checked&&(this.renderer.font(new V("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",r.left+n/6,r.top+n-1))},this)},r.prototype.paintRadio=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,n,new V("#DEDEDE"),1,new V("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+n/4)+1,Math.ceil(e.top+n/4)+1,Math.floor(n/2),new V("#424242"))},this)},r.prototype.paintFormValue=function(t){var e=t.getValue();if(e.length>0){var n=t.node.ownerDocument,r=n.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(e){try{r.style[e]=t.css(e)}catch(t){L("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var i=t.parseBounds();r.style.position="fixed",r.style.left=i.left+"px",r.style.top=i.top+"px",r.textContent=e,n.body.appendChild(r),this.paintText(new H(r.firstChild,t)),n.body.removeChild(r)}},r.prototype.paintText=function(t){t.applyTextTransform();var e=M.ucs2.decode(t.node.data),n=this.options.letterRendering&&!v(t)||N(t.node.data)?e.map(function(t){return M.ucs2.encode([t])}):j(e),r=t.parent.fontWeight(),i=t.parent.css("fontSize"),o=t.parent.css("fontFamily"),a=t.parent.parseTextShadows();this.renderer.font(t.parent.color("color"),t.parent.css("fontStyle"),t.parent.css("fontVariant"),r,i,o),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(t.parent.clip,function(){n.map(this.parseTextBounds(t),this).forEach(function(e,r){e&&(this.renderer.text(n[r],e.left,e.bottom),this.renderTextDecoration(t.parent,e,this.fontMetrics.getMetrics(o,i)))},this)},this)},r.prototype.renderTextDecoration=function(t,e,n){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+n.baseline+n.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+n.middle+n.lineWidth),e.width,1,t.color("color"))}};var Z={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};r.prototype.parseBorders=function(t){var e=t.parseBounds(),n=b(t),r=["Top","Right","Bottom","Left"].map(function(e,n){var r=t.css("border"+e+"Style"),i=t.color("border"+e+"Color");"inset"===r&&i.isBlack()&&(i=new V([255,255,255,i.a]));var o=Z[r]?Z[r][n]:null;return{width:t.cssInt("border"+e+"Width"),color:o?i[o[0]](o[1]):i,args:null}}),i=l(e,n,r);return{clip:this.parseBackgroundClip(t,i,r,n,e),borders:s(r,e,i,n)}},r.prototype.parseBackgroundClip=function(t,e,n,r,i){var o=[];switch(t.css("backgroundClip")){case"content-box":case"padding-box":f(o,r[0],r[1],e.topLeftInner,e.topRightInner,i.left+n[3].width,i.top+n[0].width),f(o,r[1],r[2],e.topRightInner,e.bottomRightInner,i.left+i.width-n[1].width,i.top+n[0].width),f(o,r[2],r[3],e.bottomRightInner,e.bottomLeftInner,i.left+i.width-n[1].width,i.top+i.height-n[2].width),f(o,r[3],r[0],e.bottomLeftInner,e.topLeftInner,i.left+n[3].width,i.top+i.height-n[2].width);break;default:f(o,r[0],r[1],e.topLeftOuter,e.topRightOuter,i.left,i.top),f(o,r[1],r[2],e.topRightOuter,e.bottomRightOuter,i.left+i.width,i.top),f(o,r[2],r[3],e.bottomRightOuter,e.bottomLeftOuter,i.left+i.width,i.top+i.height),f(o,r[3],r[0],e.bottomLeftOuter,e.topLeftOuter,i.left,i.top+i.height)}return o},e.exports=r},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,n){function r(t,e,n){var r="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var s=o(r),l=a(e,t,s);return r?c(l):i(n,l,s).then(function(t){return f(t.content)})}function i(t,e,n){return new Promise(function(r,i){var o=t.createElement("script"),a=function(){delete window.html2canvas.proxy[n],t.body.removeChild(o)};window.html2canvas.proxy[n]=function(t){a(),r(t)},o.src=e,o.onerror=function(t){a(),i(t)},t.body.appendChild(o)})}function o(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++d+"_"+Math.round(1e5*Math.random())}function a(t,e,n){return t+"?url="+encodeURIComponent(e)+(n.length?"&callback=html2canvas.proxy."+n:"")}function s(t){return function(e){var n,r=new DOMParser;try{n=r.parseFromString(e,"text/html")}catch(t){u("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(e),n.close()}catch(t){u("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=e}}var i=n.querySelector("base");if(!i||!i.href.host){var o=n.createElement("base");o.href=t,n.head.insertBefore(o,n.head.firstChild)}return n}}var c=t("./xhr"),l=t("./utils"),u=t("./log"),h=t("./clone"),f=l.decode64,d=0;n.Proxy=r,n.ProxyURL=function(t,e,n){var r="crossOrigin"in new Image,s=o(r),c=a(e,t,s);return r?Promise.resolve(c):i(n,c,s).then(function(t){return"data:"+t.type+";base64,"+t.content})},n.loadUrlDocument=function(t,e,n,i,o,a){return new r(t,e,window.document).then(s(t)).then(function(t){return h(t,n,i,o,a,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e,n){var r=t("./proxy").ProxyURL;e.exports=function(t,e){var n=document.createElement("a");n.href=t,t=n.href,this.src=t,this.image=new Image;var i=this;this.promise=new Promise(function(n,o){i.image.crossOrigin="Anonymous",i.image.onload=n,i.image.onerror=o,new r(t,e,document).then(function(t){i.image.src=t}).catch(o)})}},{"./proxy":16}],18:[function(t,e,n){function r(t,e,n){i.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===n}var i=t("./nodecontainer");r.prototype.cloneTo=function(t){r.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},(r.prototype=Object.create(i.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},r.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},r.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=r},{"./nodecontainer":14}],19:[function(t,e,n){function r(t,e,n,r,i){this.width=t,this.height=e,this.images=n,this.options=r,this.document=i}var i=t("./log");r.prototype.renderImage=function(t,e,n,r){var i=t.cssInt("paddingLeft"),o=t.cssInt("paddingTop"),a=t.cssInt("paddingRight"),s=t.cssInt("paddingBottom"),c=n.borders,l=e.width-(c[1].width+c[3].width+i+a),u=e.height-(c[0].width+c[2].width+o+s);this.drawImage(r,0,0,r.image.width||l,r.image.height||u,e.left+i+c[3].width,e.top+o+c[0].width,l,u)},r.prototype.renderBackground=function(t,e,n){e.height>0&&e.width>0&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,n))},r.prototype.renderBackgroundColor=function(t,e){var n=t.color("backgroundColor");n.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,n)},r.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},r.prototype.renderBorder=function(t){t.color.isTransparent()||null===t.args||this.drawShape(t.args,t.color)},r.prototype.renderBackgroundImage=function(t,e,n){t.parseBackgroundImages().reverse().forEach(function(r,o,a){switch(r.method){case"url":var s=this.images.get(r.args[0]);s?this.renderBackgroundRepeating(t,e,s,a.length-(o+1),n):i("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var c=this.images.get(r.value);c?this.renderBackgroundGradient(c,e,n):i("Error loading background-image",r.args[0]);break;case"none":break;default:i("Unknown background-image type",r.args[0])}},this)},r.prototype.renderBackgroundRepeating=function(t,e,n,r,i){var o=t.parseBackgroundSize(e,n.image,r),a=t.parseBackgroundPosition(e,n.image,r,o);switch(t.parseBackgroundRepeat(r)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,a,o,e,e.left+i[3],e.top+a.top+i[0],99999,o.height,i);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,a,o,e,e.left+a.left+i[3],e.top+i[0],o.width,99999,i);break;case"no-repeat":this.backgroundRepeatShape(n,a,o,e,e.left+a.left+i[3],e.top+a.top+i[0],o.width,o.height,i);break;default:this.renderBackgroundRepeat(n,a,o,{top:e.top,left:e.left},i[3],i[0])}},e.exports=r},{"./log":13}],20:[function(t,e,n){function r(t,e){o.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=t,this.canvas.height=e),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},s("Initialized CanvasRenderer with size",t,"x",e)}function i(t){return t.length>0}var o=t("../renderer"),a=t("../lineargradientcontainer"),s=t("../log");(r.prototype=Object.create(o.prototype)).setFillStyle=function(t){return this.ctx.fillStyle="object"==typeof t&&t.isColor?t.toString():t,this.ctx},r.prototype.rectangle=function(t,e,n,r,i){this.setFillStyle(i).fillRect(t,e,n,r)},r.prototype.circle=function(t,e,n,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(t+n/2,e+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},r.prototype.circleStroke=function(t,e,n,r,i,o){this.circle(t,e,n,r),this.ctx.strokeStyle=o.toString(),this.ctx.stroke()},r.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},r.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},r.prototype.drawImage=function(t,e,n,r,i,o,a,s,c){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,n,r,i,o,a,s,c)},r.prototype.clip=function(t,e,n){this.ctx.save(),t.filter(i).forEach(function(t){this.shape(t).clip()},this),e.call(n),this.ctx.restore()},r.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},r.prototype.font=function(t,e,n,r,i,o){this.setFillStyle(t).font=[e,n,r,i,o].join(" ").split(",")[0]},r.prototype.fontShadow=function(t,e,n,r){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",n).setVariable("shadowBlur",r)},r.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},r.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},r.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},r.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},r.prototype.text=function(t,e,n){this.ctx.fillText(t,e,n)},r.prototype.backgroundRepeatShape=function(t,e,n,r,i,o,a,s,c){var l=[["line",Math.round(i),Math.round(o)],["line",Math.round(i+a),Math.round(o)],["line",Math.round(i+a),Math.round(s+o)],["line",Math.round(i),Math.round(s+o)]];this.clip([l],function(){this.renderBackgroundRepeat(t,e,n,r,c[3],c[0])},this)},r.prototype.renderBackgroundRepeat=function(t,e,n,r,i,o){var a=Math.round(r.left+e.left+i),s=Math.round(r.top+e.top+o);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,n),"repeat")),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},r.prototype.renderBackgroundGradient=function(t,e){if(t instanceof a){var n=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,n)}},r.prototype.resizeImage=function(t,e){var n=t.image;if(n.width===e.width&&n.height===e.height)return n;var r=document.createElement("canvas");return r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,e.width,e.height),r},e.exports=r},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e,n){function r(t,e,n,r){i.call(this,n,r),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}var i=t("./nodecontainer");(r.prototype=Object.create(i.prototype)).getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=r},{"./nodecontainer":14}],22:[function(t,e,n){function r(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}r.prototype.testRangeBounds=function(t){var e,n,r=!1;return t.createRange&&(e=t.createRange()).getBoundingClientRect&&((n=t.createElement("boundtest")).style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),123===e.getBoundingClientRect().height&&(r=!0),t.body.removeChild(n)),r},r.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},r.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),n=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=r},{}],23:[function(t,e,n){function r(t){this.src=t,this.image=null;var e=this;this.promise=this.hasFabric().then(function(){return e.isInline(t)?Promise.resolve(e.inlineFormatting(t)):i(t)}).then(function(t){return new Promise(function(n){window.html2canvas.svg.fabric.loadSVGFromString(t,e.createCanvas.call(e,n))})})}var i=t("./xhr"),o=t("./utils").decode64;r.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},r.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},r.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},r.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},r.prototype.createCanvas=function(t){var e=this;return function(n,r){var i=new window.html2canvas.svg.fabric.StaticCanvas("c");e.image=i.lowerCanvasEl,i.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(n,r)).renderAll(),t(i.lowerCanvasEl)}},r.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):o(t)},e.exports=r},{"./utils":26,"./xhr":28}],24:[function(t,e,n){function r(t,e){this.src=t,this.image=null;var n=this;this.promise=e?new Promise(function(e,r){n.image=new Image,n.image.onload=e,n.image.onerror=r,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(t),!0===n.image.complete&&e(n.image)}):this.hasFabric().then(function(){return new Promise(function(e){window.html2canvas.svg.fabric.parseSVGDocument(t,n.createCanvas.call(n,e))})})}var i=t("./svgcontainer");r.prototype=Object.create(i.prototype),e.exports=r},{"./svgcontainer":23}],25:[function(t,e,n){function r(t,e){o.call(this,t,e)}function i(t,e,n){if(t.length>0)return e+n.toUpperCase()}var o=t("./nodecontainer");(r.prototype=Object.create(o.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},r.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,i);case"uppercase":return e.toUpperCase();default:return e}},e.exports=r},{"./nodecontainer":14}],26:[function(t,e,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(t,e){return function(){return t.apply(e,arguments)}},/*
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
n.decode64=function(t){var e,n,r,i,o,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=t.length,u="";for(e=0;e<l;e+=4)o=c.indexOf(t[e])<<2|(n=c.indexOf(t[e+1]))>>4,a=(15&n)<<4|(r=c.indexOf(t[e+2]))>>2,s=(3&r)<<6|(i=c.indexOf(t[e+3])),u+=64===r?String.fromCharCode(o):64===i||-1===i?String.fromCharCode(o,a):String.fromCharCode(o,a,s);return u},n.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),n=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+n,left:e.left,width:n,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},n.offsetBounds=function(t){var e=t.offsetParent?n.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},n.parseBackgrounds=function(t){var e,n,r,i,o,a,s,c=[],l=0,u=0,h=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===e.substr(0,1)&&(i=e.indexOf("-",1)+1)>0&&(r=e.substr(0,i),e=e.substr(i)),c.push({prefix:r,method:e.toLowerCase(),value:o,args:s,image:null})),s=[],e=r=n=o=""};return s=[],e=r=n=o="",t.split("").forEach(function(t){if(!(0===l&&" \r\n\t".indexOf(t)>-1)){switch(t){case'"':a?a===t&&(a=null):a=t;break;case"(":if(a)break;if(0===l)return l=1,void(o+=t);u++;break;case")":if(a)break;if(1===l){if(0===u)return l=0,o+=t,void h();u--}break;case",":if(a)break;if(0===l)return void h();if(1===l&&0===u&&!e.match(/^url$/i))return s.push(n),n="",void(o+=t)}o+=t,0===l?e+=t:n+=t}}),h(),c}},{}],27:[function(t,e,n){function r(t){i.apply(this,arguments),this.type="linear"===t.args[0]?i.TYPES.LINEAR:i.TYPES.RADIAL}var i=t("./gradientcontainer");r.prototype=Object.create(i.prototype),e.exports=r},{"./gradientcontainer":9}],28:[function(t,e,n){e.exports=function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.responseText):n(new Error(r.statusText))},r.onerror=function(){n(new Error("Network Error"))},r.send()})}},{}]},{},[4])(4)}),/*
# PNG.js
# Copyright (c) 2011 Devon Govett
# MIT LICENSE
# 
# 
*/
function(t){var e;e=function(){function e(t){var e,n,r,i,o,a,s,c,l,u,h,f,d,p,m;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(e=this.readUInt32(),u=function(){var t,e;for(e=[],s=t=0;t<4;s=++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*o/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===u&&(this.pos+=4,e-=4),t=(null!=a?a.data:void 0)||this.imgData,s=d=0;0<=e?d<e:d>e;s=0<=e?++d:--d)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((h=r-this.transparency.indexed.length)>0)for(s=p=0;0<=h?p<h:p>h;s=0<=h?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":c=(f=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,f.slice(0,c)),this.text[l]=String.fromCharCode.apply(String,f.slice(c+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(m=this.colorType)||6===m,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var n,r,i;e.load=function(t,n,r){var i;return"function"==typeof n&&(r=n),(i=new XMLHttpRequest).open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var t,o;return t=new Uint8Array(i.response||i.mozResponseArrayBuffer),o=new e(t),"function"==typeof(null!=n?n.getContext:void 0)&&o.render(n),"function"==typeof r?r(o):void 0},i.send(null)},e.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},e.prototype.readUInt32=function(){var t,e,n,r;return t=this.data[this.pos++]<<24,e=this.data[this.pos++]<<16,n=this.data[this.pos++]<<8,r=this.data[this.pos++],t|e|n|r},e.prototype.readUInt16=function(){var t,e;return t=this.data[this.pos++]<<8,e=this.data[this.pos++],t|e},e.prototype.decodePixels=function(t){var e,n,r,i,o,a,c,l,u,h,f,d,p,m,g,w,y,v,b,x,k,_,C;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=(t=new s(t)).getBytes(),w=(d=this.pixelBitlength/8)*this.width,p=new Uint8Array(w*this.height),a=t.length,g=0,m=0,n=0;m<a;){switch(t[m++]){case 0:for(i=b=0;b<w;i=b+=1)p[n++]=t[m++];break;case 1:for(i=x=0;x<w;i=x+=1)e=t[m++],o=i<d?0:p[n-d],p[n++]=(e+o)%256;break;case 2:for(i=k=0;k<w;i=k+=1)e=t[m++],r=(i-i%d)/d,y=g&&p[(g-1)*w+r*d+i%d],p[n++]=(y+e)%256;break;case 3:for(i=_=0;_<w;i=_+=1)e=t[m++],r=(i-i%d)/d,o=i<d?0:p[n-d],y=g&&p[(g-1)*w+r*d+i%d],p[n++]=(e+Math.floor((o+y)/2))%256;break;case 4:for(i=C=0;C<w;i=C+=1)e=t[m++],r=(i-i%d)/d,o=i<d?0:p[n-d],0===g?y=v=0:(y=p[(g-1)*w+r*d+i%d],v=r&&p[(g-1)*w+(r-1)*d+i%d]),c=o+y-v,l=Math.abs(c-o),h=Math.abs(c-y),f=Math.abs(c-v),u=l<=h&&l<=f?o:h<=f?y:v,p[n++]=(e+u)%256;break;default:throw new Error("Invalid filter algorithm: "+t[m-1])}g++}return p},e.prototype.decodePalette=function(){var t,e,n,r,i,o,a,s,c;for(n=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+n.length),r=0,t=0,e=a=0,s=n.length;a<s;e=a+=3)i[r++]=n[e],i[r++]=n[e+1],i[r++]=n[e+2],i[r++]=null!=(c=o[t++])?c:255;return i},e.prototype.copyToImageData=function(t,e){var n,r,i,o,a,s,c,l,u,h,f;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),r=4,n=!0),i=t.data||t,l=i.length,a=u||e,o=s=0,1===r)for(;o<l;)c=u?4*e[o/4]:s,h=a[c++],i[o++]=h,i[o++]=h,i[o++]=h,i[o++]=n?a[c++]:255,s=c;else for(;o<l;)c=u?4*e[o/4]:s,i[o++]=a[c++],i[o++]=a[c++],i[o++]=a[c++],i[o++]=n?a[c++]:255,s=c},e.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};try{r=t.document.createElement("canvas"),i=r.getContext("2d")}catch(t){return-1}return n=function(t){var e;return i.width=t.width,i.height=t.height,i.clearRect(0,0,t.width,t.height),i.putImageData(t,0,0),e=new Image,e.src=r.toDataURL(),e},e.prototype.decodeFrames=function(t){var e,r,i,o,a,s,c,l;if(this.animation){for(l=[],r=a=0,s=(c=this.animation.frames).length;a<s;r=++a)e=c[r],i=t.createImageData(e.width,e.height),o=this.decodePixels(new Uint8Array(e.data)),this.copyToImageData(i,o),e.imageData=i,l.push(e.image=n(i));return l}},e.prototype.renderFrame=function(t,e){var n,r,i;return r=this.animation.frames,n=r[e],i=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?t.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&t.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},e.prototype.animate=function(t){var e,n,r,i,o,a,s=this;return n=0,a=this.animation,i=a.numFrames,r=a.frames,o=a.numPlays,(e=function(){var a,c;if(a=n++%i,c=r[a],s.renderFrame(t,a),i>1&&n/i<o)return s.animation._timeout=setTimeout(e,c.delay)})()},e.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},e.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},e}(),t.PNG=e}("undefined"!=typeof window&&window||void 0);/*
 * Extracted from pdf.js
 * https://github.com/andreasgal/pdf.js
 *
 * Copyright (c) 2011 Mozilla Foundation
 *
 * Contributors: Andreas Gal <gal@mozilla.com>
 *               Chris G Jones <cjones@mozilla.com>
 *               Shaon Barman <shaon.barman@gmail.com>
 *               Vivien Nicolas <21@vingtetun.org>
 *               Justin D'Arcangelo <justindarc@gmail.com>
 *               Yury Delendik
 *
 * 
 */
var a=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype={ensureBuffer:function(t){var e=this.buffer,n=e?e.byteLength:0;if(t<n)return e;for(var r=512;r<t;)r<<=1;for(var i=new Uint8Array(r),o=0;o<n;++o)i[o]=e[o];return this.buffer=i},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var e=this.pos;if(t){this.ensureBuffer(e+t);for(r=e+t;!this.eof&&this.bufferLength<r;)this.readBlock();var n=this.bufferLength;r>n&&(r=n)}else{for(;!this.eof;)this.readBlock();var r=this.bufferLength}return this.pos=r,this.buffer.subarray(e,r)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,e,n){for(var r=t+e;this.bufferLength<=r&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,n)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},t}(),s=function(){function t(t){throw new Error(t)}function e(e){var n=0,r=e[n++],i=e[n++];-1!=r&&-1!=i||t("Invalid header in flate stream"),8!=(15&r)&&t("Unknown compression method in flate stream"),((r<<8)+i)%31!=0&&t("Bad FCHECK in flate stream"),32&i&&t("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=n,this.codeSize=0,this.codeBuf=0,a.call(this)}if("undefined"!=typeof Uint32Array){var n=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),i=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),o=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],s=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return e.prototype=Object.create(a.prototype),e.prototype.getBits=function(e){for(var n,r=this.codeSize,i=this.codeBuf,o=this.bytes,a=this.bytesPos;r<e;)void 0===(n=o[a++])&&t("Bad encoding in flate stream"),i|=n<<r,r+=8;return n=i&(1<<e)-1,this.codeBuf=i>>e,this.codeSize=r-=e,this.bytesPos=a,n},e.prototype.getCode=function(e){for(var n=e[0],r=e[1],i=this.codeSize,o=this.codeBuf,a=this.bytes,s=this.bytesPos;i<r;){var c;void 0===(c=a[s++])&&t("Bad encoding in flate stream"),o|=c<<i,i+=8}var l=n[o&(1<<r)-1],u=l>>16,h=65535&l;return(0==i||i<u||0==u)&&t("Bad encoding in flate stream"),this.codeBuf=o>>u,this.codeSize=i-u,this.bytesPos=s,h},e.prototype.generateHuffmanTable=function(t){for(var e=t.length,n=0,r=0;r<e;++r)t[r]>n&&(n=t[r]);for(var i=1<<n,o=new Uint32Array(i),a=1,s=0,c=2;a<=n;++a,s<<=1,c<<=1)for(var l=0;l<e;++l)if(t[l]==a){for(var u=0,h=s,r=0;r<a;++r)u=u<<1|1&h,h>>=1;for(r=u;r<i;r+=c)o[r]=a<<16|l;++s}return[o,n]},e.prototype.readBlock=function(){function e(t,e,n,r,i){for(var o=t.getBits(n)+r;o-- >0;)e[p++]=i}var a=this.getBits(3);if(1&a&&(this.eof=!0),0!=(a>>=1)){var c,l;if(1==a)c=o,l=s;else if(2==a){for(var u=this.getBits(5)+257,h=this.getBits(5)+1,f=this.getBits(4)+4,d=Array(n.length),p=0;p<f;)d[n[p++]]=this.getBits(3);for(var m=this.generateHuffmanTable(d),g=0,p=0,w=u+h,y=new Array(w);p<w;){var v=this.getCode(m);16==v?e(this,y,2,3,g):17==v?e(this,y,3,3,g=0):18==v?e(this,y,7,11,g=0):y[p++]=g=v}c=this.generateHuffmanTable(y.slice(0,u)),l=this.generateHuffmanTable(y.slice(u,w))}else t("Unknown block type in flate stream");for(var b=(O=this.buffer)?O.length:0,x=this.bufferLength;;){var k=this.getCode(c);if(k<256)x+1>=b&&(b=(O=this.ensureBuffer(x+1)).length),O[x++]=k;else{if(256==k)return void(this.bufferLength=x);var _=(k=r[k-=257])>>16;_>0&&(_=this.getBits(_));g=(65535&k)+_;k=this.getCode(l),(_=(k=i[k])>>16)>0&&(_=this.getBits(_));var C=(65535&k)+_;x+g>=b&&(b=(O=this.ensureBuffer(x+g)).length);for(var A=0;A<g;++A,++x)O[x]=O[x-C]}}}else{var S,q=this.bytes,T=this.bytesPos;void 0===(S=q[T++])&&t("Bad block header in flate stream");var P=S;void 0===(S=q[T++])&&t("Bad block header in flate stream"),P|=S<<8,void 0===(S=q[T++])&&t("Bad block header in flate stream");var I=S;void 0===(S=q[T++])&&t("Bad block header in flate stream"),(I|=S<<8)!=(65535&~P)&&t("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var E=this.bufferLength,O=this.ensureBuffer(E+P),F=E+P;this.bufferLength=F;for(var B=E;B<F;++B){if(void 0===(S=q[T++])){this.eof=!0;break}O[B]=S}this.bytesPos=T}},e}}();return function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0===t.btoa&&(t.btoa=function(t){var n,r,i,o,a,s=0,c=0,l="",u=[];if(!t)return t;do{n=(a=t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++))>>18&63,r=a>>12&63,i=a>>6&63,o=63&a,u[c++]=e.charAt(n)+e.charAt(r)+e.charAt(i)+e.charAt(o)}while(s<t.length);l=u.join("");var h=t.length%3;return(h?l.slice(0,h-3):l)+"===".slice(h||3)}),void 0===t.atob&&(t.atob=function(t){var n,r,i,o,a,s,c=0,l=0,u=[];if(!t)return t;t+="";do{n=(s=e.indexOf(t.charAt(c++))<<18|e.indexOf(t.charAt(c++))<<12|(o=e.indexOf(t.charAt(c++)))<<6|(a=e.indexOf(t.charAt(c++))))>>16&255,r=s>>8&255,i=255&s,u[l++]=64==o?String.fromCharCode(n):64==a?String.fromCharCode(n,r):String.fromCharCode(n,r,i)}while(c<t.length);return u.join("")}),Array.prototype.map||(Array.prototype.map=function(t){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;for(var e=Object(this),n=e.length>>>0,r=new Array(n),i=arguments.length>1?arguments[1]:void 0,o=0;o<n;o++)o in e&&(r[o]=t.call(i,e[o],o,e));return r}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;for(var n=Object(this),r=n.length>>>0,i=0;i<r;i++)i in n&&t.call(e,n[i],i,n)}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError;var o,a,s=[];for(o in i)t.call(i,o)&&s.push(o);if(e)for(a=0;a<r;a++)t.call(i,n[a])&&s.push(n[a]);return s}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0),e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],71:[function(require,module,exports){
(function (global){
'use strict';(function (f) {
    if (typeof exports === 'object' && typeof module !== 'undefined') {
        module.exports = f();
    } else if (typeof define === 'function' && define.amd) {
        define([], f);
    } else {
        var g;
        if (typeof window !== 'undefined') {
            g = window;
        } else if (typeof global !== 'undefined') {
            g = global;
        } else if (typeof self !== 'undefined') {
            g = self;
        } else {
            g = this;
        }
        g.mapboxgl = f();
    }
}(function () {
    var define, module, exports;
    return function e(t, n, r) {
        function s(o, u) {
            if (!n[o]) {
                if (!t[o]) {
                    var a = typeof require == 'function' && require;
                    if (!u && a) {
                        return a(o, !0);
                    }
                    if (i) {
                        return i(o, !0);
                    }
                    var f = new Error('Cannot find module \'' + o + '\'');
                    throw f.code = 'MODULE_NOT_FOUND', f;
                }
                var l = n[o] = { exports: {} };
                t[o][0].call(l.exports, function (e) {
                    var n = t[o][1][e];
                    return s(n ? n : e);
                }, l, l.exports, e, t, n, r);
            }
            return n[o].exports;
        }
        var i = typeof require == 'function' && require;
        for (var o = 0; o < r.length; o++) {
            s(r[o]);
        }
        return s;
    }({
        1: [
            function (_dereq_, module, exports) {
                function geometry(e) {
                    var r, t = 0;
                    switch (e.type) {
                    case 'Polygon':
                        return polygonArea(e.coordinates);
                    case 'MultiPolygon':
                        for (r = 0; r < e.coordinates.length; r++) {
                            t += polygonArea(e.coordinates[r]);
                        }
                        return t;
                    case 'Point':
                    case 'MultiPoint':
                    case 'LineString':
                    case 'MultiLineString':
                        return 0;
                    case 'GeometryCollection':
                        for (r = 0; r < e.geometries.length; r++) {
                            t += geometry(e.geometries[r]);
                        }
                        return t;
                    }
                }
                function polygonArea(e) {
                    var r = 0;
                    if (e && e.length > 0) {
                        r += Math.abs(ringArea(e[0]));
                        for (var t = 1; t < e.length; t++) {
                            r -= Math.abs(ringArea(e[t]));
                        }
                    }
                    return r;
                }
                function ringArea(e) {
                    var r, t, n, o, a, i, g, s = 0, l = e.length;
                    if (l > 2) {
                        for (g = 0; g < l; g++) {
                            g === l - 2 ? (o = l - 2, a = l - 1, i = 0) : g === l - 1 ? (o = l - 1, a = 0, i = 1) : (o = g, a = g + 1, i = g + 2), r = e[o], t = e[a], n = e[i], s += (rad(n[0]) - rad(r[0])) * Math.sin(rad(t[1]));
                        }
                        s = s * wgs84.RADIUS * wgs84.RADIUS / 2;
                    }
                    return s;
                }
                function rad(e) {
                    return e * Math.PI / 180;
                }
                var wgs84 = _dereq_('wgs84');
                module.exports.geometry = geometry, module.exports.ring = ringArea;
            },
            { 'wgs84': 37 }
        ],
        2: [
            function (_dereq_, module, exports) {
                !function (t, n) {
                    'object' == typeof exports && 'undefined' != typeof module ? module.exports = n() : 'function' == typeof define && define.amd ? define(n) : t.glMatrix = n();
                }(this, function () {
                    'use strict';
                    function t(t, n, r) {
                        var e = n[0], a = n[1], o = n[2];
                        return t[0] = e * r[0] + a * r[3] + o * r[6], t[1] = e * r[1] + a * r[4] + o * r[7], t[2] = e * r[2] + a * r[5] + o * r[8], t;
                    }
                    function n(t, n, r) {
                        var e = n[0], a = n[1], o = n[2], u = n[3];
                        return t[0] = r[0] * e + r[4] * a + r[8] * o + r[12] * u, t[1] = r[1] * e + r[5] * a + r[9] * o + r[13] * u, t[2] = r[2] * e + r[6] * a + r[10] * o + r[14] * u, t[3] = r[3] * e + r[7] * a + r[11] * o + r[15] * u, t;
                    }
                    function r() {
                        var t = new Float32Array(4);
                        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 1, t;
                    }
                    function e(t, n, r) {
                        var e = n[0], a = n[1], o = n[2], u = n[3], i = Math.sin(r), c = Math.cos(r);
                        return t[0] = e * c + o * i, t[1] = a * c + u * i, t[2] = e * -i + o * c, t[3] = a * -i + u * c, t;
                    }
                    function a(t, n, r) {
                        var e = n[0], a = n[1], o = n[2], u = n[3], i = r[0], c = r[1];
                        return t[0] = e * i, t[1] = a * i, t[2] = o * c, t[3] = u * c, t;
                    }
                    function o() {
                        var t = new Float32Array(9);
                        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t;
                    }
                    function u(t, n) {
                        var r = Math.sin(n), e = Math.cos(n);
                        return t[0] = e, t[1] = r, t[2] = 0, t[3] = -r, t[4] = e, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t;
                    }
                    function i() {
                        var t = new Float32Array(16);
                        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;
                    }
                    function c(t) {
                        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;
                    }
                    function f(t, n) {
                        var r = n[0], e = n[1], a = n[2], o = n[3], u = n[4], i = n[5], c = n[6], f = n[7], v = n[8], s = n[9], l = n[10], M = n[11], h = n[12], m = n[13], y = n[14], d = n[15], p = r * i - e * u, w = r * c - a * u, A = r * f - o * u, F = e * c - a * i, x = e * f - o * i, b = a * f - o * c, g = v * m - s * h, j = v * y - l * h, R = v * d - M * h, X = s * y - l * m, Z = s * d - M * m, k = l * d - M * y, q = p * k - w * Z + A * X + F * R - x * j + b * g;
                        return q ? (q = 1 / q, t[0] = (i * k - c * Z + f * X) * q, t[1] = (a * Z - e * k - o * X) * q, t[2] = (m * b - y * x + d * F) * q, t[3] = (l * x - s * b - M * F) * q, t[4] = (c * R - u * k - f * j) * q, t[5] = (r * k - a * R + o * j) * q, t[6] = (y * A - h * b - d * w) * q, t[7] = (v * b - l * A + M * w) * q, t[8] = (u * Z - i * R + f * g) * q, t[9] = (e * R - r * Z - o * g) * q, t[10] = (h * x - m * A + d * p) * q, t[11] = (s * A - v * x - M * p) * q, t[12] = (i * j - u * X - c * g) * q, t[13] = (r * X - e * j + a * g) * q, t[14] = (m * w - h * F - y * p) * q, t[15] = (v * F - s * w + l * p) * q, t) : null;
                    }
                    function v(t, n, r) {
                        var e = n[0], a = n[1], o = n[2], u = n[3], i = n[4], c = n[5], f = n[6], v = n[7], s = n[8], l = n[9], M = n[10], h = n[11], m = n[12], y = n[13], d = n[14], p = n[15], w = r[0], A = r[1], F = r[2], x = r[3];
                        return t[0] = w * e + A * i + F * s + x * m, t[1] = w * a + A * c + F * l + x * y, t[2] = w * o + A * f + F * M + x * d, t[3] = w * u + A * v + F * h + x * p, w = r[4], A = r[5], F = r[6], x = r[7], t[4] = w * e + A * i + F * s + x * m, t[5] = w * a + A * c + F * l + x * y, t[6] = w * o + A * f + F * M + x * d, t[7] = w * u + A * v + F * h + x * p, w = r[8], A = r[9], F = r[10], x = r[11], t[8] = w * e + A * i + F * s + x * m, t[9] = w * a + A * c + F * l + x * y, t[10] = w * o + A * f + F * M + x * d, t[11] = w * u + A * v + F * h + x * p, w = r[12], A = r[13], F = r[14], x = r[15], t[12] = w * e + A * i + F * s + x * m, t[13] = w * a + A * c + F * l + x * y, t[14] = w * o + A * f + F * M + x * d, t[15] = w * u + A * v + F * h + x * p, t;
                    }
                    function s(t, n, r) {
                        var e, a, o, u, i, c, f, v, s, l, M, h, m = r[0], y = r[1], d = r[2];
                        return n === t ? (t[12] = n[0] * m + n[4] * y + n[8] * d + n[12], t[13] = n[1] * m + n[5] * y + n[9] * d + n[13], t[14] = n[2] * m + n[6] * y + n[10] * d + n[14], t[15] = n[3] * m + n[7] * y + n[11] * d + n[15]) : (e = n[0], a = n[1], o = n[2], u = n[3], i = n[4], c = n[5], f = n[6], v = n[7], s = n[8], l = n[9], M = n[10], h = n[11], t[0] = e, t[1] = a, t[2] = o, t[3] = u, t[4] = i, t[5] = c, t[6] = f, t[7] = v, t[8] = s, t[9] = l, t[10] = M, t[11] = h, t[12] = e * m + i * y + s * d + n[12], t[13] = a * m + c * y + l * d + n[13], t[14] = o * m + f * y + M * d + n[14], t[15] = u * m + v * y + h * d + n[15]), t;
                    }
                    function l(t, n, r) {
                        var e = r[0], a = r[1], o = r[2];
                        return t[0] = n[0] * e, t[1] = n[1] * e, t[2] = n[2] * e, t[3] = n[3] * e, t[4] = n[4] * a, t[5] = n[5] * a, t[6] = n[6] * a, t[7] = n[7] * a, t[8] = n[8] * o, t[9] = n[9] * o, t[10] = n[10] * o, t[11] = n[11] * o, t[12] = n[12], t[13] = n[13], t[14] = n[14], t[15] = n[15], t;
                    }
                    function M(t, n, r) {
                        var e = Math.sin(r), a = Math.cos(r), o = n[4], u = n[5], i = n[6], c = n[7], f = n[8], v = n[9], s = n[10], l = n[11];
                        return n !== t && (t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t[12] = n[12], t[13] = n[13], t[14] = n[14], t[15] = n[15]), t[4] = o * a + f * e, t[5] = u * a + v * e, t[6] = i * a + s * e, t[7] = c * a + l * e, t[8] = f * a - o * e, t[9] = v * a - u * e, t[10] = s * a - i * e, t[11] = l * a - c * e, t;
                    }
                    function h(t, n, r) {
                        var e = Math.sin(r), a = Math.cos(r), o = n[0], u = n[1], i = n[2], c = n[3], f = n[4], v = n[5], s = n[6], l = n[7];
                        return n !== t && (t[8] = n[8], t[9] = n[9], t[10] = n[10], t[11] = n[11], t[12] = n[12], t[13] = n[13], t[14] = n[14], t[15] = n[15]), t[0] = o * a + f * e, t[1] = u * a + v * e, t[2] = i * a + s * e, t[3] = c * a + l * e, t[4] = f * a - o * e, t[5] = v * a - u * e, t[6] = s * a - i * e, t[7] = l * a - c * e, t;
                    }
                    function m(t, n, r, e, a) {
                        var o = 1 / Math.tan(n / 2), u = 1 / (e - a);
                        return t[0] = o / r, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = o, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = (a + e) * u, t[11] = -1, t[12] = 0, t[13] = 0, t[14] = 2 * a * e * u, t[15] = 0, t;
                    }
                    function y(t, n, r, e, a, o, u) {
                        var i = 1 / (n - r), c = 1 / (e - a), f = 1 / (o - u);
                        return t[0] = -2 * i, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = -2 * c, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 2 * f, t[11] = 0, t[12] = (n + r) * i, t[13] = (a + e) * c, t[14] = (u + o) * f, t[15] = 1, t;
                    }
                    (function () {
                        var t = new Float32Array(3);
                        t[0] = 0, t[1] = 0, t[2] = 0;
                    }(), function () {
                        var t = new Float32Array(4);
                        t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 0;
                    }());
                    return {
                        vec3: { transformMat3: t },
                        vec4: { transformMat4: n },
                        mat2: {
                            create: r,
                            rotate: e,
                            scale: a
                        },
                        mat3: {
                            create: o,
                            fromRotation: u
                        },
                        mat4: {
                            create: i,
                            identity: c,
                            translate: s,
                            scale: l,
                            multiply: v,
                            perspective: m,
                            rotateX: M,
                            rotateZ: h,
                            invert: f,
                            ortho: y
                        }
                    };
                });
            },
            {}
        ],
        3: [
            function (_dereq_, module, exports) {
                'use strict';
                function isSupported(e) {
                    return !!(isBrowser() && isArraySupported() && isFunctionSupported() && isObjectSupported() && isJSONSupported() && isWorkerSupported() && isUint8ClampedArraySupported() && isWebGLSupportedCached(e && e.failIfMajorPerformanceCaveat));
                }
                function isBrowser() {
                    return 'undefined' != typeof window && 'undefined' != typeof document;
                }
                function isArraySupported() {
                    return Array.prototype && Array.prototype.every && Array.prototype.filter && Array.prototype.forEach && Array.prototype.indexOf && Array.prototype.lastIndexOf && Array.prototype.map && Array.prototype.some && Array.prototype.reduce && Array.prototype.reduceRight && Array.isArray;
                }
                function isFunctionSupported() {
                    return Function.prototype && Function.prototype.bind;
                }
                function isObjectSupported() {
                    return Object.keys && Object.create && Object.getPrototypeOf && Object.getOwnPropertyNames && Object.isSealed && Object.isFrozen && Object.isExtensible && Object.getOwnPropertyDescriptor && Object.defineProperty && Object.defineProperties && Object.seal && Object.freeze && Object.preventExtensions;
                }
                function isJSONSupported() {
                    return 'JSON' in window && 'parse' in JSON && 'stringify' in JSON;
                }
                function isWorkerSupported() {
                    if (!('Worker' in window && 'Blob' in window)) {
                        return !1;
                    }
                    var e, t, r = new Blob([''], { type: 'text/javascript' }), o = URL.createObjectURL(r);
                    try {
                        t = new Worker(o), e = !0;
                    } catch (t) {
                        e = !1;
                    }
                    return t && t.terminate(), URL.revokeObjectURL(o), e;
                }
                function isUint8ClampedArraySupported() {
                    return 'Uint8ClampedArray' in window;
                }
                function isWebGLSupportedCached(e) {
                    return void 0 === isWebGLSupportedCache[e] && (isWebGLSupportedCache[e] = isWebGLSupported(e)), isWebGLSupportedCache[e];
                }
                function isWebGLSupported(e) {
                    var t = document.createElement('canvas'), r = Object.create(isSupported.webGLContextAttributes);
                    return r.failIfMajorPerformanceCaveat = e, t.probablySupportsContext ? t.probablySupportsContext('webgl', r) || t.probablySupportsContext('experimental-webgl', r) : t.supportsContext ? t.supportsContext('webgl', r) || t.supportsContext('experimental-webgl', r) : t.getContext('webgl', r) || t.getContext('experimental-webgl', r);
                }
                'undefined' != typeof module && module.exports ? module.exports = isSupported : window && (window.mapboxgl = window.mapboxgl || {}, window.mapboxgl.supported = isSupported);
                var isWebGLSupportedCache = {};
                isSupported.webGLContextAttributes = {
                    antialias: !1,
                    alpha: !0,
                    stencil: !0,
                    depth: !0
                };
            },
            {}
        ],
        4: [
            function (_dereq_, module, exports) {
                'use strict';
                function Point(t, n) {
                    this.x = t, this.y = n;
                }
                module.exports = Point, Point.prototype = {
                    clone: function () {
                        return new Point(this.x, this.y);
                    },
                    add: function (t) {
                        return this.clone()._add(t);
                    },
                    sub: function (t) {
                        return this.clone()._sub(t);
                    },
                    multByPoint: function (t) {
                        return this.clone()._multByPoint(t);
                    },
                    divByPoint: function (t) {
                        return this.clone()._divByPoint(t);
                    },
                    mult: function (t) {
                        return this.clone()._mult(t);
                    },
                    div: function (t) {
                        return this.clone()._div(t);
                    },
                    rotate: function (t) {
                        return this.clone()._rotate(t);
                    },
                    rotateAround: function (t, n) {
                        return this.clone()._rotateAround(t, n);
                    },
                    matMult: function (t) {
                        return this.clone()._matMult(t);
                    },
                    unit: function () {
                        return this.clone()._unit();
                    },
                    perp: function () {
                        return this.clone()._perp();
                    },
                    round: function () {
                        return this.clone()._round();
                    },
                    mag: function () {
                        return Math.sqrt(this.x * this.x + this.y * this.y);
                    },
                    equals: function (t) {
                        return this.x === t.x && this.y === t.y;
                    },
                    dist: function (t) {
                        return Math.sqrt(this.distSqr(t));
                    },
                    distSqr: function (t) {
                        var n = t.x - this.x, i = t.y - this.y;
                        return n * n + i * i;
                    },
                    angle: function () {
                        return Math.atan2(this.y, this.x);
                    },
                    angleTo: function (t) {
                        return Math.atan2(this.y - t.y, this.x - t.x);
                    },
                    angleWith: function (t) {
                        return this.angleWithSep(t.x, t.y);
                    },
                    angleWithSep: function (t, n) {
                        return Math.atan2(this.x * n - this.y * t, this.x * t + this.y * n);
                    },
                    _matMult: function (t) {
                        var n = t[0] * this.x + t[1] * this.y, i = t[2] * this.x + t[3] * this.y;
                        return this.x = n, this.y = i, this;
                    },
                    _add: function (t) {
                        return this.x += t.x, this.y += t.y, this;
                    },
                    _sub: function (t) {
                        return this.x -= t.x, this.y -= t.y, this;
                    },
                    _mult: function (t) {
                        return this.x *= t, this.y *= t, this;
                    },
                    _div: function (t) {
                        return this.x /= t, this.y /= t, this;
                    },
                    _multByPoint: function (t) {
                        return this.x *= t.x, this.y *= t.y, this;
                    },
                    _divByPoint: function (t) {
                        return this.x /= t.x, this.y /= t.y, this;
                    },
                    _unit: function () {
                        return this._div(this.mag()), this;
                    },
                    _perp: function () {
                        var t = this.y;
                        return this.y = this.x, this.x = -t, this;
                    },
                    _rotate: function (t) {
                        var n = Math.cos(t), i = Math.sin(t), s = n * this.x - i * this.y, r = i * this.x + n * this.y;
                        return this.x = s, this.y = r, this;
                    },
                    _rotateAround: function (t, n) {
                        var i = Math.cos(t), s = Math.sin(t), r = n.x + i * (this.x - n.x) - s * (this.y - n.y), h = n.y + s * (this.x - n.x) + i * (this.y - n.y);
                        return this.x = r, this.y = h, this;
                    },
                    _round: function () {
                        return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
                    }
                }, Point.convert = function (t) {
                    return t instanceof Point ? t : Array.isArray(t) ? new Point(t[0], t[1]) : t;
                };
            },
            {}
        ],
        5: [
            function (_dereq_, module, exports) {
                !function (t, e) {
                    'object' == typeof exports && 'undefined' != typeof module ? module.exports = e() : 'function' == typeof define && define.amd ? define(e) : t.ShelfPack = e();
                }(this, function () {
                    function t(t, e, i) {
                        i = i || {}, this.w = t || 64, this.h = e || 64, this.autoResize = !!i.autoResize, this.shelves = [], this.freebins = [], this.stats = {}, this.bins = {}, this.maxId = 0;
                    }
                    function e(t, e, i) {
                        this.x = 0, this.y = t, this.w = this.free = e, this.h = i;
                    }
                    function i(t, e, i, s, h, n, r) {
                        this.id = t, this.x = e, this.y = i, this.w = s, this.h = h, this.maxw = n || s, this.maxh = r || h, this.refcount = 0;
                    }
                    return t.prototype.pack = function (t, e) {
                        var this$1 = this;
                        t = [].concat(t), e = e || {};
                        for (var i, s, h, n, r = [], f = 0; f < t.length; f++) {
                            if (i = t[f].w || t[f].width, s = t[f].h || t[f].height, h = t[f].id, i && s) {
                                if (!(n = this$1.packOne(i, s, h))) {
                                    continue;
                                }
                                e.inPlace && (t[f].x = n.x, t[f].y = n.y, t[f].id = n.id), r.push(n);
                            }
                        }
                        return this.shrink(), r;
                    }, t.prototype.packOne = function (t, i, s) {
                        var this$1 = this;
                        var h, n, r, f, o = {
                                freebin: -1,
                                shelf: -1,
                                waste: 1 / 0
                            }, a = 0;
                        if ('string' == typeof s || 'number' == typeof s) {
                            if (h = this.getBin(s)) {
                                return this.ref(h), h;
                            }
                            'number' == typeof s && (this.maxId = Math.max(s, this.maxId));
                        } else {
                            s = ++this.maxId;
                        }
                        for (f = 0; f < this.freebins.length; f++) {
                            if (h = this$1.freebins[f], i === h.maxh && t === h.maxw) {
                                return this$1.allocFreebin(f, t, i, s);
                            }
                            i > h.maxh || t > h.maxw || i <= h.maxh && t <= h.maxw && (r = h.maxw * h.maxh - t * i) < o.waste && (o.waste = r, o.freebin = f);
                        }
                        for (f = 0; f < this.shelves.length; f++) {
                            if (n = this$1.shelves[f], a += n.h, !(t > n.free)) {
                                if (i === n.h) {
                                    return this$1.allocShelf(f, t, i, s);
                                }
                                i > n.h || i < n.h && (r = (n.h - i) * t) < o.waste && (o.freebin = -1, o.waste = r, o.shelf = f);
                            }
                        }
                        if (-1 !== o.freebin) {
                            return this.allocFreebin(o.freebin, t, i, s);
                        }
                        if (-1 !== o.shelf) {
                            return this.allocShelf(o.shelf, t, i, s);
                        }
                        if (i <= this.h - a && t <= this.w) {
                            return n = new e(a, this.w, i), this.allocShelf(this.shelves.push(n) - 1, t, i, s);
                        }
                        if (this.autoResize) {
                            var u, l, c, p;
                            return u = l = this.h, c = p = this.w, (c <= u || t > c) && (p = 2 * Math.max(t, c)), (u < c || i > u) && (l = 2 * Math.max(i, u)), this.resize(p, l), this.packOne(t, i, s);
                        }
                        return null;
                    }, t.prototype.allocFreebin = function (t, e, i, s) {
                        var h = this.freebins.splice(t, 1)[0];
                        return h.id = s, h.w = e, h.h = i, h.refcount = 0, this.bins[s] = h, this.ref(h), h;
                    }, t.prototype.allocShelf = function (t, e, i, s) {
                        var h = this.shelves[t], n = h.alloc(e, i, s);
                        return this.bins[s] = n, this.ref(n), n;
                    }, t.prototype.shrink = function () {
                        var this$1 = this;
                        if (this.shelves.length > 0) {
                            for (var t = 0, e = 0, i = 0; i < this.shelves.length; i++) {
                                var s = this$1.shelves[i];
                                e += s.h, t = Math.max(s.w - s.free, t);
                            }
                            this.resize(t, e);
                        }
                    }, t.prototype.getBin = function (t) {
                        return this.bins[t];
                    }, t.prototype.ref = function (t) {
                        if (1 == ++t.refcount) {
                            var e = t.h;
                            this.stats[e] = 1 + (0 | this.stats[e]);
                        }
                        return t.refcount;
                    }, t.prototype.unref = function (t) {
                        return 0 === t.refcount ? 0 : (0 == --t.refcount && (this.stats[t.h]--, delete this.bins[t.id], this.freebins.push(t)), t.refcount);
                    }, t.prototype.clear = function () {
                        this.shelves = [], this.freebins = [], this.stats = {}, this.bins = {}, this.maxId = 0;
                    }, t.prototype.resize = function (t, e) {
                        var this$1 = this;
                        this.w = t, this.h = e;
                        for (var i = 0; i < this.shelves.length; i++) {
                            this$1.shelves[i].resize(t);
                        }
                        return !0;
                    }, e.prototype.alloc = function (t, e, s) {
                        if (t > this.free || e > this.h) {
                            return null;
                        }
                        var h = this.x;
                        return this.x += t, this.free -= t, new i(s, h, this.y, t, e, t, this.h);
                    }, e.prototype.resize = function (t) {
                        return this.free += t - this.w, this.w = t, !0;
                    }, t;
                });
            },
            {}
        ],
        6: [
            function (_dereq_, module, exports) {
                'use strict';
                function TinySDF(t, i, s, e, h, r) {
                    this.fontSize = t || 24, this.buffer = void 0 === i ? 3 : i, this.cutoff = e || 0.25, this.fontFamily = h || 'sans-serif', this.fontWeight = r || 'normal', this.radius = s || 8;
                    var a = this.size = this.fontSize + 2 * this.buffer;
                    this.canvas = document.createElement('canvas'), this.canvas.width = this.canvas.height = a, this.ctx = this.canvas.getContext('2d'), this.ctx.font = this.fontWeight + ' ' + this.fontSize + 'px ' + this.fontFamily, this.ctx.textBaseline = 'middle', this.ctx.fillStyle = 'black', this.gridOuter = new Float64Array(a * a), this.gridInner = new Float64Array(a * a), this.f = new Float64Array(a), this.d = new Float64Array(a), this.z = new Float64Array(a + 1), this.v = new Int16Array(a), this.middle = Math.round(a / 2 * (navigator.userAgent.indexOf('Gecko/') >= 0 ? 1.2 : 1));
                }
                function edt(t, i, s, e, h, r, a) {
                    for (var n = 0; n < i; n++) {
                        for (var o = 0; o < s; o++) {
                            e[o] = t[o * i + n];
                        }
                        for (edt1d(e, h, r, a, s), o = 0; o < s; o++) {
                            t[o * i + n] = h[o];
                        }
                    }
                    for (o = 0; o < s; o++) {
                        for (n = 0; n < i; n++) {
                            e[n] = t[o * i + n];
                        }
                        for (edt1d(e, h, r, a, i), n = 0; n < i; n++) {
                            t[o * i + n] = Math.sqrt(h[n]);
                        }
                    }
                }
                function edt1d(t, i, s, e, h) {
                    s[0] = 0, e[0] = -INF, e[1] = +INF;
                    for (var r = 1, a = 0; r < h; r++) {
                        for (var n = (t[r] + r * r - (t[s[a]] + s[a] * s[a])) / (2 * r - 2 * s[a]); n <= e[a];) {
                            a--, n = (t[r] + r * r - (t[s[a]] + s[a] * s[a])) / (2 * r - 2 * s[a]);
                        }
                        a++, s[a] = r, e[a] = n, e[a + 1] = +INF;
                    }
                    for (r = 0, a = 0; r < h; r++) {
                        for (; e[a + 1] < r;) {
                            a++;
                        }
                        i[r] = (r - s[a]) * (r - s[a]) + t[s[a]];
                    }
                }
                module.exports = TinySDF;
                var INF = 100000000000000000000;
                TinySDF.prototype.draw = function (t) {
                    var this$1 = this;
                    this.ctx.clearRect(0, 0, this.size, this.size), this.ctx.fillText(t, this.buffer, this.middle);
                    for (var i = this.ctx.getImageData(0, 0, this.size, this.size), s = new Uint8ClampedArray(this.size * this.size), e = 0; e < this.size * this.size; e++) {
                        var h = i.data[4 * e + 3] / 255;
                        this$1.gridOuter[e] = 1 === h ? 0 : 0 === h ? INF : Math.pow(Math.max(0, 0.5 - h), 2), this$1.gridInner[e] = 1 === h ? INF : 0 === h ? 0 : Math.pow(Math.max(0, h - 0.5), 2);
                    }
                    for (edt(this.gridOuter, this.size, this.size, this.f, this.d, this.v, this.z), edt(this.gridInner, this.size, this.size, this.f, this.d, this.v, this.z), e = 0; e < this.size * this.size; e++) {
                        var r = this$1.gridOuter[e] - this$1.gridInner[e];
                        s[e] = Math.max(0, Math.min(255, Math.round(255 - 255 * (r / this$1.radius + this$1.cutoff))));
                    }
                    return s;
                };
            },
            {}
        ],
        7: [
            function (_dereq_, module, exports) {
                function UnitBezier(t, i, e, r) {
                    this.cx = 3 * t, this.bx = 3 * (e - t) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * i, this.by = 3 * (r - i) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t, this.p1y = r, this.p2x = e, this.p2y = r;
                }
                module.exports = UnitBezier, UnitBezier.prototype.sampleCurveX = function (t) {
                    return ((this.ax * t + this.bx) * t + this.cx) * t;
                }, UnitBezier.prototype.sampleCurveY = function (t) {
                    return ((this.ay * t + this.by) * t + this.cy) * t;
                }, UnitBezier.prototype.sampleCurveDerivativeX = function (t) {
                    return (3 * this.ax * t + 2 * this.bx) * t + this.cx;
                }, UnitBezier.prototype.solveCurveX = function (t, i) {
                    var this$1 = this;
                    void 0 === i && (i = 0.000001);
                    var e, r, s, h, n;
                    for (s = t, n = 0; n < 8; n++) {
                        if (h = this$1.sampleCurveX(s) - t, Math.abs(h) < i) {
                            return s;
                        }
                        var u = this$1.sampleCurveDerivativeX(s);
                        if (Math.abs(u) < 0.000001) {
                            break;
                        }
                        s -= h / u;
                    }
                    if (e = 0, r = 1, (s = t) < e) {
                        return e;
                    }
                    if (s > r) {
                        return r;
                    }
                    for (; e < r;) {
                        if (h = this$1.sampleCurveX(s), Math.abs(h - t) < i) {
                            return s;
                        }
                        t > h ? e = s : r = s, s = 0.5 * (r - e) + e;
                    }
                    return s;
                }, UnitBezier.prototype.solve = function (t, i) {
                    return this.sampleCurveY(this.solveCurveX(t, i));
                };
            },
            {}
        ],
        8: [
            function (_dereq_, module, exports) {
                module.exports.VectorTile = _dereq_('./lib/vectortile.js'), module.exports.VectorTileFeature = _dereq_('./lib/vectortilefeature.js'), module.exports.VectorTileLayer = _dereq_('./lib/vectortilelayer.js');
            },
            {
                './lib/vectortile.js': 9,
                './lib/vectortilefeature.js': 10,
                './lib/vectortilelayer.js': 11
            }
        ],
        9: [
            function (_dereq_, module, exports) {
                'use strict';
                function VectorTile(e, r) {
                    this.layers = e.readFields(readTile, {}, r);
                }
                function readTile(e, r, i) {
                    if (3 === e) {
                        var t = new VectorTileLayer(i, i.readVarint() + i.pos);
                        t.length && (r[t.name] = t);
                    }
                }
                var VectorTileLayer = _dereq_('./vectortilelayer');
                module.exports = VectorTile;
            },
            { './vectortilelayer': 11 }
        ],
        10: [
            function (_dereq_, module, exports) {
                'use strict';
                function VectorTileFeature(e, t, r, a, i) {
                    this.properties = {}, this.extent = r, this.type = 0, this._pbf = e, this._geometry = -1, this._keys = a, this._values = i, e.readFields(readFeature, this, t);
                }
                function readFeature(e, t, r) {
                    1 == e ? t.id = r.readVarint() : 2 == e ? readTag(r, t) : 3 == e ? t.type = r.readVarint() : 4 == e && (t._geometry = r.pos);
                }
                function readTag(e, t) {
                    for (var r = e.readVarint() + e.pos; e.pos < r;) {
                        var a = t._keys[e.readVarint()], i = t._values[e.readVarint()];
                        t.properties[a] = i;
                    }
                }
                function classifyRings(e) {
                    var t = e.length;
                    if (t <= 1) {
                        return [e];
                    }
                    for (var r, a, i = [], o = 0; o < t; o++) {
                        var n = signedArea(e[o]);
                        0 !== n && (void 0 === a && (a = n < 0), a === n < 0 ? (r && i.push(r), r = [e[o]]) : r.push(e[o]));
                    }
                    return r && i.push(r), i;
                }
                function signedArea(e) {
                    for (var t, r, a = 0, i = 0, o = e.length, n = o - 1; i < o; n = i++) {
                        t = e[i], r = e[n], a += (r.x - t.x) * (t.y + r.y);
                    }
                    return a;
                }
                var Point = _dereq_('@mapbox/point-geometry');
                module.exports = VectorTileFeature, VectorTileFeature.types = [
                    'Unknown',
                    'Point',
                    'LineString',
                    'Polygon'
                ], VectorTileFeature.prototype.loadGeometry = function () {
                    var e = this._pbf;
                    e.pos = this._geometry;
                    for (var t, r = e.readVarint() + e.pos, a = 1, i = 0, o = 0, n = 0, s = []; e.pos < r;) {
                        if (!i) {
                            var p = e.readVarint();
                            a = 7 & p, i = p >> 3;
                        }
                        if (i--, 1 === a || 2 === a) {
                            o += e.readSVarint(), n += e.readSVarint(), 1 === a && (t && s.push(t), t = []), t.push(new Point(o, n));
                        } else {
                            if (7 !== a) {
                                throw new Error('unknown command ' + a);
                            }
                            t && t.push(t[0].clone());
                        }
                    }
                    return t && s.push(t), s;
                }, VectorTileFeature.prototype.bbox = function () {
                    var e = this._pbf;
                    e.pos = this._geometry;
                    for (var t = e.readVarint() + e.pos, r = 1, a = 0, i = 0, o = 0, n = 1 / 0, s = -1 / 0, p = 1 / 0, h = -1 / 0; e.pos < t;) {
                        if (!a) {
                            var u = e.readVarint();
                            r = 7 & u, a = u >> 3;
                        }
                        if (a--, 1 === r || 2 === r) {
                            i += e.readSVarint(), o += e.readSVarint(), i < n && (n = i), i > s && (s = i), o < p && (p = o), o > h && (h = o);
                        } else if (7 !== r) {
                            throw new Error('unknown command ' + r);
                        }
                    }
                    return [
                        n,
                        p,
                        s,
                        h
                    ];
                }, VectorTileFeature.prototype.toGeoJSON = function (e, t, r) {
                    function a(e) {
                        for (var t = 0; t < e.length; t++) {
                            var r = e[t], a = 180 - 360 * (r.y + p) / n;
                            e[t] = [
                                360 * (r.x + s) / n - 180,
                                360 / Math.PI * Math.atan(Math.exp(a * Math.PI / 180)) - 90
                            ];
                        }
                    }
                    var i, o, n = this.extent * Math.pow(2, r), s = this.extent * e, p = this.extent * t, h = this.loadGeometry(), u = VectorTileFeature.types[this.type];
                    switch (this.type) {
                    case 1:
                        var d = [];
                        for (i = 0; i < h.length; i++) {
                            d[i] = h[i][0];
                        }
                        h = d, a(h);
                        break;
                    case 2:
                        for (i = 0; i < h.length; i++) {
                            a(h[i]);
                        }
                        break;
                    case 3:
                        for (h = classifyRings(h), i = 0; i < h.length; i++) {
                            for (o = 0; o < h[i].length; o++) {
                                a(h[i][o]);
                            }
                        }
                    }
                    1 === h.length ? h = h[0] : u = 'Multi' + u;
                    var f = {
                        type: 'Feature',
                        geometry: {
                            type: u,
                            coordinates: h
                        },
                        properties: this.properties
                    };
                    return 'id' in this && (f.id = this.id), f;
                };
            },
            { '@mapbox/point-geometry': 4 }
        ],
        11: [
            function (_dereq_, module, exports) {
                'use strict';
                function VectorTileLayer(e, t) {
                    this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = e, this._keys = [], this._values = [], this._features = [], e.readFields(readLayer, this, t), this.length = this._features.length;
                }
                function readLayer(e, t, r) {
                    15 === e ? t.version = r.readVarint() : 1 === e ? t.name = r.readString() : 5 === e ? t.extent = r.readVarint() : 2 === e ? t._features.push(r.pos) : 3 === e ? t._keys.push(r.readString()) : 4 === e && t._values.push(readValueMessage(r));
                }
                function readValueMessage(e) {
                    for (var t = null, r = e.readVarint() + e.pos; e.pos < r;) {
                        var a = e.readVarint() >> 3;
                        t = 1 === a ? e.readString() : 2 === a ? e.readFloat() : 3 === a ? e.readDouble() : 4 === a ? e.readVarint64() : 5 === a ? e.readVarint() : 6 === a ? e.readSVarint() : 7 === a ? e.readBoolean() : null;
                    }
                    return t;
                }
                var VectorTileFeature = _dereq_('./vectortilefeature.js');
                module.exports = VectorTileLayer, VectorTileLayer.prototype.feature = function (e) {
                    if (e < 0 || e >= this._features.length) {
                        throw new Error('feature index out of bounds');
                    }
                    this._pbf.pos = this._features[e];
                    var t = this._pbf.readVarint() + this._pbf.pos;
                    return new VectorTileFeature(this._pbf, t, this.extent, this._keys, this._values);
                };
            },
            { './vectortilefeature.js': 10 }
        ],
        12: [
            function (_dereq_, module, exports) {
                !function (e, t) {
                    'object' == typeof exports && 'undefined' != typeof module ? t(exports) : 'function' == typeof define && define.amd ? define(['exports'], t) : t(e.WhooTS = e.WhooTS || {});
                }(this, function (e) {
                    function t(e, t, r, n, i, s) {
                        return s = s || {}, e + '?' + [
                            'bbox=' + o(r, n, i),
                            'format=' + (s.format || 'image/png'),
                            'service=' + (s.service || 'WMS'),
                            'version=' + (s.version || '1.1.1'),
                            'request=' + (s.request || 'GetMap'),
                            'srs=' + (s.srs || 'EPSG:3857'),
                            'width=' + (s.width || 256),
                            'height=' + (s.height || 256),
                            'layers=' + t
                        ].join('&');
                    }
                    function o(e, t, o) {
                        t = Math.pow(2, o) - t - 1;
                        var n = r(256 * e, 256 * t, o), i = r(256 * (e + 1), 256 * (t + 1), o);
                        return n[0] + ',' + n[1] + ',' + i[0] + ',' + i[1];
                    }
                    function r(e, t, o) {
                        var r = 2 * Math.PI * 6378137 / 256 / Math.pow(2, o);
                        return [
                            e * r - 2 * Math.PI * 6378137 / 2,
                            t * r - 2 * Math.PI * 6378137 / 2
                        ];
                    }
                    e.getURL = t, e.getTileBBox = o, e.getMercCoords = r, Object.defineProperty(e, '__esModule', { value: !0 });
                });
            },
            {}
        ],
        13: [
            function (_dereq_, module, exports) {
                function clamp_css_byte(e) {
                    return e = Math.round(e), e < 0 ? 0 : e > 255 ? 255 : e;
                }
                function clamp_css_float(e) {
                    return e < 0 ? 0 : e > 1 ? 1 : e;
                }
                function parse_css_int(e) {
                    return clamp_css_byte('%' === e[e.length - 1] ? parseFloat(e) / 100 * 255 : parseInt(e));
                }
                function parse_css_float(e) {
                    return clamp_css_float('%' === e[e.length - 1] ? parseFloat(e) / 100 : parseFloat(e));
                }
                function css_hue_to_rgb(e, r, l) {
                    return l < 0 ? l += 1 : l > 1 && (l -= 1), 6 * l < 1 ? e + (r - e) * l * 6 : 2 * l < 1 ? r : 3 * l < 2 ? e + (r - e) * (2 / 3 - l) * 6 : e;
                }
                function parseCSSColor(e) {
                    var r = e.replace(/ /g, '').toLowerCase();
                    if (r in kCSSColorTable) {
                        return kCSSColorTable[r].slice();
                    }
                    if ('#' === r[0]) {
                        if (4 === r.length) {
                            var l = parseInt(r.substr(1), 16);
                            return l >= 0 && l <= 4095 ? [
                                (3840 & l) >> 4 | (3840 & l) >> 8,
                                240 & l | (240 & l) >> 4,
                                15 & l | (15 & l) << 4,
                                1
                            ] : null;
                        }
                        if (7 === r.length) {
                            var l = parseInt(r.substr(1), 16);
                            return l >= 0 && l <= 16777215 ? [
                                (16711680 & l) >> 16,
                                (65280 & l) >> 8,
                                255 & l,
                                1
                            ] : null;
                        }
                        return null;
                    }
                    var a = r.indexOf('('), t = r.indexOf(')');
                    if (-1 !== a && t + 1 === r.length) {
                        var n = r.substr(0, a), s = r.substr(a + 1, t - (a + 1)).split(','), o = 1;
                        switch (n) {
                        case 'rgba':
                            if (4 !== s.length) {
                                return null;
                            }
                            o = parse_css_float(s.pop());
                        case 'rgb':
                            return 3 !== s.length ? null : [
                                parse_css_int(s[0]),
                                parse_css_int(s[1]),
                                parse_css_int(s[2]),
                                o
                            ];
                        case 'hsla':
                            if (4 !== s.length) {
                                return null;
                            }
                            o = parse_css_float(s.pop());
                        case 'hsl':
                            if (3 !== s.length) {
                                return null;
                            }
                            var i = (parseFloat(s[0]) % 360 + 360) % 360 / 360, u = parse_css_float(s[1]), g = parse_css_float(s[2]), d = g <= 0.5 ? g * (u + 1) : g + u - g * u, c = 2 * g - d;
                            return [
                                clamp_css_byte(255 * css_hue_to_rgb(c, d, i + 1 / 3)),
                                clamp_css_byte(255 * css_hue_to_rgb(c, d, i)),
                                clamp_css_byte(255 * css_hue_to_rgb(c, d, i - 1 / 3)),
                                o
                            ];
                        default:
                            return null;
                        }
                    }
                    return null;
                }
                var kCSSColorTable = {
                    transparent: [
                        0,
                        0,
                        0,
                        0
                    ],
                    aliceblue: [
                        240,
                        248,
                        255,
                        1
                    ],
                    antiquewhite: [
                        250,
                        235,
                        215,
                        1
                    ],
                    aqua: [
                        0,
                        255,
                        255,
                        1
                    ],
                    aquamarine: [
                        127,
                        255,
                        212,
                        1
                    ],
                    azure: [
                        240,
                        255,
                        255,
                        1
                    ],
                    beige: [
                        245,
                        245,
                        220,
                        1
                    ],
                    bisque: [
                        255,
                        228,
                        196,
                        1
                    ],
                    black: [
                        0,
                        0,
                        0,
                        1
                    ],
                    blanchedalmond: [
                        255,
                        235,
                        205,
                        1
                    ],
                    blue: [
                        0,
                        0,
                        255,
                        1
                    ],
                    blueviolet: [
                        138,
                        43,
                        226,
                        1
                    ],
                    brown: [
                        165,
                        42,
                        42,
                        1
                    ],
                    burlywood: [
                        222,
                        184,
                        135,
                        1
                    ],
                    cadetblue: [
                        95,
                        158,
                        160,
                        1
                    ],
                    chartreuse: [
                        127,
                        255,
                        0,
                        1
                    ],
                    chocolate: [
                        210,
                        105,
                        30,
                        1
                    ],
                    coral: [
                        255,
                        127,
                        80,
                        1
                    ],
                    cornflowerblue: [
                        100,
                        149,
                        237,
                        1
                    ],
                    cornsilk: [
                        255,
                        248,
                        220,
                        1
                    ],
                    crimson: [
                        220,
                        20,
                        60,
                        1
                    ],
                    cyan: [
                        0,
                        255,
                        255,
                        1
                    ],
                    darkblue: [
                        0,
                        0,
                        139,
                        1
                    ],
                    darkcyan: [
                        0,
                        139,
                        139,
                        1
                    ],
                    darkgoldenrod: [
                        184,
                        134,
                        11,
                        1
                    ],
                    darkgray: [
                        169,
                        169,
                        169,
                        1
                    ],
                    darkgreen: [
                        0,
                        100,
                        0,
                        1
                    ],
                    darkgrey: [
                        169,
                        169,
                        169,
                        1
                    ],
                    darkkhaki: [
                        189,
                        183,
                        107,
                        1
                    ],
                    darkmagenta: [
                        139,
                        0,
                        139,
                        1
                    ],
                    darkolivegreen: [
                        85,
                        107,
                        47,
                        1
                    ],
                    darkorange: [
                        255,
                        140,
                        0,
                        1
                    ],
                    darkorchid: [
                        153,
                        50,
                        204,
                        1
                    ],
                    darkred: [
                        139,
                        0,
                        0,
                        1
                    ],
                    darksalmon: [
                        233,
                        150,
                        122,
                        1
                    ],
                    darkseagreen: [
                        143,
                        188,
                        143,
                        1
                    ],
                    darkslateblue: [
                        72,
                        61,
                        139,
                        1
                    ],
                    darkslategray: [
                        47,
                        79,
                        79,
                        1
                    ],
                    darkslategrey: [
                        47,
                        79,
                        79,
                        1
                    ],
                    darkturquoise: [
                        0,
                        206,
                        209,
                        1
                    ],
                    darkviolet: [
                        148,
                        0,
                        211,
                        1
                    ],
                    deeppink: [
                        255,
                        20,
                        147,
                        1
                    ],
                    deepskyblue: [
                        0,
                        191,
                        255,
                        1
                    ],
                    dimgray: [
                        105,
                        105,
                        105,
                        1
                    ],
                    dimgrey: [
                        105,
                        105,
                        105,
                        1
                    ],
                    dodgerblue: [
                        30,
                        144,
                        255,
                        1
                    ],
                    firebrick: [
                        178,
                        34,
                        34,
                        1
                    ],
                    floralwhite: [
                        255,
                        250,
                        240,
                        1
                    ],
                    forestgreen: [
                        34,
                        139,
                        34,
                        1
                    ],
                    fuchsia: [
                        255,
                        0,
                        255,
                        1
                    ],
                    gainsboro: [
                        220,
                        220,
                        220,
                        1
                    ],
                    ghostwhite: [
                        248,
                        248,
                        255,
                        1
                    ],
                    gold: [
                        255,
                        215,
                        0,
                        1
                    ],
                    goldenrod: [
                        218,
                        165,
                        32,
                        1
                    ],
                    gray: [
                        128,
                        128,
                        128,
                        1
                    ],
                    green: [
                        0,
                        128,
                        0,
                        1
                    ],
                    greenyellow: [
                        173,
                        255,
                        47,
                        1
                    ],
                    grey: [
                        128,
                        128,
                        128,
                        1
                    ],
                    honeydew: [
                        240,
                        255,
                        240,
                        1
                    ],
                    hotpink: [
                        255,
                        105,
                        180,
                        1
                    ],
                    indianred: [
                        205,
                        92,
                        92,
                        1
                    ],
                    indigo: [
                        75,
                        0,
                        130,
                        1
                    ],
                    ivory: [
                        255,
                        255,
                        240,
                        1
                    ],
                    khaki: [
                        240,
                        230,
                        140,
                        1
                    ],
                    lavender: [
                        230,
                        230,
                        250,
                        1
                    ],
                    lavenderblush: [
                        255,
                        240,
                        245,
                        1
                    ],
                    lawngreen: [
                        124,
                        252,
                        0,
                        1
                    ],
                    lemonchiffon: [
                        255,
                        250,
                        205,
                        1
                    ],
                    lightblue: [
                        173,
                        216,
                        230,
                        1
                    ],
                    lightcoral: [
                        240,
                        128,
                        128,
                        1
                    ],
                    lightcyan: [
                        224,
                        255,
                        255,
                        1
                    ],
                    lightgoldenrodyellow: [
                        250,
                        250,
                        210,
                        1
                    ],
                    lightgray: [
                        211,
                        211,
                        211,
                        1
                    ],
                    lightgreen: [
                        144,
                        238,
                        144,
                        1
                    ],
                    lightgrey: [
                        211,
                        211,
                        211,
                        1
                    ],
                    lightpink: [
                        255,
                        182,
                        193,
                        1
                    ],
                    lightsalmon: [
                        255,
                        160,
                        122,
                        1
                    ],
                    lightseagreen: [
                        32,
                        178,
                        170,
                        1
                    ],
                    lightskyblue: [
                        135,
                        206,
                        250,
                        1
                    ],
                    lightslategray: [
                        119,
                        136,
                        153,
                        1
                    ],
                    lightslategrey: [
                        119,
                        136,
                        153,
                        1
                    ],
                    lightsteelblue: [
                        176,
                        196,
                        222,
                        1
                    ],
                    lightyellow: [
                        255,
                        255,
                        224,
                        1
                    ],
                    lime: [
                        0,
                        255,
                        0,
                        1
                    ],
                    limegreen: [
                        50,
                        205,
                        50,
                        1
                    ],
                    linen: [
                        250,
                        240,
                        230,
                        1
                    ],
                    magenta: [
                        255,
                        0,
                        255,
                        1
                    ],
                    maroon: [
                        128,
                        0,
                        0,
                        1
                    ],
                    mediumaquamarine: [
                        102,
                        205,
                        170,
                        1
                    ],
                    mediumblue: [
                        0,
                        0,
                        205,
                        1
                    ],
                    mediumorchid: [
                        186,
                        85,
                        211,
                        1
                    ],
                    mediumpurple: [
                        147,
                        112,
                        219,
                        1
                    ],
                    mediumseagreen: [
                        60,
                        179,
                        113,
                        1
                    ],
                    mediumslateblue: [
                        123,
                        104,
                        238,
                        1
                    ],
                    mediumspringgreen: [
                        0,
                        250,
                        154,
                        1
                    ],
                    mediumturquoise: [
                        72,
                        209,
                        204,
                        1
                    ],
                    mediumvioletred: [
                        199,
                        21,
                        133,
                        1
                    ],
                    midnightblue: [
                        25,
                        25,
                        112,
                        1
                    ],
                    mintcream: [
                        245,
                        255,
                        250,
                        1
                    ],
                    mistyrose: [
                        255,
                        228,
                        225,
                        1
                    ],
                    moccasin: [
                        255,
                        228,
                        181,
                        1
                    ],
                    navajowhite: [
                        255,
                        222,
                        173,
                        1
                    ],
                    navy: [
                        0,
                        0,
                        128,
                        1
                    ],
                    oldlace: [
                        253,
                        245,
                        230,
                        1
                    ],
                    olive: [
                        128,
                        128,
                        0,
                        1
                    ],
                    olivedrab: [
                        107,
                        142,
                        35,
                        1
                    ],
                    orange: [
                        255,
                        165,
                        0,
                        1
                    ],
                    orangered: [
                        255,
                        69,
                        0,
                        1
                    ],
                    orchid: [
                        218,
                        112,
                        214,
                        1
                    ],
                    palegoldenrod: [
                        238,
                        232,
                        170,
                        1
                    ],
                    palegreen: [
                        152,
                        251,
                        152,
                        1
                    ],
                    paleturquoise: [
                        175,
                        238,
                        238,
                        1
                    ],
                    palevioletred: [
                        219,
                        112,
                        147,
                        1
                    ],
                    papayawhip: [
                        255,
                        239,
                        213,
                        1
                    ],
                    peachpuff: [
                        255,
                        218,
                        185,
                        1
                    ],
                    peru: [
                        205,
                        133,
                        63,
                        1
                    ],
                    pink: [
                        255,
                        192,
                        203,
                        1
                    ],
                    plum: [
                        221,
                        160,
                        221,
                        1
                    ],
                    powderblue: [
                        176,
                        224,
                        230,
                        1
                    ],
                    purple: [
                        128,
                        0,
                        128,
                        1
                    ],
                    rebeccapurple: [
                        102,
                        51,
                        153,
                        1
                    ],
                    red: [
                        255,
                        0,
                        0,
                        1
                    ],
                    rosybrown: [
                        188,
                        143,
                        143,
                        1
                    ],
                    royalblue: [
                        65,
                        105,
                        225,
                        1
                    ],
                    saddlebrown: [
                        139,
                        69,
                        19,
                        1
                    ],
                    salmon: [
                        250,
                        128,
                        114,
                        1
                    ],
                    sandybrown: [
                        244,
                        164,
                        96,
                        1
                    ],
                    seagreen: [
                        46,
                        139,
                        87,
                        1
                    ],
                    seashell: [
                        255,
                        245,
                        238,
                        1
                    ],
                    sienna: [
                        160,
                        82,
                        45,
                        1
                    ],
                    silver: [
                        192,
                        192,
                        192,
                        1
                    ],
                    skyblue: [
                        135,
                        206,
                        235,
                        1
                    ],
                    slateblue: [
                        106,
                        90,
                        205,
                        1
                    ],
                    slategray: [
                        112,
                        128,
                        144,
                        1
                    ],
                    slategrey: [
                        112,
                        128,
                        144,
                        1
                    ],
                    snow: [
                        255,
                        250,
                        250,
                        1
                    ],
                    springgreen: [
                        0,
                        255,
                        127,
                        1
                    ],
                    steelblue: [
                        70,
                        130,
                        180,
                        1
                    ],
                    tan: [
                        210,
                        180,
                        140,
                        1
                    ],
                    teal: [
                        0,
                        128,
                        128,
                        1
                    ],
                    thistle: [
                        216,
                        191,
                        216,
                        1
                    ],
                    tomato: [
                        255,
                        99,
                        71,
                        1
                    ],
                    turquoise: [
                        64,
                        224,
                        208,
                        1
                    ],
                    violet: [
                        238,
                        130,
                        238,
                        1
                    ],
                    wheat: [
                        245,
                        222,
                        179,
                        1
                    ],
                    white: [
                        255,
                        255,
                        255,
                        1
                    ],
                    whitesmoke: [
                        245,
                        245,
                        245,
                        1
                    ],
                    yellow: [
                        255,
                        255,
                        0,
                        1
                    ],
                    yellowgreen: [
                        154,
                        205,
                        50,
                        1
                    ]
                };
                try {
                    exports.parseCSSColor = parseCSSColor;
                } catch (e) {
                }
            },
            {}
        ],
        14: [
            function (_dereq_, module, exports) {
                'use strict';
                function earcut(e, n, r) {
                    r = r || 2;
                    var t = n && n.length, i = t ? n[0] * r : e.length, x = linkedList(e, 0, i, r, !0), a = [];
                    if (!x) {
                        return a;
                    }
                    var o, l, u, s, v, f, y;
                    if (t && (x = eliminateHoles(e, n, x, r)), e.length > 80 * r) {
                        o = u = e[0], l = s = e[1];
                        for (var p = r; p < i; p += r) {
                            v = e[p], f = e[p + 1], v < o && (o = v), f < l && (l = f), v > u && (u = v), f > s && (s = f);
                        }
                        y = Math.max(u - o, s - l), y = 0 !== y ? 1 / y : 0;
                    }
                    return earcutLinked(x, a, r, o, l, y), a;
                }
                function linkedList(e, n, r, t, i) {
                    var x, a;
                    if (i === signedArea(e, n, r, t) > 0) {
                        for (x = n; x < r; x += t) {
                            a = insertNode(x, e[x], e[x + 1], a);
                        }
                    } else {
                        for (x = r - t; x >= n; x -= t) {
                            a = insertNode(x, e[x], e[x + 1], a);
                        }
                    }
                    return a && equals(a, a.next) && (removeNode(a), a = a.next), a;
                }
                function filterPoints(e, n) {
                    if (!e) {
                        return e;
                    }
                    n || (n = e);
                    var r, t = e;
                    do {
                        if (r = !1, t.steiner || !equals(t, t.next) && 0 !== area(t.prev, t, t.next)) {
                            t = t.next;
                        } else {
                            if (removeNode(t), (t = n = t.prev) === t.next) {
                                break;
                            }
                            r = !0;
                        }
                    } while (r || t !== n);
                    return n;
                }
                function earcutLinked(e, n, r, t, i, x, a) {
                    if (e) {
                        !a && x && indexCurve(e, t, i, x);
                        for (var o, l, u = e; e.prev !== e.next;) {
                            if (o = e.prev, l = e.next, x ? isEarHashed(e, t, i, x) : isEar(e)) {
                                n.push(o.i / r), n.push(e.i / r), n.push(l.i / r), removeNode(e), e = l.next, u = l.next;
                            } else if ((e = l) === u) {
                                a ? 1 === a ? (e = cureLocalIntersections(e, n, r), earcutLinked(e, n, r, t, i, x, 2)) : 2 === a && splitEarcut(e, n, r, t, i, x) : earcutLinked(filterPoints(e), n, r, t, i, x, 1);
                                break;
                            }
                        }
                    }
                }
                function isEar(e) {
                    var n = e.prev, r = e, t = e.next;
                    if (area(n, r, t) >= 0) {
                        return !1;
                    }
                    for (var i = e.next.next; i !== e.prev;) {
                        if (pointInTriangle(n.x, n.y, r.x, r.y, t.x, t.y, i.x, i.y) && area(i.prev, i, i.next) >= 0) {
                            return !1;
                        }
                        i = i.next;
                    }
                    return !0;
                }
                function isEarHashed(e, n, r, t) {
                    var i = e.prev, x = e, a = e.next;
                    if (area(i, x, a) >= 0) {
                        return !1;
                    }
                    for (var o = i.x < x.x ? i.x < a.x ? i.x : a.x : x.x < a.x ? x.x : a.x, l = i.y < x.y ? i.y < a.y ? i.y : a.y : x.y < a.y ? x.y : a.y, u = i.x > x.x ? i.x > a.x ? i.x : a.x : x.x > a.x ? x.x : a.x, s = i.y > x.y ? i.y > a.y ? i.y : a.y : x.y > a.y ? x.y : a.y, v = zOrder(o, l, n, r, t), f = zOrder(u, s, n, r, t), y = e.prevZ, p = e.nextZ; y && y.z >= v && p && p.z <= f;) {
                        if (y !== e.prev && y !== e.next && pointInTriangle(i.x, i.y, x.x, x.y, a.x, a.y, y.x, y.y) && area(y.prev, y, y.next) >= 0) {
                            return !1;
                        }
                        if (y = y.prevZ, p !== e.prev && p !== e.next && pointInTriangle(i.x, i.y, x.x, x.y, a.x, a.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) {
                            return !1;
                        }
                        p = p.nextZ;
                    }
                    for (; y && y.z >= v;) {
                        if (y !== e.prev && y !== e.next && pointInTriangle(i.x, i.y, x.x, x.y, a.x, a.y, y.x, y.y) && area(y.prev, y, y.next) >= 0) {
                            return !1;
                        }
                        y = y.prevZ;
                    }
                    for (; p && p.z <= f;) {
                        if (p !== e.prev && p !== e.next && pointInTriangle(i.x, i.y, x.x, x.y, a.x, a.y, p.x, p.y) && area(p.prev, p, p.next) >= 0) {
                            return !1;
                        }
                        p = p.nextZ;
                    }
                    return !0;
                }
                function cureLocalIntersections(e, n, r) {
                    var t = e;
                    do {
                        var i = t.prev, x = t.next.next;
                        !equals(i, x) && intersects(i, t, t.next, x) && locallyInside(i, x) && locallyInside(x, i) && (n.push(i.i / r), n.push(t.i / r), n.push(x.i / r), removeNode(t), removeNode(t.next), t = e = x), t = t.next;
                    } while (t !== e);
                    return t;
                }
                function splitEarcut(e, n, r, t, i, x) {
                    var a = e;
                    do {
                        for (var o = a.next.next; o !== a.prev;) {
                            if (a.i !== o.i && isValidDiagonal(a, o)) {
                                var l = splitPolygon(a, o);
                                return a = filterPoints(a, a.next), l = filterPoints(l, l.next), earcutLinked(a, n, r, t, i, x), void earcutLinked(l, n, r, t, i, x);
                            }
                            o = o.next;
                        }
                        a = a.next;
                    } while (a !== e);
                }
                function eliminateHoles(e, n, r, t) {
                    var i, x, a, o, l, u = [];
                    for (i = 0, x = n.length; i < x; i++) {
                        a = n[i] * t, o = i < x - 1 ? n[i + 1] * t : e.length, l = linkedList(e, a, o, t, !1), l === l.next && (l.steiner = !0), u.push(getLeftmost(l));
                    }
                    for (u.sort(compareX), i = 0; i < u.length; i++) {
                        eliminateHole(u[i], r), r = filterPoints(r, r.next);
                    }
                    return r;
                }
                function compareX(e, n) {
                    return e.x - n.x;
                }
                function eliminateHole(e, n) {
                    if (n = findHoleBridge(e, n)) {
                        var r = splitPolygon(n, e);
                        filterPoints(r, r.next);
                    }
                }
                function findHoleBridge(e, n) {
                    var r, t = n, i = e.x, x = e.y, a = -1 / 0;
                    do {
                        if (x <= t.y && x >= t.next.y && t.next.y !== t.y) {
                            var o = t.x + (x - t.y) * (t.next.x - t.x) / (t.next.y - t.y);
                            if (o <= i && o > a) {
                                if (a = o, o === i) {
                                    if (x === t.y) {
                                        return t;
                                    }
                                    if (x === t.next.y) {
                                        return t.next;
                                    }
                                }
                                r = t.x < t.next.x ? t : t.next;
                            }
                        }
                        t = t.next;
                    } while (t !== n);
                    if (!r) {
                        return null;
                    }
                    if (i === a) {
                        return r.prev;
                    }
                    var l, u = r, s = r.x, v = r.y, f = 1 / 0;
                    for (t = r.next; t !== u;) {
                        i >= t.x && t.x >= s && i !== t.x && pointInTriangle(x < v ? i : a, x, s, v, x < v ? a : i, x, t.x, t.y) && ((l = Math.abs(x - t.y) / (i - t.x)) < f || l === f && t.x > r.x) && locallyInside(t, e) && (r = t, f = l), t = t.next;
                    }
                    return r;
                }
                function indexCurve(e, n, r, t) {
                    var i = e;
                    do {
                        null === i.z && (i.z = zOrder(i.x, i.y, n, r, t)), i.prevZ = i.prev, i.nextZ = i.next, i = i.next;
                    } while (i !== e);
                    i.prevZ.nextZ = null, i.prevZ = null, sortLinked(i);
                }
                function sortLinked(e) {
                    var n, r, t, i, x, a, o, l, u = 1;
                    do {
                        for (r = e, e = null, x = null, a = 0; r;) {
                            for (a++, t = r, o = 0, n = 0; n < u && (o++, t = t.nextZ); n++) {
                                ;
                            }
                            for (l = u; o > 0 || l > 0 && t;) {
                                0 !== o && (0 === l || !t || r.z <= t.z) ? (i = r, r = r.nextZ, o--) : (i = t, t = t.nextZ, l--), x ? x.nextZ = i : e = i, i.prevZ = x, x = i;
                            }
                            r = t;
                        }
                        x.nextZ = null, u *= 2;
                    } while (a > 1);
                    return e;
                }
                function zOrder(e, n, r, t, i) {
                    return e = 32767 * (e - r) * i, n = 32767 * (n - t) * i, e = 16711935 & (e | e << 8), e = 252645135 & (e | e << 4), e = 858993459 & (e | e << 2), e = 1431655765 & (e | e << 1), n = 16711935 & (n | n << 8), n = 252645135 & (n | n << 4), n = 858993459 & (n | n << 2), n = 1431655765 & (n | n << 1), e | n << 1;
                }
                function getLeftmost(e) {
                    var n = e, r = e;
                    do {
                        n.x < r.x && (r = n), n = n.next;
                    } while (n !== e);
                    return r;
                }
                function pointInTriangle(e, n, r, t, i, x, a, o) {
                    return (i - a) * (n - o) - (e - a) * (x - o) >= 0 && (e - a) * (t - o) - (r - a) * (n - o) >= 0 && (r - a) * (x - o) - (i - a) * (t - o) >= 0;
                }
                function isValidDiagonal(e, n) {
                    return e.next.i !== n.i && e.prev.i !== n.i && !intersectsPolygon(e, n) && locallyInside(e, n) && locallyInside(n, e) && middleInside(e, n);
                }
                function area(e, n, r) {
                    return (n.y - e.y) * (r.x - n.x) - (n.x - e.x) * (r.y - n.y);
                }
                function equals(e, n) {
                    return e.x === n.x && e.y === n.y;
                }
                function intersects(e, n, r, t) {
                    return !!(equals(e, n) && equals(r, t) || equals(e, t) && equals(r, n)) || area(e, n, r) > 0 != area(e, n, t) > 0 && area(r, t, e) > 0 != area(r, t, n) > 0;
                }
                function intersectsPolygon(e, n) {
                    var r = e;
                    do {
                        if (r.i !== e.i && r.next.i !== e.i && r.i !== n.i && r.next.i !== n.i && intersects(r, r.next, e, n)) {
                            return !0;
                        }
                        r = r.next;
                    } while (r !== e);
                    return !1;
                }
                function locallyInside(e, n) {
                    return area(e.prev, e, e.next) < 0 ? area(e, n, e.next) >= 0 && area(e, e.prev, n) >= 0 : area(e, n, e.prev) < 0 || area(e, e.next, n) < 0;
                }
                function middleInside(e, n) {
                    var r = e, t = !1, i = (e.x + n.x) / 2, x = (e.y + n.y) / 2;
                    do {
                        r.y > x != r.next.y > x && r.next.y !== r.y && i < (r.next.x - r.x) * (x - r.y) / (r.next.y - r.y) + r.x && (t = !t), r = r.next;
                    } while (r !== e);
                    return t;
                }
                function splitPolygon(e, n) {
                    var r = new Node(e.i, e.x, e.y), t = new Node(n.i, n.x, n.y), i = e.next, x = n.prev;
                    return e.next = n, n.prev = e, r.next = i, i.prev = r, t.next = r, r.prev = t, x.next = t, t.prev = x, t;
                }
                function insertNode(e, n, r, t) {
                    var i = new Node(e, n, r);
                    return t ? (i.next = t.next, i.prev = t, t.next.prev = i, t.next = i) : (i.prev = i, i.next = i), i;
                }
                function removeNode(e) {
                    e.next.prev = e.prev, e.prev.next = e.next, e.prevZ && (e.prevZ.nextZ = e.nextZ), e.nextZ && (e.nextZ.prevZ = e.prevZ);
                }
                function Node(e, n, r) {
                    this.i = e, this.x = n, this.y = r, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1;
                }
                function signedArea(e, n, r, t) {
                    for (var i = 0, x = n, a = r - t; x < r; x += t) {
                        i += (e[a] - e[x]) * (e[x + 1] + e[a + 1]), a = x;
                    }
                    return i;
                }
                module.exports = earcut, module.exports.default = earcut, earcut.deviation = function (e, n, r, t) {
                    var i = n && n.length, x = i ? n[0] * r : e.length, a = Math.abs(signedArea(e, 0, x, r));
                    if (i) {
                        for (var o = 0, l = n.length; o < l; o++) {
                            var u = n[o] * r, s = o < l - 1 ? n[o + 1] * r : e.length;
                            a -= Math.abs(signedArea(e, u, s, r));
                        }
                    }
                    var v = 0;
                    for (o = 0; o < t.length; o += 3) {
                        var f = t[o] * r, y = t[o + 1] * r, p = t[o + 2] * r;
                        v += Math.abs((e[f] - e[p]) * (e[y + 1] - e[f + 1]) - (e[f] - e[y]) * (e[p + 1] - e[f + 1]));
                    }
                    return 0 === a && 0 === v ? 0 : Math.abs((v - a) / a);
                }, earcut.flatten = function (e) {
                    for (var n = e[0][0].length, r = {
                                vertices: [],
                                holes: [],
                                dimensions: n
                            }, t = 0, i = 0; i < e.length; i++) {
                        for (var x = 0; x < e[i].length; x++) {
                            for (var a = 0; a < n; a++) {
                                r.vertices.push(e[i][x][a]);
                            }
                        }
                        i > 0 && (t += e[i - 1].length, r.holes.push(t));
                    }
                    return r;
                };
            },
            {}
        ],
        15: [
            function (_dereq_, module, exports) {
                function rewind(r, e) {
                    switch (r && r.type || null) {
                    case 'FeatureCollection':
                        return r.features = r.features.map(curryOuter(rewind, e)), r;
                    case 'Feature':
                        return r.geometry = rewind(r.geometry, e), r;
                    case 'Polygon':
                    case 'MultiPolygon':
                        return correct(r, e);
                    default:
                        return r;
                    }
                }
                function curryOuter(r, e) {
                    return function (n) {
                        return r(n, e);
                    };
                }
                function correct(r, e) {
                    return 'Polygon' === r.type ? r.coordinates = correctRings(r.coordinates, e) : 'MultiPolygon' === r.type && (r.coordinates = r.coordinates.map(curryOuter(correctRings, e))), r;
                }
                function correctRings(r, e) {
                    e = !!e, r[0] = wind(r[0], e);
                    for (var n = 1; n < r.length; n++) {
                        r[n] = wind(r[n], !e);
                    }
                    return r;
                }
                function wind(r, e) {
                    return cw(r) === e ? r : r.reverse();
                }
                function cw(r) {
                    return geojsonArea.ring(r) >= 0;
                }
                var geojsonArea = _dereq_('@mapbox/geojson-area');
                module.exports = rewind;
            },
            { '@mapbox/geojson-area': 1 }
        ],
        16: [
            function (_dereq_, module, exports) {
                'use strict';
                function clip(i, n, e, t, l, r, u) {
                    if (e /= n, t /= n, r >= e && u <= t) {
                        return i;
                    }
                    if (r > t || u < e) {
                        return null;
                    }
                    for (var s = [], o = 0; o < i.length; o++) {
                        var h = i[o], p = h.geometry, c = h.type, a = 0 === l ? h.minX : h.minY, g = 0 === l ? h.maxX : h.maxY;
                        if (a >= e && g <= t) {
                            s.push(h);
                        } else if (!(a > t || g < e)) {
                            var f = [];
                            if ('Point' === c || 'MultiPoint' === c) {
                                clipPoints(p, f, e, t, l);
                            } else if ('LineString' === c) {
                                clipLine(p, f, e, t, l, !1);
                            } else if ('MultiLineString' === c) {
                                clipLines(p, f, e, t, l, !1);
                            } else if ('Polygon' === c) {
                                clipLines(p, f, e, t, l, !0);
                            } else if ('MultiPolygon' === c) {
                                for (var P = 0; P < p.length; P++) {
                                    var L = [];
                                    clipLines(p[P], L, e, t, l, !0), L.length && f.push(L);
                                }
                            }
                            f.length && ('LineString' !== c && 'MultiLineString' !== c || (1 === f.length ? (c = 'LineString', f = f[0]) : c = 'MultiLineString'), 'Point' !== c && 'MultiPoint' !== c || (c = 3 === f.length ? 'Point' : 'MultiPoint'), s.push(createFeature(h.id, c, f, h.tags)));
                        }
                    }
                    return s.length ? s : null;
                }
                function clipPoints(i, n, e, t, l) {
                    for (var r = 0; r < i.length; r += 3) {
                        var u = i[r + l];
                        u >= e && u <= t && (n.push(i[r]), n.push(i[r + 1]), n.push(i[r + 2]));
                    }
                }
                function clipLine(i, n, e, t, l, r) {
                    for (var u = [], s = 0 === l ? intersectX : intersectY, o = 0; o < i.length - 3; o += 3) {
                        var h = i[o], p = i[o + 1], c = i[o + 2], a = i[o + 3], g = i[o + 4], f = 0 === l ? h : p, P = 0 === l ? a : g, L = !1;
                        f < e ? P >= e && s(u, h, p, a, g, e) : f > t ? P <= t && s(u, h, p, a, g, t) : addPoint(u, h, p, c), P < e && f >= e && (s(u, h, p, a, g, e), L = !0), P > t && f <= t && (s(u, h, p, a, g, t), L = !0), !r && L && (u.size = i.size, n.push(u), u = []);
                    }
                    var v = i.length - 3;
                    h = i[v], p = i[v + 1], c = i[v + 2], f = 0 === l ? h : p, f >= e && f <= t && addPoint(u, h, p, c), v = u.length - 3, r && v >= 3 && (u[v] !== u[0] || u[v + 1] !== u[1]) && addPoint(u, u[0], u[1], u[2]), u.length && (u.size = i.size, n.push(u));
                }
                function clipLines(i, n, e, t, l, r) {
                    for (var u = 0; u < i.length; u++) {
                        clipLine(i[u], n, e, t, l, r);
                    }
                }
                function addPoint(i, n, e, t) {
                    i.push(n), i.push(e), i.push(t);
                }
                function intersectX(i, n, e, t, l, r) {
                    i.push(r), i.push(e + (r - n) * (l - e) / (t - n)), i.push(1);
                }
                function intersectY(i, n, e, t, l, r) {
                    i.push(n + (r - e) * (t - n) / (l - e)), i.push(r), i.push(1);
                }
                module.exports = clip;
                var createFeature = _dereq_('./feature');
            },
            { './feature': 18 }
        ],
        17: [
            function (_dereq_, module, exports) {
                'use strict';
                function convert(e, t) {
                    var r = [];
                    if ('FeatureCollection' === e.type) {
                        for (var o = 0; o < e.features.length; o++) {
                            convertFeature(r, e.features[o], t);
                        }
                    } else {
                        'Feature' === e.type ? convertFeature(r, e, t) : convertFeature(r, { geometry: e }, t);
                    }
                    return r;
                }
                function convertFeature(e, t, r) {
                    if (t.geometry) {
                        var o = t.geometry.coordinates, n = t.geometry.type, i = r * r, a = [];
                        if ('Point' === n) {
                            convertPoint(o, a);
                        } else if ('MultiPoint' === n) {
                            for (var u = 0; u < o.length; u++) {
                                convertPoint(o[u], a);
                            }
                        } else if ('LineString' === n) {
                            convertLine(o, a, i, !1);
                        } else if ('MultiLineString' === n) {
                            convertLines(o, a, i, !1);
                        } else if ('Polygon' === n) {
                            convertLines(o, a, i, !0);
                        } else {
                            if ('MultiPolygon' !== n) {
                                if ('GeometryCollection' === n) {
                                    for (u = 0; u < t.geometry.geometries.length; u++) {
                                        convertFeature(e, {
                                            geometry: t.geometry.geometries[u],
                                            properties: t.properties
                                        }, r);
                                    }
                                    return;
                                }
                                throw new Error('Input data is not a valid GeoJSON object.');
                            }
                            for (u = 0; u < o.length; u++) {
                                var s = [];
                                convertLines(o[u], s, i, !0), a.push(s);
                            }
                        }
                        e.push(createFeature(t.id, n, a, t.properties));
                    }
                }
                function convertPoint(e, t) {
                    t.push(projectX(e[0])), t.push(projectY(e[1])), t.push(0);
                }
                function convertLine(e, t, r, o) {
                    for (var n, i, a = 0, u = 0; u < e.length; u++) {
                        var s = projectX(e[u][0]), c = projectY(e[u][1]);
                        t.push(s), t.push(c), t.push(0), u > 0 && (a += o ? (n * c - s * i) / 2 : Math.sqrt(Math.pow(s - n, 2) + Math.pow(c - i, 2))), n = s, i = c;
                    }
                    var p = t.length - 3;
                    t[2] = 1, simplify(t, 0, p, r), t[p + 2] = 1, t.size = Math.abs(a);
                }
                function convertLines(e, t, r, o) {
                    for (var n = 0; n < e.length; n++) {
                        var i = [];
                        convertLine(e[n], i, r, o), t.push(i);
                    }
                }
                function projectX(e) {
                    return e / 360 + 0.5;
                }
                function projectY(e) {
                    var t = Math.sin(e * Math.PI / 180), r = 0.5 - 0.25 * Math.log((1 + t) / (1 - t)) / Math.PI;
                    return r < 0 ? 0 : r > 1 ? 1 : r;
                }
                module.exports = convert;
                var simplify = _dereq_('./simplify'), createFeature = _dereq_('./feature');
            },
            {
                './feature': 18,
                './simplify': 20
            }
        ],
        18: [
            function (_dereq_, module, exports) {
                'use strict';
                function createFeature(e, n, t, i) {
                    var a = {
                        id: e || null,
                        type: n,
                        geometry: t,
                        tags: i,
                        minX: 1 / 0,
                        minY: 1 / 0,
                        maxX: -1 / 0,
                        maxY: -1 / 0
                    };
                    return calcBBox(a), a;
                }
                function calcBBox(e) {
                    var n = e.geometry, t = e.type;
                    if ('Point' === t || 'MultiPoint' === t || 'LineString' === t) {
                        calcLineBBox(e, n);
                    } else if ('Polygon' === t || 'MultiLineString' === t) {
                        for (var i = 0; i < n.length; i++) {
                            calcLineBBox(e, n[i]);
                        }
                    } else if ('MultiPolygon' === t) {
                        for (i = 0; i < n.length; i++) {
                            for (var a = 0; a < n[i].length; a++) {
                                calcLineBBox(e, n[i][a]);
                            }
                        }
                    }
                }
                function calcLineBBox(e, n) {
                    for (var t = 0; t < n.length; t += 3) {
                        e.minX = Math.min(e.minX, n[t]), e.minY = Math.min(e.minY, n[t + 1]), e.maxX = Math.max(e.maxX, n[t]), e.maxY = Math.max(e.maxY, n[t + 1]);
                    }
                }
                module.exports = createFeature;
            },
            {}
        ],
        19: [
            function (_dereq_, module, exports) {
                'use strict';
                function geojsonvt(e, t) {
                    return new GeoJSONVT(e, t);
                }
                function GeoJSONVT(e, t) {
                    t = this.options = extend(Object.create(this.options), t);
                    var o = t.debug;
                    if (o && console.time('preprocess data'), t.maxZoom < 0 || t.maxZoom > 24) {
                        throw new Error('maxZoom should be in the 0-24 range');
                    }
                    var i = 1 << t.maxZoom, n = convert(e, t.tolerance / (i * t.extent));
                    this.tiles = {}, this.tileCoords = [], o && (console.timeEnd('preprocess data'), console.log('index: maxZoom: %d, maxPoints: %d', t.indexMaxZoom, t.indexMaxPoints), console.time('generate tiles'), this.stats = {}, this.total = 0), n = wrap(n, t.buffer / t.extent), n.length && this.splitTile(n, 0, 0, 0), o && (n.length && console.log('features: %d, points: %d', this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd('generate tiles'), console.log('tiles generated:', this.total, JSON.stringify(this.stats)));
                }
                function toID(e, t, o) {
                    return 32 * ((1 << e) * o + t) + e;
                }
                function extend(e, t) {
                    for (var o in t) {
                        e[o] = t[o];
                    }
                    return e;
                }
                module.exports = geojsonvt;
                var convert = _dereq_('./convert'), transform = _dereq_('./transform'), clip = _dereq_('./clip'), wrap = _dereq_('./wrap'), createTile = _dereq_('./tile');
                GeoJSONVT.prototype.options = {
                    maxZoom: 14,
                    indexMaxZoom: 5,
                    indexMaxPoints: 100000,
                    tolerance: 3,
                    extent: 4096,
                    buffer: 64,
                    debug: 0
                }, GeoJSONVT.prototype.splitTile = function (e, t, o, i, n, s, l) {
                    var this$1 = this;
                    for (var r = [
                                e,
                                t,
                                o,
                                i
                            ], a = this.options, u = a.debug; r.length;) {
                        i = r.pop(), o = r.pop(), t = r.pop(), e = r.pop();
                        var m = 1 << t, c = toID(t, o, i), p = this$1.tiles[c], d = t === a.maxZoom ? 0 : a.tolerance / (m * a.extent);
                        if (!p && (u > 1 && console.time('creation'), p = this$1.tiles[c] = createTile(e, m, o, i, d, t === a.maxZoom), this$1.tileCoords.push({
                                z: t,
                                x: o,
                                y: i
                            }), u)) {
                            u > 1 && (console.log('tile z%d-%d-%d (features: %d, points: %d, simplified: %d)', t, o, i, p.numFeatures, p.numPoints, p.numSimplified), console.timeEnd('creation'));
                            var h = 'z' + t;
                            this$1.stats[h] = (this$1.stats[h] || 0) + 1, this$1.total++;
                        }
                        if (p.source = e, n) {
                            if (t === a.maxZoom || t === n) {
                                continue;
                            }
                            var x = 1 << n - t;
                            if (o !== Math.floor(s / x) || i !== Math.floor(l / x)) {
                                continue;
                            }
                        } else if (t === a.indexMaxZoom || p.numPoints <= a.indexMaxPoints) {
                            continue;
                        }
                        if (p.source = null, 0 !== e.length) {
                            u > 1 && console.time('clipping');
                            var f, g, v, Z, T, M, b = 0.5 * a.buffer / a.extent, w = 0.5 - b, Y = 0.5 + b, O = 1 + b;
                            f = g = v = Z = null, T = clip(e, m, o - b, o + Y, 0, p.minX, p.maxX), M = clip(e, m, o + w, o + O, 0, p.minX, p.maxX), e = null, T && (f = clip(T, m, i - b, i + Y, 1, p.minY, p.maxY), g = clip(T, m, i + w, i + O, 1, p.minY, p.maxY), T = null), M && (v = clip(M, m, i - b, i + Y, 1, p.minY, p.maxY), Z = clip(M, m, i + w, i + O, 1, p.minY, p.maxY), M = null), u > 1 && console.timeEnd('clipping'), r.push(f || [], t + 1, 2 * o, 2 * i), r.push(g || [], t + 1, 2 * o, 2 * i + 1), r.push(v || [], t + 1, 2 * o + 1, 2 * i), r.push(Z || [], t + 1, 2 * o + 1, 2 * i + 1);
                        }
                    }
                }, GeoJSONVT.prototype.getTile = function (e, t, o) {
                    var this$1 = this;
                    var i = this.options, n = i.extent, s = i.debug;
                    if (e < 0 || e > 24) {
                        return null;
                    }
                    var l = 1 << e;
                    t = (t % l + l) % l;
                    var r = toID(e, t, o);
                    if (this.tiles[r]) {
                        return transform.tile(this.tiles[r], n);
                    }
                    s > 1 && console.log('drilling down to z%d-%d-%d', e, t, o);
                    for (var a, u = e, m = t, c = o; !a && u > 0;) {
                        u--, m = Math.floor(m / 2), c = Math.floor(c / 2), a = this$1.tiles[toID(u, m, c)];
                    }
                    return a && a.source ? (s > 1 && console.log('found parent tile z%d-%d-%d', u, m, c), s > 1 && console.time('drilling down'), this.splitTile(a.source, u, m, c, e, t, o), s > 1 && console.timeEnd('drilling down'), this.tiles[r] ? transform.tile(this.tiles[r], n) : null) : null;
                };
            },
            {
                './clip': 16,
                './convert': 17,
                './tile': 21,
                './transform': 22,
                './wrap': 23
            }
        ],
        20: [
            function (_dereq_, module, exports) {
                'use strict';
                function simplify(i, t, r, s) {
                    for (var e, f = s, l = i[t], m = i[t + 1], n = i[r], o = i[r + 1], p = t + 3; p < r; p += 3) {
                        var u = getSqSegDist(i[p], i[p + 1], l, m, n, o);
                        u > f && (e = p, f = u);
                    }
                    f > s && (e - t > 3 && simplify(i, t, e, s), i[e + 2] = f, r - e > 3 && simplify(i, e, r, s));
                }
                function getSqSegDist(i, t, r, s, e, f) {
                    var l = e - r, m = f - s;
                    if (0 !== l || 0 !== m) {
                        var n = ((i - r) * l + (t - s) * m) / (l * l + m * m);
                        n > 1 ? (r = e, s = f) : n > 0 && (r += l * n, s += m * n);
                    }
                    return l = i - r, m = t - s, l * l + m * m;
                }
                module.exports = simplify;
            },
            {}
        ],
        21: [
            function (_dereq_, module, exports) {
                'use strict';
                function createTile(n, e, i, t, r, u) {
                    for (var a = {
                                features: [],
                                numPoints: 0,
                                numSimplified: 0,
                                numFeatures: 0,
                                source: null,
                                x: i,
                                y: t,
                                z2: e,
                                transformed: !1,
                                minX: 2,
                                minY: 1,
                                maxX: -1,
                                maxY: 0
                            }, l = 0; l < n.length; l++) {
                        a.numFeatures++, addFeature(a, n[l], r, u);
                        var o = n[l].minX, m = n[l].minY, f = n[l].maxX, s = n[l].maxY;
                        o < a.minX && (a.minX = o), m < a.minY && (a.minY = m), f > a.maxX && (a.maxX = f), s > a.maxY && (a.maxY = s);
                    }
                    return a;
                }
                function addFeature(n, e, i, t) {
                    var r = e.geometry, u = e.type, a = [];
                    if ('Point' === u || 'MultiPoint' === u) {
                        for (var l = 0; l < r.length; l += 3) {
                            a.push(r[l]), a.push(r[l + 1]), n.numPoints++, n.numSimplified++;
                        }
                    } else if ('LineString' === u) {
                        addLine(a, r, n, i, t, !1, !1);
                    } else if ('MultiLineString' === u || 'Polygon' === u) {
                        for (l = 0; l < r.length; l++) {
                            addLine(a, r[l], n, i, t, 'Polygon' === u, 0 === l);
                        }
                    } else if ('MultiPolygon' === u) {
                        for (var o = 0; o < r.length; o++) {
                            var m = r[o];
                            for (l = 0; l < m.length; l++) {
                                addLine(a, m[l], n, i, t, !0, 0 === l);
                            }
                        }
                    }
                    if (a.length) {
                        var f = {
                            geometry: a,
                            type: 'Polygon' === u || 'MultiPolygon' === u ? 3 : 'LineString' === u || 'MultiLineString' === u ? 2 : 1,
                            tags: e.tags || null
                        };
                        null !== e.id && (f.id = e.id), n.features.push(f);
                    }
                }
                function addLine(n, e, i, t, r, u, a) {
                    var l = t * t;
                    if (!r && e.size < (u ? l : t)) {
                        return void (i.numPoints += e.length / 3);
                    }
                    for (var o = [], m = 0; m < e.length; m += 3) {
                        (r || e[m + 2] > l) && (i.numSimplified++, o.push(e[m]), o.push(e[m + 1])), i.numPoints++;
                    }
                    u && rewind(o, a), n.push(o);
                }
                function rewind(n, e) {
                    for (var i = 0, t = 0, r = n.length, u = r - 2; t < r; u = t, t += 2) {
                        i += (n[t] - n[u]) * (n[t + 1] + n[u + 1]);
                    }
                    if (i > 0 === e) {
                        for (t = 0, r = n.length; t < r / 2; t += 2) {
                            var a = n[t], l = n[t + 1];
                            n[t] = n[r - 2 - t], n[t + 1] = n[r - 1 - t], n[r - 2 - t] = a, n[r - 1 - t] = l;
                        }
                    }
                }
                module.exports = createTile;
            },
            {}
        ],
        22: [
            function (_dereq_, module, exports) {
                'use strict';
                function transformTile(r, t) {
                    if (r.transformed) {
                        return r;
                    }
                    var e, o, n, f = r.z2, s = r.x, a = r.y;
                    for (e = 0; e < r.features.length; e++) {
                        var i = r.features[e], u = i.geometry, m = i.type;
                        if (i.geometry = [], 1 === m) {
                            for (o = 0; o < u.length; o += 2) {
                                i.geometry.push(transformPoint(u[o], u[o + 1], t, f, s, a));
                            }
                        } else {
                            for (o = 0; o < u.length; o++) {
                                var h = [];
                                for (n = 0; n < u[o].length; n += 2) {
                                    h.push(transformPoint(u[o][n], u[o][n + 1], t, f, s, a));
                                }
                                i.geometry.push(h);
                            }
                        }
                    }
                    return r.transformed = !0, r;
                }
                function transformPoint(r, t, e, o, n, f) {
                    return [
                        Math.round(e * (r * o - n)),
                        Math.round(e * (t * o - f))
                    ];
                }
                exports.tile = transformTile, exports.point = transformPoint;
            },
            {}
        ],
        23: [
            function (_dereq_, module, exports) {
                'use strict';
                function wrap(e, r) {
                    var t = e, o = clip(e, 1, -1 - r, r, 0, -1, 2), i = clip(e, 1, 1 - r, 2 + r, 0, -1, 2);
                    return (o || i) && (t = clip(e, 1, -r, 1 + r, 0, -1, 2) || [], o && (t = shiftFeatureCoords(o, 1).concat(t)), i && (t = t.concat(shiftFeatureCoords(i, -1)))), t;
                }
                function shiftFeatureCoords(e, r) {
                    for (var t = [], o = 0; o < e.length; o++) {
                        var i, s = e[o], n = s.type;
                        if ('Point' === n || 'MultiPoint' === n || 'LineString' === n) {
                            i = shiftCoords(s.geometry, r);
                        } else if ('MultiLineString' === n || 'Polygon' === n) {
                            i = [];
                            for (var u = 0; u < s.geometry.length; u++) {
                                i.push(shiftCoords(s.geometry[u], r));
                            }
                        } else if ('MultiPolygon' === n) {
                            for (i = [], u = 0; u < s.geometry.length; u++) {
                                for (var a = [], f = 0; f < s.geometry[u].length; f++) {
                                    a.push(shiftCoords(s.geometry[u][f], r));
                                }
                                i.push(a);
                            }
                        }
                        t.push(createFeature(s.id, n, i, s.tags));
                    }
                    return t;
                }
                function shiftCoords(e, r) {
                    var t = [];
                    t.size = e.size;
                    for (var o = 0; o < e.length; o += 3) {
                        t.push(e[o] + r, e[o + 1], e[o + 2]);
                    }
                    return t;
                }
                var clip = _dereq_('./clip'), createFeature = _dereq_('./feature');
                module.exports = wrap;
            },
            {
                './clip': 16,
                './feature': 18
            }
        ],
        24: [
            function (_dereq_, module, exports) {
                'use strict';
                function GridIndex(t, r, e) {
                    var s = this.cells = [];
                    if (t instanceof ArrayBuffer) {
                        this.arrayBuffer = t;
                        var i = new Int32Array(this.arrayBuffer);
                        t = i[0], r = i[1], e = i[2], this.d = r + 2 * e;
                        for (var h = 0; h < this.d * this.d; h++) {
                            var n = i[NUM_PARAMS + h], o = i[NUM_PARAMS + h + 1];
                            s.push(n === o ? null : i.subarray(n, o));
                        }
                        var l = i[NUM_PARAMS + s.length], a = i[NUM_PARAMS + s.length + 1];
                        this.keys = i.subarray(l, a), this.bboxes = i.subarray(a), this.insert = this._insertReadonly;
                    } else {
                        this.d = r + 2 * e;
                        for (var d = 0; d < this.d * this.d; d++) {
                            s.push([]);
                        }
                        this.keys = [], this.bboxes = [];
                    }
                    this.n = r, this.extent = t, this.padding = e, this.scale = r / t, this.uid = 0;
                    var f = e / r * t;
                    this.min = -f, this.max = t + f;
                }
                module.exports = GridIndex;
                var NUM_PARAMS = 3;
                GridIndex.prototype.insert = function (t, r, e, s, i) {
                    this._forEachCell(r, e, s, i, this._insertCell, this.uid++), this.keys.push(t), this.bboxes.push(r), this.bboxes.push(e), this.bboxes.push(s), this.bboxes.push(i);
                }, GridIndex.prototype._insertReadonly = function () {
                    throw 'Cannot insert into a GridIndex created from an ArrayBuffer.';
                }, GridIndex.prototype._insertCell = function (t, r, e, s, i, h) {
                    this.cells[i].push(h);
                }, GridIndex.prototype.query = function (t, r, e, s) {
                    var i = this.min, h = this.max;
                    if (t <= i && r <= i && h <= e && h <= s) {
                        return Array.prototype.slice.call(this.keys);
                    }
                    var n = [], o = {};
                    return this._forEachCell(t, r, e, s, this._queryCell, n, o), n;
                }, GridIndex.prototype._queryCell = function (t, r, e, s, i, h, n) {
                    var o = this.cells[i];
                    if (null !== o) {
                        for (var l = this.keys, a = this.bboxes, d = 0; d < o.length; d++) {
                            var f = o[d];
                            if (void 0 === n[f]) {
                                var u = 4 * f;
                                t <= a[u + 2] && r <= a[u + 3] && e >= a[u + 0] && s >= a[u + 1] ? (n[f] = !0, h.push(l[f])) : n[f] = !1;
                            }
                        }
                    }
                }, GridIndex.prototype._forEachCell = function (t, r, e, s, i, h, n) {
                    var this$1 = this;
                    for (var o = this._convertToCellCoord(t), l = this._convertToCellCoord(r), a = this._convertToCellCoord(e), d = this._convertToCellCoord(s), f = o; f <= a; f++) {
                        for (var u = l; u <= d; u++) {
                            var y = this$1.d * u + f;
                            if (i.call(this$1, t, r, e, s, y, h, n)) {
                                return;
                            }
                        }
                    }
                }, GridIndex.prototype._convertToCellCoord = function (t) {
                    return Math.max(0, Math.min(this.d - 1, Math.floor(t * this.scale) + this.padding));
                }, GridIndex.prototype.toArrayBuffer = function () {
                    var this$1 = this;
                    if (this.arrayBuffer) {
                        return this.arrayBuffer;
                    }
                    for (var t = this.cells, r = NUM_PARAMS + this.cells.length + 1 + 1, e = 0, s = 0; s < this.cells.length; s++) {
                        e += this$1.cells[s].length;
                    }
                    var i = new Int32Array(r + e + this.keys.length + this.bboxes.length);
                    i[0] = this.extent, i[1] = this.n, i[2] = this.padding;
                    for (var h = r, n = 0; n < t.length; n++) {
                        var o = t[n];
                        i[NUM_PARAMS + n] = h, i.set(o, h), h += o.length;
                    }
                    return i[NUM_PARAMS + t.length] = h, i.set(this.keys, h), h += this.keys.length, i[NUM_PARAMS + t.length + 1] = h, i.set(this.bboxes, h), h += this.bboxes.length, i.buffer;
                };
            },
            {}
        ],
        25: [
            function (_dereq_, module, exports) {
                exports.read = function (a, o, t, r, h) {
                    var M, p, w = 8 * h - r - 1, f = (1 << w) - 1, e = f >> 1, i = -7, N = t ? h - 1 : 0, n = t ? -1 : 1, s = a[o + N];
                    for (N += n, M = s & (1 << -i) - 1, s >>= -i, i += w; i > 0; M = 256 * M + a[o + N], N += n, i -= 8) {
                        ;
                    }
                    for (p = M & (1 << -i) - 1, M >>= -i, i += r; i > 0; p = 256 * p + a[o + N], N += n, i -= 8) {
                        ;
                    }
                    if (0 === M) {
                        M = 1 - e;
                    } else {
                        if (M === f) {
                            return p ? NaN : 1 / 0 * (s ? -1 : 1);
                        }
                        p += Math.pow(2, r), M -= e;
                    }
                    return (s ? -1 : 1) * p * Math.pow(2, M - r);
                }, exports.write = function (a, o, t, r, h, M) {
                    var p, w, f, e = 8 * M - h - 1, i = (1 << e) - 1, N = i >> 1, n = 23 === h ? Math.pow(2, -24) - Math.pow(2, -77) : 0, s = r ? 0 : M - 1, u = r ? 1 : -1, l = o < 0 || 0 === o && 1 / o < 0 ? 1 : 0;
                    for (o = Math.abs(o), isNaN(o) || o === 1 / 0 ? (w = isNaN(o) ? 1 : 0, p = i) : (p = Math.floor(Math.log(o) / Math.LN2), o * (f = Math.pow(2, -p)) < 1 && (p--, f *= 2), o += p + N >= 1 ? n / f : n * Math.pow(2, 1 - N), o * f >= 2 && (p++, f /= 2), p + N >= i ? (w = 0, p = i) : p + N >= 1 ? (w = (o * f - 1) * Math.pow(2, h), p += N) : (w = o * Math.pow(2, N - 1) * Math.pow(2, h), p = 0)); h >= 8; a[t + s] = 255 & w, s += u, w /= 256, h -= 8) {
                        ;
                    }
                    for (p = p << h | w, e += h; e > 0; a[t + s] = 255 & p, s += u, p /= 256, e -= 8) {
                        ;
                    }
                    a[t + s - u] |= 128 * l;
                };
            },
            {}
        ],
        26: [
            function (_dereq_, module, exports) {
                'use strict';
                function kdbush(t, i, e, s, n) {
                    return new KDBush(t, i, e, s, n);
                }
                function KDBush(t, i, e, s, n) {
                    var this$1 = this;
                    i = i || defaultGetX, e = e || defaultGetY, n = n || Array, this.nodeSize = s || 64, this.points = t, this.ids = new n(t.length), this.coords = new n(2 * t.length);
                    for (var r = 0; r < t.length; r++) {
                        this$1.ids[r] = r, this$1.coords[2 * r] = i(t[r]), this$1.coords[2 * r + 1] = e(t[r]);
                    }
                    sort(this.ids, this.coords, this.nodeSize, 0, this.ids.length - 1, 0);
                }
                function defaultGetX(t) {
                    return t[0];
                }
                function defaultGetY(t) {
                    return t[1];
                }
                var sort = _dereq_('./sort'), range = _dereq_('./range'), within = _dereq_('./within');
                module.exports = kdbush, KDBush.prototype = {
                    range: function (t, i, e, s) {
                        return range(this.ids, this.coords, t, i, e, s, this.nodeSize);
                    },
                    within: function (t, i, e) {
                        return within(this.ids, this.coords, t, i, e, this.nodeSize);
                    }
                };
            },
            {
                './range': 27,
                './sort': 28,
                './within': 29
            }
        ],
        27: [
            function (_dereq_, module, exports) {
                'use strict';
                function range(p, r, s, u, h, e, o) {
                    for (var a, t, n = [
                                0,
                                p.length - 1,
                                0
                            ], f = []; n.length;) {
                        var l = n.pop(), v = n.pop(), g = n.pop();
                        if (v - g <= o) {
                            for (var i = g; i <= v; i++) {
                                a = r[2 * i], t = r[2 * i + 1], a >= s && a <= h && t >= u && t <= e && f.push(p[i]);
                            }
                        } else {
                            var c = Math.floor((g + v) / 2);
                            a = r[2 * c], t = r[2 * c + 1], a >= s && a <= h && t >= u && t <= e && f.push(p[c]);
                            var d = (l + 1) % 2;
                            (0 === l ? s <= a : u <= t) && (n.push(g), n.push(c - 1), n.push(d)), (0 === l ? h >= a : e >= t) && (n.push(c + 1), n.push(v), n.push(d));
                        }
                    }
                    return f;
                }
                module.exports = range;
            },
            {}
        ],
        28: [
            function (_dereq_, module, exports) {
                'use strict';
                function sortKD(t, a, o, s, r, e) {
                    if (!(r - s <= o)) {
                        var f = Math.floor((s + r) / 2);
                        select(t, a, f, s, r, e % 2), sortKD(t, a, o, s, f - 1, e + 1), sortKD(t, a, o, f + 1, r, e + 1);
                    }
                }
                function select(t, a, o, s, r, e) {
                    for (; r > s;) {
                        if (r - s > 600) {
                            var f = r - s + 1, p = o - s + 1, w = Math.log(f), m = 0.5 * Math.exp(2 * w / 3), n = 0.5 * Math.sqrt(w * m * (f - m) / f) * (p - f / 2 < 0 ? -1 : 1);
                            select(t, a, o, Math.max(s, Math.floor(o - p * m / f + n)), Math.min(r, Math.floor(o + (f - p) * m / f + n)), e);
                        }
                        var c = a[2 * o + e], h = s, i = r;
                        for (swapItem(t, a, s, o), a[2 * r + e] > c && swapItem(t, a, s, r); h < i;) {
                            for (swapItem(t, a, h, i), h++, i--; a[2 * h + e] < c;) {
                                h++;
                            }
                            for (; a[2 * i + e] > c;) {
                                i--;
                            }
                        }
                        a[2 * s + e] === c ? swapItem(t, a, s, i) : (i++, swapItem(t, a, i, r)), i <= o && (s = i + 1), o <= i && (r = i - 1);
                    }
                }
                function swapItem(t, a, o, s) {
                    swap(t, o, s), swap(a, 2 * o, 2 * s), swap(a, 2 * o + 1, 2 * s + 1);
                }
                function swap(t, a, o) {
                    var s = t[a];
                    t[a] = t[o], t[o] = s;
                }
                module.exports = sortKD;
            },
            {}
        ],
        29: [
            function (_dereq_, module, exports) {
                'use strict';
                function within(s, p, r, t, u, h) {
                    for (var i = [
                                0,
                                s.length - 1,
                                0
                            ], o = [], n = u * u; i.length;) {
                        var e = i.pop(), a = i.pop(), f = i.pop();
                        if (a - f <= h) {
                            for (var v = f; v <= a; v++) {
                                sqDist(p[2 * v], p[2 * v + 1], r, t) <= n && o.push(s[v]);
                            }
                        } else {
                            var l = Math.floor((f + a) / 2), c = p[2 * l], q = p[2 * l + 1];
                            sqDist(c, q, r, t) <= n && o.push(s[l]);
                            var D = (e + 1) % 2;
                            (0 === e ? r - u <= c : t - u <= q) && (i.push(f), i.push(l - 1), i.push(D)), (0 === e ? r + u >= c : t + u >= q) && (i.push(l + 1), i.push(a), i.push(D));
                        }
                    }
                    return o;
                }
                function sqDist(s, p, r, t) {
                    var u = s - r, h = p - t;
                    return u * u + h * h;
                }
                module.exports = within;
            },
            {}
        ],
        30: [
            function (_dereq_, module, exports) {
                'use strict';
                function Pbf(t) {
                    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0), this.pos = 0, this.type = 0, this.length = this.buf.length;
                }
                function readVarintRemainder(t, i, e) {
                    var r, s, n = e.buf;
                    if (s = n[e.pos++], r = (112 & s) >> 4, s < 128) {
                        return toNum(t, r, i);
                    }
                    if (s = n[e.pos++], r |= (127 & s) << 3, s < 128) {
                        return toNum(t, r, i);
                    }
                    if (s = n[e.pos++], r |= (127 & s) << 10, s < 128) {
                        return toNum(t, r, i);
                    }
                    if (s = n[e.pos++], r |= (127 & s) << 17, s < 128) {
                        return toNum(t, r, i);
                    }
                    if (s = n[e.pos++], r |= (127 & s) << 24, s < 128) {
                        return toNum(t, r, i);
                    }
                    if (s = n[e.pos++], r |= (1 & s) << 31, s < 128) {
                        return toNum(t, r, i);
                    }
                    throw new Error('Expected varint not more than 10 bytes');
                }
                function readPackedEnd(t) {
                    return t.type === Pbf.Bytes ? t.readVarint() + t.pos : t.pos + 1;
                }
                function toNum(t, i, e) {
                    return e ? 4294967296 * i + (t >>> 0) : 4294967296 * (i >>> 0) + (t >>> 0);
                }
                function writeBigVarint(t, i) {
                    var e, r;
                    if (t >= 0 ? (e = t % 4294967296 | 0, r = t / 4294967296 | 0) : (e = ~(-t % 4294967296), r = ~(-t / 4294967296), 4294967295 ^ e ? e = e + 1 | 0 : (e = 0, r = r + 1 | 0)), t >= 18446744073709552000 || t < -18446744073709552000) {
                        throw new Error('Given varint doesn\'t fit into 10 bytes');
                    }
                    i.realloc(10), writeBigVarintLow(e, r, i), writeBigVarintHigh(r, i);
                }
                function writeBigVarintLow(t, i, e) {
                    e.buf[e.pos++] = 127 & t | 128, t >>>= 7, e.buf[e.pos++] = 127 & t | 128, t >>>= 7, e.buf[e.pos++] = 127 & t | 128, t >>>= 7, e.buf[e.pos++] = 127 & t | 128, t >>>= 7, e.buf[e.pos] = 127 & t;
                }
                function writeBigVarintHigh(t, i) {
                    var e = (7 & t) << 4;
                    i.buf[i.pos++] |= e | ((t >>>= 3) ? 128 : 0), t && (i.buf[i.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (i.buf[i.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (i.buf[i.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (i.buf[i.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (i.buf[i.pos++] = 127 & t)))));
                }
                function makeRoomForExtraLength(t, i, e) {
                    var r = i <= 16383 ? 1 : i <= 2097151 ? 2 : i <= 268435455 ? 3 : Math.ceil(Math.log(i) / (7 * Math.LN2));
                    e.realloc(r);
                    for (var s = e.pos - 1; s >= t; s--) {
                        e.buf[s + r] = e.buf[s];
                    }
                }
                function writePackedVarint(t, i) {
                    for (var e = 0; e < t.length; e++) {
                        i.writeVarint(t[e]);
                    }
                }
                function writePackedSVarint(t, i) {
                    for (var e = 0; e < t.length; e++) {
                        i.writeSVarint(t[e]);
                    }
                }
                function writePackedFloat(t, i) {
                    for (var e = 0; e < t.length; e++) {
                        i.writeFloat(t[e]);
                    }
                }
                function writePackedDouble(t, i) {
                    for (var e = 0; e < t.length; e++) {
                        i.writeDouble(t[e]);
                    }
                }
                function writePackedBoolean(t, i) {
                    for (var e = 0; e < t.length; e++) {
                        i.writeBoolean(t[e]);
                    }
                }
                function writePackedFixed32(t, i) {
                    for (var e = 0; e < t.length; e++) {
                        i.writeFixed32(t[e]);
                    }
                }
                function writePackedSFixed32(t, i) {
                    for (var e = 0; e < t.length; e++) {
                        i.writeSFixed32(t[e]);
                    }
                }
                function writePackedFixed64(t, i) {
                    for (var e = 0; e < t.length; e++) {
                        i.writeFixed64(t[e]);
                    }
                }
                function writePackedSFixed64(t, i) {
                    for (var e = 0; e < t.length; e++) {
                        i.writeSFixed64(t[e]);
                    }
                }
                function readUInt32(t, i) {
                    return (t[i] | t[i + 1] << 8 | t[i + 2] << 16) + 16777216 * t[i + 3];
                }
                function writeInt32(t, i, e) {
                    t[e] = i, t[e + 1] = i >>> 8, t[e + 2] = i >>> 16, t[e + 3] = i >>> 24;
                }
                function readInt32(t, i) {
                    return (t[i] | t[i + 1] << 8 | t[i + 2] << 16) + (t[i + 3] << 24);
                }
                function readUtf8(t, i, e) {
                    for (var r = '', s = i; s < e;) {
                        var n = t[s], o = null, a = n > 239 ? 4 : n > 223 ? 3 : n > 191 ? 2 : 1;
                        if (s + a > e) {
                            break;
                        }
                        var h, u, f;
                        1 === a ? n < 128 && (o = n) : 2 === a ? 128 == (192 & (h = t[s + 1])) && (o = (31 & n) << 6 | 63 & h) <= 127 && (o = null) : 3 === a ? (h = t[s + 1], u = t[s + 2], 128 == (192 & h) && 128 == (192 & u) && ((o = (15 & n) << 12 | (63 & h) << 6 | 63 & u) <= 2047 || o >= 55296 && o <= 57343) && (o = null)) : 4 === a && (h = t[s + 1], u = t[s + 2], f = t[s + 3], 128 == (192 & h) && 128 == (192 & u) && 128 == (192 & f) && ((o = (15 & n) << 18 | (63 & h) << 12 | (63 & u) << 6 | 63 & f) <= 65535 || o >= 1114112) && (o = null)), null === o ? (o = 65533, a = 1) : o > 65535 && (o -= 65536, r += String.fromCharCode(o >>> 10 & 1023 | 55296), o = 56320 | 1023 & o), r += String.fromCharCode(o), s += a;
                    }
                    return r;
                }
                function writeUtf8(t, i, e) {
                    for (var r, s, n = 0; n < i.length; n++) {
                        if ((r = i.charCodeAt(n)) > 55295 && r < 57344) {
                            if (!s) {
                                r > 56319 || n + 1 === i.length ? (t[e++] = 239, t[e++] = 191, t[e++] = 189) : s = r;
                                continue;
                            }
                            if (r < 56320) {
                                t[e++] = 239, t[e++] = 191, t[e++] = 189, s = r;
                                continue;
                            }
                            r = s - 55296 << 10 | r - 56320 | 65536, s = null;
                        } else {
                            s && (t[e++] = 239, t[e++] = 191, t[e++] = 189, s = null);
                        }
                        r < 128 ? t[e++] = r : (r < 2048 ? t[e++] = r >> 6 | 192 : (r < 65536 ? t[e++] = r >> 12 | 224 : (t[e++] = r >> 18 | 240, t[e++] = r >> 12 & 63 | 128), t[e++] = r >> 6 & 63 | 128), t[e++] = 63 & r | 128);
                    }
                    return e;
                }
                module.exports = Pbf;
                var ieee754 = _dereq_('ieee754');
                Pbf.Varint = 0, Pbf.Fixed64 = 1, Pbf.Bytes = 2, Pbf.Fixed32 = 5;
                var SHIFT_LEFT_32 = 4294967296, SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;
                Pbf.prototype = {
                    destroy: function () {
                        this.buf = null;
                    },
                    readFields: function (t, i, e) {
                        var this$1 = this;
                        for (e = e || this.length; this.pos < e;) {
                            var r = this$1.readVarint(), s = r >> 3, n = this$1.pos;
                            this$1.type = 7 & r, t(s, i, this$1), this$1.pos === n && this$1.skip(r);
                        }
                        return i;
                    },
                    readMessage: function (t, i) {
                        return this.readFields(t, i, this.readVarint() + this.pos);
                    },
                    readFixed32: function () {
                        var t = readUInt32(this.buf, this.pos);
                        return this.pos += 4, t;
                    },
                    readSFixed32: function () {
                        var t = readInt32(this.buf, this.pos);
                        return this.pos += 4, t;
                    },
                    readFixed64: function () {
                        var t = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;
                        return this.pos += 8, t;
                    },
                    readSFixed64: function () {
                        var t = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;
                        return this.pos += 8, t;
                    },
                    readFloat: function () {
                        var t = ieee754.read(this.buf, this.pos, !0, 23, 4);
                        return this.pos += 4, t;
                    },
                    readDouble: function () {
                        var t = ieee754.read(this.buf, this.pos, !0, 52, 8);
                        return this.pos += 8, t;
                    },
                    readVarint: function (t) {
                        var i, e, r = this.buf;
                        return e = r[this.pos++], i = 127 & e, e < 128 ? i : (e = r[this.pos++], i |= (127 & e) << 7, e < 128 ? i : (e = r[this.pos++], i |= (127 & e) << 14, e < 128 ? i : (e = r[this.pos++], i |= (127 & e) << 21, e < 128 ? i : (e = r[this.pos], i |= (15 & e) << 28, readVarintRemainder(i, t, this)))));
                    },
                    readVarint64: function () {
                        return this.readVarint(!0);
                    },
                    readSVarint: function () {
                        var t = this.readVarint();
                        return t % 2 == 1 ? (t + 1) / -2 : t / 2;
                    },
                    readBoolean: function () {
                        return Boolean(this.readVarint());
                    },
                    readString: function () {
                        var t = this.readVarint() + this.pos, i = readUtf8(this.buf, this.pos, t);
                        return this.pos = t, i;
                    },
                    readBytes: function () {
                        var t = this.readVarint() + this.pos, i = this.buf.subarray(this.pos, t);
                        return this.pos = t, i;
                    },
                    readPackedVarint: function (t, i) {
                        var this$1 = this;
                        var e = readPackedEnd(this);
                        for (t = t || []; this.pos < e;) {
                            t.push(this$1.readVarint(i));
                        }
                        return t;
                    },
                    readPackedSVarint: function (t) {
                        var this$1 = this;
                        var i = readPackedEnd(this);
                        for (t = t || []; this.pos < i;) {
                            t.push(this$1.readSVarint());
                        }
                        return t;
                    },
                    readPackedBoolean: function (t) {
                        var this$1 = this;
                        var i = readPackedEnd(this);
                        for (t = t || []; this.pos < i;) {
                            t.push(this$1.readBoolean());
                        }
                        return t;
                    },
                    readPackedFloat: function (t) {
                        var this$1 = this;
                        var i = readPackedEnd(this);
                        for (t = t || []; this.pos < i;) {
                            t.push(this$1.readFloat());
                        }
                        return t;
                    },
                    readPackedDouble: function (t) {
                        var this$1 = this;
                        var i = readPackedEnd(this);
                        for (t = t || []; this.pos < i;) {
                            t.push(this$1.readDouble());
                        }
                        return t;
                    },
                    readPackedFixed32: function (t) {
                        var this$1 = this;
                        var i = readPackedEnd(this);
                        for (t = t || []; this.pos < i;) {
                            t.push(this$1.readFixed32());
                        }
                        return t;
                    },
                    readPackedSFixed32: function (t) {
                        var this$1 = this;
                        var i = readPackedEnd(this);
                        for (t = t || []; this.pos < i;) {
                            t.push(this$1.readSFixed32());
                        }
                        return t;
                    },
                    readPackedFixed64: function (t) {
                        var this$1 = this;
                        var i = readPackedEnd(this);
                        for (t = t || []; this.pos < i;) {
                            t.push(this$1.readFixed64());
                        }
                        return t;
                    },
                    readPackedSFixed64: function (t) {
                        var this$1 = this;
                        var i = readPackedEnd(this);
                        for (t = t || []; this.pos < i;) {
                            t.push(this$1.readSFixed64());
                        }
                        return t;
                    },
                    skip: function (t) {
                        var i = 7 & t;
                        if (i === Pbf.Varint) {
                            for (; this.buf[this.pos++] > 127;) {
                                ;
                            }
                        } else if (i === Pbf.Bytes) {
                            this.pos = this.readVarint() + this.pos;
                        } else if (i === Pbf.Fixed32) {
                            this.pos += 4;
                        } else {
                            if (i !== Pbf.Fixed64) {
                                throw new Error('Unimplemented type: ' + i);
                            }
                            this.pos += 8;
                        }
                    },
                    writeTag: function (t, i) {
                        this.writeVarint(t << 3 | i);
                    },
                    realloc: function (t) {
                        for (var i = this.length || 16; i < this.pos + t;) {
                            i *= 2;
                        }
                        if (i !== this.length) {
                            var e = new Uint8Array(i);
                            e.set(this.buf), this.buf = e, this.length = i;
                        }
                    },
                    finish: function () {
                        return this.length = this.pos, this.pos = 0, this.buf.subarray(0, this.length);
                    },
                    writeFixed32: function (t) {
                        this.realloc(4), writeInt32(this.buf, t, this.pos), this.pos += 4;
                    },
                    writeSFixed32: function (t) {
                        this.realloc(4), writeInt32(this.buf, t, this.pos), this.pos += 4;
                    },
                    writeFixed64: function (t) {
                        this.realloc(8), writeInt32(this.buf, -1 & t, this.pos), writeInt32(this.buf, Math.floor(t * SHIFT_RIGHT_32), this.pos + 4), this.pos += 8;
                    },
                    writeSFixed64: function (t) {
                        this.realloc(8), writeInt32(this.buf, -1 & t, this.pos), writeInt32(this.buf, Math.floor(t * SHIFT_RIGHT_32), this.pos + 4), this.pos += 8;
                    },
                    writeVarint: function (t) {
                        if ((t = +t || 0) > 268435455 || t < 0) {
                            return void writeBigVarint(t, this);
                        }
                        this.realloc(4), this.buf[this.pos++] = 127 & t | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = t >>> 7 & 127)));
                    },
                    writeSVarint: function (t) {
                        this.writeVarint(t < 0 ? 2 * -t - 1 : 2 * t);
                    },
                    writeBoolean: function (t) {
                        this.writeVarint(Boolean(t));
                    },
                    writeString: function (t) {
                        t = String(t), this.realloc(4 * t.length), this.pos++;
                        var i = this.pos;
                        this.pos = writeUtf8(this.buf, t, this.pos);
                        var e = this.pos - i;
                        e >= 128 && makeRoomForExtraLength(i, e, this), this.pos = i - 1, this.writeVarint(e), this.pos += e;
                    },
                    writeFloat: function (t) {
                        this.realloc(4), ieee754.write(this.buf, t, this.pos, !0, 23, 4), this.pos += 4;
                    },
                    writeDouble: function (t) {
                        this.realloc(8), ieee754.write(this.buf, t, this.pos, !0, 52, 8), this.pos += 8;
                    },
                    writeBytes: function (t) {
                        var this$1 = this;
                        var i = t.length;
                        this.writeVarint(i), this.realloc(i);
                        for (var e = 0; e < i; e++) {
                            this$1.buf[this$1.pos++] = t[e];
                        }
                    },
                    writeRawMessage: function (t, i) {
                        this.pos++;
                        var e = this.pos;
                        t(i, this);
                        var r = this.pos - e;
                        r >= 128 && makeRoomForExtraLength(e, r, this), this.pos = e - 1, this.writeVarint(r), this.pos += r;
                    },
                    writeMessage: function (t, i, e) {
                        this.writeTag(t, Pbf.Bytes), this.writeRawMessage(i, e);
                    },
                    writePackedVarint: function (t, i) {
                        this.writeMessage(t, writePackedVarint, i);
                    },
                    writePackedSVarint: function (t, i) {
                        this.writeMessage(t, writePackedSVarint, i);
                    },
                    writePackedBoolean: function (t, i) {
                        this.writeMessage(t, writePackedBoolean, i);
                    },
                    writePackedFloat: function (t, i) {
                        this.writeMessage(t, writePackedFloat, i);
                    },
                    writePackedDouble: function (t, i) {
                        this.writeMessage(t, writePackedDouble, i);
                    },
                    writePackedFixed32: function (t, i) {
                        this.writeMessage(t, writePackedFixed32, i);
                    },
                    writePackedSFixed32: function (t, i) {
                        this.writeMessage(t, writePackedSFixed32, i);
                    },
                    writePackedFixed64: function (t, i) {
                        this.writeMessage(t, writePackedFixed64, i);
                    },
                    writePackedSFixed64: function (t, i) {
                        this.writeMessage(t, writePackedSFixed64, i);
                    },
                    writeBytesField: function (t, i) {
                        this.writeTag(t, Pbf.Bytes), this.writeBytes(i);
                    },
                    writeFixed32Field: function (t, i) {
                        this.writeTag(t, Pbf.Fixed32), this.writeFixed32(i);
                    },
                    writeSFixed32Field: function (t, i) {
                        this.writeTag(t, Pbf.Fixed32), this.writeSFixed32(i);
                    },
                    writeFixed64Field: function (t, i) {
                        this.writeTag(t, Pbf.Fixed64), this.writeFixed64(i);
                    },
                    writeSFixed64Field: function (t, i) {
                        this.writeTag(t, Pbf.Fixed64), this.writeSFixed64(i);
                    },
                    writeVarintField: function (t, i) {
                        this.writeTag(t, Pbf.Varint), this.writeVarint(i);
                    },
                    writeSVarintField: function (t, i) {
                        this.writeTag(t, Pbf.Varint), this.writeSVarint(i);
                    },
                    writeStringField: function (t, i) {
                        this.writeTag(t, Pbf.Bytes), this.writeString(i);
                    },
                    writeFloatField: function (t, i) {
                        this.writeTag(t, Pbf.Fixed32), this.writeFloat(i);
                    },
                    writeDoubleField: function (t, i) {
                        this.writeTag(t, Pbf.Fixed64), this.writeDouble(i);
                    },
                    writeBooleanField: function (t, i) {
                        this.writeVarintField(t, Boolean(i));
                    }
                };
            },
            { 'ieee754': 25 }
        ],
        31: [
            function (_dereq_, module, exports) {
                'use strict';
                function partialSort(a, t, r, o, p) {
                    for (r = r || 0, o = o || a.length - 1, p = p || defaultCompare; o > r;) {
                        if (o - r > 600) {
                            var f = o - r + 1, e = t - r + 1, l = Math.log(f), s = 0.5 * Math.exp(2 * l / 3), i = 0.5 * Math.sqrt(l * s * (f - s) / f) * (e - f / 2 < 0 ? -1 : 1);
                            partialSort(a, t, Math.max(r, Math.floor(t - e * s / f + i)), Math.min(o, Math.floor(t + (f - e) * s / f + i)), p);
                        }
                        var n = a[t], h = r, u = o;
                        for (swap(a, r, t), p(a[o], n) > 0 && swap(a, r, o); h < u;) {
                            for (swap(a, h, u), h++, u--; p(a[h], n) < 0;) {
                                h++;
                            }
                            for (; p(a[u], n) > 0;) {
                                u--;
                            }
                        }
                        0 === p(a[r], n) ? swap(a, r, u) : (u++, swap(a, u, o)), u <= t && (r = u + 1), t <= u && (o = u - 1);
                    }
                }
                function swap(a, t, r) {
                    var o = a[t];
                    a[t] = a[r], a[r] = o;
                }
                function defaultCompare(a, t) {
                    return a < t ? -1 : a > t ? 1 : 0;
                }
                module.exports = partialSort;
            },
            {}
        ],
        32: [
            function (_dereq_, module, exports) {
                'use strict';
                function supercluster(t) {
                    return new SuperCluster(t);
                }
                function SuperCluster(t) {
                    this.options = extend(Object.create(this.options), t), this.trees = new Array(this.options.maxZoom + 1);
                }
                function createCluster(t, e, n, o, i) {
                    return {
                        x: t,
                        y: e,
                        zoom: 1 / 0,
                        id: o,
                        properties: i,
                        parentId: -1,
                        numPoints: n
                    };
                }
                function createPointCluster(t, e) {
                    var n = t.geometry.coordinates;
                    return {
                        x: lngX(n[0]),
                        y: latY(n[1]),
                        zoom: 1 / 0,
                        id: e,
                        parentId: -1
                    };
                }
                function getClusterJSON(t) {
                    return {
                        type: 'Feature',
                        properties: getClusterProperties(t),
                        geometry: {
                            type: 'Point',
                            coordinates: [
                                xLng(t.x),
                                yLat(t.y)
                            ]
                        }
                    };
                }
                function getClusterProperties(t) {
                    var e = t.numPoints, n = e >= 10000 ? Math.round(e / 1000) + 'k' : e >= 1000 ? Math.round(e / 100) / 10 + 'k' : e;
                    return extend(extend({}, t.properties), {
                        cluster: !0,
                        cluster_id: t.id,
                        point_count: e,
                        point_count_abbreviated: n
                    });
                }
                function lngX(t) {
                    return t / 360 + 0.5;
                }
                function latY(t) {
                    var e = Math.sin(t * Math.PI / 180), n = 0.5 - 0.25 * Math.log((1 + e) / (1 - e)) / Math.PI;
                    return n < 0 ? 0 : n > 1 ? 1 : n;
                }
                function xLng(t) {
                    return 360 * (t - 0.5);
                }
                function yLat(t) {
                    var e = (180 - 360 * t) * Math.PI / 180;
                    return 360 * Math.atan(Math.exp(e)) / Math.PI - 90;
                }
                function extend(t, e) {
                    for (var n in e) {
                        t[n] = e[n];
                    }
                    return t;
                }
                function getX(t) {
                    return t.x;
                }
                function getY(t) {
                    return t.y;
                }
                var kdbush = _dereq_('kdbush');
                module.exports = supercluster, SuperCluster.prototype = {
                    options: {
                        minZoom: 0,
                        maxZoom: 16,
                        radius: 40,
                        extent: 512,
                        nodeSize: 64,
                        log: !1,
                        reduce: null,
                        initial: function () {
                            return {};
                        },
                        map: function (t) {
                            return t;
                        }
                    },
                    load: function (t) {
                        var this$1 = this;
                        var e = this.options.log;
                        e && console.time('total time');
                        var n = 'prepare ' + t.length + ' points';
                        e && console.time(n), this.points = t;
                        var o = t.map(createPointCluster);
                        e && console.timeEnd(n);
                        for (var i = this.options.maxZoom; i >= this.options.minZoom; i--) {
                            var r = +Date.now();
                            this$1.trees[i + 1] = kdbush(o, getX, getY, this$1.options.nodeSize, Float32Array), o = this$1._cluster(o, i), e && console.log('z%d: %d clusters in %dms', i, o.length, +Date.now() - r);
                        }
                        return this.trees[this.options.minZoom] = kdbush(o, getX, getY, this.options.nodeSize, Float32Array), e && console.timeEnd('total time'), this;
                    },
                    getClusters: function (t, e) {
                        var this$1 = this;
                        for (var n = this.trees[this._limitZoom(e)], o = n.range(lngX(t[0]), latY(t[3]), lngX(t[2]), latY(t[1])), i = [], r = 0; r < o.length; r++) {
                            var s = n.points[o[r]];
                            i.push(s.numPoints ? getClusterJSON(s) : this$1.points[s.id]);
                        }
                        return i;
                    },
                    getChildren: function (t, e) {
                        var this$1 = this;
                        for (var n = this.trees[e + 1].points[t], o = this.options.radius / (this.options.extent * Math.pow(2, e)), i = this.trees[e + 1].within(n.x, n.y, o), r = [], s = 0; s < i.length; s++) {
                            var u = this$1.trees[e + 1].points[i[s]];
                            u.parentId === t && r.push(u.numPoints ? getClusterJSON(u) : this$1.points[u.id]);
                        }
                        return r;
                    },
                    getLeaves: function (t, e, n, o) {
                        n = n || 10, o = o || 0;
                        var i = [];
                        return this._appendLeaves(i, t, e, n, o, 0), i;
                    },
                    getTile: function (t, e, n) {
                        var o = this.trees[this._limitZoom(t)], i = Math.pow(2, t), r = this.options.extent, s = this.options.radius, u = s / r, a = (n - u) / i, p = (n + 1 + u) / i, h = { features: [] };
                        return this._addTileFeatures(o.range((e - u) / i, a, (e + 1 + u) / i, p), o.points, e, n, i, h), 0 === e && this._addTileFeatures(o.range(1 - u / i, a, 1, p), o.points, i, n, i, h), e === i - 1 && this._addTileFeatures(o.range(0, a, u / i, p), o.points, -1, n, i, h), h.features.length ? h : null;
                    },
                    getClusterExpansionZoom: function (t, e) {
                        var this$1 = this;
                        for (; e < this.options.maxZoom;) {
                            var n = this$1.getChildren(t, e);
                            if (e++, 1 !== n.length) {
                                break;
                            }
                            t = n[0].properties.cluster_id;
                        }
                        return e;
                    },
                    _appendLeaves: function (t, e, n, o, i, r) {
                        var this$1 = this;
                        for (var s = this.getChildren(e, n), u = 0; u < s.length; u++) {
                            var a = s[u].properties;
                            if (a.cluster ? r + a.point_count <= i ? r += a.point_count : r = this$1._appendLeaves(t, a.cluster_id, n + 1, o, i, r) : r < i ? r++ : t.push(s[u]), t.length === o) {
                                break;
                            }
                        }
                        return r;
                    },
                    _addTileFeatures: function (t, e, n, o, i, r) {
                        var this$1 = this;
                        for (var s = 0; s < t.length; s++) {
                            var u = e[t[s]];
                            r.features.push({
                                type: 1,
                                geometry: [[
                                        Math.round(this$1.options.extent * (u.x * i - n)),
                                        Math.round(this$1.options.extent * (u.y * i - o))
                                    ]],
                                tags: u.numPoints ? getClusterProperties(u) : this$1.points[u.id].properties
                            });
                        }
                    },
                    _limitZoom: function (t) {
                        return Math.max(this.options.minZoom, Math.min(t, this.options.maxZoom + 1));
                    },
                    _cluster: function (t, e) {
                        var this$1 = this;
                        for (var n = [], o = this.options.radius / (this.options.extent * Math.pow(2, e)), i = 0; i < t.length; i++) {
                            var r = t[i];
                            if (!(r.zoom <= e)) {
                                r.zoom = e;
                                var s = this$1.trees[e + 1], u = s.within(r.x, r.y, o), a = r.numPoints || 1, p = r.x * a, h = r.y * a, l = null;
                                this$1.options.reduce && (l = this$1.options.initial(), this$1._accumulate(l, r));
                                for (var c = 0; c < u.length; c++) {
                                    var d = s.points[u[c]];
                                    if (e < d.zoom) {
                                        var m = d.numPoints || 1;
                                        d.zoom = e, p += d.x * m, h += d.y * m, a += m, d.parentId = i, this$1.options.reduce && this$1._accumulate(l, d);
                                    }
                                }
                                1 === a ? n.push(r) : (r.parentId = i, n.push(createCluster(p / a, h / a, a, i, l)));
                            }
                        }
                        return n;
                    },
                    _accumulate: function (t, e) {
                        var n = e.numPoints ? e.properties : this.options.map(this.points[e.id].properties);
                        this.options.reduce(t, n);
                    }
                };
            },
            { 'kdbush': 26 }
        ],
        33: [
            function (_dereq_, module, exports) {
                'use strict';
                function TinyQueue(t, i) {
                    var this$1 = this;
                    if (!(this instanceof TinyQueue)) {
                        return new TinyQueue(t, i);
                    }
                    if (this.data = t || [], this.length = this.data.length, this.compare = i || defaultCompare, this.length > 0) {
                        for (var e = this.length >> 1; e >= 0; e--) {
                            this$1._down(e);
                        }
                    }
                }
                function defaultCompare(t, i) {
                    return t < i ? -1 : t > i ? 1 : 0;
                }
                module.exports = TinyQueue, TinyQueue.prototype = {
                    push: function (t) {
                        this.data.push(t), this.length++, this._up(this.length - 1);
                    },
                    pop: function () {
                        if (0 !== this.length) {
                            var t = this.data[0];
                            return this.length--, this.length > 0 && (this.data[0] = this.data[this.length], this._down(0)), this.data.pop(), t;
                        }
                    },
                    peek: function () {
                        return this.data[0];
                    },
                    _up: function (t) {
                        for (var i = this.data, e = this.compare, h = i[t]; t > 0;) {
                            var n = t - 1 >> 1, a = i[n];
                            if (e(h, a) >= 0) {
                                break;
                            }
                            i[t] = a, t = n;
                        }
                        i[t] = h;
                    },
                    _down: function (t) {
                        for (var i = this.data, e = this.compare, h = this.length, n = h >> 1, a = i[t]; t < n;) {
                            var s = 1 + (t << 1), u = s + 1, r = i[s];
                            if (u < h && e(i[u], r) < 0 && (s = u, r = i[u]), e(r, a) >= 0) {
                                break;
                            }
                            i[t] = r, t = s;
                        }
                        i[t] = a;
                    }
                };
            },
            {}
        ],
        34: [
            function (_dereq_, module, exports) {
                function fromVectorTileJs(e) {
                    var r = new Pbf();
                    return writeTile(e, r), r.finish();
                }
                function fromGeojsonVt(e) {
                    var r = {};
                    for (var t in e) {
                        r[t] = new GeoJSONWrapper(e[t].features), r[t].name = t;
                    }
                    return fromVectorTileJs({ layers: r });
                }
                function writeTile(e, r) {
                    for (var t in e.layers) {
                        r.writeMessage(3, writeLayer, e.layers[t]);
                    }
                }
                function writeLayer(e, r) {
                    r.writeVarintField(15, e.version || 1), r.writeStringField(1, e.name || ''), r.writeVarintField(5, e.extent || 4096);
                    var t, i = {
                            keys: [],
                            values: [],
                            keycache: {},
                            valuecache: {}
                        };
                    for (t = 0; t < e.length; t++) {
                        i.feature = e.feature(t), r.writeMessage(2, writeFeature, i);
                    }
                    var a = i.keys;
                    for (t = 0; t < a.length; t++) {
                        r.writeStringField(3, a[t]);
                    }
                    var o = i.values;
                    for (t = 0; t < o.length; t++) {
                        r.writeMessage(4, writeValue, o[t]);
                    }
                }
                function writeFeature(e, r) {
                    var t = e.feature;
                    void 0 !== t.id && r.writeVarintField(1, t.id), r.writeMessage(2, writeProperties, e), r.writeVarintField(3, t.type), r.writeMessage(4, writeGeometry, t);
                }
                function writeProperties(e, r) {
                    var t = e.feature, i = e.keys, a = e.values, o = e.keycache, n = e.valuecache;
                    for (var l in t.properties) {
                        var s = o[l];
                        void 0 === s && (i.push(l), s = i.length - 1, o[l] = s), r.writeVarint(s);
                        var u = t.properties[l], f = typeof u;
                        'string' !== f && 'boolean' !== f && 'number' !== f && (u = JSON.stringify(u));
                        var w = f + ':' + u, v = n[w];
                        void 0 === v && (a.push(u), v = a.length - 1, n[w] = v), r.writeVarint(v);
                    }
                }
                function command(e, r) {
                    return (r << 3) + (7 & e);
                }
                function zigzag(e) {
                    return e << 1 ^ e >> 31;
                }
                function writeGeometry(e, r) {
                    for (var t = e.loadGeometry(), i = e.type, a = 0, o = 0, n = t.length, l = 0; l < n; l++) {
                        var s = t[l], u = 1;
                        1 === i && (u = s.length), r.writeVarint(command(1, u));
                        for (var f = 0; f < s.length; f++) {
                            1 === f && 1 !== i && r.writeVarint(command(2, s.length - 1));
                            var w = s[f].x - a, v = s[f].y - o;
                            r.writeVarint(zigzag(w)), r.writeVarint(zigzag(v)), a += w, o += v;
                        }
                    }
                }
                function writeValue(e, r) {
                    var t = typeof e;
                    'string' === t ? r.writeStringField(1, e) : 'boolean' === t ? r.writeBooleanField(7, e) : 'number' === t && (e % 1 != 0 ? r.writeDoubleField(3, e) : e < 0 ? r.writeSVarintField(6, e) : r.writeVarintField(5, e));
                }
                var Pbf = _dereq_('pbf'), GeoJSONWrapper = _dereq_('./lib/geojson_wrapper');
                module.exports = fromVectorTileJs, module.exports.fromVectorTileJs = fromVectorTileJs, module.exports.fromGeojsonVt = fromGeojsonVt, module.exports.GeoJSONWrapper = GeoJSONWrapper;
            },
            {
                './lib/geojson_wrapper': 35,
                'pbf': 30
            }
        ],
        35: [
            function (_dereq_, module, exports) {
                'use strict';
                function GeoJSONWrapper(e) {
                    this.features = e, this.length = e.length;
                }
                function FeatureWrapper(e) {
                    this.id = 'number' == typeof e.id ? e.id : void 0, this.type = e.type, this.rawGeometry = 1 === e.type ? [e.geometry] : e.geometry, this.properties = e.tags, this.extent = 4096;
                }
                var Point = _dereq_('@mapbox/point-geometry'), VectorTileFeature = _dereq_('@mapbox/vector-tile').VectorTileFeature;
                module.exports = GeoJSONWrapper, GeoJSONWrapper.prototype.feature = function (e) {
                    return new FeatureWrapper(this.features[e]);
                }, FeatureWrapper.prototype.loadGeometry = function () {
                    var this$1 = this;
                    var e = this.rawGeometry;
                    this.geometry = [];
                    for (var t = 0; t < e.length; t++) {
                        for (var r = e[t], o = [], a = 0; a < r.length; a++) {
                            o.push(new Point(r[a][0], r[a][1]));
                        }
                        this$1.geometry.push(o);
                    }
                    return this.geometry;
                }, FeatureWrapper.prototype.bbox = function () {
                    this.geometry || this.loadGeometry();
                    for (var e = this.geometry, t = 1 / 0, r = -1 / 0, o = 1 / 0, a = -1 / 0, p = 0; p < e.length; p++) {
                        for (var i = e[p], n = 0; n < i.length; n++) {
                            var h = i[n];
                            t = Math.min(t, h.x), r = Math.max(r, h.x), o = Math.min(o, h.y), a = Math.max(a, h.y);
                        }
                    }
                    return [
                        t,
                        o,
                        r,
                        a
                    ];
                }, FeatureWrapper.prototype.toGeoJSON = VectorTileFeature.prototype.toGeoJSON;
            },
            {
                '@mapbox/point-geometry': 4,
                '@mapbox/vector-tile': 8
            }
        ],
        36: [
            function (_dereq_, module, exports) {
                var bundleFn = arguments[3], sources = arguments[4], cache = arguments[5], stringify = JSON.stringify;
                module.exports = function (r, e) {
                    function t(r) {
                        d[r] = !0;
                        for (var e in sources[r][1]) {
                            var o = sources[r][1][e];
                            d[o] || t(o);
                        }
                    }
                    for (var o, n = Object.keys(cache), a = 0, i = n.length; a < i; a++) {
                        var s = n[a], u = cache[s].exports;
                        if (u === r || u && u.default === r) {
                            o = s;
                            break;
                        }
                    }
                    if (!o) {
                        o = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);
                        for (var f = {}, a = 0, i = n.length; a < i; a++) {
                            var s = n[a];
                            f[s] = s;
                        }
                        sources[o] = [
                            'function(require,module,exports){' + r + '(self); }',
                            f
                        ];
                    }
                    var c = Math.floor(Math.pow(16, 8) * Math.random()).toString(16), l = {};
                    l[o] = o, sources[c] = [
                        'function(require,module,exports){var f = require(' + stringify(o) + ');(f.default ? f.default : f)(self);}',
                        l
                    ];
                    var d = {};
                    t(c);
                    var g = '(' + bundleFn + ')({' + Object.keys(d).map(function (r) {
                            return stringify(r) + ':[' + sources[r][0] + ',' + stringify(sources[r][1]) + ']';
                        }).join(',') + '},{},[' + stringify(c) + '])', v = window.URL || window.webkitURL || window.mozURL || window.msURL, w = new Blob([g], { type: 'text/javascript' });
                    if (e && e.bare) {
                        return w;
                    }
                    var h = v.createObjectURL(w), m = new Worker(h);
                    return m.objectURL = h, m;
                };
            },
            {}
        ],
        37: [
            function (_dereq_, module, exports) {
                module.exports.RADIUS = 6378137, module.exports.FLATTENING = 1 / 298.257223563, module.exports.POLAR_RADIUS = 6356752.3142;
            },
            {}
        ],
        38: [
            function (_dereq_, module, exports) {
                module.exports = { 'version': '0.44.1' };
            },
            {}
        ],
        39: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../util/struct_array'), StructArray = ref.StructArray, ref$1 = _dereq_('../util/struct_array'), Struct = ref$1.Struct, ref$2 = _dereq_('../util/web_worker_transfer'), register = ref$2.register, Point = _dereq_('@mapbox/point-geometry'), StructArrayLayout2i4 = function (t) {
                        function r() {
                            t.apply(this, arguments);
                        }
                        return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                            this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
                        }, r.prototype.emplaceBack = function (t, r) {
                            var i = this.length;
                            this.resize(i + 1);
                            var e = 2 * i;
                            return this.int16[e + 0] = t, this.int16[e + 1] = r, i;
                        }, r;
                    }(StructArray);
                StructArrayLayout2i4.prototype.bytesPerElement = 4, register('StructArrayLayout2i4', StructArrayLayout2i4);
                var StructArrayLayout4i8 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i, e) {
                        var o = this.length;
                        this.resize(o + 1);
                        var u = 4 * o;
                        return this.int16[u + 0] = t, this.int16[u + 1] = r, this.int16[u + 2] = i, this.int16[u + 3] = e, o;
                    }, r;
                }(StructArray);
                StructArrayLayout4i8.prototype.bytesPerElement = 8, register('StructArrayLayout4i8', StructArrayLayout4i8);
                var StructArrayLayout2i4i12 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i, e, o, u) {
                        var n = this.length;
                        this.resize(n + 1);
                        var a = 6 * n;
                        return this.int16[a + 0] = t, this.int16[a + 1] = r, this.int16[a + 2] = i, this.int16[a + 3] = e, this.int16[a + 4] = o, this.int16[a + 5] = u, n;
                    }, r;
                }(StructArray);
                StructArrayLayout2i4i12.prototype.bytesPerElement = 12, register('StructArrayLayout2i4i12', StructArrayLayout2i4i12);
                var StructArrayLayout4i4ub12 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i, e, o, u, n, a) {
                        var y = this.length;
                        this.resize(y + 1);
                        var s = 6 * y, c = 12 * y;
                        return this.int16[s + 0] = t, this.int16[s + 1] = r, this.int16[s + 2] = i, this.int16[s + 3] = e, this.uint8[c + 8] = o, this.uint8[c + 9] = u, this.uint8[c + 10] = n, this.uint8[c + 11] = a, y;
                    }, r;
                }(StructArray);
                StructArrayLayout4i4ub12.prototype.bytesPerElement = 12, register('StructArrayLayout4i4ub12', StructArrayLayout4i4ub12);
                var StructArrayLayout4i4ui16 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i, e, o, u, n, a) {
                        var y = this.length;
                        this.resize(y + 1);
                        var s = 8 * y;
                        return this.int16[s + 0] = t, this.int16[s + 1] = r, this.int16[s + 2] = i, this.int16[s + 3] = e, this.uint16[s + 4] = o, this.uint16[s + 5] = u, this.uint16[s + 6] = n, this.uint16[s + 7] = a, y;
                    }, r;
                }(StructArray);
                StructArrayLayout4i4ui16.prototype.bytesPerElement = 16, register('StructArrayLayout4i4ui16', StructArrayLayout4i4ui16);
                var StructArrayLayout3f12 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i) {
                        var e = this.length;
                        this.resize(e + 1);
                        var o = 3 * e;
                        return this.float32[o + 0] = t, this.float32[o + 1] = r, this.float32[o + 2] = i, e;
                    }, r;
                }(StructArray);
                StructArrayLayout3f12.prototype.bytesPerElement = 12, register('StructArrayLayout3f12', StructArrayLayout3f12);
                var StructArrayLayout1ul4 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t) {
                        var r = this.length;
                        this.resize(r + 1);
                        var i = 1 * r;
                        return this.uint32[i + 0] = t, r;
                    }, r;
                }(StructArray);
                StructArrayLayout1ul4.prototype.bytesPerElement = 4, register('StructArrayLayout1ul4', StructArrayLayout1ul4);
                var StructArrayLayout6i1ul2ui2i24 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i, e, o, u, n, a, y, s, c) {
                        var p = this.length;
                        this.resize(p + 1);
                        var h = 12 * p, f = 6 * p;
                        return this.int16[h + 0] = t, this.int16[h + 1] = r, this.int16[h + 2] = i, this.int16[h + 3] = e, this.int16[h + 4] = o, this.int16[h + 5] = u, this.uint32[f + 3] = n, this.uint16[h + 8] = a, this.uint16[h + 9] = y, this.int16[h + 10] = s, this.int16[h + 11] = c, p;
                    }, r;
                }(StructArray);
                StructArrayLayout6i1ul2ui2i24.prototype.bytesPerElement = 24, register('StructArrayLayout6i1ul2ui2i24', StructArrayLayout6i1ul2ui2i24);
                var StructArrayLayout2i2i2i12 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i, e, o, u) {
                        var n = this.length;
                        this.resize(n + 1);
                        var a = 6 * n;
                        return this.int16[a + 0] = t, this.int16[a + 1] = r, this.int16[a + 2] = i, this.int16[a + 3] = e, this.int16[a + 4] = o, this.int16[a + 5] = u, n;
                    }, r;
                }(StructArray);
                StructArrayLayout2i2i2i12.prototype.bytesPerElement = 12, register('StructArrayLayout2i2i2i12', StructArrayLayout2i2i2i12);
                var StructArrayLayout2ub4 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r) {
                        var i = this.length;
                        this.resize(i + 1);
                        var e = 4 * i;
                        return this.uint8[e + 0] = t, this.uint8[e + 1] = r, i;
                    }, r;
                }(StructArray);
                StructArrayLayout2ub4.prototype.bytesPerElement = 4, register('StructArrayLayout2ub4', StructArrayLayout2ub4);
                var StructArrayLayout2i2ui3ul3ui2f2ub40 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i, e, o, u, n, a, y, s, c, p, h, f) {
                        var A = this.length;
                        this.resize(A + 1);
                        var _ = 20 * A, l = 10 * A, S = 40 * A;
                        return this.int16[_ + 0] = t, this.int16[_ + 1] = r, this.uint16[_ + 2] = i, this.uint16[_ + 3] = e, this.uint32[l + 2] = o, this.uint32[l + 3] = u, this.uint32[l + 4] = n, this.uint16[_ + 10] = a, this.uint16[_ + 11] = y, this.uint16[_ + 12] = s, this.float32[l + 7] = c, this.float32[l + 8] = p, this.uint8[S + 36] = h, this.uint8[S + 37] = f, A;
                    }, r;
                }(StructArray);
                StructArrayLayout2i2ui3ul3ui2f2ub40.prototype.bytesPerElement = 40, register('StructArrayLayout2i2ui3ul3ui2f2ub40', StructArrayLayout2i2ui3ul3ui2f2ub40);
                var StructArrayLayout1f4 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t) {
                        var r = this.length;
                        this.resize(r + 1);
                        var i = 1 * r;
                        return this.float32[i + 0] = t, r;
                    }, r;
                }(StructArray);
                StructArrayLayout1f4.prototype.bytesPerElement = 4, register('StructArrayLayout1f4', StructArrayLayout1f4);
                var StructArrayLayout3i6 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i) {
                        var e = this.length;
                        this.resize(e + 1);
                        var o = 3 * e;
                        return this.int16[o + 0] = t, this.int16[o + 1] = r, this.int16[o + 2] = i, e;
                    }, r;
                }(StructArray);
                StructArrayLayout3i6.prototype.bytesPerElement = 6, register('StructArrayLayout3i6', StructArrayLayout3i6);
                var StructArrayLayout1ul2ui8 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i) {
                        var e = this.length;
                        this.resize(e + 1);
                        var o = 2 * e, u = 4 * e;
                        return this.uint32[o + 0] = t, this.uint16[u + 2] = r, this.uint16[u + 3] = i, e;
                    }, r;
                }(StructArray);
                StructArrayLayout1ul2ui8.prototype.bytesPerElement = 8, register('StructArrayLayout1ul2ui8', StructArrayLayout1ul2ui8);
                var StructArrayLayout3ui6 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i) {
                        var e = this.length;
                        this.resize(e + 1);
                        var o = 3 * e;
                        return this.uint16[o + 0] = t, this.uint16[o + 1] = r, this.uint16[o + 2] = i, e;
                    }, r;
                }(StructArray);
                StructArrayLayout3ui6.prototype.bytesPerElement = 6, register('StructArrayLayout3ui6', StructArrayLayout3ui6);
                var StructArrayLayout2ui4 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r) {
                        var i = this.length;
                        this.resize(i + 1);
                        var e = 2 * i;
                        return this.uint16[e + 0] = t, this.uint16[e + 1] = r, i;
                    }, r;
                }(StructArray);
                StructArrayLayout2ui4.prototype.bytesPerElement = 4, register('StructArrayLayout2ui4', StructArrayLayout2ui4);
                var StructArrayLayout2f8 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r) {
                        var i = this.length;
                        this.resize(i + 1);
                        var e = 2 * i;
                        return this.float32[e + 0] = t, this.float32[e + 1] = r, i;
                    }, r;
                }(StructArray);
                StructArrayLayout2f8.prototype.bytesPerElement = 8, register('StructArrayLayout2f8', StructArrayLayout2f8);
                var StructArrayLayout4f16 = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype._refreshViews = function () {
                        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
                    }, r.prototype.emplaceBack = function (t, r, i, e) {
                        var o = this.length;
                        this.resize(o + 1);
                        var u = 4 * o;
                        return this.float32[u + 0] = t, this.float32[u + 1] = r, this.float32[u + 2] = i, this.float32[u + 3] = e, o;
                    }, r;
                }(StructArray);
                StructArrayLayout4f16.prototype.bytesPerElement = 16, register('StructArrayLayout4f16', StructArrayLayout4f16);
                var CollisionBoxStruct = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r;
                    var i = {
                        anchorPointX: {},
                        anchorPointY: {},
                        x1: {},
                        y1: {},
                        x2: {},
                        y2: {},
                        featureIndex: {},
                        sourceLayerIndex: {},
                        bucketIndex: {},
                        radius: {},
                        signedDistanceFromAnchor: {},
                        anchorPoint: {}
                    };
                    return i.anchorPointX.get = function () {
                        return this._structArray.int16[this._pos2 + 0];
                    }, i.anchorPointX.set = function (t) {
                        this._structArray.int16[this._pos2 + 0] = t;
                    }, i.anchorPointY.get = function () {
                        return this._structArray.int16[this._pos2 + 1];
                    }, i.anchorPointY.set = function (t) {
                        this._structArray.int16[this._pos2 + 1] = t;
                    }, i.x1.get = function () {
                        return this._structArray.int16[this._pos2 + 2];
                    }, i.x1.set = function (t) {
                        this._structArray.int16[this._pos2 + 2] = t;
                    }, i.y1.get = function () {
                        return this._structArray.int16[this._pos2 + 3];
                    }, i.y1.set = function (t) {
                        this._structArray.int16[this._pos2 + 3] = t;
                    }, i.x2.get = function () {
                        return this._structArray.int16[this._pos2 + 4];
                    }, i.x2.set = function (t) {
                        this._structArray.int16[this._pos2 + 4] = t;
                    }, i.y2.get = function () {
                        return this._structArray.int16[this._pos2 + 5];
                    }, i.y2.set = function (t) {
                        this._structArray.int16[this._pos2 + 5] = t;
                    }, i.featureIndex.get = function () {
                        return this._structArray.uint32[this._pos4 + 3];
                    }, i.featureIndex.set = function (t) {
                        this._structArray.uint32[this._pos4 + 3] = t;
                    }, i.sourceLayerIndex.get = function () {
                        return this._structArray.uint16[this._pos2 + 8];
                    }, i.sourceLayerIndex.set = function (t) {
                        this._structArray.uint16[this._pos2 + 8] = t;
                    }, i.bucketIndex.get = function () {
                        return this._structArray.uint16[this._pos2 + 9];
                    }, i.bucketIndex.set = function (t) {
                        this._structArray.uint16[this._pos2 + 9] = t;
                    }, i.radius.get = function () {
                        return this._structArray.int16[this._pos2 + 10];
                    }, i.radius.set = function (t) {
                        this._structArray.int16[this._pos2 + 10] = t;
                    }, i.signedDistanceFromAnchor.get = function () {
                        return this._structArray.int16[this._pos2 + 11];
                    }, i.signedDistanceFromAnchor.set = function (t) {
                        this._structArray.int16[this._pos2 + 11] = t;
                    }, i.anchorPoint.get = function () {
                        return new Point(this.anchorPointX, this.anchorPointY);
                    }, Object.defineProperties(r.prototype, i), r;
                }(Struct);
                CollisionBoxStruct.prototype.size = 24;
                var CollisionBoxArray = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype.get = function (t) {
                        return new CollisionBoxStruct(this, t);
                    }, r;
                }(StructArrayLayout6i1ul2ui2i24);
                register('CollisionBoxArray', CollisionBoxArray);
                var PlacedSymbolStruct = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r;
                    var i = {
                        anchorX: {},
                        anchorY: {},
                        glyphStartIndex: {},
                        numGlyphs: {},
                        vertexStartIndex: {},
                        lineStartIndex: {},
                        lineLength: {},
                        segment: {},
                        lowerSize: {},
                        upperSize: {},
                        lineOffsetX: {},
                        lineOffsetY: {},
                        writingMode: {},
                        hidden: {}
                    };
                    return i.anchorX.get = function () {
                        return this._structArray.int16[this._pos2 + 0];
                    }, i.anchorX.set = function (t) {
                        this._structArray.int16[this._pos2 + 0] = t;
                    }, i.anchorY.get = function () {
                        return this._structArray.int16[this._pos2 + 1];
                    }, i.anchorY.set = function (t) {
                        this._structArray.int16[this._pos2 + 1] = t;
                    }, i.glyphStartIndex.get = function () {
                        return this._structArray.uint16[this._pos2 + 2];
                    }, i.glyphStartIndex.set = function (t) {
                        this._structArray.uint16[this._pos2 + 2] = t;
                    }, i.numGlyphs.get = function () {
                        return this._structArray.uint16[this._pos2 + 3];
                    }, i.numGlyphs.set = function (t) {
                        this._structArray.uint16[this._pos2 + 3] = t;
                    }, i.vertexStartIndex.get = function () {
                        return this._structArray.uint32[this._pos4 + 2];
                    }, i.vertexStartIndex.set = function (t) {
                        this._structArray.uint32[this._pos4 + 2] = t;
                    }, i.lineStartIndex.get = function () {
                        return this._structArray.uint32[this._pos4 + 3];
                    }, i.lineStartIndex.set = function (t) {
                        this._structArray.uint32[this._pos4 + 3] = t;
                    }, i.lineLength.get = function () {
                        return this._structArray.uint32[this._pos4 + 4];
                    }, i.lineLength.set = function (t) {
                        this._structArray.uint32[this._pos4 + 4] = t;
                    }, i.segment.get = function () {
                        return this._structArray.uint16[this._pos2 + 10];
                    }, i.segment.set = function (t) {
                        this._structArray.uint16[this._pos2 + 10] = t;
                    }, i.lowerSize.get = function () {
                        return this._structArray.uint16[this._pos2 + 11];
                    }, i.lowerSize.set = function (t) {
                        this._structArray.uint16[this._pos2 + 11] = t;
                    }, i.upperSize.get = function () {
                        return this._structArray.uint16[this._pos2 + 12];
                    }, i.upperSize.set = function (t) {
                        this._structArray.uint16[this._pos2 + 12] = t;
                    }, i.lineOffsetX.get = function () {
                        return this._structArray.float32[this._pos4 + 7];
                    }, i.lineOffsetX.set = function (t) {
                        this._structArray.float32[this._pos4 + 7] = t;
                    }, i.lineOffsetY.get = function () {
                        return this._structArray.float32[this._pos4 + 8];
                    }, i.lineOffsetY.set = function (t) {
                        this._structArray.float32[this._pos4 + 8] = t;
                    }, i.writingMode.get = function () {
                        return this._structArray.uint8[this._pos1 + 36];
                    }, i.writingMode.set = function (t) {
                        this._structArray.uint8[this._pos1 + 36] = t;
                    }, i.hidden.get = function () {
                        return this._structArray.uint8[this._pos1 + 37];
                    }, i.hidden.set = function (t) {
                        this._structArray.uint8[this._pos1 + 37] = t;
                    }, Object.defineProperties(r.prototype, i), r;
                }(Struct);
                PlacedSymbolStruct.prototype.size = 40;
                var PlacedSymbolArray = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype.get = function (t) {
                        return new PlacedSymbolStruct(this, t);
                    }, r;
                }(StructArrayLayout2i2ui3ul3ui2f2ub40);
                register('PlacedSymbolArray', PlacedSymbolArray);
                var GlyphOffsetStruct = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r;
                    var i = { offsetX: {} };
                    return i.offsetX.get = function () {
                        return this._structArray.float32[this._pos4 + 0];
                    }, i.offsetX.set = function (t) {
                        this._structArray.float32[this._pos4 + 0] = t;
                    }, Object.defineProperties(r.prototype, i), r;
                }(Struct);
                GlyphOffsetStruct.prototype.size = 4;
                var GlyphOffsetArray = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype.getoffsetX = function (t) {
                        return this.float32[1 * t + 0];
                    }, r.prototype.get = function (t) {
                        return new GlyphOffsetStruct(this, t);
                    }, r;
                }(StructArrayLayout1f4);
                register('GlyphOffsetArray', GlyphOffsetArray);
                var SymbolLineVertexStruct = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r;
                    var i = {
                        x: {},
                        y: {},
                        tileUnitDistanceFromAnchor: {}
                    };
                    return i.x.get = function () {
                        return this._structArray.int16[this._pos2 + 0];
                    }, i.x.set = function (t) {
                        this._structArray.int16[this._pos2 + 0] = t;
                    }, i.y.get = function () {
                        return this._structArray.int16[this._pos2 + 1];
                    }, i.y.set = function (t) {
                        this._structArray.int16[this._pos2 + 1] = t;
                    }, i.tileUnitDistanceFromAnchor.get = function () {
                        return this._structArray.int16[this._pos2 + 2];
                    }, i.tileUnitDistanceFromAnchor.set = function (t) {
                        this._structArray.int16[this._pos2 + 2] = t;
                    }, Object.defineProperties(r.prototype, i), r;
                }(Struct);
                SymbolLineVertexStruct.prototype.size = 6;
                var SymbolLineVertexArray = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype.getx = function (t) {
                        return this.int16[3 * t + 0];
                    }, r.prototype.gety = function (t) {
                        return this.int16[3 * t + 1];
                    }, r.prototype.gettileUnitDistanceFromAnchor = function (t) {
                        return this.int16[3 * t + 2];
                    }, r.prototype.get = function (t) {
                        return new SymbolLineVertexStruct(this, t);
                    }, r;
                }(StructArrayLayout3i6);
                register('SymbolLineVertexArray', SymbolLineVertexArray);
                var FeatureIndexStruct = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r;
                    var i = {
                        featureIndex: {},
                        sourceLayerIndex: {},
                        bucketIndex: {}
                    };
                    return i.featureIndex.get = function () {
                        return this._structArray.uint32[this._pos4 + 0];
                    }, i.featureIndex.set = function (t) {
                        this._structArray.uint32[this._pos4 + 0] = t;
                    }, i.sourceLayerIndex.get = function () {
                        return this._structArray.uint16[this._pos2 + 2];
                    }, i.sourceLayerIndex.set = function (t) {
                        this._structArray.uint16[this._pos2 + 2] = t;
                    }, i.bucketIndex.get = function () {
                        return this._structArray.uint16[this._pos2 + 3];
                    }, i.bucketIndex.set = function (t) {
                        this._structArray.uint16[this._pos2 + 3] = t;
                    }, Object.defineProperties(r.prototype, i), r;
                }(Struct);
                FeatureIndexStruct.prototype.size = 8;
                var FeatureIndexArray = function (t) {
                    function r() {
                        t.apply(this, arguments);
                    }
                    return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype.get = function (t) {
                        return new FeatureIndexStruct(this, t);
                    }, r;
                }(StructArrayLayout1ul2ui8);
                register('FeatureIndexArray', FeatureIndexArray), module.exports = {
                    StructArrayLayout2i4: StructArrayLayout2i4,
                    StructArrayLayout4i8: StructArrayLayout4i8,
                    StructArrayLayout2i4i12: StructArrayLayout2i4i12,
                    StructArrayLayout4i4ub12: StructArrayLayout4i4ub12,
                    StructArrayLayout4i4ui16: StructArrayLayout4i4ui16,
                    StructArrayLayout3f12: StructArrayLayout3f12,
                    StructArrayLayout1ul4: StructArrayLayout1ul4,
                    StructArrayLayout6i1ul2ui2i24: StructArrayLayout6i1ul2ui2i24,
                    StructArrayLayout2i2i2i12: StructArrayLayout2i2i2i12,
                    StructArrayLayout2ub4: StructArrayLayout2ub4,
                    StructArrayLayout2i2ui3ul3ui2f2ub40: StructArrayLayout2i2ui3ul3ui2f2ub40,
                    StructArrayLayout1f4: StructArrayLayout1f4,
                    StructArrayLayout3i6: StructArrayLayout3i6,
                    StructArrayLayout1ul2ui8: StructArrayLayout1ul2ui8,
                    StructArrayLayout3ui6: StructArrayLayout3ui6,
                    StructArrayLayout2ui4: StructArrayLayout2ui4,
                    StructArrayLayout2f8: StructArrayLayout2f8,
                    StructArrayLayout4f16: StructArrayLayout4f16,
                    PosArray: StructArrayLayout2i4,
                    RasterBoundsArray: StructArrayLayout4i8,
                    CircleLayoutArray: StructArrayLayout2i4,
                    FillLayoutArray: StructArrayLayout2i4,
                    FillExtrusionLayoutArray: StructArrayLayout2i4i12,
                    HeatmapLayoutArray: StructArrayLayout2i4,
                    LineLayoutArray: StructArrayLayout4i4ub12,
                    SymbolLayoutArray: StructArrayLayout4i4ui16,
                    SymbolDynamicLayoutArray: StructArrayLayout3f12,
                    SymbolOpacityArray: StructArrayLayout1ul4,
                    CollisionBoxLayoutArray: StructArrayLayout2i2i2i12,
                    CollisionCircleLayoutArray: StructArrayLayout2i2i2i12,
                    CollisionVertexArray: StructArrayLayout2ub4,
                    TriangleIndexArray: StructArrayLayout3ui6,
                    LineIndexArray: StructArrayLayout2ui4,
                    CollisionBoxArray: CollisionBoxArray,
                    PlacedSymbolArray: PlacedSymbolArray,
                    GlyphOffsetArray: GlyphOffsetArray,
                    SymbolLineVertexArray: SymbolLineVertexArray,
                    FeatureIndexArray: FeatureIndexArray
                };
            },
            {
                '../util/struct_array': 271,
                '../util/web_worker_transfer': 278,
                '@mapbox/point-geometry': 4
            }
        ],
        40: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = {
                    deserialize: function (r, e) {
                        var t = {};
                        if (!e) {
                            return t;
                        }
                        for (var n = 0, a = r; n < a.length; n += 1) {
                            var i = a[n], l = i.layerIds.map(function (r) {
                                    return e.getLayer(r);
                                }).filter(Boolean);
                            if (0 !== l.length) {
                                i.layers = l;
                                for (var o = 0, f = l; o < f.length; o += 1) {
                                    t[f[o].id] = i;
                                }
                            }
                        }
                        return t;
                    }
                };
            },
            {}
        ],
        41: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../../util/struct_array'), createLayout = ref.createLayout;
                module.exports = createLayout([{
                        name: 'a_pos',
                        components: 2,
                        type: 'Int16'
                    }], 4);
            },
            { '../../util/struct_array': 271 }
        ],
        42: [
            function (_dereq_, module, exports) {
                'use strict';
                function addCircleVertex(e, r, t, a, i) {
                    e.emplaceBack(2 * r + (a + 1) / 2, 2 * t + (i + 1) / 2);
                }
                var ref = _dereq_('../array_types'), CircleLayoutArray = ref.CircleLayoutArray, layoutAttributes = _dereq_('./circle_attributes').members, ref$1 = _dereq_('../segment'), SegmentVector = ref$1.SegmentVector, ref$2 = _dereq_('../program_configuration'), ProgramConfigurationSet = ref$2.ProgramConfigurationSet, ref$3 = _dereq_('../index_array_type'), TriangleIndexArray = ref$3.TriangleIndexArray, loadGeometry = _dereq_('../load_geometry'), EXTENT = _dereq_('../extent'), ref$4 = _dereq_('../../util/web_worker_transfer'), register = ref$4.register, CircleBucket = function (e) {
                        this.zoom = e.zoom, this.overscaling = e.overscaling, this.layers = e.layers, this.layerIds = this.layers.map(function (e) {
                            return e.id;
                        }), this.index = e.index, this.layoutVertexArray = new CircleLayoutArray(), this.indexArray = new TriangleIndexArray(), this.segments = new SegmentVector(), this.programConfigurations = new ProgramConfigurationSet(layoutAttributes, e.layers, e.zoom);
                    };
                CircleBucket.prototype.populate = function (e, r) {
                    for (var t = this, a = 0, i = e; a < i.length; a += 1) {
                        var o = i[a], n = o.feature, u = o.index, s = o.sourceLayerIndex;
                        if (t.layers[0]._featureFilter({ zoom: t.zoom }, n)) {
                            var y = loadGeometry(n);
                            t.addFeature(n, y), r.featureIndex.insert(n, y, u, s, t.index);
                        }
                    }
                }, CircleBucket.prototype.isEmpty = function () {
                    return 0 === this.layoutVertexArray.length;
                }, CircleBucket.prototype.upload = function (e) {
                    this.layoutVertexBuffer = e.createVertexBuffer(this.layoutVertexArray, layoutAttributes), this.indexBuffer = e.createIndexBuffer(this.indexArray), this.programConfigurations.upload(e);
                }, CircleBucket.prototype.destroy = function () {
                    this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
                }, CircleBucket.prototype.addFeature = function (e, r) {
                    for (var t = this, a = 0, i = r; a < i.length; a += 1) {
                        for (var o = i[a], n = 0, u = o; n < u.length; n += 1) {
                            var s = u[n], y = s.x, l = s.y;
                            if (!(y < 0 || y >= EXTENT || l < 0 || l >= EXTENT)) {
                                var c = t.segments.prepareSegment(4, t.layoutVertexArray, t.indexArray), f = c.vertexLength;
                                addCircleVertex(t.layoutVertexArray, y, l, -1, -1), addCircleVertex(t.layoutVertexArray, y, l, 1, -1), addCircleVertex(t.layoutVertexArray, y, l, 1, 1), addCircleVertex(t.layoutVertexArray, y, l, -1, 1), t.indexArray.emplaceBack(f, f + 1, f + 2), t.indexArray.emplaceBack(f, f + 3, f + 2), c.vertexLength += 4, c.primitiveLength += 2;
                            }
                        }
                    }
                    this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, e);
                }, register('CircleBucket', CircleBucket, { omit: ['layers'] }), module.exports = CircleBucket;
            },
            {
                '../../util/web_worker_transfer': 278,
                '../array_types': 39,
                '../extent': 53,
                '../index_array_type': 55,
                '../load_geometry': 56,
                '../program_configuration': 58,
                '../segment': 60,
                './circle_attributes': 41
            }
        ],
        43: [
            function (_dereq_, module, exports) {
                arguments[4][41][0].apply(exports, arguments);
            },
            {
                '../../util/struct_array': 271,
                'dup': 41
            }
        ],
        44: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../array_types'), FillLayoutArray = ref.FillLayoutArray, layoutAttributes = _dereq_('./fill_attributes').members, ref$1 = _dereq_('../segment'), SegmentVector = ref$1.SegmentVector, ref$2 = _dereq_('../program_configuration'), ProgramConfigurationSet = ref$2.ProgramConfigurationSet, ref$3 = _dereq_('../index_array_type'), LineIndexArray = ref$3.LineIndexArray, TriangleIndexArray = ref$3.TriangleIndexArray, loadGeometry = _dereq_('../load_geometry'), earcut = _dereq_('earcut'), classifyRings = _dereq_('../../util/classify_rings'), EARCUT_MAX_RINGS = 500, ref$4 = _dereq_('../../util/web_worker_transfer'), register = ref$4.register, FillBucket = function (e) {
                        this.zoom = e.zoom, this.overscaling = e.overscaling, this.layers = e.layers, this.layerIds = this.layers.map(function (e) {
                            return e.id;
                        }), this.index = e.index, this.layoutVertexArray = new FillLayoutArray(), this.indexArray = new TriangleIndexArray(), this.indexArray2 = new LineIndexArray(), this.programConfigurations = new ProgramConfigurationSet(layoutAttributes, e.layers, e.zoom), this.segments = new SegmentVector(), this.segments2 = new SegmentVector();
                    };
                FillBucket.prototype.populate = function (e, r) {
                    for (var t = this, i = 0, a = e; i < a.length; i += 1) {
                        var n = a[i], o = n.feature, s = n.index, u = n.sourceLayerIndex;
                        if (t.layers[0]._featureFilter({ zoom: t.zoom }, o)) {
                            var l = loadGeometry(o);
                            t.addFeature(o, l), r.featureIndex.insert(o, l, s, u, t.index);
                        }
                    }
                }, FillBucket.prototype.isEmpty = function () {
                    return 0 === this.layoutVertexArray.length;
                }, FillBucket.prototype.upload = function (e) {
                    this.layoutVertexBuffer = e.createVertexBuffer(this.layoutVertexArray, layoutAttributes), this.indexBuffer = e.createIndexBuffer(this.indexArray), this.indexBuffer2 = e.createIndexBuffer(this.indexArray2), this.programConfigurations.upload(e);
                }, FillBucket.prototype.destroy = function () {
                    this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.indexBuffer2.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.segments2.destroy());
                }, FillBucket.prototype.addFeature = function (e, r) {
                    for (var t = this, i = 0, a = classifyRings(r, EARCUT_MAX_RINGS); i < a.length; i += 1) {
                        for (var n = a[i], o = 0, s = 0, u = n; s < u.length; s += 1) {
                            o += u[s].length;
                        }
                        for (var l = t.segments.prepareSegment(o, t.layoutVertexArray, t.indexArray), y = l.vertexLength, g = [], f = [], h = 0, x = n; h < x.length; h += 1) {
                            var d = x[h];
                            if (0 !== d.length) {
                                d !== n[0] && f.push(g.length / 2);
                                var c = t.segments2.prepareSegment(d.length, t.layoutVertexArray, t.indexArray2), m = c.vertexLength;
                                t.layoutVertexArray.emplaceBack(d[0].x, d[0].y), t.indexArray2.emplaceBack(m + d.length - 1, m), g.push(d[0].x), g.push(d[0].y);
                                for (var p = 1; p < d.length; p++) {
                                    t.layoutVertexArray.emplaceBack(d[p].x, d[p].y), t.indexArray2.emplaceBack(m + p - 1, m + p), g.push(d[p].x), g.push(d[p].y);
                                }
                                c.vertexLength += d.length, c.primitiveLength += d.length;
                            }
                        }
                        for (var A = earcut(g, f), B = 0; B < A.length; B += 3) {
                            t.indexArray.emplaceBack(y + A[B], y + A[B + 1], y + A[B + 2]);
                        }
                        l.vertexLength += o, l.primitiveLength += A.length / 3;
                    }
                    this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, e);
                }, register('FillBucket', FillBucket, { omit: ['layers'] }), module.exports = FillBucket;
            },
            {
                '../../util/classify_rings': 255,
                '../../util/web_worker_transfer': 278,
                '../array_types': 39,
                '../index_array_type': 55,
                '../load_geometry': 56,
                '../program_configuration': 58,
                '../segment': 60,
                './fill_attributes': 43,
                'earcut': 14
            }
        ],
        45: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../../util/struct_array'), createLayout = ref.createLayout;
                module.exports = createLayout([
                    {
                        name: 'a_pos',
                        components: 2,
                        type: 'Int16'
                    },
                    {
                        name: 'a_normal_ed',
                        components: 4,
                        type: 'Int16'
                    }
                ], 4);
            },
            { '../../util/struct_array': 271 }
        ],
        46: [
            function (_dereq_, module, exports) {
                'use strict';
                function addVertex(e, r, t, i, a, n, o, u) {
                    e.emplaceBack(r, t, 2 * Math.floor(i * FACTOR) + o, a * FACTOR * 2, n * FACTOR * 2, Math.round(u));
                }
                function isBoundaryEdge(e, r) {
                    return e.x === r.x && (e.x < 0 || e.x > EXTENT) || e.y === r.y && (e.y < 0 || e.y > EXTENT);
                }
                function isEntirelyOutside(e) {
                    return e.every(function (e) {
                        return e.x < 0;
                    }) || e.every(function (e) {
                        return e.x > EXTENT;
                    }) || e.every(function (e) {
                        return e.y < 0;
                    }) || e.every(function (e) {
                        return e.y > EXTENT;
                    });
                }
                var ref = _dereq_('../array_types'), FillExtrusionLayoutArray = ref.FillExtrusionLayoutArray, layoutAttributes = _dereq_('./fill_extrusion_attributes').members, ref$1 = _dereq_('../segment'), SegmentVector = ref$1.SegmentVector, MAX_VERTEX_ARRAY_LENGTH = ref$1.MAX_VERTEX_ARRAY_LENGTH, ref$2 = _dereq_('../program_configuration'), ProgramConfigurationSet = ref$2.ProgramConfigurationSet, ref$3 = _dereq_('../index_array_type'), TriangleIndexArray = ref$3.TriangleIndexArray, loadGeometry = _dereq_('../load_geometry'), EXTENT = _dereq_('../extent'), earcut = _dereq_('earcut'), classifyRings = _dereq_('../../util/classify_rings'), EARCUT_MAX_RINGS = 500, ref$4 = _dereq_('../../util/web_worker_transfer'), register = ref$4.register, FACTOR = Math.pow(2, 13), FillExtrusionBucket = function (e) {
                        this.zoom = e.zoom, this.overscaling = e.overscaling, this.layers = e.layers, this.layerIds = this.layers.map(function (e) {
                            return e.id;
                        }), this.index = e.index, this.layoutVertexArray = new FillExtrusionLayoutArray(), this.indexArray = new TriangleIndexArray(), this.programConfigurations = new ProgramConfigurationSet(layoutAttributes, e.layers, e.zoom), this.segments = new SegmentVector();
                    };
                FillExtrusionBucket.prototype.populate = function (e, r) {
                    for (var t = this, i = 0, a = e; i < a.length; i += 1) {
                        var n = a[i], o = n.feature, u = n.index, s = n.sourceLayerIndex;
                        if (t.layers[0]._featureFilter({ zoom: t.zoom }, o)) {
                            var y = loadGeometry(o);
                            t.addFeature(o, y), r.featureIndex.insert(o, y, u, s, t.index);
                        }
                    }
                }, FillExtrusionBucket.prototype.isEmpty = function () {
                    return 0 === this.layoutVertexArray.length;
                }, FillExtrusionBucket.prototype.upload = function (e) {
                    this.layoutVertexBuffer = e.createVertexBuffer(this.layoutVertexArray, layoutAttributes), this.indexBuffer = e.createIndexBuffer(this.indexArray), this.programConfigurations.upload(e);
                }, FillExtrusionBucket.prototype.destroy = function () {
                    this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
                }, FillExtrusionBucket.prototype.addFeature = function (e, r) {
                    for (var t = this, i = 0, a = classifyRings(r, EARCUT_MAX_RINGS); i < a.length; i += 1) {
                        for (var n = a[i], o = 0, u = 0, s = n; u < s.length; u += 1) {
                            o += s[u].length;
                        }
                        for (var y = t.segments.prepareSegment(4, t.layoutVertexArray, t.indexArray), l = 0, x = n; l < x.length; l += 1) {
                            var f = x[l];
                            if (0 !== f.length && !isEntirelyOutside(f)) {
                                for (var g = 0, d = 0; d < f.length; d++) {
                                    var h = f[d];
                                    if (d >= 1) {
                                        var A = f[d - 1];
                                        if (!isBoundaryEdge(h, A)) {
                                            y.vertexLength + 4 > MAX_VERTEX_ARRAY_LENGTH && (y = t.segments.prepareSegment(4, t.layoutVertexArray, t.indexArray));
                                            var c = h.sub(A)._perp()._unit(), p = A.dist(h);
                                            g + p > 32768 && (g = 0), addVertex(t.layoutVertexArray, h.x, h.y, c.x, c.y, 0, 0, g), addVertex(t.layoutVertexArray, h.x, h.y, c.x, c.y, 0, 1, g), g += p, addVertex(t.layoutVertexArray, A.x, A.y, c.x, c.y, 0, 0, g), addVertex(t.layoutVertexArray, A.x, A.y, c.x, c.y, 0, 1, g);
                                            var E = y.vertexLength;
                                            t.indexArray.emplaceBack(E, E + 1, E + 2), t.indexArray.emplaceBack(E + 1, E + 2, E + 3), y.vertexLength += 4, y.primitiveLength += 2;
                                        }
                                    }
                                }
                            }
                        }
                        y.vertexLength + o > MAX_VERTEX_ARRAY_LENGTH && (y = t.segments.prepareSegment(o, t.layoutVertexArray, t.indexArray));
                        for (var m = [], v = [], V = y.vertexLength, _ = 0, T = n; _ < T.length; _ += 1) {
                            var B = T[_];
                            if (0 !== B.length) {
                                B !== n[0] && v.push(m.length / 2);
                                for (var R = 0; R < B.length; R++) {
                                    var F = B[R];
                                    addVertex(t.layoutVertexArray, F.x, F.y, 0, 0, 1, 1, 0), m.push(F.x), m.push(F.y);
                                }
                            }
                        }
                        for (var L = earcut(m, v), X = 0; X < L.length; X += 3) {
                            t.indexArray.emplaceBack(V + L[X], V + L[X + 1], V + L[X + 2]);
                        }
                        y.primitiveLength += L.length / 3, y.vertexLength += o;
                    }
                    this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, e);
                }, register('FillExtrusionBucket', FillExtrusionBucket, { omit: ['layers'] }), module.exports = FillExtrusionBucket;
            },
            {
                '../../util/classify_rings': 255,
                '../../util/web_worker_transfer': 278,
                '../array_types': 39,
                '../extent': 53,
                '../index_array_type': 55,
                '../load_geometry': 56,
                '../program_configuration': 58,
                '../segment': 60,
                './fill_extrusion_attributes': 45,
                'earcut': 14
            }
        ],
        47: [
            function (_dereq_, module, exports) {
                'use strict';
                var CircleBucket = _dereq_('./circle_bucket'), ref = _dereq_('../../util/web_worker_transfer'), register = ref.register, HeatmapBucket = function (e) {
                        function t() {
                            e.apply(this, arguments);
                        }
                        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t;
                    }(CircleBucket);
                register('HeatmapBucket', HeatmapBucket, { omit: ['layers'] }), module.exports = HeatmapBucket;
            },
            {
                '../../util/web_worker_transfer': 278,
                './circle_bucket': 42
            }
        ],
        48: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../../util/struct_array'), createLayout = ref.createLayout;
                module.exports = createLayout([
                    {
                        name: 'a_pos_normal',
                        components: 4,
                        type: 'Int16'
                    },
                    {
                        name: 'a_data',
                        components: 4,
                        type: 'Uint8'
                    }
                ], 4);
            },
            { '../../util/struct_array': 271 }
        ],
        49: [
            function (_dereq_, module, exports) {
                'use strict';
                function addLineVertex(e, t, r, i, a, n, s) {
                    e.emplaceBack(t.x, t.y, i ? 1 : 0, a ? 1 : -1, Math.round(EXTRUDE_SCALE * r.x) + 128, Math.round(EXTRUDE_SCALE * r.y) + 128, 1 + (0 === n ? 0 : n < 0 ? -1 : 1) | (s * LINE_DISTANCE_SCALE & 63) << 2, s * LINE_DISTANCE_SCALE >> 6);
                }
                var ref = _dereq_('../array_types'), LineLayoutArray = ref.LineLayoutArray, layoutAttributes = _dereq_('./line_attributes').members, ref$1 = _dereq_('../segment'), SegmentVector = ref$1.SegmentVector, ref$2 = _dereq_('../program_configuration'), ProgramConfigurationSet = ref$2.ProgramConfigurationSet, ref$3 = _dereq_('../index_array_type'), TriangleIndexArray = ref$3.TriangleIndexArray, loadGeometry = _dereq_('../load_geometry'), EXTENT = _dereq_('../extent'), vectorTileFeatureTypes = _dereq_('@mapbox/vector-tile').VectorTileFeature.types, ref$4 = _dereq_('../../util/web_worker_transfer'), register = ref$4.register, EXTRUDE_SCALE = 63, COS_HALF_SHARP_CORNER = Math.cos(Math.PI / 180 * 37.5), SHARP_CORNER_OFFSET = 15, LINE_DISTANCE_BUFFER_BITS = 15, LINE_DISTANCE_SCALE = 0.5, MAX_LINE_DISTANCE = Math.pow(2, LINE_DISTANCE_BUFFER_BITS - 1) / LINE_DISTANCE_SCALE, LineBucket = function (e) {
                        this.zoom = e.zoom, this.overscaling = e.overscaling, this.layers = e.layers, this.layerIds = this.layers.map(function (e) {
                            return e.id;
                        }), this.index = e.index, this.layoutVertexArray = new LineLayoutArray(), this.indexArray = new TriangleIndexArray(), this.programConfigurations = new ProgramConfigurationSet(layoutAttributes, e.layers, e.zoom), this.segments = new SegmentVector();
                    };
                LineBucket.prototype.populate = function (e, t) {
                    for (var r = this, i = 0, a = e; i < a.length; i += 1) {
                        var n = a[i], s = n.feature, u = n.index, d = n.sourceLayerIndex;
                        if (r.layers[0]._featureFilter({ zoom: r.zoom }, s)) {
                            var o = loadGeometry(s);
                            r.addFeature(s, o), t.featureIndex.insert(s, o, u, d, r.index);
                        }
                    }
                }, LineBucket.prototype.isEmpty = function () {
                    return 0 === this.layoutVertexArray.length;
                }, LineBucket.prototype.upload = function (e) {
                    this.layoutVertexBuffer = e.createVertexBuffer(this.layoutVertexArray, layoutAttributes), this.indexBuffer = e.createIndexBuffer(this.indexArray), this.programConfigurations.upload(e);
                }, LineBucket.prototype.destroy = function () {
                    this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
                }, LineBucket.prototype.addFeature = function (e, t) {
                    for (var r = this, i = this.layers[0].layout, a = i.get('line-join').evaluate(e), n = i.get('line-cap'), s = i.get('line-miter-limit'), u = i.get('line-round-limit'), d = 0, o = t; d < o.length; d += 1) {
                        var l = o[d];
                        r.addLine(l, e, a, n, s, u);
                    }
                }, LineBucket.prototype.addLine = function (e, t, r, i, a, n) {
                    for (var s = this, u = 'Polygon' === vectorTileFeatureTypes[t.type], d = e.length; d >= 2 && e[d - 1].equals(e[d - 2]);) {
                        d--;
                    }
                    for (var o = 0; o < d - 1 && e[o].equals(e[o + 1]);) {
                        o++;
                    }
                    if (!(d < (u ? 3 : 2))) {
                        'bevel' === r && (a = 1.05);
                        var l = SHARP_CORNER_OFFSET * (EXTENT / (512 * this.overscaling)), h = e[o], y = this.segments.prepareSegment(10 * d, this.layoutVertexArray, this.indexArray);
                        this.distance = 0;
                        var c, f, x, m = i, p = u ? 'butt' : i, _ = !0, g = void 0, v = void 0, L = void 0, A = void 0;
                        this.e1 = this.e2 = this.e3 = -1, u && (c = e[d - 2], A = h.sub(c)._unit()._perp());
                        for (var C = o; C < d; C++) {
                            if (!(v = u && C === d - 1 ? e[o + 1] : e[C + 1]) || !e[C].equals(v)) {
                                A && (L = A), c && (g = c), c = e[C], A = v ? v.sub(c)._unit()._perp() : L, L = L || A;
                                var E = L.add(A);
                                0 === E.x && 0 === E.y || E._unit();
                                var V = E.x * A.x + E.y * A.y, S = 0 !== V ? 1 / V : 1 / 0, B = V < COS_HALF_SHARP_CORNER && g && v;
                                if (B && C > o) {
                                    var T = c.dist(g);
                                    if (T > 2 * l) {
                                        var I = c.sub(c.sub(g)._mult(l / T)._round());
                                        s.distance += I.dist(g), s.addCurrentVertex(I, s.distance, L.mult(1), 0, 0, !1, y), g = I;
                                    }
                                }
                                var b = g && v, N = b ? r : v ? m : p;
                                if (b && 'round' === N && (S < n ? N = 'miter' : S <= 2 && (N = 'fakeround')), 'miter' === N && S > a && (N = 'bevel'), 'bevel' === N && (S > 2 && (N = 'flipbevel'), S < a && (N = 'miter')), g && (s.distance += c.dist(g)), 'miter' === N) {
                                    E._mult(S), s.addCurrentVertex(c, s.distance, E, 0, 0, !1, y);
                                } else if ('flipbevel' === N) {
                                    if (S > 100) {
                                        E = A.clone().mult(-1);
                                    } else {
                                        var k = L.x * A.y - L.y * A.x > 0 ? -1 : 1, R = S * L.add(A).mag() / L.sub(A).mag();
                                        E._perp()._mult(R * k);
                                    }
                                    s.addCurrentVertex(c, s.distance, E, 0, 0, !1, y), s.addCurrentVertex(c, s.distance, E.mult(-1), 0, 0, !1, y);
                                } else if ('bevel' === N || 'fakeround' === N) {
                                    var F = L.x * A.y - L.y * A.x > 0, q = -Math.sqrt(S * S - 1);
                                    if (F ? (x = 0, f = q) : (f = 0, x = q), _ || s.addCurrentVertex(c, s.distance, L, f, x, !1, y), 'fakeround' === N) {
                                        for (var P = Math.floor(8 * (0.5 - (V - 0.5))), D = void 0, M = 0; M < P; M++) {
                                            D = A.mult((M + 1) / (P + 1))._add(L)._unit(), s.addPieSliceVertex(c, s.distance, D, F, y);
                                        }
                                        s.addPieSliceVertex(c, s.distance, E, F, y);
                                        for (var O = P - 1; O >= 0; O--) {
                                            D = L.mult((O + 1) / (P + 1))._add(A)._unit(), s.addPieSliceVertex(c, s.distance, D, F, y);
                                        }
                                    }
                                    v && s.addCurrentVertex(c, s.distance, A, -f, -x, !1, y);
                                } else {
                                    'butt' === N ? (_ || s.addCurrentVertex(c, s.distance, L, 0, 0, !1, y), v && s.addCurrentVertex(c, s.distance, A, 0, 0, !1, y)) : 'square' === N ? (_ || (s.addCurrentVertex(c, s.distance, L, 1, 1, !1, y), s.e1 = s.e2 = -1), v && s.addCurrentVertex(c, s.distance, A, -1, -1, !1, y)) : 'round' === N && (_ || (s.addCurrentVertex(c, s.distance, L, 0, 0, !1, y), s.addCurrentVertex(c, s.distance, L, 1, 1, !0, y), s.e1 = s.e2 = -1), v && (s.addCurrentVertex(c, s.distance, A, -1, -1, !0, y), s.addCurrentVertex(c, s.distance, A, 0, 0, !1, y)));
                                }
                                if (B && C < d - 1) {
                                    var $ = c.dist(v);
                                    if ($ > 2 * l) {
                                        var w = c.add(v.sub(c)._mult(l / $)._round());
                                        s.distance += w.dist(c), s.addCurrentVertex(w, s.distance, A.mult(1), 0, 0, !1, y), c = w;
                                    }
                                }
                                _ = !1;
                            }
                        }
                        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t);
                    }
                }, LineBucket.prototype.addCurrentVertex = function (e, t, r, i, a, n, s) {
                    var u, d = this.layoutVertexArray, o = this.indexArray;
                    u = r.clone(), i && u._sub(r.perp()._mult(i)), addLineVertex(d, e, u, n, !1, i, t), this.e3 = s.vertexLength++, this.e1 >= 0 && this.e2 >= 0 && (o.emplaceBack(this.e1, this.e2, this.e3), s.primitiveLength++), this.e1 = this.e2, this.e2 = this.e3, u = r.mult(-1), a && u._sub(r.perp()._mult(a)), addLineVertex(d, e, u, n, !0, -a, t), this.e3 = s.vertexLength++, this.e1 >= 0 && this.e2 >= 0 && (o.emplaceBack(this.e1, this.e2, this.e3), s.primitiveLength++), this.e1 = this.e2, this.e2 = this.e3, t > MAX_LINE_DISTANCE / 2 && (this.distance = 0, this.addCurrentVertex(e, this.distance, r, i, a, n, s));
                }, LineBucket.prototype.addPieSliceVertex = function (e, t, r, i, a) {
                    r = r.mult(i ? -1 : 1);
                    var n = this.layoutVertexArray, s = this.indexArray;
                    addLineVertex(n, e, r, !1, i, 0, t), this.e3 = a.vertexLength++, this.e1 >= 0 && this.e2 >= 0 && (s.emplaceBack(this.e1, this.e2, this.e3), a.primitiveLength++), i ? this.e2 = this.e3 : this.e1 = this.e3;
                }, register('LineBucket', LineBucket, { omit: ['layers'] }), module.exports = LineBucket;
            },
            {
                '../../util/web_worker_transfer': 278,
                '../array_types': 39,
                '../extent': 53,
                '../index_array_type': 55,
                '../load_geometry': 56,
                '../program_configuration': 58,
                '../segment': 60,
                './line_attributes': 48,
                '@mapbox/vector-tile': 8
            }
        ],
        50: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../../util/struct_array'), createLayout = ref.createLayout, symbolLayoutAttributes = createLayout([
                        {
                            name: 'a_pos_offset',
                            components: 4,
                            type: 'Int16'
                        },
                        {
                            name: 'a_data',
                            components: 4,
                            type: 'Uint16'
                        }
                    ]), dynamicLayoutAttributes = createLayout([{
                            name: 'a_projected_pos',
                            components: 3,
                            type: 'Float32'
                        }], 4), placementOpacityAttributes = createLayout([{
                            name: 'a_fade_opacity',
                            components: 1,
                            type: 'Uint32'
                        }], 4), collisionVertexAttributes = createLayout([{
                            name: 'a_placed',
                            components: 2,
                            type: 'Uint8'
                        }], 4), symbolAttributes = {
                        symbolLayoutAttributes: symbolLayoutAttributes,
                        dynamicLayoutAttributes: dynamicLayoutAttributes,
                        placementOpacityAttributes: placementOpacityAttributes,
                        collisionVertexAttributes: collisionVertexAttributes,
                        collisionBox: createLayout([
                            {
                                type: 'Int16',
                                name: 'anchorPointX'
                            },
                            {
                                type: 'Int16',
                                name: 'anchorPointY'
                            },
                            {
                                type: 'Int16',
                                name: 'x1'
                            },
                            {
                                type: 'Int16',
                                name: 'y1'
                            },
                            {
                                type: 'Int16',
                                name: 'x2'
                            },
                            {
                                type: 'Int16',
                                name: 'y2'
                            },
                            {
                                type: 'Uint32',
                                name: 'featureIndex'
                            },
                            {
                                type: 'Uint16',
                                name: 'sourceLayerIndex'
                            },
                            {
                                type: 'Uint16',
                                name: 'bucketIndex'
                            },
                            {
                                type: 'Int16',
                                name: 'radius'
                            },
                            {
                                type: 'Int16',
                                name: 'signedDistanceFromAnchor'
                            }
                        ]),
                        collisionBoxLayout: createLayout([
                            {
                                name: 'a_pos',
                                components: 2,
                                type: 'Int16'
                            },
                            {
                                name: 'a_anchor_pos',
                                components: 2,
                                type: 'Int16'
                            },
                            {
                                name: 'a_extrude',
                                components: 2,
                                type: 'Int16'
                            }
                        ], 4),
                        collisionCircleLayout: createLayout([
                            {
                                name: 'a_pos',
                                components: 2,
                                type: 'Int16'
                            },
                            {
                                name: 'a_anchor_pos',
                                components: 2,
                                type: 'Int16'
                            },
                            {
                                name: 'a_extrude',
                                components: 2,
                                type: 'Int16'
                            }
                        ], 4),
                        placement: createLayout([
                            {
                                type: 'Int16',
                                name: 'anchorX'
                            },
                            {
                                type: 'Int16',
                                name: 'anchorY'
                            },
                            {
                                type: 'Uint16',
                                name: 'glyphStartIndex'
                            },
                            {
                                type: 'Uint16',
                                name: 'numGlyphs'
                            },
                            {
                                type: 'Uint32',
                                name: 'vertexStartIndex'
                            },
                            {
                                type: 'Uint32',
                                name: 'lineStartIndex'
                            },
                            {
                                type: 'Uint32',
                                name: 'lineLength'
                            },
                            {
                                type: 'Uint16',
                                name: 'segment'
                            },
                            {
                                type: 'Uint16',
                                name: 'lowerSize'
                            },
                            {
                                type: 'Uint16',
                                name: 'upperSize'
                            },
                            {
                                type: 'Float32',
                                name: 'lineOffsetX'
                            },
                            {
                                type: 'Float32',
                                name: 'lineOffsetY'
                            },
                            {
                                type: 'Uint8',
                                name: 'writingMode'
                            },
                            {
                                type: 'Uint8',
                                name: 'hidden'
                            }
                        ]),
                        glyphOffset: createLayout([{
                                type: 'Float32',
                                name: 'offsetX'
                            }]),
                        lineVertex: createLayout([
                            {
                                type: 'Int16',
                                name: 'x'
                            },
                            {
                                type: 'Int16',
                                name: 'y'
                            },
                            {
                                type: 'Int16',
                                name: 'tileUnitDistanceFromAnchor'
                            }
                        ])
                    };
                module.exports = symbolAttributes;
            },
            { '../../util/struct_array': 271 }
        ],
        51: [
            function (_dereq_, module, exports) {
                'use strict';
                function addVertex(e, t, r, o, i, a, n, s) {
                    e.emplaceBack(t, r, Math.round(64 * o), Math.round(64 * i), a, n, s ? s[0] : 0, s ? s[1] : 0);
                }
                function addDynamicAttributes(e, t, r) {
                    e.emplaceBack(t.x, t.y, r), e.emplaceBack(t.x, t.y, r), e.emplaceBack(t.x, t.y, r), e.emplaceBack(t.x, t.y, r);
                }
                var ref = _dereq_('./symbol_attributes'), symbolLayoutAttributes = ref.symbolLayoutAttributes, collisionVertexAttributes = ref.collisionVertexAttributes, collisionBoxLayout = ref.collisionBoxLayout, collisionCircleLayout = ref.collisionCircleLayout, dynamicLayoutAttributes = ref.dynamicLayoutAttributes, ref$1 = _dereq_('../array_types'), SymbolLayoutArray = ref$1.SymbolLayoutArray, SymbolDynamicLayoutArray = ref$1.SymbolDynamicLayoutArray, SymbolOpacityArray = ref$1.SymbolOpacityArray, CollisionBoxLayoutArray = ref$1.CollisionBoxLayoutArray, CollisionCircleLayoutArray = ref$1.CollisionCircleLayoutArray, CollisionVertexArray = ref$1.CollisionVertexArray, PlacedSymbolArray = ref$1.PlacedSymbolArray, GlyphOffsetArray = ref$1.GlyphOffsetArray, SymbolLineVertexArray = ref$1.SymbolLineVertexArray, Point = _dereq_('@mapbox/point-geometry'), ref$2 = _dereq_('../segment'), SegmentVector = ref$2.SegmentVector, ref$3 = _dereq_('../program_configuration'), ProgramConfigurationSet = ref$3.ProgramConfigurationSet, ref$4 = _dereq_('../index_array_type'), TriangleIndexArray = ref$4.TriangleIndexArray, LineIndexArray = ref$4.LineIndexArray, transformText = _dereq_('../../symbol/transform_text'), mergeLines = _dereq_('../../symbol/mergelines'), scriptDetection = _dereq_('../../util/script_detection'), loadGeometry = _dereq_('../load_geometry'), vectorTileFeatureTypes = _dereq_('@mapbox/vector-tile').VectorTileFeature.types, verticalizePunctuation = _dereq_('../../util/verticalize_punctuation'), Anchor = _dereq_('../../symbol/anchor'), ref$5 = _dereq_('../../symbol/symbol_size'), getSizeData = ref$5.getSizeData, ref$6 = _dereq_('../../util/web_worker_transfer'), register = ref$6.register, shaderOpacityAttributes = [{
                            name: 'a_fade_opacity',
                            components: 1,
                            type: 'Uint8',
                            offset: 0
                        }], SymbolBuffers = function (e) {
                        this.layoutVertexArray = new SymbolLayoutArray(), this.indexArray = new TriangleIndexArray(), this.programConfigurations = e, this.segments = new SegmentVector(), this.dynamicLayoutVertexArray = new SymbolDynamicLayoutArray(), this.opacityVertexArray = new SymbolOpacityArray(), this.placedSymbolArray = new PlacedSymbolArray();
                    };
                SymbolBuffers.prototype.upload = function (e, t) {
                    this.layoutVertexBuffer = e.createVertexBuffer(this.layoutVertexArray, symbolLayoutAttributes.members), this.indexBuffer = e.createIndexBuffer(this.indexArray, t), this.programConfigurations.upload(e), this.dynamicLayoutVertexBuffer = e.createVertexBuffer(this.dynamicLayoutVertexArray, dynamicLayoutAttributes.members, !0), this.opacityVertexBuffer = e.createVertexBuffer(this.opacityVertexArray, shaderOpacityAttributes, !0), this.opacityVertexBuffer.itemSize = 1;
                }, SymbolBuffers.prototype.destroy = function () {
                    this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.dynamicLayoutVertexBuffer.destroy(), this.opacityVertexBuffer.destroy());
                }, register('SymbolBuffers', SymbolBuffers);
                var CollisionBuffers = function (e, t, r) {
                    this.layoutVertexArray = new e(), this.layoutAttributes = t, this.indexArray = new r(), this.segments = new SegmentVector(), this.collisionVertexArray = new CollisionVertexArray();
                };
                CollisionBuffers.prototype.upload = function (e) {
                    this.layoutVertexBuffer = e.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes), this.indexBuffer = e.createIndexBuffer(this.indexArray), this.collisionVertexBuffer = e.createVertexBuffer(this.collisionVertexArray, collisionVertexAttributes.members, !0);
                }, CollisionBuffers.prototype.destroy = function () {
                    this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.collisionVertexBuffer.destroy());
                }, register('CollisionBuffers', CollisionBuffers);
                var SymbolBucket = function (e) {
                    this.collisionBoxArray = e.collisionBoxArray, this.zoom = e.zoom, this.overscaling = e.overscaling, this.layers = e.layers, this.layerIds = this.layers.map(function (e) {
                        return e.id;
                    }), this.index = e.index, this.pixelRatio = e.pixelRatio;
                    var t = this.layers[0], r = t._unevaluatedLayout._values;
                    this.textSizeData = getSizeData(this.zoom, r['text-size']), this.iconSizeData = getSizeData(this.zoom, r['icon-size']);
                    var o = this.layers[0].layout;
                    this.sortFeaturesByY = o.get('text-allow-overlap') || o.get('icon-allow-overlap') || o.get('text-ignore-placement') || o.get('icon-ignore-placement');
                };
                SymbolBucket.prototype.createArrays = function () {
                    this.text = new SymbolBuffers(new ProgramConfigurationSet(symbolLayoutAttributes.members, this.layers, this.zoom, function (e) {
                        return /^text/.test(e);
                    })), this.icon = new SymbolBuffers(new ProgramConfigurationSet(symbolLayoutAttributes.members, this.layers, this.zoom, function (e) {
                        return /^icon/.test(e);
                    })), this.collisionBox = new CollisionBuffers(CollisionBoxLayoutArray, collisionBoxLayout.members, LineIndexArray), this.collisionCircle = new CollisionBuffers(CollisionCircleLayoutArray, collisionCircleLayout.members, TriangleIndexArray), this.glyphOffsetArray = new GlyphOffsetArray(), this.lineVertexArray = new SymbolLineVertexArray();
                }, SymbolBucket.prototype.populate = function (e, t) {
                    var r = this, o = this.layers[0], i = o.layout, a = i.get('text-font'), n = i.get('text-field'), s = i.get('icon-image'), l = ('constant' !== n.value.kind || n.value.value.length > 0) && ('constant' !== a.value.kind || a.value.value.length > 0), y = 'constant' !== s.value.kind || s.value.value && s.value.value.length > 0;
                    if (this.features = [], l || y) {
                        for (var c = t.iconDependencies, u = t.glyphDependencies, x = { zoom: this.zoom }, f = 0, h = e; f < h.length; f += 1) {
                            var m = h[f], d = m.feature, p = m.index, g = m.sourceLayerIndex;
                            if (o._featureFilter(x, d)) {
                                var A = void 0;
                                l && (A = o.getValueAndResolveTokens('text-field', d), A = transformText(A, o, d));
                                var b = void 0;
                                if (y && (b = o.getValueAndResolveTokens('icon-image', d)), A || b) {
                                    var B = {
                                        text: A,
                                        icon: b,
                                        index: p,
                                        sourceLayerIndex: g,
                                        geometry: loadGeometry(d),
                                        properties: d.properties,
                                        type: vectorTileFeatureTypes[d.type]
                                    };
                                    if (void 0 !== d.id && (B.id = d.id), r.features.push(B), b && (c[b] = !0), A) {
                                        for (var v = a.evaluate(d).join(','), S = u[v] = u[v] || {}, V = 'map' === i.get('text-rotation-alignment') && 'line' === i.get('symbol-placement'), C = scriptDetection.allowsVerticalWritingMode(A), k = 0; k < A.length; k++) {
                                            if (S[A.charCodeAt(k)] = !0, V && C) {
                                                var L = verticalizePunctuation.lookup[A.charAt(k)];
                                                L && (S[L.charCodeAt(0)] = !0);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        'line' === i.get('symbol-placement') && (this.features = mergeLines(this.features));
                    }
                }, SymbolBucket.prototype.isEmpty = function () {
                    return 0 === this.symbolInstances.length;
                }, SymbolBucket.prototype.upload = function (e) {
                    this.text.upload(e, this.sortFeaturesByY), this.icon.upload(e, this.sortFeaturesByY), this.collisionBox.upload(e), this.collisionCircle.upload(e);
                }, SymbolBucket.prototype.destroy = function () {
                    this.text.destroy(), this.icon.destroy(), this.collisionBox.destroy(), this.collisionCircle.destroy();
                }, SymbolBucket.prototype.addToLineVertexArray = function (e, t) {
                    var r = this, o = this.lineVertexArray.length;
                    if (void 0 !== e.segment) {
                        for (var i = e.dist(t[e.segment + 1]), a = e.dist(t[e.segment]), n = {}, s = e.segment + 1; s < t.length; s++) {
                            n[s] = {
                                x: t[s].x,
                                y: t[s].y,
                                tileUnitDistanceFromAnchor: i
                            }, s < t.length - 1 && (i += t[s + 1].dist(t[s]));
                        }
                        for (var l = e.segment || 0; l >= 0; l--) {
                            n[l] = {
                                x: t[l].x,
                                y: t[l].y,
                                tileUnitDistanceFromAnchor: a
                            }, l > 0 && (a += t[l - 1].dist(t[l]));
                        }
                        for (var y = 0; y < t.length; y++) {
                            var c = n[y];
                            r.lineVertexArray.emplaceBack(c.x, c.y, c.tileUnitDistanceFromAnchor);
                        }
                    }
                    return {
                        lineStartIndex: o,
                        lineLength: this.lineVertexArray.length - o
                    };
                }, SymbolBucket.prototype.addSymbols = function (e, t, r, o, i, a, n, s, l, y) {
                    for (var c = this, u = e.indexArray, x = e.layoutVertexArray, f = e.dynamicLayoutVertexArray, h = e.segments.prepareSegment(4 * t.length, e.layoutVertexArray, e.indexArray), m = this.glyphOffsetArray.length, d = h.vertexLength, p = 0, g = t; p < g.length; p += 1) {
                        var A = g[p], b = A.tl, B = A.tr, v = A.bl, S = A.br, V = A.tex, C = h.vertexLength, k = A.glyphOffset[1];
                        addVertex(x, s.x, s.y, b.x, k + b.y, V.x, V.y, r), addVertex(x, s.x, s.y, B.x, k + B.y, V.x + V.w, V.y, r), addVertex(x, s.x, s.y, v.x, k + v.y, V.x, V.y + V.h, r), addVertex(x, s.x, s.y, S.x, k + S.y, V.x + V.w, V.y + V.h, r), addDynamicAttributes(f, s, 0), u.emplaceBack(C, C + 1, C + 2), u.emplaceBack(C + 1, C + 2, C + 3), h.vertexLength += 4, h.primitiveLength += 2, c.glyphOffsetArray.emplaceBack(A.glyphOffset[0]);
                    }
                    e.placedSymbolArray.emplaceBack(s.x, s.y, m, this.glyphOffsetArray.length - m, d, l, y, s.segment, r ? r[0] : 0, r ? r[1] : 0, o[0], o[1], n, !1), e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length, a);
                }, SymbolBucket.prototype._addCollisionDebugVertex = function (e, t, r, o, i) {
                    return t.emplaceBack(0, 0), e.emplaceBack(r.x, r.y, o.x, o.y, Math.round(i.x), Math.round(i.y));
                }, SymbolBucket.prototype.addCollisionDebugVertices = function (e, t, r, o, i, a, n, s) {
                    var l = i.segments.prepareSegment(4, i.layoutVertexArray, i.indexArray), y = l.vertexLength, c = i.layoutVertexArray, u = i.collisionVertexArray;
                    if (this._addCollisionDebugVertex(c, u, a, n.anchor, new Point(e, t)), this._addCollisionDebugVertex(c, u, a, n.anchor, new Point(r, t)), this._addCollisionDebugVertex(c, u, a, n.anchor, new Point(r, o)), this._addCollisionDebugVertex(c, u, a, n.anchor, new Point(e, o)), l.vertexLength += 4, s) {
                        var x = i.indexArray;
                        x.emplaceBack(y, y + 1, y + 2), x.emplaceBack(y, y + 2, y + 3), l.primitiveLength += 2;
                    } else {
                        var f = i.indexArray;
                        f.emplaceBack(y, y + 1), f.emplaceBack(y + 1, y + 2), f.emplaceBack(y + 2, y + 3), f.emplaceBack(y + 3, y), l.primitiveLength += 4;
                    }
                }, SymbolBucket.prototype.generateCollisionDebugBuffers = function () {
                    for (var e = this, t = 0, r = e.symbolInstances; t < r.length; t += 1) {
                        var o = r[t];
                        o.textCollisionFeature = {
                            boxStartIndex: o.textBoxStartIndex,
                            boxEndIndex: o.textBoxEndIndex
                        }, o.iconCollisionFeature = {
                            boxStartIndex: o.iconBoxStartIndex,
                            boxEndIndex: o.iconBoxEndIndex
                        };
                        for (var i = 0; i < 2; i++) {
                            var a = o[0 === i ? 'textCollisionFeature' : 'iconCollisionFeature'];
                            if (a) {
                                for (var n = a.boxStartIndex; n < a.boxEndIndex; n++) {
                                    var s = e.collisionBoxArray.get(n), l = s.x1, y = s.y1, c = s.x2, u = s.y2, x = s.radius > 0;
                                    e.addCollisionDebugVertices(l, y, c, u, x ? e.collisionCircle : e.collisionBox, s.anchorPoint, o, x);
                                }
                            }
                        }
                    }
                }, SymbolBucket.prototype.deserializeCollisionBoxes = function (e, t, r, o, i) {
                    for (var a = {}, n = t; n < r; n++) {
                        var s = e.get(n);
                        if (0 === s.radius) {
                            a.textBox = {
                                x1: s.x1,
                                y1: s.y1,
                                x2: s.x2,
                                y2: s.y2,
                                anchorPointX: s.anchorPointX,
                                anchorPointY: s.anchorPointY
                            };
                            break;
                        }
                        a.textCircles || (a.textCircles = []);
                        a.textCircles.push(s.anchorPointX, s.anchorPointY, s.radius, s.signedDistanceFromAnchor, 1);
                    }
                    for (var l = o; l < i; l++) {
                        var y = e.get(l);
                        if (0 === y.radius) {
                            a.iconBox = {
                                x1: y.x1,
                                y1: y.y1,
                                x2: y.x2,
                                y2: y.y2,
                                anchorPointX: y.anchorPointX,
                                anchorPointY: y.anchorPointY
                            };
                            break;
                        }
                    }
                    return a;
                }, SymbolBucket.prototype.hasTextData = function () {
                    return this.text.segments.get().length > 0;
                }, SymbolBucket.prototype.hasIconData = function () {
                    return this.icon.segments.get().length > 0;
                }, SymbolBucket.prototype.hasCollisionBoxData = function () {
                    return this.collisionBox.segments.get().length > 0;
                }, SymbolBucket.prototype.hasCollisionCircleData = function () {
                    return this.collisionCircle.segments.get().length > 0;
                }, SymbolBucket.prototype.sortFeatures = function (e) {
                    var t = this;
                    if (this.sortFeaturesByY && this.sortedAngle !== e && (this.sortedAngle = e, !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1))) {
                        for (var r = [], o = 0; o < this.symbolInstances.length; o++) {
                            r.push(o);
                        }
                        var i = Math.sin(e), a = Math.cos(e);
                        r.sort(function (e, r) {
                            var o = t.symbolInstances[e], n = t.symbolInstances[r];
                            return (i * o.anchor.x + a * o.anchor.y | 0) - (i * n.anchor.x + a * n.anchor.y | 0) || n.featureIndex - o.featureIndex;
                        }), this.text.indexArray.clear(), this.icon.indexArray.clear();
                        for (var n = 0, s = r; n < s.length; n += 1) {
                            for (var l = s[n], y = t.symbolInstances[l], c = 0, u = y.placedTextSymbolIndices; c < u.length; c += 1) {
                                for (var x = u[c], f = t.text.placedSymbolArray.get(x), h = f.vertexStartIndex + 4 * f.numGlyphs, m = f.vertexStartIndex; m < h; m += 4) {
                                    t.text.indexArray.emplaceBack(m, m + 1, m + 2), t.text.indexArray.emplaceBack(m + 1, m + 2, m + 3);
                                }
                            }
                            var d = t.icon.placedSymbolArray.get(l);
                            if (d.numGlyphs) {
                                var p = d.vertexStartIndex;
                                t.icon.indexArray.emplaceBack(p, p + 1, p + 2), t.icon.indexArray.emplaceBack(p + 1, p + 2, p + 3);
                            }
                        }
                        this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray), this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray);
                    }
                }, register('SymbolBucket', SymbolBucket, {
                    omit: [
                        'layers',
                        'collisionBoxArray',
                        'features',
                        'compareText'
                    ],
                    shallow: ['symbolInstances']
                }), SymbolBucket.MAX_GLYPHS = 65535, SymbolBucket.addDynamicAttributes = addDynamicAttributes, module.exports = SymbolBucket;
            },
            {
                '../../symbol/anchor': 213,
                '../../symbol/mergelines': 221,
                '../../symbol/symbol_size': 228,
                '../../symbol/transform_text': 229,
                '../../util/script_detection': 269,
                '../../util/verticalize_punctuation': 277,
                '../../util/web_worker_transfer': 278,
                '../array_types': 39,
                '../index_array_type': 55,
                '../load_geometry': 56,
                '../program_configuration': 58,
                '../segment': 60,
                './symbol_attributes': 50,
                '@mapbox/point-geometry': 4,
                '@mapbox/vector-tile': 8
            }
        ],
        52: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../util/image'), RGBAImage = ref.RGBAImage, util = _dereq_('../util/util'), ref$1 = _dereq_('../util/web_worker_transfer'), register = ref$1.register, Level = function (e, t, i) {
                        if (e <= 0) {
                            throw new RangeError('Level must have positive dimension');
                        }
                        this.dim = e, this.border = t, this.stride = this.dim + 2 * this.border, this.data = i || new Int32Array((this.dim + 2 * this.border) * (this.dim + 2 * this.border));
                    };
                Level.prototype.set = function (e, t, i) {
                    this.data[this._idx(e, t)] = i + 65536;
                }, Level.prototype.get = function (e, t) {
                    return this.data[this._idx(e, t)] - 65536;
                }, Level.prototype._idx = function (e, t) {
                    if (e < -this.border || e >= this.dim + this.border || t < -this.border || t >= this.dim + this.border) {
                        throw new RangeError('out of range source coordinates for DEM data');
                    }
                    return (t + this.border) * this.stride + (e + this.border);
                }, register('Level', Level);
                var DEMData = function (e, t, i) {
                    this.uid = e, this.scale = t || 1, this.level = i || new Level(256, 512), this.loaded = !!i;
                };
                DEMData.prototype.loadFromImage = function (e) {
                    var t = this;
                    if (e.height !== e.width) {
                        throw new RangeError('DEM tiles must be square');
                    }
                    for (var i = this.level = new Level(e.width, e.width / 2), r = e.data, d = 0; d < i.dim; d++) {
                        for (var s = 0; s < i.dim; s++) {
                            var a = d * i.dim + s, o = 4 * a;
                            i.set(s, d, t.scale * ((256 * r[o] * 256 + 256 * r[o + 1] + r[o + 2]) / 10 - 10000));
                        }
                    }
                    for (var m = 0; m < i.dim; m++) {
                        i.set(-1, m, i.get(0, m)), i.set(i.dim, m, i.get(i.dim - 1, m)), i.set(m, -1, i.get(m, 0)), i.set(m, i.dim, i.get(m, i.dim - 1));
                    }
                    i.set(-1, -1, i.get(0, 0)), i.set(i.dim, -1, i.get(i.dim - 1, 0)), i.set(-1, i.dim, i.get(0, i.dim - 1)), i.set(i.dim, i.dim, i.get(i.dim - 1, i.dim - 1)), this.loaded = !0;
                }, DEMData.prototype.getPixels = function () {
                    return new RGBAImage({
                        width: this.level.dim + 2 * this.level.border,
                        height: this.level.dim + 2 * this.level.border
                    }, new Uint8Array(this.level.data.buffer));
                }, DEMData.prototype.backfillBorder = function (e, t, i) {
                    var r = this.level, d = e.level;
                    if (r.dim !== d.dim) {
                        throw new Error('level mismatch (dem dimension)');
                    }
                    var s = t * r.dim, a = t * r.dim + r.dim, o = i * r.dim, m = i * r.dim + r.dim;
                    switch (t) {
                    case -1:
                        s = a - 1;
                        break;
                    case 1:
                        a = s + 1;
                    }
                    switch (i) {
                    case -1:
                        o = m - 1;
                        break;
                    case 1:
                        m = o + 1;
                    }
                    for (var l = util.clamp(s, -r.border, r.dim + r.border), h = util.clamp(a, -r.border, r.dim + r.border), n = util.clamp(o, -r.border, r.dim + r.border), v = util.clamp(m, -r.border, r.dim + r.border), u = -t * r.dim, f = -i * r.dim, b = n; b < v; b++) {
                        for (var g = l; g < h; g++) {
                            r.set(g, b, d.get(g + u, b + f));
                        }
                    }
                }, register('DEMData', DEMData), module.exports = {
                    DEMData: DEMData,
                    Level: Level
                };
            },
            {
                '../util/image': 263,
                '../util/util': 275,
                '../util/web_worker_transfer': 278
            }
        ],
        53: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = 8192;
            },
            {}
        ],
        54: [
            function (_dereq_, module, exports) {
                'use strict';
                function topDownFeatureComparator(e, r) {
                    return r - e;
                }
                var Point = _dereq_('@mapbox/point-geometry'), loadGeometry = _dereq_('./load_geometry'), EXTENT = _dereq_('./extent'), featureFilter = _dereq_('../style-spec/feature_filter'), Grid = _dereq_('grid-index'), DictionaryCoder = _dereq_('../util/dictionary_coder'), vt = _dereq_('@mapbox/vector-tile'), Protobuf = _dereq_('pbf'), GeoJSONFeature = _dereq_('../util/vectortile_to_geojson'), arraysIntersect = _dereq_('../util/util').arraysIntersect, ref = _dereq_('../source/tile_id'), OverscaledTileID = ref.OverscaledTileID, ref$1 = _dereq_('../util/web_worker_transfer'), register = ref$1.register, ref$2 = _dereq_('./array_types'), FeatureIndexArray = ref$2.FeatureIndexArray, FeatureIndex = function (e, r, t, a) {
                        this.tileID = e, this.overscaling = r, this.x = e.canonical.x, this.y = e.canonical.y, this.z = e.canonical.z, this.grid = t || new Grid(EXTENT, 16, 0), this.featureIndexArray = a || new FeatureIndexArray();
                    };
                FeatureIndex.prototype.insert = function (e, r, t, a, i) {
                    var o = this, n = this.featureIndexArray.length;
                    this.featureIndexArray.emplaceBack(t, a, i);
                    for (var s = 0; s < r.length; s++) {
                        for (var u = r[s], l = [
                                    1 / 0,
                                    1 / 0,
                                    -1 / 0,
                                    -1 / 0
                                ], y = 0; y < u.length; y++) {
                            var d = u[y];
                            l[0] = Math.min(l[0], d.x), l[1] = Math.min(l[1], d.y), l[2] = Math.max(l[2], d.x), l[3] = Math.max(l[3], d.y);
                        }
                        o.grid.insert(n, l[0], l[1], l[2], l[3]);
                    }
                }, FeatureIndex.prototype.query = function (e, r) {
                    this.vtLayers || (this.vtLayers = new vt.VectorTile(new Protobuf(this.rawTileData)).layers, this.sourceLayerCoder = new DictionaryCoder(this.vtLayers ? Object.keys(this.vtLayers).sort() : ['_geojsonTileLayer']));
                    for (var t = {}, a = e.params || {}, i = EXTENT / e.tileSize / e.scale, o = featureFilter(a.filter), n = e.queryGeometry, s = e.additionalRadius * i, u = 1 / 0, l = 1 / 0, y = -1 / 0, d = -1 / 0, c = 0; c < n.length; c++) {
                        for (var f = n[c], h = 0; h < f.length; h++) {
                            var x = f[h];
                            u = Math.min(u, x.x), l = Math.min(l, x.y), y = Math.max(y, x.x), d = Math.max(d, x.y);
                        }
                    }
                    var v = this.grid.query(u - s, l - s, y + s, d + s);
                    v.sort(topDownFeatureComparator), this.filterMatching(t, v, this.featureIndexArray, n, o, a.layers, r, e.bearing, i);
                    var I = e.collisionIndex ? e.collisionIndex.queryRenderedSymbols(n, this.tileID, EXTENT / e.tileSize, e.collisionBoxArray, e.sourceID, e.bucketInstanceIds) : [];
                    return I.sort(), this.filterMatching(t, I, e.collisionBoxArray, n, o, a.layers, r, e.bearing, i), t;
                }, FeatureIndex.prototype.filterMatching = function (e, r, t, a, i, o, n, s, u) {
                    for (var l, y = this, d = 0; d < r.length; d++) {
                        var c = r[d];
                        if (c !== l) {
                            l = c;
                            var f = t.get(c), h = y.bucketLayerIDs[f.bucketIndex];
                            if (!o || arraysIntersect(o, h)) {
                                var x = y.sourceLayerCoder.decode(f.sourceLayerIndex), v = y.vtLayers[x], I = v.feature(f.featureIndex);
                                if (i({ zoom: y.tileID.overscaledZ }, I)) {
                                    for (var g = null, m = 0; m < h.length; m++) {
                                        var p = h[m];
                                        if (!(o && o.indexOf(p) < 0)) {
                                            var q = n[p];
                                            if (q && ('symbol' === q.type || (g || (g = loadGeometry(I)), q.queryIntersectsFeature(a, I, g, y.z, s, u)))) {
                                                var F = new GeoJSONFeature(I, y.z, y.x, y.y);
                                                F.layer = q.serialize();
                                                var b = e[p];
                                                void 0 === b && (b = e[p] = []), b.push({
                                                    featureIndex: c,
                                                    feature: F
                                                });
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }, FeatureIndex.prototype.hasLayer = function (e) {
                    for (var r = this, t = 0, a = r.bucketLayerIDs; t < a.length; t += 1) {
                        for (var i = a[t], o = 0, n = i; o < n.length; o += 1) {
                            var s = n[o];
                            if (e === s) {
                                return !0;
                            }
                        }
                    }
                    return !1;
                }, register('FeatureIndex', FeatureIndex, {
                    omit: [
                        'rawTileData',
                        'sourceLayerCoder'
                    ]
                }), module.exports = FeatureIndex;
            },
            {
                '../source/tile_id': 114,
                '../style-spec/feature_filter': 148,
                '../util/dictionary_coder': 257,
                '../util/util': 275,
                '../util/vectortile_to_geojson': 276,
                '../util/web_worker_transfer': 278,
                './array_types': 39,
                './extent': 53,
                './load_geometry': 56,
                '@mapbox/point-geometry': 4,
                '@mapbox/vector-tile': 8,
                'grid-index': 24,
                'pbf': 30
            }
        ],
        55: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = {
                    LineIndexArray: _dereq_('./array_types').LineIndexArray,
                    TriangleIndexArray: _dereq_('./array_types').TriangleIndexArray
                };
            },
            { './array_types': 39 }
        ],
        56: [
            function (_dereq_, module, exports) {
                'use strict';
                function createBounds(e) {
                    return {
                        min: -1 * Math.pow(2, e - 1),
                        max: Math.pow(2, e - 1) - 1
                    };
                }
                var util = _dereq_('../util/util'), EXTENT = _dereq_('./extent'), bounds = createBounds(16);
                module.exports = function (e) {
                    for (var t = EXTENT / e.extent, r = e.loadGeometry(), n = 0; n < r.length; n++) {
                        for (var u = r[n], o = 0; o < u.length; o++) {
                            var a = u[o];
                            a.x = Math.round(a.x * t), a.y = Math.round(a.y * t), (a.x < bounds.min || a.x > bounds.max || a.y < bounds.min || a.y > bounds.max) && util.warnOnce('Geometry exceeds allowed extent, reduce your vector tile buffer size');
                        }
                    }
                    return r;
                };
            },
            {
                '../util/util': 275,
                './extent': 53
            }
        ],
        57: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../util/struct_array'), createLayout = ref.createLayout;
                module.exports = createLayout([{
                        name: 'a_pos',
                        type: 'Int16',
                        components: 2
                    }]);
            },
            { '../util/struct_array': 271 }
        ],
        58: [
            function (_dereq_, module, exports) {
                'use strict';
                function packColor(r) {
                    return [
                        packUint8ToFloat(255 * r.r, 255 * r.g),
                        packUint8ToFloat(255 * r.b, 255 * r.a)
                    ];
                }
                function paintAttributeName(r, t) {
                    return {
                        'text-opacity': 'opacity',
                        'icon-opacity': 'opacity',
                        'text-color': 'fill_color',
                        'icon-color': 'fill_color',
                        'text-halo-color': 'halo_color',
                        'icon-halo-color': 'halo_color',
                        'text-halo-blur': 'halo_blur',
                        'icon-halo-blur': 'halo_blur',
                        'text-halo-width': 'halo_width',
                        'icon-halo-width': 'halo_width',
                        'line-gap-width': 'gapwidth'
                    }[r] || r.replace(t + '-', '').replace(/-/g, '_');
                }
                var packUint8ToFloat = _dereq_('../shaders/encode_attribute').packUint8ToFloat, Color = _dereq_('../style-spec/util/color'), ref = _dereq_('../util/web_worker_transfer'), register = ref.register, ref$1 = _dereq_('../style/properties'), PossiblyEvaluatedPropertyValue = ref$1.PossiblyEvaluatedPropertyValue, ref$2 = _dereq_('./array_types'), StructArrayLayout1f4 = ref$2.StructArrayLayout1f4, StructArrayLayout2f8 = ref$2.StructArrayLayout2f8, StructArrayLayout4f16 = ref$2.StructArrayLayout4f16, ConstantBinder = function (r, t, o) {
                        this.value = r, this.name = t, this.type = o, this.statistics = { max: -1 / 0 };
                    };
                ConstantBinder.prototype.defines = function () {
                    return ['#define HAS_UNIFORM_u_' + this.name];
                }, ConstantBinder.prototype.populatePaintArray = function () {
                }, ConstantBinder.prototype.upload = function () {
                }, ConstantBinder.prototype.destroy = function () {
                }, ConstantBinder.prototype.setUniforms = function (r, t, o, e) {
                    var i = e.constantOr(this.value), n = r.gl;
                    'color' === this.type ? n.uniform4f(t.uniforms['u_' + this.name], i.r, i.g, i.b, i.a) : n.uniform1f(t.uniforms['u_' + this.name], i);
                };
                var SourceExpressionBinder = function (r, t, o) {
                    this.expression = r, this.name = t, this.type = o, this.statistics = { max: -1 / 0 };
                    var e = 'color' === o ? StructArrayLayout2f8 : StructArrayLayout1f4;
                    this.paintVertexAttributes = [{
                            name: 'a_' + t,
                            type: 'Float32',
                            components: 'color' === o ? 2 : 1,
                            offset: 0
                        }], this.paintVertexArray = new e();
                };
                SourceExpressionBinder.prototype.defines = function () {
                    return [];
                }, SourceExpressionBinder.prototype.populatePaintArray = function (r, t) {
                    var o = this.paintVertexArray, e = o.length;
                    o.reserve(r);
                    var i = this.expression.evaluate({ zoom: 0 }, t);
                    if ('color' === this.type) {
                        for (var n = packColor(i), a = e; a < r; a++) {
                            o.emplaceBack(n[0], n[1]);
                        }
                    } else {
                        for (var s = e; s < r; s++) {
                            o.emplaceBack(i);
                        }
                        this.statistics.max = Math.max(this.statistics.max, i);
                    }
                }, SourceExpressionBinder.prototype.upload = function (r) {
                    this.paintVertexArray && (this.paintVertexBuffer = r.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes));
                }, SourceExpressionBinder.prototype.destroy = function () {
                    this.paintVertexBuffer && this.paintVertexBuffer.destroy();
                }, SourceExpressionBinder.prototype.setUniforms = function (r, t) {
                    r.gl.uniform1f(t.uniforms['a_' + this.name + '_t'], 0);
                };
                var CompositeExpressionBinder = function (r, t, o, e, i) {
                    this.expression = r, this.name = t, this.type = o, this.useIntegerZoom = e, this.zoom = i, this.statistics = { max: -1 / 0 };
                    var n = 'color' === o ? StructArrayLayout4f16 : StructArrayLayout2f8;
                    this.paintVertexAttributes = [{
                            name: 'a_' + t,
                            type: 'Float32',
                            components: 'color' === o ? 4 : 2,
                            offset: 0
                        }], this.paintVertexArray = new n();
                };
                CompositeExpressionBinder.prototype.defines = function () {
                    return [];
                }, CompositeExpressionBinder.prototype.populatePaintArray = function (r, t) {
                    var o = this.paintVertexArray, e = o.length;
                    o.reserve(r);
                    var i = this.expression.evaluate({ zoom: this.zoom }, t), n = this.expression.evaluate({ zoom: this.zoom + 1 }, t);
                    if ('color' === this.type) {
                        for (var a = packColor(i), s = packColor(n), p = e; p < r; p++) {
                            o.emplaceBack(a[0], a[1], s[0], s[1]);
                        }
                    } else {
                        for (var u = e; u < r; u++) {
                            o.emplaceBack(i, n);
                        }
                        this.statistics.max = Math.max(this.statistics.max, i, n);
                    }
                }, CompositeExpressionBinder.prototype.upload = function (r) {
                    this.paintVertexArray && (this.paintVertexBuffer = r.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes));
                }, CompositeExpressionBinder.prototype.destroy = function () {
                    this.paintVertexBuffer && this.paintVertexBuffer.destroy();
                }, CompositeExpressionBinder.prototype.interpolationFactor = function (r) {
                    return this.useIntegerZoom ? this.expression.interpolationFactor(Math.floor(r), this.zoom, this.zoom + 1) : this.expression.interpolationFactor(r, this.zoom, this.zoom + 1);
                }, CompositeExpressionBinder.prototype.setUniforms = function (r, t, o) {
                    r.gl.uniform1f(t.uniforms['a_' + this.name + '_t'], this.interpolationFactor(o.zoom));
                };
                var ProgramConfiguration = function () {
                    this.binders = {}, this.cacheKey = '', this._buffers = [];
                };
                ProgramConfiguration.createDynamic = function (r, t, o) {
                    var e = new ProgramConfiguration(), i = [];
                    for (var n in r.paint._values) {
                        if (o(n)) {
                            var a = r.paint.get(n);
                            if (a instanceof PossiblyEvaluatedPropertyValue && a.property.specification['property-function']) {
                                var s = paintAttributeName(n, r.type), p = a.property.specification.type, u = a.property.useIntegerZoom;
                                'constant' === a.value.kind ? (e.binders[n] = new ConstantBinder(a.value, s, p), i.push('/u_' + s)) : 'source' === a.value.kind ? (e.binders[n] = new SourceExpressionBinder(a.value, s, p), i.push('/a_' + s)) : (e.binders[n] = new CompositeExpressionBinder(a.value, s, p, u, t), i.push('/z_' + s));
                            }
                        }
                    }
                    return e.cacheKey = i.sort().join(''), e;
                }, ProgramConfiguration.prototype.populatePaintArrays = function (r, t) {
                    var o = this;
                    for (var e in o.binders) {
                        o.binders[e].populatePaintArray(r, t);
                    }
                }, ProgramConfiguration.prototype.defines = function () {
                    var r = this, t = [];
                    for (var o in r.binders) {
                        t.push.apply(t, r.binders[o].defines());
                    }
                    return t;
                }, ProgramConfiguration.prototype.setUniforms = function (r, t, o, e) {
                    var i = this;
                    for (var n in i.binders) {
                        i.binders[n].setUniforms(r, t, e, o.get(n));
                    }
                }, ProgramConfiguration.prototype.getPaintVertexBuffers = function () {
                    return this._buffers;
                }, ProgramConfiguration.prototype.upload = function (r) {
                    var t = this;
                    for (var o in t.binders) {
                        t.binders[o].upload(r);
                    }
                    var e = [];
                    for (var i in t.binders) {
                        var n = t.binders[i];
                        (n instanceof SourceExpressionBinder || n instanceof CompositeExpressionBinder) && n.paintVertexBuffer && e.push(n.paintVertexBuffer);
                    }
                    this._buffers = e;
                }, ProgramConfiguration.prototype.destroy = function () {
                    var r = this;
                    for (var t in r.binders) {
                        r.binders[t].destroy();
                    }
                };
                var ProgramConfigurationSet = function (r, t, o, e) {
                    var i = this;
                    void 0 === e && (e = function () {
                        return !0;
                    }), this.programConfigurations = {};
                    for (var n = 0, a = t; n < a.length; n += 1) {
                        var s = a[n];
                        i.programConfigurations[s.id] = ProgramConfiguration.createDynamic(s, o, e), i.programConfigurations[s.id].layoutAttributes = r;
                    }
                };
                ProgramConfigurationSet.prototype.populatePaintArrays = function (r, t) {
                    var o = this;
                    for (var e in o.programConfigurations) {
                        o.programConfigurations[e].populatePaintArrays(r, t);
                    }
                }, ProgramConfigurationSet.prototype.get = function (r) {
                    return this.programConfigurations[r];
                }, ProgramConfigurationSet.prototype.upload = function (r) {
                    var t = this;
                    for (var o in t.programConfigurations) {
                        t.programConfigurations[o].upload(r);
                    }
                }, ProgramConfigurationSet.prototype.destroy = function () {
                    var r = this;
                    for (var t in r.programConfigurations) {
                        r.programConfigurations[t].destroy();
                    }
                }, register('ConstantBinder', ConstantBinder), register('SourceExpressionBinder', SourceExpressionBinder), register('CompositeExpressionBinder', CompositeExpressionBinder), register('ProgramConfiguration', ProgramConfiguration, { omit: ['_buffers'] }), register('ProgramConfigurationSet', ProgramConfigurationSet), module.exports = {
                    ProgramConfiguration: ProgramConfiguration,
                    ProgramConfigurationSet: ProgramConfigurationSet
                };
            },
            {
                '../shaders/encode_attribute': 96,
                '../style-spec/util/color': 153,
                '../style/properties': 188,
                '../util/web_worker_transfer': 278,
                './array_types': 39
            }
        ],
        59: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../util/struct_array'), createLayout = ref.createLayout;
                module.exports = createLayout([
                    {
                        name: 'a_pos',
                        type: 'Int16',
                        components: 2
                    },
                    {
                        name: 'a_texture_pos',
                        type: 'Int16',
                        components: 2
                    }
                ]);
            },
            { '../util/struct_array': 271 }
        ],
        60: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../util/util'), warnOnce = ref.warnOnce, ref$1 = _dereq_('../util/web_worker_transfer'), register = ref$1.register, MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, SegmentVector = function (e) {
                        void 0 === e && (e = []), this.segments = e;
                    };
                SegmentVector.prototype.prepareSegment = function (e, t, r) {
                    var n = this.segments[this.segments.length - 1];
                    return e > MAX_VERTEX_ARRAY_LENGTH && warnOnce('Max vertices per segment is ' + MAX_VERTEX_ARRAY_LENGTH + ': bucket requested ' + e), (!n || n.vertexLength + e > module.exports.MAX_VERTEX_ARRAY_LENGTH) && (n = {
                        vertexOffset: t.length,
                        primitiveOffset: r.length,
                        vertexLength: 0,
                        primitiveLength: 0
                    }, this.segments.push(n)), n;
                }, SegmentVector.prototype.get = function () {
                    return this.segments;
                }, SegmentVector.prototype.destroy = function () {
                    for (var e = this, t = 0, r = e.segments; t < r.length; t += 1) {
                        var n = r[t];
                        for (var s in n.vaos) {
                            n.vaos[s].destroy();
                        }
                    }
                }, register('SegmentVector', SegmentVector), module.exports = {
                    SegmentVector: SegmentVector,
                    MAX_VERTEX_ARRAY_LENGTH: MAX_VERTEX_ARRAY_LENGTH
                };
            },
            {
                '../util/util': 275,
                '../util/web_worker_transfer': 278
            }
        ],
        61: [
            function (_dereq_, module, exports) {
                'use strict';
                var Coordinate = function (o, t, n) {
                    this.column = o, this.row = t, this.zoom = n;
                };
                Coordinate.prototype.clone = function () {
                    return new Coordinate(this.column, this.row, this.zoom);
                }, Coordinate.prototype.zoomTo = function (o) {
                    return this.clone()._zoomTo(o);
                }, Coordinate.prototype.sub = function (o) {
                    return this.clone()._sub(o);
                }, Coordinate.prototype._zoomTo = function (o) {
                    var t = Math.pow(2, o - this.zoom);
                    return this.column *= t, this.row *= t, this.zoom = o, this;
                }, Coordinate.prototype._sub = function (o) {
                    return o = o.zoomTo(this.zoom), this.column -= o.column, this.row -= o.row, this;
                }, module.exports = Coordinate;
            },
            {}
        ],
        62: [
            function (_dereq_, module, exports) {
                'use strict';
                var wrap = _dereq_('../util/util').wrap, LngLat = function (t, n) {
                        if (isNaN(t) || isNaN(n)) {
                            throw new Error('Invalid LngLat object: (' + t + ', ' + n + ')');
                        }
                        if (this.lng = +t, this.lat = +n, this.lat > 90 || this.lat < -90) {
                            throw new Error('Invalid LngLat latitude value: must be between -90 and 90');
                        }
                    };
                LngLat.prototype.wrap = function () {
                    return new LngLat(wrap(this.lng, -180, 180), this.lat);
                }, LngLat.prototype.toArray = function () {
                    return [
                        this.lng,
                        this.lat
                    ];
                }, LngLat.prototype.toString = function () {
                    return 'LngLat(' + this.lng + ', ' + this.lat + ')';
                }, LngLat.prototype.toBounds = function (t) {
                    var n = 360 * t / 40075017, r = n / Math.cos(Math.PI / 180 * this.lat);
                    return new (_dereq_('./lng_lat_bounds'))(new LngLat(this.lng - r, this.lat - n), new LngLat(this.lng + r, this.lat + n));
                }, LngLat.convert = function (t) {
                    if (t instanceof LngLat) {
                        return t;
                    }
                    if (Array.isArray(t) && (2 === t.length || 3 === t.length)) {
                        return new LngLat(Number(t[0]), Number(t[1]));
                    }
                    if (!Array.isArray(t) && 'object' == typeof t && null !== t) {
                        return new LngLat(Number(t.lng), Number(t.lat));
                    }
                    throw new Error('`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]');
                }, module.exports = LngLat;
            },
            {
                '../util/util': 275,
                './lng_lat_bounds': 63
            }
        ],
        63: [
            function (_dereq_, module, exports) {
                'use strict';
                var LngLat = _dereq_('./lng_lat'), LngLatBounds = function (t, n) {
                        t && (n ? this.setSouthWest(t).setNorthEast(n) : 4 === t.length ? this.setSouthWest([
                            t[0],
                            t[1]
                        ]).setNorthEast([
                            t[2],
                            t[3]
                        ]) : this.setSouthWest(t[0]).setNorthEast(t[1]));
                    };
                LngLatBounds.prototype.setNorthEast = function (t) {
                    return this._ne = t instanceof LngLat ? new LngLat(t.lng, t.lat) : LngLat.convert(t), this;
                }, LngLatBounds.prototype.setSouthWest = function (t) {
                    return this._sw = t instanceof LngLat ? new LngLat(t.lng, t.lat) : LngLat.convert(t), this;
                }, LngLatBounds.prototype.extend = function (t) {
                    var n, e, s = this._sw, o = this._ne;
                    if (t instanceof LngLat) {
                        n = t, e = t;
                    } else {
                        if (!(t instanceof LngLatBounds)) {
                            return Array.isArray(t) ? t.every(Array.isArray) ? this.extend(LngLatBounds.convert(t)) : this.extend(LngLat.convert(t)) : this;
                        }
                        if (n = t._sw, e = t._ne, !n || !e) {
                            return this;
                        }
                    }
                    return s || o ? (s.lng = Math.min(n.lng, s.lng), s.lat = Math.min(n.lat, s.lat), o.lng = Math.max(e.lng, o.lng), o.lat = Math.max(e.lat, o.lat)) : (this._sw = new LngLat(n.lng, n.lat), this._ne = new LngLat(e.lng, e.lat)), this;
                }, LngLatBounds.prototype.getCenter = function () {
                    return new LngLat((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);
                }, LngLatBounds.prototype.getSouthWest = function () {
                    return this._sw;
                }, LngLatBounds.prototype.getNorthEast = function () {
                    return this._ne;
                }, LngLatBounds.prototype.getNorthWest = function () {
                    return new LngLat(this.getWest(), this.getNorth());
                }, LngLatBounds.prototype.getSouthEast = function () {
                    return new LngLat(this.getEast(), this.getSouth());
                }, LngLatBounds.prototype.getWest = function () {
                    return this._sw.lng;
                }, LngLatBounds.prototype.getSouth = function () {
                    return this._sw.lat;
                }, LngLatBounds.prototype.getEast = function () {
                    return this._ne.lng;
                }, LngLatBounds.prototype.getNorth = function () {
                    return this._ne.lat;
                }, LngLatBounds.prototype.toArray = function () {
                    return [
                        this._sw.toArray(),
                        this._ne.toArray()
                    ];
                }, LngLatBounds.prototype.toString = function () {
                    return 'LngLatBounds(' + this._sw.toString() + ', ' + this._ne.toString() + ')';
                }, LngLatBounds.prototype.isEmpty = function () {
                    return !(this._sw && this._ne);
                }, LngLatBounds.convert = function (t) {
                    return !t || t instanceof LngLatBounds ? t : new LngLatBounds(t);
                }, module.exports = LngLatBounds;
            },
            { './lng_lat': 62 }
        ],
        64: [
            function (_dereq_, module, exports) {
                'use strict';
                var LngLat = _dereq_('./lng_lat'), Point = _dereq_('@mapbox/point-geometry'), Coordinate = _dereq_('./coordinate'), util = _dereq_('../util/util'), interp = _dereq_('../style-spec/util/interpolate').number, tileCover = _dereq_('../util/tile_cover'), ref = _dereq_('../source/tile_id'), CanonicalTileID = ref.CanonicalTileID, UnwrappedTileID = ref.UnwrappedTileID, EXTENT = _dereq_('../data/extent'), glmatrix = _dereq_('@mapbox/gl-matrix'), vec4 = glmatrix.vec4, mat4 = glmatrix.mat4, mat2 = glmatrix.mat2, Transform = function (t, i, o) {
                        this.tileSize = 512, this._renderWorldCopies = void 0 === o || o, this._minZoom = t || 0, this._maxZoom = i || 22, this.latRange = [
                            -85.05113,
                            85.05113
                        ], this.width = 0, this.height = 0, this._center = new LngLat(0, 0), this.zoom = 0, this.angle = 0, this._fov = 0.6435011087932844, this._pitch = 0, this._unmodified = !0, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
                    }, prototypeAccessors = {
                        minZoom: {},
                        maxZoom: {},
                        renderWorldCopies: {},
                        worldSize: {},
                        centerPoint: {},
                        size: {},
                        bearing: {},
                        pitch: {},
                        fov: {},
                        zoom: {},
                        center: {},
                        unmodified: {},
                        x: {},
                        y: {},
                        point: {}
                    };
                Transform.prototype.clone = function () {
                    var t = new Transform(this._minZoom, this._maxZoom, this._renderWorldCopies);
                    return t.tileSize = this.tileSize, t.latRange = this.latRange, t.width = this.width, t.height = this.height, t._center = this._center, t.zoom = this.zoom, t.angle = this.angle, t._fov = this._fov, t._pitch = this._pitch, t._unmodified = this._unmodified, t._calcMatrices(), t;
                }, prototypeAccessors.minZoom.get = function () {
                    return this._minZoom;
                }, prototypeAccessors.minZoom.set = function (t) {
                    this._minZoom !== t && (this._minZoom = t, this.zoom = Math.max(this.zoom, t));
                }, prototypeAccessors.maxZoom.get = function () {
                    return this._maxZoom;
                }, prototypeAccessors.maxZoom.set = function (t) {
                    this._maxZoom !== t && (this._maxZoom = t, this.zoom = Math.min(this.zoom, t));
                }, prototypeAccessors.renderWorldCopies.get = function () {
                    return this._renderWorldCopies;
                }, prototypeAccessors.worldSize.get = function () {
                    return this.tileSize * this.scale;
                }, prototypeAccessors.centerPoint.get = function () {
                    return this.size._div(2);
                }, prototypeAccessors.size.get = function () {
                    return new Point(this.width, this.height);
                }, prototypeAccessors.bearing.get = function () {
                    return -this.angle / Math.PI * 180;
                }, prototypeAccessors.bearing.set = function (t) {
                    var i = -util.wrap(t, -180, 180) * Math.PI / 180;
                    this.angle !== i && (this._unmodified = !1, this.angle = i, this._calcMatrices(), this.rotationMatrix = mat2.create(), mat2.rotate(this.rotationMatrix, this.rotationMatrix, this.angle));
                }, prototypeAccessors.pitch.get = function () {
                    return this._pitch / Math.PI * 180;
                }, prototypeAccessors.pitch.set = function (t) {
                    var i = util.clamp(t, 0, 60) / 180 * Math.PI;
                    this._pitch !== i && (this._unmodified = !1, this._pitch = i, this._calcMatrices());
                }, prototypeAccessors.fov.get = function () {
                    return this._fov / Math.PI * 180;
                }, prototypeAccessors.fov.set = function (t) {
                    t = Math.max(0.01, Math.min(60, t)), this._fov !== t && (this._unmodified = !1, this._fov = t / 180 * Math.PI, this._calcMatrices());
                }, prototypeAccessors.zoom.get = function () {
                    return this._zoom;
                }, prototypeAccessors.zoom.set = function (t) {
                    var i = Math.min(Math.max(t, this.minZoom), this.maxZoom);
                    this._zoom !== i && (this._unmodified = !1, this._zoom = i, this.scale = this.zoomScale(i), this.tileZoom = Math.floor(i), this.zoomFraction = i - this.tileZoom, this._constrain(), this._calcMatrices());
                }, prototypeAccessors.center.get = function () {
                    return this._center;
                }, prototypeAccessors.center.set = function (t) {
                    t.lat === this._center.lat && t.lng === this._center.lng || (this._unmodified = !1, this._center = t, this._constrain(), this._calcMatrices());
                }, Transform.prototype.coveringZoomLevel = function (t) {
                    return (t.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t.tileSize));
                }, Transform.prototype.getVisibleUnwrappedCoordinates = function (t) {
                    var i = this.pointCoordinate(new Point(0, 0), 0), o = this.pointCoordinate(new Point(this.width, 0), 0), e = Math.floor(i.column), r = Math.floor(o.column), n = [new UnwrappedTileID(0, t)];
                    if (this._renderWorldCopies) {
                        for (var s = e; s <= r; s++) {
                            0 !== s && n.push(new UnwrappedTileID(s, t));
                        }
                    }
                    return n;
                }, Transform.prototype.coveringTiles = function (t) {
                    var i = this.coveringZoomLevel(t), o = i;
                    if (void 0 !== t.minzoom && i < t.minzoom) {
                        return [];
                    }
                    void 0 !== t.maxzoom && i > t.maxzoom && (i = t.maxzoom);
                    var e = this.pointCoordinate(this.centerPoint, i), r = new Point(e.column - 0.5, e.row - 0.5), n = [
                            this.pointCoordinate(new Point(0, 0), i),
                            this.pointCoordinate(new Point(this.width, 0), i),
                            this.pointCoordinate(new Point(this.width, this.height), i),
                            this.pointCoordinate(new Point(0, this.height), i)
                        ];
                    return tileCover(i, n, t.reparseOverscaled ? o : i, this._renderWorldCopies).sort(function (t, i) {
                        return r.dist(t.canonical) - r.dist(i.canonical);
                    });
                }, Transform.prototype.resize = function (t, i) {
                    this.width = t, this.height = i, this.pixelsToGLUnits = [
                        2 / t,
                        -2 / i
                    ], this._constrain(), this._calcMatrices();
                }, prototypeAccessors.unmodified.get = function () {
                    return this._unmodified;
                }, Transform.prototype.zoomScale = function (t) {
                    return Math.pow(2, t);
                }, Transform.prototype.scaleZoom = function (t) {
                    return Math.log(t) / Math.LN2;
                }, Transform.prototype.project = function (t) {
                    return new Point(this.lngX(t.lng), this.latY(t.lat));
                }, Transform.prototype.unproject = function (t) {
                    return new LngLat(this.xLng(t.x), this.yLat(t.y));
                }, prototypeAccessors.x.get = function () {
                    return this.lngX(this.center.lng);
                }, prototypeAccessors.y.get = function () {
                    return this.latY(this.center.lat);
                }, prototypeAccessors.point.get = function () {
                    return new Point(this.x, this.y);
                }, Transform.prototype.lngX = function (t) {
                    return (180 + t) * this.worldSize / 360;
                }, Transform.prototype.latY = function (t) {
                    return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t * Math.PI / 360))) * this.worldSize / 360;
                }, Transform.prototype.xLng = function (t) {
                    return 360 * t / this.worldSize - 180;
                }, Transform.prototype.yLat = function (t) {
                    var i = 180 - 360 * t / this.worldSize;
                    return 360 / Math.PI * Math.atan(Math.exp(i * Math.PI / 180)) - 90;
                }, Transform.prototype.setLocationAtPoint = function (t, i) {
                    var o = this.pointCoordinate(i)._sub(this.pointCoordinate(this.centerPoint));
                    this.center = this.coordinateLocation(this.locationCoordinate(t)._sub(o)), this._renderWorldCopies && (this.center = this.center.wrap());
                }, Transform.prototype.locationPoint = function (t) {
                    return this.coordinatePoint(this.locationCoordinate(t));
                }, Transform.prototype.pointLocation = function (t) {
                    return this.coordinateLocation(this.pointCoordinate(t));
                }, Transform.prototype.locationCoordinate = function (t) {
                    return new Coordinate(this.lngX(t.lng) / this.tileSize, this.latY(t.lat) / this.tileSize, this.zoom).zoomTo(this.tileZoom);
                }, Transform.prototype.coordinateLocation = function (t) {
                    var i = t.zoomTo(this.zoom);
                    return new LngLat(this.xLng(i.column * this.tileSize), this.yLat(i.row * this.tileSize));
                }, Transform.prototype.pointCoordinate = function (t, i) {
                    void 0 === i && (i = this.tileZoom);
                    var o = [
                            t.x,
                            t.y,
                            0,
                            1
                        ], e = [
                            t.x,
                            t.y,
                            1,
                            1
                        ];
                    vec4.transformMat4(o, o, this.pixelMatrixInverse), vec4.transformMat4(e, e, this.pixelMatrixInverse);
                    var r = o[3], n = e[3], s = o[0] / r, a = e[0] / n, h = o[1] / r, c = e[1] / n, l = o[2] / r, m = e[2] / n, p = l === m ? 0 : (0 - l) / (m - l);
                    return new Coordinate(interp(s, a, p) / this.tileSize, interp(h, c, p) / this.tileSize, this.zoom)._zoomTo(i);
                }, Transform.prototype.coordinatePoint = function (t) {
                    var i = t.zoomTo(this.zoom), o = [
                            i.column * this.tileSize,
                            i.row * this.tileSize,
                            0,
                            1
                        ];
                    return vec4.transformMat4(o, o, this.pixelMatrix), new Point(o[0] / o[3], o[1] / o[3]);
                }, Transform.prototype.calculatePosMatrix = function (t, i) {
                    void 0 === i && (i = !1);
                    var o = t.key, e = i ? this._alignedPosMatrixCache : this._posMatrixCache;
                    if (e[o]) {
                        return e[o];
                    }
                    var r = t.canonical, n = this.worldSize / this.zoomScale(r.z), s = r.x + Math.pow(2, r.z) * t.wrap, a = mat4.identity(new Float64Array(16));
                    return mat4.translate(a, a, [
                        s * n,
                        r.y * n,
                        0
                    ]), mat4.scale(a, a, [
                        n / EXTENT,
                        n / EXTENT,
                        1
                    ]), mat4.multiply(a, i ? this.alignedProjMatrix : this.projMatrix, a), e[o] = new Float32Array(a), e[o];
                }, Transform.prototype._constrain = function () {
                    if (this.center && this.width && this.height && !this._constraining) {
                        this._constraining = !0;
                        var t, i, o, e, r = -90, n = 90, s = -180, a = 180, h = this.size, c = this._unmodified;
                        if (this.latRange) {
                            var l = this.latRange;
                            r = this.latY(l[1]), n = this.latY(l[0]), t = n - r < h.y ? h.y / (n - r) : 0;
                        }
                        if (this.lngRange) {
                            var m = this.lngRange;
                            s = this.lngX(m[0]), a = this.lngX(m[1]), i = a - s < h.x ? h.x / (a - s) : 0;
                        }
                        var p = Math.max(i || 0, t || 0);
                        if (p) {
                            return this.center = this.unproject(new Point(i ? (a + s) / 2 : this.x, t ? (n + r) / 2 : this.y)), this.zoom += this.scaleZoom(p), this._unmodified = c, void (this._constraining = !1);
                        }
                        if (this.latRange) {
                            var u = this.y, f = h.y / 2;
                            u - f < r && (e = r + f), u + f > n && (e = n - f);
                        }
                        if (this.lngRange) {
                            var d = this.x, g = h.x / 2;
                            d - g < s && (o = s + g), d + g > a && (o = a - g);
                        }
                        void 0 === o && void 0 === e || (this.center = this.unproject(new Point(void 0 !== o ? o : this.x, void 0 !== e ? e : this.y))), this._unmodified = c, this._constraining = !1;
                    }
                }, Transform.prototype._calcMatrices = function () {
                    if (this.height) {
                        this.cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * this.height;
                        var t = this._fov / 2, i = Math.PI / 2 + this._pitch, o = Math.sin(t) * this.cameraToCenterDistance / Math.sin(Math.PI - i - t), e = this.x, r = this.y, n = Math.cos(Math.PI / 2 - this._pitch) * o + this.cameraToCenterDistance, s = 1.01 * n, a = new Float64Array(16);
                        mat4.perspective(a, this._fov, this.width / this.height, 1, s), mat4.scale(a, a, [
                            1,
                            -1,
                            1
                        ]), mat4.translate(a, a, [
                            0,
                            0,
                            -this.cameraToCenterDistance
                        ]), mat4.rotateX(a, a, this._pitch), mat4.rotateZ(a, a, this.angle), mat4.translate(a, a, [
                            -e,
                            -r,
                            0
                        ]);
                        var h = this.worldSize / (2 * Math.PI * 6378137 * Math.abs(Math.cos(this.center.lat * (Math.PI / 180))));
                        mat4.scale(a, a, [
                            1,
                            1,
                            h,
                            1
                        ]), this.projMatrix = a;
                        var c = this.width % 2 / 2, l = this.height % 2 / 2, m = Math.cos(this.angle), p = Math.sin(this.angle), u = e - Math.round(e) + m * c + p * l, f = r - Math.round(r) + m * l + p * c, d = new Float64Array(a);
                        if (mat4.translate(d, d, [
                                u > 0.5 ? u - 1 : u,
                                f > 0.5 ? f - 1 : f,
                                0
                            ]), this.alignedProjMatrix = d, a = mat4.create(), mat4.scale(a, a, [
                                this.width / 2,
                                -this.height / 2,
                                1
                            ]), mat4.translate(a, a, [
                                1,
                                -1,
                                0
                            ]), this.pixelMatrix = mat4.multiply(new Float64Array(16), a, this.projMatrix), !(a = mat4.invert(new Float64Array(16), this.pixelMatrix))) {
                            throw new Error('failed to invert matrix');
                        }
                        this.pixelMatrixInverse = a, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
                    }
                }, Object.defineProperties(Transform.prototype, prototypeAccessors), module.exports = Transform;
            },
            {
                '../data/extent': 53,
                '../source/tile_id': 114,
                '../style-spec/util/interpolate': 158,
                '../util/tile_cover': 273,
                '../util/util': 275,
                './coordinate': 61,
                './lng_lat': 62,
                '@mapbox/gl-matrix': 2,
                '@mapbox/point-geometry': 4
            }
        ],
        65: [
            function (_dereq_, module, exports) {
                'use strict';
                var Color = _dereq_('../style-spec/util/color'), ZERO = 0, ONE = 1, ONE_MINUS_SRC_ALPHA = 771, ColorMode = function (o, e, l) {
                        this.blendFunction = o, this.blendColor = e, this.mask = l;
                    };
                ColorMode.Replace = [
                    ONE,
                    ZERO
                ], ColorMode.disabled = new ColorMode(ColorMode.Replace, Color.transparent, [
                    !1,
                    !1,
                    !1,
                    !1
                ]), ColorMode.unblended = new ColorMode(ColorMode.Replace, Color.transparent, [
                    !0,
                    !0,
                    !0,
                    !0
                ]), ColorMode.alphaBlended = new ColorMode([
                    ONE,
                    ONE_MINUS_SRC_ALPHA
                ], Color.transparent, [
                    !0,
                    !0,
                    !0,
                    !0
                ]), module.exports = ColorMode;
            },
            { '../style-spec/util/color': 153 }
        ],
        66: [
            function (_dereq_, module, exports) {
                'use strict';
                var IndexBuffer = _dereq_('./index_buffer'), VertexBuffer = _dereq_('./vertex_buffer'), Framebuffer = _dereq_('./framebuffer'), DepthMode = _dereq_('./depth_mode'), StencilMode = _dereq_('./stencil_mode'), ColorMode = _dereq_('./color_mode'), util = _dereq_('../util/util'), ref = _dereq_('./value'), ClearColor = ref.ClearColor, ClearDepth = ref.ClearDepth, ClearStencil = ref.ClearStencil, ColorMask = ref.ColorMask, DepthMask = ref.DepthMask, StencilMask = ref.StencilMask, StencilFunc = ref.StencilFunc, StencilOp = ref.StencilOp, StencilTest = ref.StencilTest, DepthRange = ref.DepthRange, DepthTest = ref.DepthTest, DepthFunc = ref.DepthFunc, Blend = ref.Blend, BlendFunc = ref.BlendFunc, BlendColor = ref.BlendColor, Program = ref.Program, LineWidth = ref.LineWidth, ActiveTextureUnit = ref.ActiveTextureUnit, Viewport = ref.Viewport, BindFramebuffer = ref.BindFramebuffer, BindRenderbuffer = ref.BindRenderbuffer, BindTexture = ref.BindTexture, BindVertexBuffer = ref.BindVertexBuffer, BindElementBuffer = ref.BindElementBuffer, BindVertexArrayOES = ref.BindVertexArrayOES, PixelStoreUnpack = ref.PixelStoreUnpack, PixelStoreUnpackPremultiplyAlpha = ref.PixelStoreUnpackPremultiplyAlpha, Context = function (e) {
                        this.gl = e, this.extVertexArrayObject = this.gl.getExtension('OES_vertex_array_object'), this.lineWidthRange = e.getParameter(e.ALIASED_LINE_WIDTH_RANGE), this.clearColor = new ClearColor(this), this.clearDepth = new ClearDepth(this), this.clearStencil = new ClearStencil(this), this.colorMask = new ColorMask(this), this.depthMask = new DepthMask(this), this.stencilMask = new StencilMask(this), this.stencilFunc = new StencilFunc(this), this.stencilOp = new StencilOp(this), this.stencilTest = new StencilTest(this), this.depthRange = new DepthRange(this), this.depthTest = new DepthTest(this), this.depthFunc = new DepthFunc(this), this.blend = new Blend(this), this.blendFunc = new BlendFunc(this), this.blendColor = new BlendColor(this), this.program = new Program(this), this.lineWidth = new LineWidth(this), this.activeTexture = new ActiveTextureUnit(this), this.viewport = new Viewport(this), this.bindFramebuffer = new BindFramebuffer(this), this.bindRenderbuffer = new BindRenderbuffer(this), this.bindTexture = new BindTexture(this), this.bindVertexBuffer = new BindVertexBuffer(this), this.bindElementBuffer = new BindElementBuffer(this), this.bindVertexArrayOES = this.extVertexArrayObject && new BindVertexArrayOES(this), this.pixelStoreUnpack = new PixelStoreUnpack(this), this.pixelStoreUnpackPremultiplyAlpha = new PixelStoreUnpackPremultiplyAlpha(this), this.extTextureFilterAnisotropic = e.getExtension('EXT_texture_filter_anisotropic') || e.getExtension('MOZ_EXT_texture_filter_anisotropic') || e.getExtension('WEBKIT_EXT_texture_filter_anisotropic'), this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)), this.extTextureHalfFloat = e.getExtension('OES_texture_half_float'), this.extTextureHalfFloat && e.getExtension('OES_texture_half_float_linear');
                    };
                Context.prototype.createIndexBuffer = function (e, t) {
                    return new IndexBuffer(this, e, t);
                }, Context.prototype.createVertexBuffer = function (e, t, r) {
                    return new VertexBuffer(this, e, t, r);
                }, Context.prototype.createRenderbuffer = function (e, t, r) {
                    var i = this.gl, n = i.createRenderbuffer();
                    return this.bindRenderbuffer.set(n), i.renderbufferStorage(i.RENDERBUFFER, e, t, r), this.bindRenderbuffer.set(null), n;
                }, Context.prototype.createFramebuffer = function (e, t) {
                    return new Framebuffer(this, e, t);
                }, Context.prototype.clear = function (e) {
                    var t = e.color, r = e.depth, i = this.gl, n = 0;
                    t && (n |= i.COLOR_BUFFER_BIT, this.clearColor.set(t), this.colorMask.set([
                        !0,
                        !0,
                        !0,
                        !0
                    ])), void 0 !== r && (n |= i.DEPTH_BUFFER_BIT, this.clearDepth.set(r), this.depthMask.set(!0)), i.clear(n);
                }, Context.prototype.setDepthMode = function (e) {
                    e.func !== this.gl.ALWAYS || e.mask ? (this.depthTest.set(!0), this.depthFunc.set(e.func), this.depthMask.set(e.mask), this.depthRange.set(e.range)) : this.depthTest.set(!1);
                }, Context.prototype.setStencilMode = function (e) {
                    e.func !== this.gl.ALWAYS || e.mask ? (this.stencilTest.set(!0), this.stencilMask.set(e.mask), this.stencilOp.set([
                        e.fail,
                        e.depthFail,
                        e.pass
                    ]), this.stencilFunc.set({
                        func: e.test.func,
                        ref: e.ref,
                        mask: e.test.mask
                    })) : this.stencilTest.set(!1);
                }, Context.prototype.setColorMode = function (e) {
                    util.deepEqual(e.blendFunction, ColorMode.Replace) ? this.blend.set(!1) : (this.blend.set(!0), this.blendFunc.set(e.blendFunction), this.blendColor.set(e.blendColor)), this.colorMask.set(e.mask);
                }, module.exports = Context;
            },
            {
                '../util/util': 275,
                './color_mode': 65,
                './depth_mode': 67,
                './framebuffer': 68,
                './index_buffer': 69,
                './stencil_mode': 70,
                './value': 71,
                './vertex_buffer': 72
            }
        ],
        67: [
            function (_dereq_, module, exports) {
                'use strict';
                var ALWAYS = 519, DepthMode = function (e, t, d) {
                        this.func = e, this.mask = t, this.range = d;
                    };
                DepthMode.ReadOnly = !1, DepthMode.ReadWrite = !0, DepthMode.disabled = new DepthMode(ALWAYS, DepthMode.ReadOnly, [
                    0,
                    1
                ]), module.exports = DepthMode;
            },
            {}
        ],
        68: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('./value'), ColorAttachment = ref.ColorAttachment, DepthAttachment = ref.DepthAttachment, Framebuffer = function (t, e, r) {
                        this.context = t, this.width = e, this.height = r;
                        var h = t.gl, a = this.framebuffer = h.createFramebuffer();
                        this.colorAttachment = new ColorAttachment(t, a), this.depthAttachment = new DepthAttachment(t, a);
                    };
                Framebuffer.prototype.destroy = function () {
                    var t = this.context.gl, e = this.colorAttachment.get();
                    e && t.deleteTexture(e);
                    var r = this.depthAttachment.get();
                    r && t.deleteRenderbuffer(r), t.deleteFramebuffer(this.framebuffer);
                }, module.exports = Framebuffer;
            },
            { './value': 71 }
        ],
        69: [
            function (_dereq_, module, exports) {
                'use strict';
                var IndexBuffer = function (e, t, r) {
                    this.context = e;
                    var f = e.gl;
                    this.buffer = f.createBuffer(), this.dynamicDraw = Boolean(r), this.unbindVAO(), e.bindElementBuffer.set(this.buffer), f.bufferData(f.ELEMENT_ARRAY_BUFFER, t.arrayBuffer, this.dynamicDraw ? f.DYNAMIC_DRAW : f.STATIC_DRAW), this.dynamicDraw || delete t.arrayBuffer;
                };
                IndexBuffer.prototype.unbindVAO = function () {
                    this.context.extVertexArrayObject && this.context.bindVertexArrayOES.set(null);
                }, IndexBuffer.prototype.bind = function () {
                    this.context.bindElementBuffer.set(this.buffer);
                }, IndexBuffer.prototype.updateData = function (e) {
                    var t = this.context.gl;
                    this.unbindVAO(), this.bind(), t.bufferSubData(t.ELEMENT_ARRAY_BUFFER, 0, e.arrayBuffer);
                }, IndexBuffer.prototype.destroy = function () {
                    var e = this.context.gl;
                    this.buffer && (e.deleteBuffer(this.buffer), delete this.buffer);
                }, module.exports = IndexBuffer;
            },
            {}
        ],
        70: [
            function (_dereq_, module, exports) {
                'use strict';
                var ALWAYS = 519, KEEP = 7680, StencilMode = function (t, e, i, s, d, l) {
                        this.test = t, this.ref = e, this.mask = i, this.fail = s, this.depthFail = d, this.pass = l;
                    };
                StencilMode.disabled = new StencilMode({
                    func: ALWAYS,
                    mask: 0
                }, 0, 0, KEEP, KEEP, KEEP), module.exports = StencilMode;
            },
            {}
        ],
        71: [
            function (_dereq_, module, exports) {
                'use strict';
                var Color = _dereq_('../style-spec/util/color'), util = _dereq_('../util/util'), ClearColor = function (t) {
                        this.context = t, this.current = Color.transparent;
                    };
                ClearColor.prototype.get = function () {
                    return this.current;
                }, ClearColor.prototype.set = function (t) {
                    var e = this.current;
                    t.r === e.r && t.g === e.g && t.b === e.b && t.a === e.a || (this.context.gl.clearColor(t.r, t.g, t.b, t.a), this.current = t);
                };
                var ClearDepth = function (t) {
                    this.context = t, this.current = 1;
                };
                ClearDepth.prototype.get = function () {
                    return this.current;
                }, ClearDepth.prototype.set = function (t) {
                    this.current !== t && (this.context.gl.clearDepth(t), this.current = t);
                };
                var ClearStencil = function (t) {
                    this.context = t, this.current = 0;
                };
                ClearStencil.prototype.get = function () {
                    return this.current;
                }, ClearStencil.prototype.set = function (t) {
                    this.current !== t && (this.context.gl.clearStencil(t), this.current = t);
                };
                var ColorMask = function (t) {
                    this.context = t, this.current = [
                        !0,
                        !0,
                        !0,
                        !0
                    ];
                };
                ColorMask.prototype.get = function () {
                    return this.current;
                }, ColorMask.prototype.set = function (t) {
                    var e = this.current;
                    t[0] === e[0] && t[1] === e[1] && t[2] === e[2] && t[3] === e[3] || (this.context.gl.colorMask(t[0], t[1], t[2], t[3]), this.current = t);
                };
                var DepthMask = function (t) {
                    this.context = t, this.current = !0;
                };
                DepthMask.prototype.get = function () {
                    return this.current;
                }, DepthMask.prototype.set = function (t) {
                    this.current !== t && (this.context.gl.depthMask(t), this.current = t);
                };
                var StencilMask = function (t) {
                    this.context = t, this.current = 255;
                };
                StencilMask.prototype.get = function () {
                    return this.current;
                }, StencilMask.prototype.set = function (t) {
                    this.current !== t && (this.context.gl.stencilMask(t), this.current = t);
                };
                var StencilFunc = function (t) {
                    this.context = t, this.current = {
                        func: t.gl.ALWAYS,
                        ref: 0,
                        mask: 255
                    };
                };
                StencilFunc.prototype.get = function () {
                    return this.current;
                }, StencilFunc.prototype.set = function (t) {
                    var e = this.current;
                    t.func === e.func && t.ref === e.ref && t.mask === e.mask || (this.context.gl.stencilFunc(t.func, t.ref, t.mask), this.current = t);
                };
                var StencilOp = function (t) {
                    this.context = t;
                    var e = this.context.gl;
                    this.current = [
                        e.KEEP,
                        e.KEEP,
                        e.KEEP
                    ];
                };
                StencilOp.prototype.get = function () {
                    return this.current;
                }, StencilOp.prototype.set = function (t) {
                    var e = this.current;
                    t[0] === e[0] && t[1] === e[1] && t[2] === e[2] || (this.context.gl.stencilOp(t[0], t[1], t[2]), this.current = t);
                };
                var StencilTest = function (t) {
                    this.context = t, this.current = !1;
                };
                StencilTest.prototype.get = function () {
                    return this.current;
                }, StencilTest.prototype.set = function (t) {
                    if (this.current !== t) {
                        var e = this.context.gl;
                        t ? e.enable(e.STENCIL_TEST) : e.disable(e.STENCIL_TEST), this.current = t;
                    }
                };
                var DepthRange = function (t) {
                    this.context = t, this.current = [
                        0,
                        1
                    ];
                };
                DepthRange.prototype.get = function () {
                    return this.current;
                }, DepthRange.prototype.set = function (t) {
                    var e = this.current;
                    t[0] === e[0] && t[1] === e[1] || (this.context.gl.depthRange(t[0], t[1]), this.current = t);
                };
                var DepthTest = function (t) {
                    this.context = t, this.current = !1;
                };
                DepthTest.prototype.get = function () {
                    return this.current;
                }, DepthTest.prototype.set = function (t) {
                    if (this.current !== t) {
                        var e = this.context.gl;
                        t ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST), this.current = t;
                    }
                };
                var DepthFunc = function (t) {
                    this.context = t, this.current = t.gl.LESS;
                };
                DepthFunc.prototype.get = function () {
                    return this.current;
                }, DepthFunc.prototype.set = function (t) {
                    this.current !== t && (this.context.gl.depthFunc(t), this.current = t);
                };
                var Blend = function (t) {
                    this.context = t, this.current = !1;
                };
                Blend.prototype.get = function () {
                    return this.current;
                }, Blend.prototype.set = function (t) {
                    if (this.current !== t) {
                        var e = this.context.gl;
                        t ? e.enable(e.BLEND) : e.disable(e.BLEND), this.current = t;
                    }
                };
                var BlendFunc = function (t) {
                    this.context = t;
                    var e = this.context.gl;
                    this.current = [
                        e.ONE,
                        e.ZERO
                    ];
                };
                BlendFunc.prototype.get = function () {
                    return this.current;
                }, BlendFunc.prototype.set = function (t) {
                    var e = this.current;
                    t[0] === e[0] && t[1] === e[1] || (this.context.gl.blendFunc(t[0], t[1]), this.current = t);
                };
                var BlendColor = function (t) {
                    this.context = t, this.current = Color.transparent;
                };
                BlendColor.prototype.get = function () {
                    return this.current;
                }, BlendColor.prototype.set = function (t) {
                    var e = this.current;
                    t.r === e.r && t.g === e.g && t.b === e.b && t.a === e.a || (this.context.gl.blendColor(t.r, t.g, t.b, t.a), this.current = t);
                };
                var Program = function (t) {
                    this.context = t, this.current = null;
                };
                Program.prototype.get = function () {
                    return this.current;
                }, Program.prototype.set = function (t) {
                    this.current !== t && (this.context.gl.useProgram(t), this.current = t);
                };
                var LineWidth = function (t) {
                    this.context = t, this.current = 1;
                };
                LineWidth.prototype.get = function () {
                    return this.current;
                }, LineWidth.prototype.set = function (t) {
                    var e = this.context.lineWidthRange, r = util.clamp(t, e[0], e[1]);
                    this.current !== r && (this.context.gl.lineWidth(r), this.current = t);
                };
                var ActiveTextureUnit = function (t) {
                    this.context = t, this.current = t.gl.TEXTURE0;
                };
                ActiveTextureUnit.prototype.get = function () {
                    return this.current;
                }, ActiveTextureUnit.prototype.set = function (t) {
                    this.current !== t && (this.context.gl.activeTexture(t), this.current = t);
                };
                var Viewport = function (t) {
                    this.context = t;
                    var e = this.context.gl;
                    this.current = [
                        0,
                        0,
                        e.drawingBufferWidth,
                        e.drawingBufferHeight
                    ];
                };
                Viewport.prototype.get = function () {
                    return this.current;
                }, Viewport.prototype.set = function (t) {
                    var e = this.current;
                    t[0] === e[0] && t[1] === e[1] && t[2] === e[2] && t[3] === e[3] || (this.context.gl.viewport(t[0], t[1], t[2], t[3]), this.current = t);
                };
                var BindFramebuffer = function (t) {
                    this.context = t, this.current = null;
                };
                BindFramebuffer.prototype.get = function () {
                    return this.current;
                }, BindFramebuffer.prototype.set = function (t) {
                    if (this.current !== t) {
                        var e = this.context.gl;
                        e.bindFramebuffer(e.FRAMEBUFFER, t), this.current = t;
                    }
                };
                var BindRenderbuffer = function (t) {
                    this.context = t, this.current = null;
                };
                BindRenderbuffer.prototype.get = function () {
                    return this.current;
                }, BindRenderbuffer.prototype.set = function (t) {
                    if (this.current !== t) {
                        var e = this.context.gl;
                        e.bindRenderbuffer(e.RENDERBUFFER, t), this.current = t;
                    }
                };
                var BindTexture = function (t) {
                    this.context = t, this.current = null;
                };
                BindTexture.prototype.get = function () {
                    return this.current;
                }, BindTexture.prototype.set = function (t) {
                    if (this.current !== t) {
                        var e = this.context.gl;
                        e.bindTexture(e.TEXTURE_2D, t), this.current = t;
                    }
                };
                var BindVertexBuffer = function (t) {
                    this.context = t, this.current = null;
                };
                BindVertexBuffer.prototype.get = function () {
                    return this.current;
                }, BindVertexBuffer.prototype.set = function (t) {
                    if (this.current !== t) {
                        var e = this.context.gl;
                        e.bindBuffer(e.ARRAY_BUFFER, t), this.current = t;
                    }
                };
                var BindElementBuffer = function (t) {
                    this.context = t, this.current = null;
                };
                BindElementBuffer.prototype.get = function () {
                    return this.current;
                }, BindElementBuffer.prototype.set = function (t) {
                    var e = this.context.gl;
                    e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t), this.current = t;
                };
                var BindVertexArrayOES = function (t) {
                    this.context = t, this.current = null;
                };
                BindVertexArrayOES.prototype.get = function () {
                    return this.current;
                }, BindVertexArrayOES.prototype.set = function (t) {
                    this.current !== t && this.context.extVertexArrayObject && (this.context.extVertexArrayObject.bindVertexArrayOES(t), this.current = t);
                };
                var PixelStoreUnpack = function (t) {
                    this.context = t, this.current = 4;
                };
                PixelStoreUnpack.prototype.get = function () {
                    return this.current;
                }, PixelStoreUnpack.prototype.set = function (t) {
                    if (this.current !== t) {
                        var e = this.context.gl;
                        e.pixelStorei(e.UNPACK_ALIGNMENT, t), this.current = t;
                    }
                };
                var PixelStoreUnpackPremultiplyAlpha = function (t) {
                    this.context = t, this.current = !1;
                };
                PixelStoreUnpackPremultiplyAlpha.prototype.get = function () {
                    return this.current;
                }, PixelStoreUnpackPremultiplyAlpha.prototype.set = function (t) {
                    if (this.current !== t) {
                        var e = this.context.gl;
                        e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t), this.current = t;
                    }
                };
                var FramebufferValue = function (t, e) {
                    this.context = t, this.current = null, this.parent = e;
                };
                FramebufferValue.prototype.get = function () {
                    return this.current;
                };
                var ColorAttachment = function (t) {
                        function e(e, r) {
                            t.call(this, e, r), this.dirty = !1;
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
                            if (this.dirty || this.current !== t) {
                                var e = this.context.gl;
                                this.context.bindFramebuffer.set(this.parent), e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, t, 0), this.current = t, this.dirty = !1;
                            }
                        }, e.prototype.setDirty = function () {
                            this.dirty = !0;
                        }, e;
                    }(FramebufferValue), DepthAttachment = function (t) {
                        function e() {
                            t.apply(this, arguments);
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
                            if (this.current !== t) {
                                var e = this.context.gl;
                                this.context.bindFramebuffer.set(this.parent), e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, t), this.current = t;
                            }
                        }, e;
                    }(FramebufferValue);
                module.exports = {
                    ClearColor: ClearColor,
                    ClearDepth: ClearDepth,
                    ClearStencil: ClearStencil,
                    ColorMask: ColorMask,
                    DepthMask: DepthMask,
                    StencilMask: StencilMask,
                    StencilFunc: StencilFunc,
                    StencilOp: StencilOp,
                    StencilTest: StencilTest,
                    DepthRange: DepthRange,
                    DepthTest: DepthTest,
                    DepthFunc: DepthFunc,
                    Blend: Blend,
                    BlendFunc: BlendFunc,
                    BlendColor: BlendColor,
                    Program: Program,
                    LineWidth: LineWidth,
                    ActiveTextureUnit: ActiveTextureUnit,
                    Viewport: Viewport,
                    BindFramebuffer: BindFramebuffer,
                    BindRenderbuffer: BindRenderbuffer,
                    BindTexture: BindTexture,
                    BindVertexBuffer: BindVertexBuffer,
                    BindElementBuffer: BindElementBuffer,
                    BindVertexArrayOES: BindVertexArrayOES,
                    PixelStoreUnpack: PixelStoreUnpack,
                    PixelStoreUnpackPremultiplyAlpha: PixelStoreUnpackPremultiplyAlpha,
                    ColorAttachment: ColorAttachment,
                    DepthAttachment: DepthAttachment
                };
            },
            {
                '../style-spec/util/color': 153,
                '../util/util': 275
            }
        ],
        72: [
            function (_dereq_, module, exports) {
                'use strict';
                var AttributeType = {
                        Int8: 'BYTE',
                        Uint8: 'UNSIGNED_BYTE',
                        Int16: 'SHORT',
                        Uint16: 'UNSIGNED_SHORT',
                        Int32: 'INT',
                        Uint32: 'UNSIGNED_INT',
                        Float32: 'FLOAT'
                    }, VertexBuffer = function (t, e, r, i) {
                        this.length = e.length, this.attributes = r, this.itemSize = e.bytesPerElement, this.dynamicDraw = i, this.context = t;
                        var f = t.gl;
                        this.buffer = f.createBuffer(), t.bindVertexBuffer.set(this.buffer), f.bufferData(f.ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? f.DYNAMIC_DRAW : f.STATIC_DRAW), this.dynamicDraw || delete e.arrayBuffer;
                    };
                VertexBuffer.prototype.bind = function () {
                    this.context.bindVertexBuffer.set(this.buffer);
                }, VertexBuffer.prototype.updateData = function (t) {
                    var e = this.context.gl;
                    this.bind(), e.bufferSubData(e.ARRAY_BUFFER, 0, t.arrayBuffer);
                }, VertexBuffer.prototype.enableAttributes = function (t, e) {
                    for (var r = this, i = 0; i < this.attributes.length; i++) {
                        var f = r.attributes[i], n = e.attributes[f.name];
                        void 0 !== n && t.enableVertexAttribArray(n);
                    }
                }, VertexBuffer.prototype.setVertexAttribPointers = function (t, e, r) {
                    for (var i = this, f = 0; f < this.attributes.length; f++) {
                        var n = i.attributes[f], u = e.attributes[n.name];
                        void 0 !== u && t.vertexAttribPointer(u, n.components, t[AttributeType[n.type]], !1, i.itemSize, n.offset + i.itemSize * (r || 0));
                    }
                }, VertexBuffer.prototype.destroy = function () {
                    var t = this.context.gl;
                    this.buffer && (t.deleteBuffer(this.buffer), delete this.buffer);
                }, module.exports = VertexBuffer;
            },
            {}
        ],
        73: [
            function (_dereq_, module, exports) {
                'use strict';
                var supported = _dereq_('@mapbox/mapbox-gl-supported'), browser = _dereq_('./util/browser'), version = _dereq_('../package.json').version, Map = _dereq_('./ui/map'), NavigationControl = _dereq_('./ui/control/navigation_control'), GeolocateControl = _dereq_('./ui/control/geolocate_control'), AttributionControl = _dereq_('./ui/control/attribution_control'), ScaleControl = _dereq_('./ui/control/scale_control'), FullscreenControl = _dereq_('./ui/control/fullscreen_control'), Popup = _dereq_('./ui/popup'), Marker = _dereq_('./ui/marker'), Style = _dereq_('./style/style'), LngLat = _dereq_('./geo/lng_lat'), LngLatBounds = _dereq_('./geo/lng_lat_bounds'), Point = _dereq_('@mapbox/point-geometry'), Evented = _dereq_('./util/evented'), config = _dereq_('./util/config'), rtlTextPlugin = _dereq_('./source/rtl_text_plugin');
                module.exports = {
                    version: version,
                    supported: supported,
                    workerCount: Math.max(Math.floor(browser.hardwareConcurrency / 2), 1),
                    setRTLTextPlugin: rtlTextPlugin.setRTLTextPlugin,
                    Map: Map,
                    NavigationControl: NavigationControl,
                    GeolocateControl: GeolocateControl,
                    AttributionControl: AttributionControl,
                    ScaleControl: ScaleControl,
                    FullscreenControl: FullscreenControl,
                    Popup: Popup,
                    Marker: Marker,
                    Style: Style,
                    LngLat: LngLat,
                    LngLatBounds: LngLatBounds,
                    Point: Point,
                    Evented: Evented,
                    config: config,
                    get accessToken() {
                        return config.ACCESS_TOKEN;
                    },
                    set accessToken(o) {
                        config.ACCESS_TOKEN = o;
                    }
                };
            },
            {
                '../package.json': 38,
                './geo/lng_lat': 62,
                './geo/lng_lat_bounds': 63,
                './source/rtl_text_plugin': 109,
                './style/style': 190,
                './ui/control/attribution_control': 232,
                './ui/control/fullscreen_control': 233,
                './ui/control/geolocate_control': 234,
                './ui/control/navigation_control': 236,
                './ui/control/scale_control': 237,
                './ui/map': 247,
                './ui/marker': 248,
                './ui/popup': 249,
                './util/browser': 252,
                './util/config': 256,
                './util/evented': 260,
                '@mapbox/mapbox-gl-supported': 3,
                '@mapbox/point-geometry': 4
            }
        ],
        74: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawBackground(e, t, r) {
                    var a = r.paint.get('background-color'), n = r.paint.get('background-opacity');
                    if (0 !== n) {
                        var o = e.context, i = o.gl, d = e.transform, u = d.tileSize, l = r.paint.get('background-pattern'), s = l || 1 !== a.a || 1 !== n ? 'translucent' : 'opaque';
                        if (e.renderPass === s) {
                            o.setStencilMode(StencilMode.disabled), o.setDepthMode(e.depthModeForSublayer(0, 'opaque' === s ? DepthMode.ReadWrite : DepthMode.ReadOnly)), o.setColorMode(e.colorModeForRenderPass());
                            var p;
                            if (l) {
                                if (pattern.isPatternMissing(l, e)) {
                                    return;
                                }
                                p = e.useProgram('backgroundPattern'), pattern.prepare(l, e, p), e.tileExtentPatternVAO.bind(o, p, e.tileExtentBuffer, []);
                            } else {
                                p = e.useProgram('background'), i.uniform4fv(p.uniforms.u_color, [
                                    a.r,
                                    a.g,
                                    a.b,
                                    a.a
                                ]), e.tileExtentVAO.bind(o, p, e.tileExtentBuffer, []);
                            }
                            i.uniform1f(p.uniforms.u_opacity, n);
                            for (var c = d.coveringTiles({ tileSize: u }), f = 0, g = c; f < g.length; f += 1) {
                                var m = g[f];
                                l && pattern.setTile({
                                    tileID: m,
                                    tileSize: u
                                }, e, p), i.uniformMatrix4fv(p.uniforms.u_matrix, !1, e.transform.calculatePosMatrix(m.toUnwrapped())), i.drawArrays(i.TRIANGLE_STRIP, 0, e.tileExtentBuffer.length);
                            }
                        }
                    }
                }
                var pattern = _dereq_('./pattern'), StencilMode = _dereq_('../gl/stencil_mode'), DepthMode = _dereq_('../gl/depth_mode');
                module.exports = drawBackground;
            },
            {
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                './pattern': 91
            }
        ],
        75: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawCircles(e, t, r, i) {
                    if ('translucent' === e.renderPass) {
                        var o = r.paint.get('circle-opacity'), a = r.paint.get('circle-stroke-width'), n = r.paint.get('circle-stroke-opacity');
                        if (0 !== o.constantOr(1) || 0 !== a.constantOr(1) && 0 !== n.constantOr(1)) {
                            var s = e.context, c = s.gl;
                            s.setDepthMode(e.depthModeForSublayer(0, DepthMode.ReadOnly)), s.setStencilMode(StencilMode.disabled), s.setColorMode(e.colorModeForRenderPass());
                            for (var l = !0, m = 0; m < i.length; m++) {
                                var u = i[m], f = t.getTile(u), p = f.getBucket(r);
                                if (p) {
                                    var d = e.context.program.get(), _ = p.programConfigurations.get(r.id), g = e.useProgram('circle', _);
                                    if ((l || g.program !== d) && (_.setUniforms(s, g, r.paint, { zoom: e.transform.zoom }), l = !1), c.uniform1f(g.uniforms.u_camera_to_center_distance, e.transform.cameraToCenterDistance), c.uniform1i(g.uniforms.u_scale_with_map, 'map' === r.paint.get('circle-pitch-scale') ? 1 : 0), 'map' === r.paint.get('circle-pitch-alignment')) {
                                        c.uniform1i(g.uniforms.u_pitch_with_map, 1);
                                        var h = pixelsToTileUnits(f, 1, e.transform.zoom);
                                        c.uniform2f(g.uniforms.u_extrude_scale, h, h);
                                    } else {
                                        c.uniform1i(g.uniforms.u_pitch_with_map, 0), c.uniform2fv(g.uniforms.u_extrude_scale, e.transform.pixelsToGLUnits);
                                    }
                                    c.uniformMatrix4fv(g.uniforms.u_matrix, !1, e.translatePosMatrix(u.posMatrix, f, r.paint.get('circle-translate'), r.paint.get('circle-translate-anchor'))), g.draw(s, c.TRIANGLES, r.id, p.layoutVertexBuffer, p.indexBuffer, p.segments, _);
                                }
                            }
                        }
                    }
                }
                var pixelsToTileUnits = _dereq_('../source/pixels_to_tile_units'), StencilMode = _dereq_('../gl/stencil_mode'), DepthMode = _dereq_('../gl/depth_mode');
                module.exports = drawCircles;
            },
            {
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                '../source/pixels_to_tile_units': 104
            }
        ],
        76: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawCollisionDebugGeometry(e, o, i, r, t) {
                    var l = e.context, s = l.gl, n = t ? e.useProgram('collisionCircle') : e.useProgram('collisionBox');
                    l.setDepthMode(DepthMode.disabled), l.setStencilMode(StencilMode.disabled), l.setColorMode(e.colorModeForRenderPass());
                    for (var u = 0; u < r.length; u++) {
                        var a = r[u], d = o.getTile(a), f = d.getBucket(i);
                        if (f) {
                            var m = t ? f.collisionCircle : f.collisionBox;
                            if (m) {
                                s.uniformMatrix4fv(n.uniforms.u_matrix, !1, a.posMatrix), t || l.lineWidth.set(1), s.uniform1f(n.uniforms.u_camera_to_center_distance, e.transform.cameraToCenterDistance);
                                var c = pixelsToTileUnits(d, 1, e.transform.zoom), x = Math.pow(2, e.transform.zoom - d.tileID.overscaledZ);
                                s.uniform1f(n.uniforms.u_pixels_to_tile_units, c), s.uniform2f(n.uniforms.u_extrude_scale, e.transform.pixelsToGLUnits[0] / (c * x), e.transform.pixelsToGLUnits[1] / (c * x)), n.draw(l, t ? s.TRIANGLES : s.LINES, i.id, m.layoutVertexBuffer, m.indexBuffer, m.segments, null, m.collisionVertexBuffer, null);
                            }
                        }
                    }
                }
                function drawCollisionDebug(e, o, i, r) {
                    drawCollisionDebugGeometry(e, o, i, r, !1), drawCollisionDebugGeometry(e, o, i, r, !0);
                }
                var pixelsToTileUnits = _dereq_('../source/pixels_to_tile_units'), DepthMode = _dereq_('../gl/depth_mode'), StencilMode = _dereq_('../gl/stencil_mode');
                module.exports = drawCollisionDebug;
            },
            {
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                '../source/pixels_to_tile_units': 104
            }
        ],
        77: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawDebug(e, r, t) {
                    for (var o = 0; o < t.length; o++) {
                        drawDebugTile(e, r, t[o]);
                    }
                }
                function drawDebugTile(e, r, t) {
                    var o = e.context, a = o.gl;
                    o.lineWidth.set(1 * browser.devicePixelRatio);
                    var i = t.posMatrix, u = e.useProgram('debug');
                    o.setDepthMode(DepthMode.disabled), o.setStencilMode(StencilMode.disabled), o.setColorMode(e.colorModeForRenderPass()), a.uniformMatrix4fv(u.uniforms.u_matrix, !1, i), a.uniform4f(u.uniforms.u_color, 1, 0, 0, 1), e.debugVAO.bind(o, u, e.debugBuffer, []), a.drawArrays(a.LINE_STRIP, 0, e.debugBuffer.length);
                    for (var n = createTextVerticies(t.toString(), 50, 200, 5), s = new PosArray(), l = 0; l < n.length; l += 2) {
                        s.emplaceBack(n[l], n[l + 1]);
                    }
                    var d = o.createVertexBuffer(s, posAttributes.members);
                    new VertexArrayObject().bind(o, u, d, []), a.uniform4f(u.uniforms.u_color, 1, 1, 1, 1);
                    for (var f = r.getTile(t).tileSize, m = EXTENT / (Math.pow(2, e.transform.zoom - t.overscaledZ) * f), c = [
                                [
                                    -1,
                                    -1
                                ],
                                [
                                    -1,
                                    1
                                ],
                                [
                                    1,
                                    -1
                                ],
                                [
                                    1,
                                    1
                                ]
                            ], b = 0; b < c.length; b++) {
                        var g = c[b];
                        a.uniformMatrix4fv(u.uniforms.u_matrix, !1, mat4.translate([], i, [
                            m * g[0],
                            m * g[1],
                            0
                        ])), a.drawArrays(a.LINES, 0, d.length);
                    }
                    a.uniform4f(u.uniforms.u_color, 0, 0, 0, 1), a.uniformMatrix4fv(u.uniforms.u_matrix, !1, i), a.drawArrays(a.LINES, 0, d.length);
                }
                function createTextVerticies(e, r, t, o) {
                    o = o || 1;
                    var a, i, u, n, s, l, d, f, m = [];
                    for (a = 0, i = e.length; a < i; a++) {
                        if (s = simplexFont[e[a]]) {
                            for (f = null, u = 0, n = s[1].length; u < n; u += 2) {
                                -1 === s[1][u] && -1 === s[1][u + 1] ? f = null : (l = r + s[1][u] * o, d = t - s[1][u + 1] * o, f && m.push(f.x, f.y, l, d), f = {
                                    x: l,
                                    y: d
                                });
                            }
                            r += s[0] * o;
                        }
                    }
                    return m;
                }
                var browser = _dereq_('../util/browser'), mat4 = _dereq_('@mapbox/gl-matrix').mat4, EXTENT = _dereq_('../data/extent'), VertexArrayObject = _dereq_('./vertex_array_object'), ref = _dereq_('../data/array_types'), PosArray = ref.PosArray, posAttributes = _dereq_('../data/pos_attributes'), DepthMode = _dereq_('../gl/depth_mode'), StencilMode = _dereq_('../gl/stencil_mode');
                module.exports = drawDebug;
                var simplexFont = {
                    ' ': [
                        16,
                        []
                    ],
                    '!': [
                        10,
                        [
                            5,
                            21,
                            5,
                            7,
                            -1,
                            -1,
                            5,
                            2,
                            4,
                            1,
                            5,
                            0,
                            6,
                            1,
                            5,
                            2
                        ]
                    ],
                    '"': [
                        16,
                        [
                            4,
                            21,
                            4,
                            14,
                            -1,
                            -1,
                            12,
                            21,
                            12,
                            14
                        ]
                    ],
                    '#': [
                        21,
                        [
                            11,
                            25,
                            4,
                            -7,
                            -1,
                            -1,
                            17,
                            25,
                            10,
                            -7,
                            -1,
                            -1,
                            4,
                            12,
                            18,
                            12,
                            -1,
                            -1,
                            3,
                            6,
                            17,
                            6
                        ]
                    ],
                    $: [
                        20,
                        [
                            8,
                            25,
                            8,
                            -4,
                            -1,
                            -1,
                            12,
                            25,
                            12,
                            -4,
                            -1,
                            -1,
                            17,
                            18,
                            15,
                            20,
                            12,
                            21,
                            8,
                            21,
                            5,
                            20,
                            3,
                            18,
                            3,
                            16,
                            4,
                            14,
                            5,
                            13,
                            7,
                            12,
                            13,
                            10,
                            15,
                            9,
                            16,
                            8,
                            17,
                            6,
                            17,
                            3,
                            15,
                            1,
                            12,
                            0,
                            8,
                            0,
                            5,
                            1,
                            3,
                            3
                        ]
                    ],
                    '%': [
                        24,
                        [
                            21,
                            21,
                            3,
                            0,
                            -1,
                            -1,
                            8,
                            21,
                            10,
                            19,
                            10,
                            17,
                            9,
                            15,
                            7,
                            14,
                            5,
                            14,
                            3,
                            16,
                            3,
                            18,
                            4,
                            20,
                            6,
                            21,
                            8,
                            21,
                            10,
                            20,
                            13,
                            19,
                            16,
                            19,
                            19,
                            20,
                            21,
                            21,
                            -1,
                            -1,
                            17,
                            7,
                            15,
                            6,
                            14,
                            4,
                            14,
                            2,
                            16,
                            0,
                            18,
                            0,
                            20,
                            1,
                            21,
                            3,
                            21,
                            5,
                            19,
                            7,
                            17,
                            7
                        ]
                    ],
                    '&': [
                        26,
                        [
                            23,
                            12,
                            23,
                            13,
                            22,
                            14,
                            21,
                            14,
                            20,
                            13,
                            19,
                            11,
                            17,
                            6,
                            15,
                            3,
                            13,
                            1,
                            11,
                            0,
                            7,
                            0,
                            5,
                            1,
                            4,
                            2,
                            3,
                            4,
                            3,
                            6,
                            4,
                            8,
                            5,
                            9,
                            12,
                            13,
                            13,
                            14,
                            14,
                            16,
                            14,
                            18,
                            13,
                            20,
                            11,
                            21,
                            9,
                            20,
                            8,
                            18,
                            8,
                            16,
                            9,
                            13,
                            11,
                            10,
                            16,
                            3,
                            18,
                            1,
                            20,
                            0,
                            22,
                            0,
                            23,
                            1,
                            23,
                            2
                        ]
                    ],
                    '\'': [
                        10,
                        [
                            5,
                            19,
                            4,
                            20,
                            5,
                            21,
                            6,
                            20,
                            6,
                            18,
                            5,
                            16,
                            4,
                            15
                        ]
                    ],
                    '(': [
                        14,
                        [
                            11,
                            25,
                            9,
                            23,
                            7,
                            20,
                            5,
                            16,
                            4,
                            11,
                            4,
                            7,
                            5,
                            2,
                            7,
                            -2,
                            9,
                            -5,
                            11,
                            -7
                        ]
                    ],
                    ')': [
                        14,
                        [
                            3,
                            25,
                            5,
                            23,
                            7,
                            20,
                            9,
                            16,
                            10,
                            11,
                            10,
                            7,
                            9,
                            2,
                            7,
                            -2,
                            5,
                            -5,
                            3,
                            -7
                        ]
                    ],
                    '*': [
                        16,
                        [
                            8,
                            21,
                            8,
                            9,
                            -1,
                            -1,
                            3,
                            18,
                            13,
                            12,
                            -1,
                            -1,
                            13,
                            18,
                            3,
                            12
                        ]
                    ],
                    '+': [
                        26,
                        [
                            13,
                            18,
                            13,
                            0,
                            -1,
                            -1,
                            4,
                            9,
                            22,
                            9
                        ]
                    ],
                    ',': [
                        10,
                        [
                            6,
                            1,
                            5,
                            0,
                            4,
                            1,
                            5,
                            2,
                            6,
                            1,
                            6,
                            -1,
                            5,
                            -3,
                            4,
                            -4
                        ]
                    ],
                    '-': [
                        26,
                        [
                            4,
                            9,
                            22,
                            9
                        ]
                    ],
                    '.': [
                        10,
                        [
                            5,
                            2,
                            4,
                            1,
                            5,
                            0,
                            6,
                            1,
                            5,
                            2
                        ]
                    ],
                    '/': [
                        22,
                        [
                            20,
                            25,
                            2,
                            -7
                        ]
                    ],
                    0: [
                        20,
                        [
                            9,
                            21,
                            6,
                            20,
                            4,
                            17,
                            3,
                            12,
                            3,
                            9,
                            4,
                            4,
                            6,
                            1,
                            9,
                            0,
                            11,
                            0,
                            14,
                            1,
                            16,
                            4,
                            17,
                            9,
                            17,
                            12,
                            16,
                            17,
                            14,
                            20,
                            11,
                            21,
                            9,
                            21
                        ]
                    ],
                    1: [
                        20,
                        [
                            6,
                            17,
                            8,
                            18,
                            11,
                            21,
                            11,
                            0
                        ]
                    ],
                    2: [
                        20,
                        [
                            4,
                            16,
                            4,
                            17,
                            5,
                            19,
                            6,
                            20,
                            8,
                            21,
                            12,
                            21,
                            14,
                            20,
                            15,
                            19,
                            16,
                            17,
                            16,
                            15,
                            15,
                            13,
                            13,
                            10,
                            3,
                            0,
                            17,
                            0
                        ]
                    ],
                    3: [
                        20,
                        [
                            5,
                            21,
                            16,
                            21,
                            10,
                            13,
                            13,
                            13,
                            15,
                            12,
                            16,
                            11,
                            17,
                            8,
                            17,
                            6,
                            16,
                            3,
                            14,
                            1,
                            11,
                            0,
                            8,
                            0,
                            5,
                            1,
                            4,
                            2,
                            3,
                            4
                        ]
                    ],
                    4: [
                        20,
                        [
                            13,
                            21,
                            3,
                            7,
                            18,
                            7,
                            -1,
                            -1,
                            13,
                            21,
                            13,
                            0
                        ]
                    ],
                    5: [
                        20,
                        [
                            15,
                            21,
                            5,
                            21,
                            4,
                            12,
                            5,
                            13,
                            8,
                            14,
                            11,
                            14,
                            14,
                            13,
                            16,
                            11,
                            17,
                            8,
                            17,
                            6,
                            16,
                            3,
                            14,
                            1,
                            11,
                            0,
                            8,
                            0,
                            5,
                            1,
                            4,
                            2,
                            3,
                            4
                        ]
                    ],
                    6: [
                        20,
                        [
                            16,
                            18,
                            15,
                            20,
                            12,
                            21,
                            10,
                            21,
                            7,
                            20,
                            5,
                            17,
                            4,
                            12,
                            4,
                            7,
                            5,
                            3,
                            7,
                            1,
                            10,
                            0,
                            11,
                            0,
                            14,
                            1,
                            16,
                            3,
                            17,
                            6,
                            17,
                            7,
                            16,
                            10,
                            14,
                            12,
                            11,
                            13,
                            10,
                            13,
                            7,
                            12,
                            5,
                            10,
                            4,
                            7
                        ]
                    ],
                    7: [
                        20,
                        [
                            17,
                            21,
                            7,
                            0,
                            -1,
                            -1,
                            3,
                            21,
                            17,
                            21
                        ]
                    ],
                    8: [
                        20,
                        [
                            8,
                            21,
                            5,
                            20,
                            4,
                            18,
                            4,
                            16,
                            5,
                            14,
                            7,
                            13,
                            11,
                            12,
                            14,
                            11,
                            16,
                            9,
                            17,
                            7,
                            17,
                            4,
                            16,
                            2,
                            15,
                            1,
                            12,
                            0,
                            8,
                            0,
                            5,
                            1,
                            4,
                            2,
                            3,
                            4,
                            3,
                            7,
                            4,
                            9,
                            6,
                            11,
                            9,
                            12,
                            13,
                            13,
                            15,
                            14,
                            16,
                            16,
                            16,
                            18,
                            15,
                            20,
                            12,
                            21,
                            8,
                            21
                        ]
                    ],
                    9: [
                        20,
                        [
                            16,
                            14,
                            15,
                            11,
                            13,
                            9,
                            10,
                            8,
                            9,
                            8,
                            6,
                            9,
                            4,
                            11,
                            3,
                            14,
                            3,
                            15,
                            4,
                            18,
                            6,
                            20,
                            9,
                            21,
                            10,
                            21,
                            13,
                            20,
                            15,
                            18,
                            16,
                            14,
                            16,
                            9,
                            15,
                            4,
                            13,
                            1,
                            10,
                            0,
                            8,
                            0,
                            5,
                            1,
                            4,
                            3
                        ]
                    ],
                    ':': [
                        10,
                        [
                            5,
                            14,
                            4,
                            13,
                            5,
                            12,
                            6,
                            13,
                            5,
                            14,
                            -1,
                            -1,
                            5,
                            2,
                            4,
                            1,
                            5,
                            0,
                            6,
                            1,
                            5,
                            2
                        ]
                    ],
                    ';': [
                        10,
                        [
                            5,
                            14,
                            4,
                            13,
                            5,
                            12,
                            6,
                            13,
                            5,
                            14,
                            -1,
                            -1,
                            6,
                            1,
                            5,
                            0,
                            4,
                            1,
                            5,
                            2,
                            6,
                            1,
                            6,
                            -1,
                            5,
                            -3,
                            4,
                            -4
                        ]
                    ],
                    '<': [
                        24,
                        [
                            20,
                            18,
                            4,
                            9,
                            20,
                            0
                        ]
                    ],
                    '=': [
                        26,
                        [
                            4,
                            12,
                            22,
                            12,
                            -1,
                            -1,
                            4,
                            6,
                            22,
                            6
                        ]
                    ],
                    '>': [
                        24,
                        [
                            4,
                            18,
                            20,
                            9,
                            4,
                            0
                        ]
                    ],
                    '?': [
                        18,
                        [
                            3,
                            16,
                            3,
                            17,
                            4,
                            19,
                            5,
                            20,
                            7,
                            21,
                            11,
                            21,
                            13,
                            20,
                            14,
                            19,
                            15,
                            17,
                            15,
                            15,
                            14,
                            13,
                            13,
                            12,
                            9,
                            10,
                            9,
                            7,
                            -1,
                            -1,
                            9,
                            2,
                            8,
                            1,
                            9,
                            0,
                            10,
                            1,
                            9,
                            2
                        ]
                    ],
                    '@': [
                        27,
                        [
                            18,
                            13,
                            17,
                            15,
                            15,
                            16,
                            12,
                            16,
                            10,
                            15,
                            9,
                            14,
                            8,
                            11,
                            8,
                            8,
                            9,
                            6,
                            11,
                            5,
                            14,
                            5,
                            16,
                            6,
                            17,
                            8,
                            -1,
                            -1,
                            12,
                            16,
                            10,
                            14,
                            9,
                            11,
                            9,
                            8,
                            10,
                            6,
                            11,
                            5,
                            -1,
                            -1,
                            18,
                            16,
                            17,
                            8,
                            17,
                            6,
                            19,
                            5,
                            21,
                            5,
                            23,
                            7,
                            24,
                            10,
                            24,
                            12,
                            23,
                            15,
                            22,
                            17,
                            20,
                            19,
                            18,
                            20,
                            15,
                            21,
                            12,
                            21,
                            9,
                            20,
                            7,
                            19,
                            5,
                            17,
                            4,
                            15,
                            3,
                            12,
                            3,
                            9,
                            4,
                            6,
                            5,
                            4,
                            7,
                            2,
                            9,
                            1,
                            12,
                            0,
                            15,
                            0,
                            18,
                            1,
                            20,
                            2,
                            21,
                            3,
                            -1,
                            -1,
                            19,
                            16,
                            18,
                            8,
                            18,
                            6,
                            19,
                            5
                        ]
                    ],
                    A: [
                        18,
                        [
                            9,
                            21,
                            1,
                            0,
                            -1,
                            -1,
                            9,
                            21,
                            17,
                            0,
                            -1,
                            -1,
                            4,
                            7,
                            14,
                            7
                        ]
                    ],
                    B: [
                        21,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            21,
                            13,
                            21,
                            16,
                            20,
                            17,
                            19,
                            18,
                            17,
                            18,
                            15,
                            17,
                            13,
                            16,
                            12,
                            13,
                            11,
                            -1,
                            -1,
                            4,
                            11,
                            13,
                            11,
                            16,
                            10,
                            17,
                            9,
                            18,
                            7,
                            18,
                            4,
                            17,
                            2,
                            16,
                            1,
                            13,
                            0,
                            4,
                            0
                        ]
                    ],
                    C: [
                        21,
                        [
                            18,
                            16,
                            17,
                            18,
                            15,
                            20,
                            13,
                            21,
                            9,
                            21,
                            7,
                            20,
                            5,
                            18,
                            4,
                            16,
                            3,
                            13,
                            3,
                            8,
                            4,
                            5,
                            5,
                            3,
                            7,
                            1,
                            9,
                            0,
                            13,
                            0,
                            15,
                            1,
                            17,
                            3,
                            18,
                            5
                        ]
                    ],
                    D: [
                        21,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            21,
                            11,
                            21,
                            14,
                            20,
                            16,
                            18,
                            17,
                            16,
                            18,
                            13,
                            18,
                            8,
                            17,
                            5,
                            16,
                            3,
                            14,
                            1,
                            11,
                            0,
                            4,
                            0
                        ]
                    ],
                    E: [
                        19,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            21,
                            17,
                            21,
                            -1,
                            -1,
                            4,
                            11,
                            12,
                            11,
                            -1,
                            -1,
                            4,
                            0,
                            17,
                            0
                        ]
                    ],
                    F: [
                        18,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            21,
                            17,
                            21,
                            -1,
                            -1,
                            4,
                            11,
                            12,
                            11
                        ]
                    ],
                    G: [
                        21,
                        [
                            18,
                            16,
                            17,
                            18,
                            15,
                            20,
                            13,
                            21,
                            9,
                            21,
                            7,
                            20,
                            5,
                            18,
                            4,
                            16,
                            3,
                            13,
                            3,
                            8,
                            4,
                            5,
                            5,
                            3,
                            7,
                            1,
                            9,
                            0,
                            13,
                            0,
                            15,
                            1,
                            17,
                            3,
                            18,
                            5,
                            18,
                            8,
                            -1,
                            -1,
                            13,
                            8,
                            18,
                            8
                        ]
                    ],
                    H: [
                        22,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            18,
                            21,
                            18,
                            0,
                            -1,
                            -1,
                            4,
                            11,
                            18,
                            11
                        ]
                    ],
                    I: [
                        8,
                        [
                            4,
                            21,
                            4,
                            0
                        ]
                    ],
                    J: [
                        16,
                        [
                            12,
                            21,
                            12,
                            5,
                            11,
                            2,
                            10,
                            1,
                            8,
                            0,
                            6,
                            0,
                            4,
                            1,
                            3,
                            2,
                            2,
                            5,
                            2,
                            7
                        ]
                    ],
                    K: [
                        21,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            18,
                            21,
                            4,
                            7,
                            -1,
                            -1,
                            9,
                            12,
                            18,
                            0
                        ]
                    ],
                    L: [
                        17,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            0,
                            16,
                            0
                        ]
                    ],
                    M: [
                        24,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            21,
                            12,
                            0,
                            -1,
                            -1,
                            20,
                            21,
                            12,
                            0,
                            -1,
                            -1,
                            20,
                            21,
                            20,
                            0
                        ]
                    ],
                    N: [
                        22,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            21,
                            18,
                            0,
                            -1,
                            -1,
                            18,
                            21,
                            18,
                            0
                        ]
                    ],
                    O: [
                        22,
                        [
                            9,
                            21,
                            7,
                            20,
                            5,
                            18,
                            4,
                            16,
                            3,
                            13,
                            3,
                            8,
                            4,
                            5,
                            5,
                            3,
                            7,
                            1,
                            9,
                            0,
                            13,
                            0,
                            15,
                            1,
                            17,
                            3,
                            18,
                            5,
                            19,
                            8,
                            19,
                            13,
                            18,
                            16,
                            17,
                            18,
                            15,
                            20,
                            13,
                            21,
                            9,
                            21
                        ]
                    ],
                    P: [
                        21,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            21,
                            13,
                            21,
                            16,
                            20,
                            17,
                            19,
                            18,
                            17,
                            18,
                            14,
                            17,
                            12,
                            16,
                            11,
                            13,
                            10,
                            4,
                            10
                        ]
                    ],
                    Q: [
                        22,
                        [
                            9,
                            21,
                            7,
                            20,
                            5,
                            18,
                            4,
                            16,
                            3,
                            13,
                            3,
                            8,
                            4,
                            5,
                            5,
                            3,
                            7,
                            1,
                            9,
                            0,
                            13,
                            0,
                            15,
                            1,
                            17,
                            3,
                            18,
                            5,
                            19,
                            8,
                            19,
                            13,
                            18,
                            16,
                            17,
                            18,
                            15,
                            20,
                            13,
                            21,
                            9,
                            21,
                            -1,
                            -1,
                            12,
                            4,
                            18,
                            -2
                        ]
                    ],
                    R: [
                        21,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            21,
                            13,
                            21,
                            16,
                            20,
                            17,
                            19,
                            18,
                            17,
                            18,
                            15,
                            17,
                            13,
                            16,
                            12,
                            13,
                            11,
                            4,
                            11,
                            -1,
                            -1,
                            11,
                            11,
                            18,
                            0
                        ]
                    ],
                    S: [
                        20,
                        [
                            17,
                            18,
                            15,
                            20,
                            12,
                            21,
                            8,
                            21,
                            5,
                            20,
                            3,
                            18,
                            3,
                            16,
                            4,
                            14,
                            5,
                            13,
                            7,
                            12,
                            13,
                            10,
                            15,
                            9,
                            16,
                            8,
                            17,
                            6,
                            17,
                            3,
                            15,
                            1,
                            12,
                            0,
                            8,
                            0,
                            5,
                            1,
                            3,
                            3
                        ]
                    ],
                    T: [
                        16,
                        [
                            8,
                            21,
                            8,
                            0,
                            -1,
                            -1,
                            1,
                            21,
                            15,
                            21
                        ]
                    ],
                    U: [
                        22,
                        [
                            4,
                            21,
                            4,
                            6,
                            5,
                            3,
                            7,
                            1,
                            10,
                            0,
                            12,
                            0,
                            15,
                            1,
                            17,
                            3,
                            18,
                            6,
                            18,
                            21
                        ]
                    ],
                    V: [
                        18,
                        [
                            1,
                            21,
                            9,
                            0,
                            -1,
                            -1,
                            17,
                            21,
                            9,
                            0
                        ]
                    ],
                    W: [
                        24,
                        [
                            2,
                            21,
                            7,
                            0,
                            -1,
                            -1,
                            12,
                            21,
                            7,
                            0,
                            -1,
                            -1,
                            12,
                            21,
                            17,
                            0,
                            -1,
                            -1,
                            22,
                            21,
                            17,
                            0
                        ]
                    ],
                    X: [
                        20,
                        [
                            3,
                            21,
                            17,
                            0,
                            -1,
                            -1,
                            17,
                            21,
                            3,
                            0
                        ]
                    ],
                    Y: [
                        18,
                        [
                            1,
                            21,
                            9,
                            11,
                            9,
                            0,
                            -1,
                            -1,
                            17,
                            21,
                            9,
                            11
                        ]
                    ],
                    Z: [
                        20,
                        [
                            17,
                            21,
                            3,
                            0,
                            -1,
                            -1,
                            3,
                            21,
                            17,
                            21,
                            -1,
                            -1,
                            3,
                            0,
                            17,
                            0
                        ]
                    ],
                    '[': [
                        14,
                        [
                            4,
                            25,
                            4,
                            -7,
                            -1,
                            -1,
                            5,
                            25,
                            5,
                            -7,
                            -1,
                            -1,
                            4,
                            25,
                            11,
                            25,
                            -1,
                            -1,
                            4,
                            -7,
                            11,
                            -7
                        ]
                    ],
                    '\\': [
                        14,
                        [
                            0,
                            21,
                            14,
                            -3
                        ]
                    ],
                    ']': [
                        14,
                        [
                            9,
                            25,
                            9,
                            -7,
                            -1,
                            -1,
                            10,
                            25,
                            10,
                            -7,
                            -1,
                            -1,
                            3,
                            25,
                            10,
                            25,
                            -1,
                            -1,
                            3,
                            -7,
                            10,
                            -7
                        ]
                    ],
                    '^': [
                        16,
                        [
                            6,
                            15,
                            8,
                            18,
                            10,
                            15,
                            -1,
                            -1,
                            3,
                            12,
                            8,
                            17,
                            13,
                            12,
                            -1,
                            -1,
                            8,
                            17,
                            8,
                            0
                        ]
                    ],
                    _: [
                        16,
                        [
                            0,
                            -2,
                            16,
                            -2
                        ]
                    ],
                    '`': [
                        10,
                        [
                            6,
                            21,
                            5,
                            20,
                            4,
                            18,
                            4,
                            16,
                            5,
                            15,
                            6,
                            16,
                            5,
                            17
                        ]
                    ],
                    a: [
                        19,
                        [
                            15,
                            14,
                            15,
                            0,
                            -1,
                            -1,
                            15,
                            11,
                            13,
                            13,
                            11,
                            14,
                            8,
                            14,
                            6,
                            13,
                            4,
                            11,
                            3,
                            8,
                            3,
                            6,
                            4,
                            3,
                            6,
                            1,
                            8,
                            0,
                            11,
                            0,
                            13,
                            1,
                            15,
                            3
                        ]
                    ],
                    b: [
                        19,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            11,
                            6,
                            13,
                            8,
                            14,
                            11,
                            14,
                            13,
                            13,
                            15,
                            11,
                            16,
                            8,
                            16,
                            6,
                            15,
                            3,
                            13,
                            1,
                            11,
                            0,
                            8,
                            0,
                            6,
                            1,
                            4,
                            3
                        ]
                    ],
                    c: [
                        18,
                        [
                            15,
                            11,
                            13,
                            13,
                            11,
                            14,
                            8,
                            14,
                            6,
                            13,
                            4,
                            11,
                            3,
                            8,
                            3,
                            6,
                            4,
                            3,
                            6,
                            1,
                            8,
                            0,
                            11,
                            0,
                            13,
                            1,
                            15,
                            3
                        ]
                    ],
                    d: [
                        19,
                        [
                            15,
                            21,
                            15,
                            0,
                            -1,
                            -1,
                            15,
                            11,
                            13,
                            13,
                            11,
                            14,
                            8,
                            14,
                            6,
                            13,
                            4,
                            11,
                            3,
                            8,
                            3,
                            6,
                            4,
                            3,
                            6,
                            1,
                            8,
                            0,
                            11,
                            0,
                            13,
                            1,
                            15,
                            3
                        ]
                    ],
                    e: [
                        18,
                        [
                            3,
                            8,
                            15,
                            8,
                            15,
                            10,
                            14,
                            12,
                            13,
                            13,
                            11,
                            14,
                            8,
                            14,
                            6,
                            13,
                            4,
                            11,
                            3,
                            8,
                            3,
                            6,
                            4,
                            3,
                            6,
                            1,
                            8,
                            0,
                            11,
                            0,
                            13,
                            1,
                            15,
                            3
                        ]
                    ],
                    f: [
                        12,
                        [
                            10,
                            21,
                            8,
                            21,
                            6,
                            20,
                            5,
                            17,
                            5,
                            0,
                            -1,
                            -1,
                            2,
                            14,
                            9,
                            14
                        ]
                    ],
                    g: [
                        19,
                        [
                            15,
                            14,
                            15,
                            -2,
                            14,
                            -5,
                            13,
                            -6,
                            11,
                            -7,
                            8,
                            -7,
                            6,
                            -6,
                            -1,
                            -1,
                            15,
                            11,
                            13,
                            13,
                            11,
                            14,
                            8,
                            14,
                            6,
                            13,
                            4,
                            11,
                            3,
                            8,
                            3,
                            6,
                            4,
                            3,
                            6,
                            1,
                            8,
                            0,
                            11,
                            0,
                            13,
                            1,
                            15,
                            3
                        ]
                    ],
                    h: [
                        19,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            10,
                            7,
                            13,
                            9,
                            14,
                            12,
                            14,
                            14,
                            13,
                            15,
                            10,
                            15,
                            0
                        ]
                    ],
                    i: [
                        8,
                        [
                            3,
                            21,
                            4,
                            20,
                            5,
                            21,
                            4,
                            22,
                            3,
                            21,
                            -1,
                            -1,
                            4,
                            14,
                            4,
                            0
                        ]
                    ],
                    j: [
                        10,
                        [
                            5,
                            21,
                            6,
                            20,
                            7,
                            21,
                            6,
                            22,
                            5,
                            21,
                            -1,
                            -1,
                            6,
                            14,
                            6,
                            -3,
                            5,
                            -6,
                            3,
                            -7,
                            1,
                            -7
                        ]
                    ],
                    k: [
                        17,
                        [
                            4,
                            21,
                            4,
                            0,
                            -1,
                            -1,
                            14,
                            14,
                            4,
                            4,
                            -1,
                            -1,
                            8,
                            8,
                            15,
                            0
                        ]
                    ],
                    l: [
                        8,
                        [
                            4,
                            21,
                            4,
                            0
                        ]
                    ],
                    m: [
                        30,
                        [
                            4,
                            14,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            10,
                            7,
                            13,
                            9,
                            14,
                            12,
                            14,
                            14,
                            13,
                            15,
                            10,
                            15,
                            0,
                            -1,
                            -1,
                            15,
                            10,
                            18,
                            13,
                            20,
                            14,
                            23,
                            14,
                            25,
                            13,
                            26,
                            10,
                            26,
                            0
                        ]
                    ],
                    n: [
                        19,
                        [
                            4,
                            14,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            10,
                            7,
                            13,
                            9,
                            14,
                            12,
                            14,
                            14,
                            13,
                            15,
                            10,
                            15,
                            0
                        ]
                    ],
                    o: [
                        19,
                        [
                            8,
                            14,
                            6,
                            13,
                            4,
                            11,
                            3,
                            8,
                            3,
                            6,
                            4,
                            3,
                            6,
                            1,
                            8,
                            0,
                            11,
                            0,
                            13,
                            1,
                            15,
                            3,
                            16,
                            6,
                            16,
                            8,
                            15,
                            11,
                            13,
                            13,
                            11,
                            14,
                            8,
                            14
                        ]
                    ],
                    p: [
                        19,
                        [
                            4,
                            14,
                            4,
                            -7,
                            -1,
                            -1,
                            4,
                            11,
                            6,
                            13,
                            8,
                            14,
                            11,
                            14,
                            13,
                            13,
                            15,
                            11,
                            16,
                            8,
                            16,
                            6,
                            15,
                            3,
                            13,
                            1,
                            11,
                            0,
                            8,
                            0,
                            6,
                            1,
                            4,
                            3
                        ]
                    ],
                    q: [
                        19,
                        [
                            15,
                            14,
                            15,
                            -7,
                            -1,
                            -1,
                            15,
                            11,
                            13,
                            13,
                            11,
                            14,
                            8,
                            14,
                            6,
                            13,
                            4,
                            11,
                            3,
                            8,
                            3,
                            6,
                            4,
                            3,
                            6,
                            1,
                            8,
                            0,
                            11,
                            0,
                            13,
                            1,
                            15,
                            3
                        ]
                    ],
                    r: [
                        13,
                        [
                            4,
                            14,
                            4,
                            0,
                            -1,
                            -1,
                            4,
                            8,
                            5,
                            11,
                            7,
                            13,
                            9,
                            14,
                            12,
                            14
                        ]
                    ],
                    s: [
                        17,
                        [
                            14,
                            11,
                            13,
                            13,
                            10,
                            14,
                            7,
                            14,
                            4,
                            13,
                            3,
                            11,
                            4,
                            9,
                            6,
                            8,
                            11,
                            7,
                            13,
                            6,
                            14,
                            4,
                            14,
                            3,
                            13,
                            1,
                            10,
                            0,
                            7,
                            0,
                            4,
                            1,
                            3,
                            3
                        ]
                    ],
                    t: [
                        12,
                        [
                            5,
                            21,
                            5,
                            4,
                            6,
                            1,
                            8,
                            0,
                            10,
                            0,
                            -1,
                            -1,
                            2,
                            14,
                            9,
                            14
                        ]
                    ],
                    u: [
                        19,
                        [
                            4,
                            14,
                            4,
                            4,
                            5,
                            1,
                            7,
                            0,
                            10,
                            0,
                            12,
                            1,
                            15,
                            4,
                            -1,
                            -1,
                            15,
                            14,
                            15,
                            0
                        ]
                    ],
                    v: [
                        16,
                        [
                            2,
                            14,
                            8,
                            0,
                            -1,
                            -1,
                            14,
                            14,
                            8,
                            0
                        ]
                    ],
                    w: [
                        22,
                        [
                            3,
                            14,
                            7,
                            0,
                            -1,
                            -1,
                            11,
                            14,
                            7,
                            0,
                            -1,
                            -1,
                            11,
                            14,
                            15,
                            0,
                            -1,
                            -1,
                            19,
                            14,
                            15,
                            0
                        ]
                    ],
                    x: [
                        17,
                        [
                            3,
                            14,
                            14,
                            0,
                            -1,
                            -1,
                            14,
                            14,
                            3,
                            0
                        ]
                    ],
                    y: [
                        16,
                        [
                            2,
                            14,
                            8,
                            0,
                            -1,
                            -1,
                            14,
                            14,
                            8,
                            0,
                            6,
                            -4,
                            4,
                            -6,
                            2,
                            -7,
                            1,
                            -7
                        ]
                    ],
                    z: [
                        17,
                        [
                            14,
                            14,
                            3,
                            0,
                            -1,
                            -1,
                            3,
                            14,
                            14,
                            14,
                            -1,
                            -1,
                            3,
                            0,
                            14,
                            0
                        ]
                    ],
                    '{': [
                        14,
                        [
                            9,
                            25,
                            7,
                            24,
                            6,
                            23,
                            5,
                            21,
                            5,
                            19,
                            6,
                            17,
                            7,
                            16,
                            8,
                            14,
                            8,
                            12,
                            6,
                            10,
                            -1,
                            -1,
                            7,
                            24,
                            6,
                            22,
                            6,
                            20,
                            7,
                            18,
                            8,
                            17,
                            9,
                            15,
                            9,
                            13,
                            8,
                            11,
                            4,
                            9,
                            8,
                            7,
                            9,
                            5,
                            9,
                            3,
                            8,
                            1,
                            7,
                            0,
                            6,
                            -2,
                            6,
                            -4,
                            7,
                            -6,
                            -1,
                            -1,
                            6,
                            8,
                            8,
                            6,
                            8,
                            4,
                            7,
                            2,
                            6,
                            1,
                            5,
                            -1,
                            5,
                            -3,
                            6,
                            -5,
                            7,
                            -6,
                            9,
                            -7
                        ]
                    ],
                    '|': [
                        8,
                        [
                            4,
                            25,
                            4,
                            -7
                        ]
                    ],
                    '}': [
                        14,
                        [
                            5,
                            25,
                            7,
                            24,
                            8,
                            23,
                            9,
                            21,
                            9,
                            19,
                            8,
                            17,
                            7,
                            16,
                            6,
                            14,
                            6,
                            12,
                            8,
                            10,
                            -1,
                            -1,
                            7,
                            24,
                            8,
                            22,
                            8,
                            20,
                            7,
                            18,
                            6,
                            17,
                            5,
                            15,
                            5,
                            13,
                            6,
                            11,
                            10,
                            9,
                            6,
                            7,
                            5,
                            5,
                            5,
                            3,
                            6,
                            1,
                            7,
                            0,
                            8,
                            -2,
                            8,
                            -4,
                            7,
                            -6,
                            -1,
                            -1,
                            8,
                            8,
                            6,
                            6,
                            6,
                            4,
                            7,
                            2,
                            8,
                            1,
                            9,
                            -1,
                            9,
                            -3,
                            8,
                            -5,
                            7,
                            -6,
                            5,
                            -7
                        ]
                    ],
                    '~': [
                        24,
                        [
                            3,
                            6,
                            3,
                            8,
                            4,
                            11,
                            6,
                            12,
                            8,
                            12,
                            10,
                            11,
                            14,
                            8,
                            16,
                            7,
                            18,
                            7,
                            20,
                            8,
                            21,
                            10,
                            -1,
                            -1,
                            3,
                            8,
                            4,
                            10,
                            6,
                            11,
                            8,
                            11,
                            10,
                            10,
                            14,
                            7,
                            16,
                            6,
                            18,
                            6,
                            20,
                            7,
                            21,
                            10,
                            21,
                            12
                        ]
                    ]
                };
            },
            {
                '../data/array_types': 39,
                '../data/extent': 53,
                '../data/pos_attributes': 57,
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                '../util/browser': 252,
                './vertex_array_object': 95,
                '@mapbox/gl-matrix': 2
            }
        ],
        78: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawFill(t, e, r, o) {
                    var a = r.paint.get('fill-color'), i = r.paint.get('fill-opacity');
                    if (0 !== i.constantOr(1)) {
                        var n = t.context;
                        n.setColorMode(t.colorModeForRenderPass());
                        var l = r.paint.get('fill-pattern') || 1 !== a.constantOr(Color.transparent).a || 1 !== i.constantOr(0) ? 'translucent' : 'opaque';
                        t.renderPass === l && (n.setDepthMode(t.depthModeForSublayer(1, 'opaque' === t.renderPass ? DepthMode.ReadWrite : DepthMode.ReadOnly)), drawFillTiles(t, e, r, o, drawFillTile)), 'translucent' === t.renderPass && r.paint.get('fill-antialias') && (n.lineWidth.set(2), n.setDepthMode(t.depthModeForSublayer(r.getPaintProperty('fill-outline-color') ? 2 : 0, DepthMode.ReadOnly)), drawFillTiles(t, e, r, o, drawStrokeTile));
                    }
                }
                function drawFillTiles(t, e, r, o, a) {
                    if (!pattern.isPatternMissing(r.paint.get('fill-pattern'), t)) {
                        for (var i = !0, n = 0, l = o; n < l.length; n += 1) {
                            var s = l[n], p = e.getTile(s), d = p.getBucket(r);
                            d && (t.context.setStencilMode(t.stencilModeForClipping(s)), a(t, e, r, p, s, d, i), i = !1);
                        }
                    }
                }
                function drawFillTile(t, e, r, o, a, i, n) {
                    var l = t.context.gl, s = i.programConfigurations.get(r.id);
                    setFillProgram('fill', r.paint.get('fill-pattern'), t, s, r, o, a, n).draw(t.context, l.TRIANGLES, r.id, i.layoutVertexBuffer, i.indexBuffer, i.segments, s);
                }
                function drawStrokeTile(t, e, r, o, a, i, n) {
                    var l = t.context.gl, s = i.programConfigurations.get(r.id), p = r.getPaintProperty('fill-outline-color') ? null : r.paint.get('fill-pattern'), d = setFillProgram('fillOutline', p, t, s, r, o, a, n);
                    l.uniform2f(d.uniforms.u_world, l.drawingBufferWidth, l.drawingBufferHeight), d.draw(t.context, l.LINES, r.id, i.layoutVertexBuffer, i.indexBuffer2, i.segments2, s);
                }
                function setFillProgram(t, e, r, o, a, i, n, l) {
                    var s, p = r.context.program.get();
                    return e ? (s = r.useProgram(t + 'Pattern', o), (l || s.program !== p) && (o.setUniforms(r.context, s, a.paint, { zoom: r.transform.zoom }), pattern.prepare(e, r, s)), pattern.setTile(i, r, s)) : (s = r.useProgram(t, o), (l || s.program !== p) && o.setUniforms(r.context, s, a.paint, { zoom: r.transform.zoom })), r.context.gl.uniformMatrix4fv(s.uniforms.u_matrix, !1, r.translatePosMatrix(n.posMatrix, i, a.paint.get('fill-translate'), a.paint.get('fill-translate-anchor'))), s;
                }
                var pattern = _dereq_('./pattern'), Color = _dereq_('../style-spec/util/color'), DepthMode = _dereq_('../gl/depth_mode');
                module.exports = drawFill;
            },
            {
                '../gl/depth_mode': 67,
                '../style-spec/util/color': 153,
                './pattern': 91
            }
        ],
        79: [
            function (_dereq_, module, exports) {
                'use strict';
                function draw(e, t, r, i) {
                    if (0 !== r.paint.get('fill-extrusion-opacity')) {
                        if ('offscreen' === e.renderPass) {
                            drawToExtrusionFramebuffer(e, r);
                            for (var o = !0, a = 0, n = i; a < n.length; a += 1) {
                                var s = n[a], u = t.getTile(s), f = u.getBucket(r);
                                f && (drawExtrusion(e, t, r, u, s, f, o), o = !1);
                            }
                        } else {
                            'translucent' === e.renderPass && drawExtrusionTexture(e, r);
                        }
                    }
                }
                function drawToExtrusionFramebuffer(e, t) {
                    var r = e.context, i = r.gl, o = t.viewportFrame;
                    if (e.depthRboNeedsClear && e.setupOffscreenDepthRenderbuffer(), !o) {
                        var a = new Texture(r, {
                            width: e.width,
                            height: e.height,
                            data: null
                        }, i.RGBA);
                        a.bind(i.LINEAR, i.CLAMP_TO_EDGE), o = t.viewportFrame = r.createFramebuffer(e.width, e.height), o.colorAttachment.set(a.texture);
                    }
                    r.bindFramebuffer.set(o.framebuffer), o.depthAttachment.set(e.depthRbo), e.depthRboNeedsClear && (r.clear({ depth: 1 }), e.depthRboNeedsClear = !1), r.clear({ color: Color.transparent }), r.setStencilMode(StencilMode.disabled), r.setDepthMode(new DepthMode(i.LEQUAL, DepthMode.ReadWrite, [
                        0,
                        1
                    ])), r.setColorMode(e.colorModeForRenderPass());
                }
                function drawExtrusionTexture(e, t) {
                    var r = t.viewportFrame;
                    if (r) {
                        var i = e.context, o = i.gl, a = e.useProgram('extrusionTexture');
                        i.setStencilMode(StencilMode.disabled), i.setDepthMode(DepthMode.disabled), i.setColorMode(e.colorModeForRenderPass()), i.activeTexture.set(o.TEXTURE0), o.bindTexture(o.TEXTURE_2D, r.colorAttachment.get()), o.uniform1f(a.uniforms.u_opacity, t.paint.get('fill-extrusion-opacity')), o.uniform1i(a.uniforms.u_image, 0);
                        var n = mat4.create();
                        mat4.ortho(n, 0, e.width, e.height, 0, 0, 1), o.uniformMatrix4fv(a.uniforms.u_matrix, !1, n), o.uniform2f(a.uniforms.u_world, o.drawingBufferWidth, o.drawingBufferHeight), e.viewportVAO.bind(i, a, e.viewportBuffer, []), o.drawArrays(o.TRIANGLE_STRIP, 0, 4);
                    }
                }
                function drawExtrusion(e, t, r, i, o, a, n) {
                    var s = e.context, u = s.gl, f = r.paint.get('fill-extrusion-pattern'), l = e.context.program.get(), d = a.programConfigurations.get(r.id), m = e.useProgram(f ? 'fillExtrusionPattern' : 'fillExtrusion', d);
                    if ((n || m.program !== l) && d.setUniforms(s, m, r.paint, { zoom: e.transform.zoom }), f) {
                        if (pattern.isPatternMissing(f, e)) {
                            return;
                        }
                        pattern.prepare(f, e, m), pattern.setTile(i, e, m), u.uniform1f(m.uniforms.u_height_factor, -Math.pow(2, o.overscaledZ) / i.tileSize / 8);
                    }
                    e.context.gl.uniformMatrix4fv(m.uniforms.u_matrix, !1, e.translatePosMatrix(o.posMatrix, i, r.paint.get('fill-extrusion-translate'), r.paint.get('fill-extrusion-translate-anchor'))), setLight(m, e), m.draw(s, u.TRIANGLES, r.id, a.layoutVertexBuffer, a.indexBuffer, a.segments, d);
                }
                function setLight(e, t) {
                    var r = t.context.gl, i = t.style.light, o = i.properties.get('position'), a = [
                            o.x,
                            o.y,
                            o.z
                        ], n = mat3.create();
                    'viewport' === i.properties.get('anchor') && mat3.fromRotation(n, -t.transform.angle), vec3.transformMat3(a, a, n);
                    var s = i.properties.get('color');
                    r.uniform3fv(e.uniforms.u_lightpos, a), r.uniform1f(e.uniforms.u_lightintensity, i.properties.get('intensity')), r.uniform3f(e.uniforms.u_lightcolor, s.r, s.g, s.b);
                }
                var glMatrix = _dereq_('@mapbox/gl-matrix'), pattern = _dereq_('./pattern'), Texture = _dereq_('./texture'), Color = _dereq_('../style-spec/util/color'), DepthMode = _dereq_('../gl/depth_mode'), mat3 = glMatrix.mat3, mat4 = glMatrix.mat4, vec3 = glMatrix.vec3, StencilMode = _dereq_('../gl/stencil_mode');
                module.exports = draw;
            },
            {
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                '../style-spec/util/color': 153,
                './pattern': 91,
                './texture': 93,
                '@mapbox/gl-matrix': 2
            }
        ],
        80: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawHeatmap(e, t, r, o) {
                    if (0 !== r.paint.get('heatmap-opacity')) {
                        if ('offscreen' === e.renderPass) {
                            var a = e.context, i = a.gl;
                            a.setDepthMode(e.depthModeForSublayer(0, DepthMode.ReadOnly)), a.setStencilMode(StencilMode.disabled), bindFramebuffer(a, e, r), a.clear({ color: Color.transparent }), a.setColorMode(new ColorMode([
                                i.ONE,
                                i.ONE
                            ], Color.transparent, [
                                !0,
                                !0,
                                !0,
                                !0
                            ]));
                            for (var n = !0, u = 0; u < o.length; u++) {
                                var T = o[u];
                                if (!t.hasRenderableParent(T)) {
                                    var f = t.getTile(T), m = f.getBucket(r);
                                    if (m) {
                                        var l = e.context.program.get(), s = m.programConfigurations.get(r.id), d = e.useProgram('heatmap', s), E = e.transform, x = E.zoom;
                                        (n || d.program !== l) && (s.setUniforms(e.context, d, r.paint, { zoom: x }), n = !1), i.uniform1f(d.uniforms.u_extrude_scale, pixelsToTileUnits(f, 1, x)), i.uniform1f(d.uniforms.u_intensity, r.paint.get('heatmap-intensity')), i.uniformMatrix4fv(d.uniforms.u_matrix, !1, T.posMatrix), d.draw(a, i.TRIANGLES, r.id, m.layoutVertexBuffer, m.indexBuffer, m.segments, s);
                                    }
                                }
                            }
                            a.viewport.set([
                                0,
                                0,
                                e.width,
                                e.height
                            ]);
                        } else {
                            'translucent' === e.renderPass && (e.context.setColorMode(e.colorModeForRenderPass()), renderTextureToMap(e, r));
                        }
                    }
                }
                function bindFramebuffer(e, t, r) {
                    var o = e.gl;
                    e.activeTexture.set(o.TEXTURE1), e.viewport.set([
                        0,
                        0,
                        t.width / 4,
                        t.height / 4
                    ]);
                    var a = r.heatmapFbo;
                    if (a) {
                        o.bindTexture(o.TEXTURE_2D, a.colorAttachment.get()), e.bindFramebuffer.set(a.framebuffer);
                    } else {
                        var i = o.createTexture();
                        o.bindTexture(o.TEXTURE_2D, i), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_S, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_T, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.LINEAR), a = r.heatmapFbo = e.createFramebuffer(t.width / 4, t.height / 4), bindTextureToFramebuffer(e, t, i, a);
                    }
                }
                function bindTextureToFramebuffer(e, t, r, o) {
                    var a = e.gl;
                    a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, t.width / 4, t.height / 4, 0, a.RGBA, e.extTextureHalfFloat ? e.extTextureHalfFloat.HALF_FLOAT_OES : a.UNSIGNED_BYTE, null), o.colorAttachment.set(r), e.extTextureHalfFloat && a.checkFramebufferStatus(a.FRAMEBUFFER) !== a.FRAMEBUFFER_COMPLETE && (e.extTextureHalfFloat = null, o.colorAttachment.setDirty(), bindTextureToFramebuffer(e, t, r, o));
                }
                function renderTextureToMap(e, t) {
                    var r = e.context, o = r.gl, a = t.heatmapFbo;
                    if (a) {
                        r.activeTexture.set(o.TEXTURE0), o.bindTexture(o.TEXTURE_2D, a.colorAttachment.get()), r.activeTexture.set(o.TEXTURE1);
                        var i = t.colorRampTexture;
                        i || (i = t.colorRampTexture = new Texture(r, t.colorRamp, o.RGBA)), i.bind(o.LINEAR, o.CLAMP_TO_EDGE), r.setDepthMode(DepthMode.disabled);
                        var n = e.useProgram('heatmapTexture'), u = t.paint.get('heatmap-opacity');
                        o.uniform1f(n.uniforms.u_opacity, u), o.uniform1i(n.uniforms.u_image, 0), o.uniform1i(n.uniforms.u_color_ramp, 1);
                        var T = mat4.create();
                        mat4.ortho(T, 0, e.width, e.height, 0, 0, 1), o.uniformMatrix4fv(n.uniforms.u_matrix, !1, T), o.uniform2f(n.uniforms.u_world, o.drawingBufferWidth, o.drawingBufferHeight), e.viewportVAO.bind(e.context, n, e.viewportBuffer, []), o.drawArrays(o.TRIANGLE_STRIP, 0, 4);
                    }
                }
                var mat4 = _dereq_('@mapbox/gl-matrix').mat4, Texture = _dereq_('./texture'), pixelsToTileUnits = _dereq_('../source/pixels_to_tile_units'), Color = _dereq_('../style-spec/util/color'), DepthMode = _dereq_('../gl/depth_mode'), StencilMode = _dereq_('../gl/stencil_mode'), ColorMode = _dereq_('../gl/color_mode');
                module.exports = drawHeatmap;
            },
            {
                '../gl/color_mode': 65,
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                '../source/pixels_to_tile_units': 104,
                '../style-spec/util/color': 153,
                './texture': 93,
                '@mapbox/gl-matrix': 2
            }
        ],
        81: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawHillshade(e, r, t, a) {
                    if ('offscreen' === e.renderPass || 'translucent' === e.renderPass) {
                        var i = e.context;
                        i.setDepthMode(e.depthModeForSublayer(0, DepthMode.ReadOnly)), i.setStencilMode(StencilMode.disabled), i.setColorMode(e.colorModeForRenderPass());
                        for (var n = 0, o = a; n < o.length; n += 1) {
                            var s = o[n], d = r.getTile(s);
                            d.needsHillshadePrepare && 'offscreen' === e.renderPass ? prepareHillshade(e, d) : 'translucent' === e.renderPass && renderHillshade(e, d, t);
                        }
                        i.viewport.set([
                            0,
                            0,
                            e.width,
                            e.height
                        ]);
                    }
                }
                function setLight(e, r, t) {
                    var a = t.paint.get('hillshade-illumination-direction') * (Math.PI / 180);
                    'viewport' === t.paint.get('hillshade-illumination-anchor') && (a -= r.transform.angle), r.context.gl.uniform2f(e.uniforms.u_light, t.paint.get('hillshade-exaggeration'), a);
                }
                function getTileLatRange(e, r) {
                    var t = r.toCoordinate(), a = new Coordinate(t.column, t.row + 1, t.zoom);
                    return [
                        e.transform.coordinateLocation(t).lat,
                        e.transform.coordinateLocation(a).lat
                    ];
                }
                function renderHillshade(e, r, t) {
                    var a = e.context, i = a.gl, n = r.fbo;
                    if (n) {
                        var o = e.useProgram('hillshade'), s = e.transform.calculatePosMatrix(r.tileID.toUnwrapped());
                        setLight(o, e, t);
                        var d = getTileLatRange(e, r.tileID);
                        a.activeTexture.set(i.TEXTURE0), i.bindTexture(i.TEXTURE_2D, n.colorAttachment.get()), i.uniformMatrix4fv(o.uniforms.u_matrix, !1, s), i.uniform2fv(o.uniforms.u_latrange, d), i.uniform1i(o.uniforms.u_image, 0);
                        var l = t.paint.get('hillshade-shadow-color');
                        i.uniform4f(o.uniforms.u_shadow, l.r, l.g, l.b, l.a);
                        var u = t.paint.get('hillshade-highlight-color');
                        i.uniform4f(o.uniforms.u_highlight, u.r, u.g, u.b, u.a);
                        var f = t.paint.get('hillshade-accent-color');
                        if (i.uniform4f(o.uniforms.u_accent, f.r, f.g, f.b, f.a), r.maskedBoundsBuffer && r.maskedIndexBuffer && r.segments) {
                            o.draw(a, i.TRIANGLES, t.id, r.maskedBoundsBuffer, r.maskedIndexBuffer, r.segments);
                        } else {
                            var m = e.rasterBoundsBuffer;
                            e.rasterBoundsVAO.bind(a, o, m, []), i.drawArrays(i.TRIANGLE_STRIP, 0, m.length);
                        }
                    }
                }
                function prepareHillshade(e, r) {
                    var t = e.context, a = t.gl;
                    if (r.dem && r.dem.level) {
                        var i = r.dem.level.dim, n = r.dem.getPixels();
                        if (t.activeTexture.set(a.TEXTURE1), t.pixelStoreUnpackPremultiplyAlpha.set(!1), r.demTexture = r.demTexture || e.getTileTexture(r.tileSize), r.demTexture) {
                            var o = r.demTexture;
                            o.update(n, !1), o.bind(a.NEAREST, a.CLAMP_TO_EDGE);
                        } else {
                            r.demTexture = new Texture(t, n, a.RGBA, !1), r.demTexture.bind(a.NEAREST, a.CLAMP_TO_EDGE);
                        }
                        t.activeTexture.set(a.TEXTURE0);
                        var s = r.fbo;
                        if (!s) {
                            var d = new Texture(t, {
                                width: i,
                                height: i,
                                data: null
                            }, a.RGBA);
                            d.bind(a.LINEAR, a.CLAMP_TO_EDGE), s = r.fbo = t.createFramebuffer(i, i), s.colorAttachment.set(d.texture);
                        }
                        t.bindFramebuffer.set(s.framebuffer), t.viewport.set([
                            0,
                            0,
                            i,
                            i
                        ]);
                        var l = mat4.create();
                        mat4.ortho(l, 0, EXTENT, -EXTENT, 0, 0, 1), mat4.translate(l, l, [
                            0,
                            -EXTENT,
                            0
                        ]);
                        var u = e.useProgram('hillshadePrepare');
                        a.uniformMatrix4fv(u.uniforms.u_matrix, !1, l), a.uniform1f(u.uniforms.u_zoom, r.tileID.overscaledZ), a.uniform2fv(u.uniforms.u_dimension, [
                            2 * i,
                            2 * i
                        ]), a.uniform1i(u.uniforms.u_image, 1);
                        var f = e.rasterBoundsBuffer;
                        e.rasterBoundsVAO.bind(t, u, f, []), a.drawArrays(a.TRIANGLE_STRIP, 0, f.length), r.needsHillshadePrepare = !1;
                    }
                }
                var Coordinate = _dereq_('../geo/coordinate'), Texture = _dereq_('./texture'), EXTENT = _dereq_('../data/extent'), mat4 = _dereq_('@mapbox/gl-matrix').mat4, StencilMode = _dereq_('../gl/stencil_mode'), DepthMode = _dereq_('../gl/depth_mode');
                module.exports = drawHillshade;
            },
            {
                '../data/extent': 53,
                '../geo/coordinate': 61,
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                './texture': 93,
                '@mapbox/gl-matrix': 2
            }
        ],
        82: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawLineTile(e, i, t, r, n, a, o, s, u) {
                    var f, l, m, p, _ = i.context, g = _.gl, d = n.paint.get('line-dasharray'), c = n.paint.get('line-pattern');
                    if (s || u) {
                        var x = 1 / pixelsToTileUnits(t, 1, i.transform.tileZoom);
                        if (d) {
                            f = i.lineAtlas.getDash(d.from, 'round' === n.layout.get('line-cap')), l = i.lineAtlas.getDash(d.to, 'round' === n.layout.get('line-cap'));
                            var h = f.width * d.fromScale, v = l.width * d.toScale;
                            g.uniform2f(e.uniforms.u_patternscale_a, x / h, -f.height / 2), g.uniform2f(e.uniforms.u_patternscale_b, x / v, -l.height / 2), g.uniform1f(e.uniforms.u_sdfgamma, i.lineAtlas.width / (256 * Math.min(h, v) * browser.devicePixelRatio) / 2);
                        } else if (c) {
                            if (m = i.imageManager.getPattern(c.from), p = i.imageManager.getPattern(c.to), !m || !p) {
                                return;
                            }
                            g.uniform2f(e.uniforms.u_pattern_size_a, m.displaySize[0] * c.fromScale / x, p.displaySize[1]), g.uniform2f(e.uniforms.u_pattern_size_b, p.displaySize[0] * c.toScale / x, p.displaySize[1]);
                            var T = i.imageManager.getPixelSize(), y = T.width, M = T.height;
                            g.uniform2fv(e.uniforms.u_texsize, [
                                y,
                                M
                            ]);
                        }
                        g.uniform2f(e.uniforms.u_gl_units_to_pixels, 1 / i.transform.pixelsToGLUnits[0], 1 / i.transform.pixelsToGLUnits[1]);
                    }
                    s && (d ? (g.uniform1i(e.uniforms.u_image, 0), _.activeTexture.set(g.TEXTURE0), i.lineAtlas.bind(_), g.uniform1f(e.uniforms.u_tex_y_a, f.y), g.uniform1f(e.uniforms.u_tex_y_b, l.y), g.uniform1f(e.uniforms.u_mix, d.t)) : c && (g.uniform1i(e.uniforms.u_image, 0), _.activeTexture.set(g.TEXTURE0), i.imageManager.bind(_), g.uniform2fv(e.uniforms.u_pattern_tl_a, m.tl), g.uniform2fv(e.uniforms.u_pattern_br_a, m.br), g.uniform2fv(e.uniforms.u_pattern_tl_b, p.tl), g.uniform2fv(e.uniforms.u_pattern_br_b, p.br), g.uniform1f(e.uniforms.u_fade, c.t))), _.setStencilMode(i.stencilModeForClipping(a));
                    var b = i.translatePosMatrix(a.posMatrix, t, n.paint.get('line-translate'), n.paint.get('line-translate-anchor'));
                    g.uniformMatrix4fv(e.uniforms.u_matrix, !1, b), g.uniform1f(e.uniforms.u_ratio, 1 / pixelsToTileUnits(t, 1, i.transform.zoom)), e.draw(_, g.TRIANGLES, n.id, r.layoutVertexBuffer, r.indexBuffer, r.segments, o);
                }
                var browser = _dereq_('../util/browser'), pixelsToTileUnits = _dereq_('../source/pixels_to_tile_units'), DepthMode = _dereq_('../gl/depth_mode');
                module.exports = function (e, i, t, r) {
                    if ('translucent' === e.renderPass) {
                        if (0 !== t.paint.get('line-opacity').constantOr(1)) {
                            var n = e.context;
                            n.setDepthMode(e.depthModeForSublayer(0, DepthMode.ReadOnly)), n.setColorMode(e.colorModeForRenderPass());
                            for (var a, o = t.paint.get('line-dasharray') ? 'lineSDF' : t.paint.get('line-pattern') ? 'linePattern' : 'line', s = !0, u = 0, f = r; u < f.length; u += 1) {
                                var l = f[u], m = i.getTile(l), p = m.getBucket(t);
                                if (p) {
                                    var _ = p.programConfigurations.get(t.id), g = e.context.program.get(), d = e.useProgram(o, _), c = s || d.program !== g, x = a !== m.tileID.overscaledZ;
                                    c && _.setUniforms(e.context, d, t.paint, { zoom: e.transform.zoom }), drawLineTile(d, e, m, p, t, l, _, c, x), a = m.tileID.overscaledZ, s = !1;
                                }
                            }
                        }
                    }
                };
            },
            {
                '../gl/depth_mode': 67,
                '../source/pixels_to_tile_units': 104,
                '../util/browser': 252
            }
        ],
        83: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawRaster(e, r, t, a) {
                    if ('translucent' === e.renderPass && 0 !== t.paint.get('raster-opacity')) {
                        var i = e.context, o = i.gl, n = r.getSource(), s = e.useProgram('raster');
                        i.setStencilMode(StencilMode.disabled), i.setColorMode(e.colorModeForRenderPass()), o.uniform1f(s.uniforms.u_brightness_low, t.paint.get('raster-brightness-min')), o.uniform1f(s.uniforms.u_brightness_high, t.paint.get('raster-brightness-max')), o.uniform1f(s.uniforms.u_saturation_factor, saturationFactor(t.paint.get('raster-saturation'))), o.uniform1f(s.uniforms.u_contrast_factor, contrastFactor(t.paint.get('raster-contrast'))), o.uniform3fv(s.uniforms.u_spin_weights, spinWeights(t.paint.get('raster-hue-rotate'))), o.uniform1f(s.uniforms.u_buffer_scale, 1), o.uniform1i(s.uniforms.u_image0, 0), o.uniform1i(s.uniforms.u_image1, 1);
                        for (var u = a.length && a[0].overscaledZ, d = 0, f = a; d < f.length; d += 1) {
                            var c = f[d];
                            i.setDepthMode(e.depthModeForSublayer(c.overscaledZ - u, 1 === t.paint.get('raster-opacity') ? DepthMode.ReadWrite : DepthMode.ReadOnly, o.LESS));
                            var m = r.getTile(c), l = e.transform.calculatePosMatrix(c.toUnwrapped(), !0);
                            m.registerFadeDuration(t.paint.get('raster-fade-duration')), o.uniformMatrix4fv(s.uniforms.u_matrix, !1, l);
                            var g = r.findLoadedParent(c, 0, {}), p = getFadeValues(m, g, r, t, e.transform), _ = void 0, h = void 0;
                            if (i.activeTexture.set(o.TEXTURE0), m.texture.bind(o.LINEAR, o.CLAMP_TO_EDGE, o.LINEAR_MIPMAP_NEAREST), i.activeTexture.set(o.TEXTURE1), g ? (g.texture.bind(o.LINEAR, o.CLAMP_TO_EDGE, o.LINEAR_MIPMAP_NEAREST), _ = Math.pow(2, g.tileID.overscaledZ - m.tileID.overscaledZ), h = [
                                    m.tileID.canonical.x * _ % 1,
                                    m.tileID.canonical.y * _ % 1
                                ]) : m.texture.bind(o.LINEAR, o.CLAMP_TO_EDGE, o.LINEAR_MIPMAP_NEAREST), o.uniform2fv(s.uniforms.u_tl_parent, h || [
                                    0,
                                    0
                                ]), o.uniform1f(s.uniforms.u_scale_parent, _ || 1), o.uniform1f(s.uniforms.u_fade_t, p.mix), o.uniform1f(s.uniforms.u_opacity, p.opacity * t.paint.get('raster-opacity')), n instanceof ImageSource) {
                                var E = n.boundsBuffer;
                                n.boundsVAO.bind(i, s, E, []), o.drawArrays(o.TRIANGLE_STRIP, 0, E.length);
                            } else if (m.maskedBoundsBuffer && m.maskedIndexBuffer && m.segments) {
                                s.draw(i, o.TRIANGLES, t.id, m.maskedBoundsBuffer, m.maskedIndexBuffer, m.segments);
                            } else {
                                var M = e.rasterBoundsBuffer, v = e.rasterBoundsVAO;
                                v.bind(i, s, M, []), o.drawArrays(o.TRIANGLE_STRIP, 0, M.length);
                            }
                        }
                    }
                }
                function spinWeights(e) {
                    e *= Math.PI / 180;
                    var r = Math.sin(e), t = Math.cos(e);
                    return [
                        (2 * t + 1) / 3,
                        (-Math.sqrt(3) * r - t + 1) / 3,
                        (Math.sqrt(3) * r - t + 1) / 3
                    ];
                }
                function contrastFactor(e) {
                    return e > 0 ? 1 / (1 - e) : 1 + e;
                }
                function saturationFactor(e) {
                    return e > 0 ? 1 - 1 / (1.001 - e) : -e;
                }
                function getFadeValues(e, r, t, a, i) {
                    var o = a.paint.get('raster-fade-duration');
                    if (o > 0) {
                        var n = browser.now(), s = (n - e.timeAdded) / o, u = r ? (n - r.timeAdded) / o : -1, d = t.getSource(), f = i.coveringZoomLevel({
                                tileSize: d.tileSize,
                                roundZoom: d.roundZoom
                            }), c = !r || Math.abs(r.tileID.overscaledZ - f) > Math.abs(e.tileID.overscaledZ - f), m = c && e.refreshedUponExpiration ? 1 : util.clamp(c ? s : 1 - u, 0, 1);
                        return e.refreshedUponExpiration && s >= 1 && (e.refreshedUponExpiration = !1), r ? {
                            opacity: 1,
                            mix: 1 - m
                        } : {
                            opacity: m,
                            mix: 0
                        };
                    }
                    return {
                        opacity: 1,
                        mix: 0
                    };
                }
                var util = _dereq_('../util/util'), ImageSource = _dereq_('../source/image_source'), browser = _dereq_('../util/browser'), StencilMode = _dereq_('../gl/stencil_mode'), DepthMode = _dereq_('../gl/depth_mode');
                module.exports = drawRaster;
            },
            {
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                '../source/image_source': 102,
                '../util/browser': 252,
                '../util/util': 275
            }
        ],
        84: [
            function (_dereq_, module, exports) {
                'use strict';
                function drawSymbols(t, e, o, i) {
                    if ('translucent' === t.renderPass) {
                        var r = t.context;
                        r.setStencilMode(StencilMode.disabled), r.setColorMode(t.colorModeForRenderPass()), 0 !== o.paint.get('icon-opacity').constantOr(1) && drawLayerSymbols(t, e, o, i, !1, o.paint.get('icon-translate'), o.paint.get('icon-translate-anchor'), o.layout.get('icon-rotation-alignment'), o.layout.get('icon-pitch-alignment'), o.layout.get('icon-keep-upright')), 0 !== o.paint.get('text-opacity').constantOr(1) && drawLayerSymbols(t, e, o, i, !0, o.paint.get('text-translate'), o.paint.get('text-translate-anchor'), o.layout.get('text-rotation-alignment'), o.layout.get('text-pitch-alignment'), o.layout.get('text-keep-upright')), e.map.showCollisionBoxes && drawCollisionDebug(t, e, o, i);
                    }
                }
                function drawLayerSymbols(t, e, o, i, r, n, a, s, u, l) {
                    var m = t.context, f = m.gl, c = t.transform, y = 'map' === s, p = 'map' === u, _ = y && 'line' === o.layout.get('symbol-placement'), d = y && !p && !_, g = p;
                    m.setDepthMode(g ? t.depthModeForSublayer(0, DepthMode.ReadOnly) : DepthMode.disabled);
                    for (var x, b = 0, h = i; b < h.length; b += 1) {
                        var S = h[b], M = e.getTile(S), z = M.getBucket(o);
                        if (z) {
                            var T = r ? z.text : z.icon;
                            if (T && T.segments.get().length) {
                                var v = T.programConfigurations.get(o.id), w = r || z.sdfIcons, D = r ? z.textSizeData : z.iconSizeData;
                                if (x || (x = t.useProgram(w ? 'symbolSDF' : 'symbolIcon', v), v.setUniforms(t.context, x, o.paint, { zoom: t.transform.zoom }), setSymbolDrawState(x, t, o, r, d, p, D)), m.activeTexture.set(f.TEXTURE0), f.uniform1i(x.uniforms.u_texture, 0), r) {
                                    M.glyphAtlasTexture.bind(f.LINEAR, f.CLAMP_TO_EDGE), f.uniform2fv(x.uniforms.u_texsize, M.glyphAtlasTexture.size);
                                } else {
                                    var L = 1 !== o.layout.get('icon-size').constantOr(0) || z.iconsNeedLinear, P = p || 0 !== c.pitch;
                                    M.iconAtlasTexture.bind(w || t.options.rotating || t.options.zooming || L || P ? f.LINEAR : f.NEAREST, f.CLAMP_TO_EDGE), f.uniform2fv(x.uniforms.u_texsize, M.iconAtlasTexture.size);
                                }
                                f.uniformMatrix4fv(x.uniforms.u_matrix, !1, t.translatePosMatrix(S.posMatrix, M, n, a));
                                var E = pixelsToTileUnits(M, 1, t.transform.zoom), C = symbolProjection.getLabelPlaneMatrix(S.posMatrix, p, y, t.transform, E), A = symbolProjection.getGlCoordMatrix(S.posMatrix, p, y, t.transform, E);
                                f.uniformMatrix4fv(x.uniforms.u_gl_coord_matrix, !1, t.translatePosMatrix(A, M, n, a, !0)), _ ? (f.uniformMatrix4fv(x.uniforms.u_label_plane_matrix, !1, identityMat4), symbolProjection.updateLineLabels(z, S.posMatrix, t, r, C, A, p, l)) : f.uniformMatrix4fv(x.uniforms.u_label_plane_matrix, !1, C), f.uniform1f(x.uniforms.u_fade_change, t.options.fadeDuration ? t.symbolFadeChange : 1), drawTileSymbols(x, v, t, o, M, T, r, w, p);
                            }
                        }
                    }
                }
                function setSymbolDrawState(t, e, o, i, r, n, a) {
                    var s = e.context.gl, u = e.transform;
                    s.uniform1i(t.uniforms.u_pitch_with_map, n ? 1 : 0), s.uniform1f(t.uniforms.u_is_text, i ? 1 : 0), s.uniform1f(t.uniforms.u_pitch, u.pitch / 360 * 2 * Math.PI);
                    var l = 'constant' === a.functionType || 'source' === a.functionType, m = 'constant' === a.functionType || 'camera' === a.functionType;
                    s.uniform1i(t.uniforms.u_is_size_zoom_constant, l ? 1 : 0), s.uniform1i(t.uniforms.u_is_size_feature_constant, m ? 1 : 0), s.uniform1f(t.uniforms.u_camera_to_center_distance, u.cameraToCenterDistance);
                    var f = symbolSize.evaluateSizeForZoom(a, u.zoom, symbolLayoutProperties.properties[i ? 'text-size' : 'icon-size']);
                    void 0 !== f.uSizeT && s.uniform1f(t.uniforms.u_size_t, f.uSizeT), void 0 !== f.uSize && s.uniform1f(t.uniforms.u_size, f.uSize), s.uniform1f(t.uniforms.u_aspect_ratio, u.width / u.height), s.uniform1i(t.uniforms.u_rotate_symbol, r ? 1 : 0);
                }
                function drawTileSymbols(t, e, o, i, r, n, a, s, u) {
                    var l = o.context, m = l.gl, f = o.transform;
                    if (s) {
                        var c = 0 !== i.paint.get(a ? 'text-halo-width' : 'icon-halo-width').constantOr(1), y = u ? Math.cos(f._pitch) * f.cameraToCenterDistance : 1;
                        m.uniform1f(t.uniforms.u_gamma_scale, y), c && (m.uniform1f(t.uniforms.u_is_halo, 1), drawSymbolElements(n, i, l, t)), m.uniform1f(t.uniforms.u_is_halo, 0);
                    }
                    drawSymbolElements(n, i, l, t);
                }
                function drawSymbolElements(t, e, o, i) {
                    i.draw(o, o.gl.TRIANGLES, e.id, t.layoutVertexBuffer, t.indexBuffer, t.segments, t.programConfigurations.get(e.id), t.dynamicLayoutVertexBuffer, t.opacityVertexBuffer);
                }
                var drawCollisionDebug = _dereq_('./draw_collision_debug'), pixelsToTileUnits = _dereq_('../source/pixels_to_tile_units'), symbolProjection = _dereq_('../symbol/projection'), symbolSize = _dereq_('../symbol/symbol_size'), mat4 = _dereq_('@mapbox/gl-matrix').mat4, identityMat4 = mat4.identity(new Float32Array(16)), symbolLayoutProperties = _dereq_('../style/style_layer/symbol_style_layer_properties').layout, StencilMode = _dereq_('../gl/stencil_mode'), DepthMode = _dereq_('../gl/depth_mode');
                module.exports = drawSymbols;
            },
            {
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                '../source/pixels_to_tile_units': 104,
                '../style/style_layer/symbol_style_layer_properties': 209,
                '../symbol/projection': 224,
                '../symbol/symbol_size': 228,
                './draw_collision_debug': 76,
                '@mapbox/gl-matrix': 2
            }
        ],
        85: [
            function (_dereq_, module, exports) {
                'use strict';
                function makeGlyphAtlas(a) {
                    var e = new AlphaImage({
                            width: 0,
                            height: 0
                        }), i = {}, t = new ShelfPack(0, 0, { autoResize: !0 });
                    for (var h in a) {
                        var r = a[h], p = i[h] = {};
                        for (var m in r) {
                            var d = r[+m];
                            if (d && 0 !== d.bitmap.width && 0 !== d.bitmap.height) {
                                var g = t.packOne(d.bitmap.width + 2 * padding, d.bitmap.height + 2 * padding);
                                e.resize({
                                    width: t.w,
                                    height: t.h
                                }), AlphaImage.copy(d.bitmap, e, {
                                    x: 0,
                                    y: 0
                                }, {
                                    x: g.x + padding,
                                    y: g.y + padding
                                }, d.bitmap), p[m] = {
                                    rect: g,
                                    metrics: d.metrics
                                };
                            }
                        }
                    }
                    return t.shrink(), e.resize({
                        width: t.w,
                        height: t.h
                    }), {
                        image: e,
                        positions: i
                    };
                }
                var ShelfPack = _dereq_('@mapbox/shelf-pack'), ref = _dereq_('../util/image'), AlphaImage = ref.AlphaImage, padding = 1;
                module.exports = { makeGlyphAtlas: makeGlyphAtlas };
            },
            {
                '../util/image': 263,
                '@mapbox/shelf-pack': 5
            }
        ],
        86: [
            function (_dereq_, module, exports) {
                'use strict';
                var loadGlyphRange = _dereq_('../style/load_glyph_range'), TinySDF = _dereq_('@mapbox/tiny-sdf'), isChar = _dereq_('../util/is_char_in_unicode_block'), ref = _dereq_('../util/util'), asyncAll = ref.asyncAll, ref$1 = _dereq_('../util/image'), AlphaImage = ref$1.AlphaImage, GlyphManager = function (e, r) {
                        this.requestTransform = e, this.localIdeographFontFamily = r, this.entries = {};
                    };
                GlyphManager.prototype.setURL = function (e) {
                    this.url = e;
                }, GlyphManager.prototype.getGlyphs = function (e, r) {
                    var i = this, t = [];
                    for (var a in e) {
                        for (var l = 0, n = e[a]; l < n.length; l += 1) {
                            var s = n[l];
                            t.push({
                                stack: a,
                                id: s
                            });
                        }
                    }
                    asyncAll(t, function (e, r) {
                        var t = e.stack, a = e.id, l = i.entries[t];
                        l || (l = i.entries[t] = {
                            glyphs: {},
                            requests: {}
                        });
                        var n = l.glyphs[a];
                        if (void 0 !== n) {
                            return void r(null, {
                                stack: t,
                                id: a,
                                glyph: n
                            });
                        }
                        if (n = i._tinySDF(l, t, a)) {
                            return void r(null, {
                                stack: t,
                                id: a,
                                glyph: n
                            });
                        }
                        var s = Math.floor(a / 256);
                        if (256 * s > 65535) {
                            return void r(new Error('glyphs > 65535 not supported'));
                        }
                        var o = l.requests[s];
                        o || (o = l.requests[s] = [], loadGlyphRange(t, s, i.url, i.requestTransform, function (e, r) {
                            if (r) {
                                for (var i in r) {
                                    l.glyphs[+i] = r[+i];
                                }
                            }
                            for (var t = 0, a = o; t < a.length; t += 1) {
                                (0, a[t])(e, r);
                            }
                            delete l.requests[s];
                        })), o.push(function (e, i) {
                            e ? r(e) : i && r(null, {
                                stack: t,
                                id: a,
                                glyph: i[a] || null
                            });
                        });
                    }, function (e, i) {
                        if (e) {
                            r(e);
                        } else if (i) {
                            for (var t = {}, a = 0, l = i; a < l.length; a += 1) {
                                var n = l[a], s = n.stack, o = n.id, h = n.glyph;
                                (t[s] || (t[s] = {}))[o] = h && {
                                    id: h.id,
                                    bitmap: h.bitmap.clone(),
                                    metrics: h.metrics
                                };
                            }
                            r(null, t);
                        }
                    });
                }, GlyphManager.prototype._tinySDF = function (e, r, i) {
                    var t = this.localIdeographFontFamily;
                    if (t && (isChar['CJK Unified Ideographs'](i) || isChar['Hangul Syllables'](i))) {
                        var a = e.tinySDF;
                        if (!a) {
                            var l = '400';
                            /bold/i.test(r) ? l = '900' : /medium/i.test(r) ? l = '500' : /light/i.test(r) && (l = '200'), a = e.tinySDF = new TinySDF(24, 3, 8, 0.25, t, l);
                        }
                        return {
                            id: i,
                            bitmap: new AlphaImage({
                                width: 30,
                                height: 30
                            }, a.draw(String.fromCharCode(i))),
                            metrics: {
                                width: 24,
                                height: 24,
                                left: 0,
                                top: -8,
                                advance: 24
                            }
                        };
                    }
                }, module.exports = GlyphManager;
            },
            {
                '../style/load_glyph_range': 184,
                '../util/image': 263,
                '../util/is_char_in_unicode_block': 265,
                '../util/util': 275,
                '@mapbox/tiny-sdf': 6
            }
        ],
        87: [
            function (_dereq_, module, exports) {
                'use strict';
                function imagePosition(a, i) {
                    var e = i.pixelRatio, t = {
                            x: a.x + padding,
                            y: a.y + padding,
                            w: a.w - 2 * padding,
                            h: a.h - 2 * padding
                        };
                    return {
                        pixelRatio: e,
                        textureRect: t,
                        tl: [
                            t.x,
                            t.y
                        ],
                        br: [
                            t.x + t.w,
                            t.y + t.h
                        ],
                        displaySize: [
                            t.w / e,
                            t.h / e
                        ]
                    };
                }
                function makeImageAtlas(a) {
                    var i = new RGBAImage({
                            width: 0,
                            height: 0
                        }), e = {}, t = new ShelfPack(0, 0, { autoResize: !0 });
                    for (var d in a) {
                        var g = a[d], n = t.packOne(g.data.width + 2 * padding, g.data.height + 2 * padding);
                        i.resize({
                            width: t.w,
                            height: t.h
                        }), RGBAImage.copy(g.data, i, {
                            x: 0,
                            y: 0
                        }, {
                            x: n.x + padding,
                            y: n.y + padding
                        }, g.data), e[d] = imagePosition(n, g);
                    }
                    return t.shrink(), i.resize({
                        width: t.w,
                        height: t.h
                    }), {
                        image: i,
                        positions: e
                    };
                }
                var ShelfPack = _dereq_('@mapbox/shelf-pack'), ref = _dereq_('../util/image'), RGBAImage = ref.RGBAImage, padding = 1;
                module.exports = {
                    imagePosition: imagePosition,
                    makeImageAtlas: makeImageAtlas
                };
            },
            {
                '../util/image': 263,
                '@mapbox/shelf-pack': 5
            }
        ],
        88: [
            function (_dereq_, module, exports) {
                'use strict';
                var ShelfPack = _dereq_('@mapbox/shelf-pack'), ref = _dereq_('../util/image'), RGBAImage = ref.RGBAImage, ref$1 = _dereq_('./image_atlas'), imagePosition = ref$1.imagePosition, Texture = _dereq_('./texture'), padding = 1, ImageManager = function () {
                        this.images = {}, this.loaded = !1, this.requestors = [], this.shelfPack = new ShelfPack(64, 64, { autoResize: !0 }), this.patterns = {}, this.atlasImage = new RGBAImage({
                            width: 64,
                            height: 64
                        }), this.dirty = !0;
                    };
                ImageManager.prototype.isLoaded = function () {
                    return this.loaded;
                }, ImageManager.prototype.setLoaded = function (e) {
                    var t = this;
                    if (this.loaded !== e && (this.loaded = e, e)) {
                        for (var a = 0, i = t.requestors; a < i.length; a += 1) {
                            var r = i[a], s = r.ids, h = r.callback;
                            t._notify(s, h);
                        }
                        this.requestors = [];
                    }
                }, ImageManager.prototype.getImage = function (e) {
                    return this.images[e];
                }, ImageManager.prototype.addImage = function (e, t) {
                    this.images[e] = t;
                }, ImageManager.prototype.removeImage = function (e) {
                    delete this.images[e];
                    var t = this.patterns[e];
                    t && (this.shelfPack.unref(t.bin), delete this.patterns[e]);
                }, ImageManager.prototype.getImages = function (e, t) {
                    var a = this, i = !0;
                    if (!this.isLoaded()) {
                        for (var r = 0, s = e; r < s.length; r += 1) {
                            var h = s[r];
                            a.images[h] || (i = !1);
                        }
                    }
                    this.isLoaded() || i ? this._notify(e, t) : this.requestors.push({
                        ids: e,
                        callback: t
                    });
                }, ImageManager.prototype._notify = function (e, t) {
                    for (var a = this, i = {}, r = 0, s = e; r < s.length; r += 1) {
                        var h = s[r], g = a.images[h];
                        g && (i[h] = {
                            data: g.data.clone(),
                            pixelRatio: g.pixelRatio,
                            sdf: g.sdf
                        });
                    }
                    t(null, i);
                }, ImageManager.prototype.getPixelSize = function () {
                    return {
                        width: this.shelfPack.w,
                        height: this.shelfPack.h
                    };
                }, ImageManager.prototype.getPattern = function (e) {
                    var t = this.patterns[e];
                    if (t) {
                        return t.position;
                    }
                    var a = this.getImage(e);
                    if (!a) {
                        return null;
                    }
                    var i = a.data.width + 2 * padding, r = a.data.height + 2 * padding, s = this.shelfPack.packOne(i, r);
                    if (!s) {
                        return null;
                    }
                    this.atlasImage.resize(this.getPixelSize());
                    var h = a.data, g = this.atlasImage, n = s.x + padding, o = s.y + padding, d = h.width, l = h.height;
                    RGBAImage.copy(h, g, {
                        x: 0,
                        y: 0
                    }, {
                        x: n,
                        y: o
                    }, {
                        width: d,
                        height: l
                    }), RGBAImage.copy(h, g, {
                        x: 0,
                        y: l - 1
                    }, {
                        x: n,
                        y: o - 1
                    }, {
                        width: d,
                        height: 1
                    }), RGBAImage.copy(h, g, {
                        x: 0,
                        y: 0
                    }, {
                        x: n,
                        y: o + l
                    }, {
                        width: d,
                        height: 1
                    }), RGBAImage.copy(h, g, {
                        x: d - 1,
                        y: 0
                    }, {
                        x: n - 1,
                        y: o
                    }, {
                        width: 1,
                        height: l
                    }), RGBAImage.copy(h, g, {
                        x: 0,
                        y: 0
                    }, {
                        x: n + d,
                        y: o
                    }, {
                        width: 1,
                        height: l
                    }), this.dirty = !0;
                    var p = imagePosition(s, a);
                    return this.patterns[e] = {
                        bin: s,
                        position: p
                    }, p;
                }, ImageManager.prototype.bind = function (e) {
                    var t = e.gl;
                    this.atlasTexture ? this.dirty && (this.atlasTexture.update(this.atlasImage), this.dirty = !1) : this.atlasTexture = new Texture(e, this.atlasImage, t.RGBA), this.atlasTexture.bind(t.LINEAR, t.CLAMP_TO_EDGE);
                }, module.exports = ImageManager;
            },
            {
                '../util/image': 263,
                './image_atlas': 87,
                './texture': 93,
                '@mapbox/shelf-pack': 5
            }
        ],
        89: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util'), LineAtlas = function (t, i) {
                        this.width = t, this.height = i, this.nextRow = 0, this.bytes = 4, this.data = new Uint8Array(this.width * this.height * this.bytes), this.positions = {};
                    };
                LineAtlas.prototype.getDash = function (t, i) {
                    var e = t.join(',') + String(i);
                    return this.positions[e] || (this.positions[e] = this.addDash(t, i)), this.positions[e];
                }, LineAtlas.prototype.addDash = function (t, i) {
                    var e = this, h = i ? 7 : 0, s = 2 * h + 1;
                    if (this.nextRow + s > this.height) {
                        return util.warnOnce('LineAtlas out of space'), null;
                    }
                    for (var a = 0, r = 0; r < t.length; r++) {
                        a += t[r];
                    }
                    for (var n = this.width / a, E = n / 2, T = t.length % 2 == 1, o = -h; o <= h; o++) {
                        for (var R = e.nextRow + h + o, d = e.width * R, u = T ? -t[t.length - 1] : 0, l = t[0], x = 1, _ = 0; _ < this.width; _++) {
                            for (; l < _ / n;) {
                                u = l, l += t[x], T && x === t.length - 1 && (l += t[0]), x++;
                            }
                            var g = Math.abs(_ - u * n), A = Math.abs(_ - l * n), w = Math.min(g, A), D = x % 2 == 1, U = void 0;
                            if (i) {
                                var f = h ? o / h * (E + 1) : 0;
                                if (D) {
                                    var p = E - Math.abs(f);
                                    U = Math.sqrt(w * w + p * p);
                                } else {
                                    U = E - Math.sqrt(w * w + f * f);
                                }
                            } else {
                                U = (D ? 1 : -1) * w;
                            }
                            e.data[3 + 4 * (d + _)] = Math.max(0, Math.min(255, U + 128));
                        }
                    }
                    var v = {
                        y: (this.nextRow + h + 0.5) / this.height,
                        height: 2 * h / this.height,
                        width: a
                    };
                    return this.nextRow += s, this.dirty = !0, v;
                }, LineAtlas.prototype.bind = function (t) {
                    var i = t.gl;
                    this.texture ? (i.bindTexture(i.TEXTURE_2D, this.texture), this.dirty && (this.dirty = !1, i.texSubImage2D(i.TEXTURE_2D, 0, 0, 0, this.width, this.height, i.RGBA, i.UNSIGNED_BYTE, this.data))) : (this.texture = i.createTexture(), i.bindTexture(i.TEXTURE_2D, this.texture), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.REPEAT), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.REPEAT), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, i.LINEAR), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, i.LINEAR), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, this.width, this.height, 0, i.RGBA, i.UNSIGNED_BYTE, this.data));
                }, module.exports = LineAtlas;
            },
            { '../util/util': 275 }
        ],
        90: [
            function (_dereq_, module, exports) {
                'use strict';
                var browser = _dereq_('../util/browser'), mat4 = _dereq_('@mapbox/gl-matrix').mat4, SourceCache = _dereq_('../source/source_cache'), EXTENT = _dereq_('../data/extent'), pixelsToTileUnits = _dereq_('../source/pixels_to_tile_units'), util = _dereq_('../util/util'), VertexArrayObject = _dereq_('./vertex_array_object'), ref = _dereq_('../data/array_types'), RasterBoundsArray = ref.RasterBoundsArray, PosArray = ref.PosArray, rasterBoundsAttributes = _dereq_('../data/raster_bounds_attributes'), posAttributes = _dereq_('../data/pos_attributes'), ref$1 = _dereq_('../data/program_configuration'), ProgramConfiguration = ref$1.ProgramConfiguration, CrossTileSymbolIndex = _dereq_('../symbol/cross_tile_symbol_index'), shaders = _dereq_('../shaders'), Program = _dereq_('./program'), Context = _dereq_('../gl/context'), DepthMode = _dereq_('../gl/depth_mode'), StencilMode = _dereq_('../gl/stencil_mode'), ColorMode = _dereq_('../gl/color_mode'), Texture = _dereq_('./texture'), updateTileMasks = _dereq_('./tile_mask'), Color = _dereq_('../style-spec/util/color'), draw = {
                        symbol: _dereq_('./draw_symbol'),
                        circle: _dereq_('./draw_circle'),
                        heatmap: _dereq_('./draw_heatmap'),
                        line: _dereq_('./draw_line'),
                        fill: _dereq_('./draw_fill'),
                        'fill-extrusion': _dereq_('./draw_fill_extrusion'),
                        hillshade: _dereq_('./draw_hillshade'),
                        raster: _dereq_('./draw_raster'),
                        background: _dereq_('./draw_background'),
                        debug: _dereq_('./draw_debug')
                    }, Painter = function (e, r) {
                        this.context = new Context(e), this.transform = r, this._tileTextures = {}, this.setup(), this.numSublayers = SourceCache.maxUnderzooming + SourceCache.maxOverzooming + 1, this.depthEpsilon = 1 / Math.pow(2, 16), this.depthRboNeedsClear = !0, this.emptyProgramConfiguration = new ProgramConfiguration(), this.crossTileSymbolIndex = new CrossTileSymbolIndex();
                    };
                Painter.prototype.resize = function (e, r) {
                    var t = this, i = this.context.gl;
                    if (this.width = e * browser.devicePixelRatio, this.height = r * browser.devicePixelRatio, this.context.viewport.set([
                            0,
                            0,
                            this.width,
                            this.height
                        ]), this.style) {
                        for (var s = 0, a = t.style._order; s < a.length; s += 1) {
                            var o = a[s];
                            t.style._layers[o].resize();
                        }
                    }
                    this.depthRbo && (i.deleteRenderbuffer(this.depthRbo), this.depthRbo = null);
                }, Painter.prototype.setup = function () {
                    var e = this.context, r = new PosArray();
                    r.emplaceBack(0, 0), r.emplaceBack(EXTENT, 0), r.emplaceBack(0, EXTENT), r.emplaceBack(EXTENT, EXTENT), this.tileExtentBuffer = e.createVertexBuffer(r, posAttributes.members), this.tileExtentVAO = new VertexArrayObject(), this.tileExtentPatternVAO = new VertexArrayObject();
                    var t = new PosArray();
                    t.emplaceBack(0, 0), t.emplaceBack(EXTENT, 0), t.emplaceBack(EXTENT, EXTENT), t.emplaceBack(0, EXTENT), t.emplaceBack(0, 0), this.debugBuffer = e.createVertexBuffer(t, posAttributes.members), this.debugVAO = new VertexArrayObject();
                    var i = new RasterBoundsArray();
                    i.emplaceBack(0, 0, 0, 0), i.emplaceBack(EXTENT, 0, EXTENT, 0), i.emplaceBack(0, EXTENT, 0, EXTENT), i.emplaceBack(EXTENT, EXTENT, EXTENT, EXTENT), this.rasterBoundsBuffer = e.createVertexBuffer(i, rasterBoundsAttributes.members), this.rasterBoundsVAO = new VertexArrayObject();
                    var s = new PosArray();
                    s.emplaceBack(0, 0), s.emplaceBack(1, 0), s.emplaceBack(0, 1), s.emplaceBack(1, 1), this.viewportBuffer = e.createVertexBuffer(s, posAttributes.members), this.viewportVAO = new VertexArrayObject();
                }, Painter.prototype.clearStencil = function () {
                    var e = this.context, r = e.gl;
                    e.setColorMode(ColorMode.disabled), e.setDepthMode(DepthMode.disabled), e.setStencilMode(new StencilMode({
                        func: r.ALWAYS,
                        mask: 0
                    }, 0, 255, r.ZERO, r.ZERO, r.ZERO));
                    var t = mat4.create();
                    mat4.ortho(t, 0, this.width, this.height, 0, 0, 1), mat4.scale(t, t, [
                        r.drawingBufferWidth,
                        r.drawingBufferHeight,
                        0
                    ]);
                    var i = this.useProgram('clippingMask');
                    r.uniformMatrix4fv(i.uniforms.u_matrix, !1, t), this.viewportVAO.bind(e, i, this.viewportBuffer, []), r.drawArrays(r.TRIANGLE_STRIP, 0, 4);
                }, Painter.prototype._renderTileClippingMasks = function (e) {
                    var r = this, t = this.context, i = t.gl;
                    t.setColorMode(ColorMode.disabled), t.setDepthMode(DepthMode.disabled);
                    var s = 1;
                    this._tileClippingMaskIDs = {};
                    for (var a = 0, o = e; a < o.length; a += 1) {
                        var n = o[a], l = r._tileClippingMaskIDs[n.key] = s++;
                        t.setStencilMode(new StencilMode({
                            func: i.ALWAYS,
                            mask: 0
                        }, l, 255, i.KEEP, i.KEEP, i.REPLACE));
                        var c = r.useProgram('clippingMask');
                        i.uniformMatrix4fv(c.uniforms.u_matrix, !1, n.posMatrix), r.tileExtentVAO.bind(r.context, c, r.tileExtentBuffer, []), i.drawArrays(i.TRIANGLE_STRIP, 0, r.tileExtentBuffer.length);
                    }
                }, Painter.prototype.stencilModeForClipping = function (e) {
                    var r = this.context.gl;
                    return new StencilMode({
                        func: r.EQUAL,
                        mask: 255
                    }, this._tileClippingMaskIDs[e.key], 0, r.KEEP, r.KEEP, r.REPLACE);
                }, Painter.prototype.colorModeForRenderPass = function () {
                    var e = this.context.gl;
                    if (this._showOverdrawInspector) {
                        return new ColorMode([
                            e.CONSTANT_COLOR,
                            e.ONE
                        ], new Color(1 / 8, 1 / 8, 1 / 8, 0), [
                            !0,
                            !0,
                            !0,
                            !0
                        ]);
                    }
                    return 'opaque' === this.renderPass ? ColorMode.unblended : ColorMode.alphaBlended;
                }, Painter.prototype.depthModeForSublayer = function (e, r, t) {
                    var i = 1 - ((1 + this.currentLayer) * this.numSublayers + e) * this.depthEpsilon, s = i - 1 + this.depthRange;
                    return new DepthMode(t || this.context.gl.LEQUAL, r, [
                        s,
                        i
                    ]);
                }, Painter.prototype.render = function (e, r) {
                    var t = this;
                    this.style = e, this.options = r, this.lineAtlas = e.lineAtlas, this.imageManager = e.imageManager, this.glyphManager = e.glyphManager, this.symbolFadeChange = e.placement.symbolFadeChange(browser.now());
                    for (var i in e.sourceCaches) {
                        var s = t.style.sourceCaches[i];
                        s.used && s.prepare(t.context);
                    }
                    var a = this.style._order, o = util.filterObject(this.style.sourceCaches, function (e) {
                            return 'raster' === e.getSource().type || 'raster-dem' === e.getSource().type;
                        });
                    for (var n in o) {
                        !function (e) {
                            var r = o[e], i = r.getVisibleCoordinates(), s = i.map(function (e) {
                                    return r.getTile(e);
                                });
                            updateTileMasks(s, t.context);
                        }(n);
                    }
                    this.renderPass = 'offscreen';
                    var l, c = [];
                    this.depthRboNeedsClear = !0;
                    for (var h = 0; h < a.length; h++) {
                        var u = t.style._layers[a[h]];
                        u.hasOffscreenPass() && !u.isHidden(t.transform.zoom) && (u.source !== (l && l.id) && (l = t.style.sourceCaches[u.source], c = [], l && (c = l.getVisibleCoordinates(), c.reverse())), c.length && t.renderLayer(t, l, u, c));
                    }
                    this.context.bindFramebuffer.set(null), this.context.clear({
                        color: r.showOverdrawInspector ? Color.black : Color.transparent,
                        depth: 1
                    }), this._showOverdrawInspector = r.showOverdrawInspector, this.depthRange = (e._order.length + 2) * this.numSublayers * this.depthEpsilon, this.renderPass = 'opaque';
                    var d, p = [];
                    for (this.currentLayer = a.length - 1, this.currentLayer; this.currentLayer >= 0; this.currentLayer--) {
                        var f = t.style._layers[a[t.currentLayer]];
                        f.source !== (d && d.id) && (d = t.style.sourceCaches[f.source], p = [], d && (t.clearStencil(), p = d.getVisibleCoordinates(), d.getSource().isTileClipped && t._renderTileClippingMasks(p))), t.renderLayer(t, d, f, p);
                    }
                    this.renderPass = 'translucent';
                    var m, g = [];
                    for (this.currentLayer = 0, this.currentLayer; this.currentLayer < a.length; this.currentLayer++) {
                        var y = t.style._layers[a[t.currentLayer]];
                        y.source !== (m && m.id) && (m = t.style.sourceCaches[y.source], g = [], m && (t.clearStencil(), g = m.getVisibleCoordinates(), m.getSource().isTileClipped && t._renderTileClippingMasks(g)), g.reverse()), t.renderLayer(t, m, y, g);
                    }
                    if (this.options.showTileBoundaries) {
                        var b = this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];
                        b && draw.debug(this, b, b.getVisibleCoordinates());
                    }
                }, Painter.prototype.setupOffscreenDepthRenderbuffer = function () {
                    var e = this.context;
                    this.depthRbo || (this.depthRbo = e.createRenderbuffer(e.gl.DEPTH_COMPONENT16, this.width, this.height));
                }, Painter.prototype.renderLayer = function (e, r, t, i) {
                    t.isHidden(this.transform.zoom) || ('background' === t.type || i.length) && (this.id = t.id, draw[t.type](e, r, t, i));
                }, Painter.prototype.translatePosMatrix = function (e, r, t, i, s) {
                    if (!t[0] && !t[1]) {
                        return e;
                    }
                    var a = s ? 'map' === i ? this.transform.angle : 0 : 'viewport' === i ? -this.transform.angle : 0;
                    if (a) {
                        var o = Math.sin(a), n = Math.cos(a);
                        t = [
                            t[0] * n - t[1] * o,
                            t[0] * o + t[1] * n
                        ];
                    }
                    var l = [
                            s ? t[0] : pixelsToTileUnits(r, t[0], this.transform.zoom),
                            s ? t[1] : pixelsToTileUnits(r, t[1], this.transform.zoom),
                            0
                        ], c = new Float32Array(16);
                    return mat4.translate(c, e, l), c;
                }, Painter.prototype.saveTileTexture = function (e) {
                    var r = this._tileTextures[e.size[0]];
                    r ? r.push(e) : this._tileTextures[e.size[0]] = [e];
                }, Painter.prototype.getTileTexture = function (e) {
                    var r = this._tileTextures[e];
                    return r && r.length > 0 ? r.pop() : null;
                }, Painter.prototype._createProgramCached = function (e, r) {
                    this.cache = this.cache || {};
                    var t = '' + e + (r.cacheKey || '') + (this._showOverdrawInspector ? '/overdraw' : '');
                    return this.cache[t] || (this.cache[t] = new Program(this.context, shaders[e], r, this._showOverdrawInspector)), this.cache[t];
                }, Painter.prototype.useProgram = function (e, r) {
                    var t = this._createProgramCached(e, r || this.emptyProgramConfiguration);
                    return this.context.program.set(t.program), t;
                }, module.exports = Painter;
            },
            {
                '../data/array_types': 39,
                '../data/extent': 53,
                '../data/pos_attributes': 57,
                '../data/program_configuration': 58,
                '../data/raster_bounds_attributes': 59,
                '../gl/color_mode': 65,
                '../gl/context': 66,
                '../gl/depth_mode': 67,
                '../gl/stencil_mode': 70,
                '../shaders': 97,
                '../source/pixels_to_tile_units': 104,
                '../source/source_cache': 111,
                '../style-spec/util/color': 153,
                '../symbol/cross_tile_symbol_index': 218,
                '../util/browser': 252,
                '../util/util': 275,
                './draw_background': 74,
                './draw_circle': 75,
                './draw_debug': 77,
                './draw_fill': 78,
                './draw_fill_extrusion': 79,
                './draw_heatmap': 80,
                './draw_hillshade': 81,
                './draw_line': 82,
                './draw_raster': 83,
                './draw_symbol': 84,
                './program': 92,
                './texture': 93,
                './tile_mask': 94,
                './vertex_array_object': 95,
                '@mapbox/gl-matrix': 2
            }
        ],
        91: [
            function (_dereq_, module, exports) {
                'use strict';
                var pixelsToTileUnits = _dereq_('../source/pixels_to_tile_units');
                exports.isPatternMissing = function (e, i) {
                    if (!e) {
                        return !1;
                    }
                    var r = i.imageManager.getPattern(e.from), t = i.imageManager.getPattern(e.to);
                    return !r || !t;
                }, exports.prepare = function (e, i, r) {
                    var t = i.context, n = t.gl, o = i.imageManager.getPattern(e.from), a = i.imageManager.getPattern(e.to);
                    n.uniform1i(r.uniforms.u_image, 0), n.uniform2fv(r.uniforms.u_pattern_tl_a, o.tl), n.uniform2fv(r.uniforms.u_pattern_br_a, o.br), n.uniform2fv(r.uniforms.u_pattern_tl_b, a.tl), n.uniform2fv(r.uniforms.u_pattern_br_b, a.br);
                    var u = i.imageManager.getPixelSize(), f = u.width, m = u.height;
                    n.uniform2fv(r.uniforms.u_texsize, [
                        f,
                        m
                    ]), n.uniform1f(r.uniforms.u_mix, e.t), n.uniform2fv(r.uniforms.u_pattern_size_a, o.displaySize), n.uniform2fv(r.uniforms.u_pattern_size_b, a.displaySize), n.uniform1f(r.uniforms.u_scale_a, e.fromScale), n.uniform1f(r.uniforms.u_scale_b, e.toScale), t.activeTexture.set(n.TEXTURE0), i.imageManager.bind(i.context);
                }, exports.setTile = function (e, i, r) {
                    var t = i.context.gl;
                    t.uniform1f(r.uniforms.u_tile_units_to_pixels, 1 / pixelsToTileUnits(e, 1, i.transform.tileZoom));
                    var n = Math.pow(2, e.tileID.overscaledZ), o = e.tileSize * Math.pow(2, i.transform.tileZoom) / n, a = o * (e.tileID.canonical.x + e.tileID.wrap * n), u = o * e.tileID.canonical.y;
                    t.uniform2f(r.uniforms.u_pixel_coord_upper, a >> 16, u >> 16), t.uniform2f(r.uniforms.u_pixel_coord_lower, 65535 & a, 65535 & u);
                };
            },
            { '../source/pixels_to_tile_units': 104 }
        ],
        92: [
            function (_dereq_, module, exports) {
                'use strict';
                var browser = _dereq_('../util/browser'), shaders = _dereq_('../shaders'), ref = _dereq_('../data/program_configuration'), ProgramConfiguration = ref.ProgramConfiguration, VertexArrayObject = _dereq_('./vertex_array_object'), Context = _dereq_('../gl/context'), Program = function (r, e, t, a) {
                        var o = this, i = r.gl;
                        this.program = i.createProgram();
                        var n = t.defines().concat('#define DEVICE_PIXEL_RATIO ' + browser.devicePixelRatio.toFixed(1));
                        a && n.push('#define OVERDRAW_INSPECTOR;');
                        var s = n.concat(shaders.prelude.fragmentSource, e.fragmentSource).join('\n'), m = n.concat(shaders.prelude.vertexSource, e.vertexSource).join('\n'), g = i.createShader(i.FRAGMENT_SHADER);
                        i.shaderSource(g, s), i.compileShader(g), i.attachShader(this.program, g);
                        var c = i.createShader(i.VERTEX_SHADER);
                        i.shaderSource(c, m), i.compileShader(c), i.attachShader(this.program, c);
                        for (var u = t.layoutAttributes || [], h = 0; h < u.length; h++) {
                            i.bindAttribLocation(o.program, h, u[h].name);
                        }
                        i.linkProgram(this.program), this.numAttributes = i.getProgramParameter(this.program, i.ACTIVE_ATTRIBUTES), this.attributes = {}, this.uniforms = {};
                        for (var f = 0; f < this.numAttributes; f++) {
                            var d = i.getActiveAttrib(o.program, f);
                            d && (o.attributes[d.name] = i.getAttribLocation(o.program, d.name));
                        }
                        for (var v = i.getProgramParameter(this.program, i.ACTIVE_UNIFORMS), p = 0; p < v; p++) {
                            var S = i.getActiveUniform(o.program, p);
                            S && (o.uniforms[S.name] = i.getUniformLocation(o.program, S.name));
                        }
                    };
                Program.prototype.draw = function (r, e, t, a, o, i, n, s, m) {
                    for (var g, c = this, u = r.gl, h = (g = {}, g[u.LINES] = 2, g[u.TRIANGLES] = 3, g)[e], f = 0, d = i.get(); f < d.length; f += 1) {
                        var v = d[f], p = v.vaos || (v.vaos = {});
                        (p[t] || (p[t] = new VertexArrayObject())).bind(r, c, a, n ? n.getPaintVertexBuffers() : [], o, v.vertexOffset, s, m), u.drawElements(e, v.primitiveLength * h, u.UNSIGNED_SHORT, v.primitiveOffset * h * 2);
                    }
                }, module.exports = Program;
            },
            {
                '../data/program_configuration': 58,
                '../gl/context': 66,
                '../shaders': 97,
                '../util/browser': 252,
                './vertex_array_object': 95
            }
        ],
        93: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../util/window'), HTMLImageElement = ref.HTMLImageElement, HTMLCanvasElement = ref.HTMLCanvasElement, HTMLVideoElement = ref.HTMLVideoElement, ImageData = ref.ImageData, Texture = function (e, t, i, r) {
                        this.context = e;
                        var a = t.width, T = t.height;
                        this.size = [
                            a,
                            T
                        ], this.format = i, this.texture = e.gl.createTexture(), this.update(t, r);
                    };
                Texture.prototype.update = function (e, t) {
                    var i = e.width, r = e.height;
                    this.size = [
                        i,
                        r
                    ];
                    var a = this, T = a.context, n = T.gl;
                    n.bindTexture(n.TEXTURE_2D, this.texture), T.pixelStoreUnpack.set(1), this.format === n.RGBA && !1 !== t && T.pixelStoreUnpackPremultiplyAlpha.set(!0), e instanceof HTMLImageElement || e instanceof HTMLCanvasElement || e instanceof HTMLVideoElement || e instanceof ImageData ? n.texImage2D(n.TEXTURE_2D, 0, this.format, this.format, n.UNSIGNED_BYTE, e) : n.texImage2D(n.TEXTURE_2D, 0, this.format, i, r, 0, this.format, n.UNSIGNED_BYTE, e.data);
                }, Texture.prototype.bind = function (e, t, i) {
                    var r = this, a = r.context, T = a.gl;
                    T.bindTexture(T.TEXTURE_2D, this.texture), e !== this.filter && (T.texParameteri(T.TEXTURE_2D, T.TEXTURE_MAG_FILTER, e), T.texParameteri(T.TEXTURE_2D, T.TEXTURE_MIN_FILTER, i || e), this.filter = e), t !== this.wrap && (T.texParameteri(T.TEXTURE_2D, T.TEXTURE_WRAP_S, t), T.texParameteri(T.TEXTURE_2D, T.TEXTURE_WRAP_T, t), this.wrap = t);
                }, Texture.prototype.destroy = function () {
                    this.context.gl.deleteTexture(this.texture), this.texture = null;
                }, module.exports = Texture;
            },
            { '../util/window': 254 }
        ],
        94: [
            function (_dereq_, module, exports) {
                'use strict';
                function computeTileMasks(e, i, l, a, r) {
                    for (var n = 0; n < l.length; n++) {
                        var s = l[n];
                        if (a.isLessThan(s.tileID)) {
                            break;
                        }
                        if (i.key === s.tileID.key) {
                            return;
                        }
                        if (s.tileID.isChildOf(i)) {
                            for (var t = i.children(1 / 0), c = 0; c < t.length; c++) {
                                computeTileMasks(e, t[c], l.slice(n), a, r);
                            }
                            return;
                        }
                    }
                    var o = i.overscaledZ - e.overscaledZ, D = new CanonicalTileID(o, i.canonical.x - (e.canonical.x << o), i.canonical.y - (e.canonical.y << o));
                    r[D.key] = r[D.key] || D;
                }
                var ref = _dereq_('../source/tile_id'), OverscaledTileID = ref.OverscaledTileID, CanonicalTileID = ref.CanonicalTileID;
                module.exports = function (e, i) {
                    for (var l = e.sort(function (e, i) {
                                return e.tileID.isLessThan(i.tileID) ? -1 : i.tileID.isLessThan(e.tileID) ? 1 : 0;
                            }), a = 0; a < l.length; a++) {
                        var r = {}, n = l[a], s = l.slice(a + 1);
                        computeTileMasks(n.tileID.wrapped(), n.tileID, s, new OverscaledTileID(0, n.tileID.wrap + 1, 0, 0, 0), r), n.setMask(r, i);
                    }
                };
            },
            { '../source/tile_id': 114 }
        ],
        95: [
            function (_dereq_, module, exports) {
                'use strict';
                var VertexArrayObject = function () {
                    this.boundProgram = null, this.boundLayoutVertexBuffer = null, this.boundPaintVertexBuffers = [], this.boundIndexBuffer = null, this.boundVertexOffset = null, this.boundDynamicVertexBuffer = null, this.vao = null;
                };
                VertexArrayObject.prototype.bind = function (t, e, r, i, n, s, u, o) {
                    var b = this;
                    this.context = t;
                    for (var a = this.boundPaintVertexBuffers.length !== i.length, f = 0; !a && f < i.length; f++) {
                        b.boundPaintVertexBuffers[f] !== i[f] && (a = !0);
                    }
                    var x = !this.vao || this.boundProgram !== e || this.boundLayoutVertexBuffer !== r || a || this.boundIndexBuffer !== n || this.boundVertexOffset !== s || this.boundDynamicVertexBuffer !== u || this.boundDynamicVertexBuffer2 !== o;
                    !t.extVertexArrayObject || x ? this.freshBind(e, r, i, n, s, u, o) : (t.bindVertexArrayOES.set(this.vao), u && u.bind(), n && n.dynamicDraw && n.bind(), o && o.bind());
                }, VertexArrayObject.prototype.freshBind = function (t, e, r, i, n, s, u) {
                    var o, b = t.numAttributes, a = this.context, f = a.gl;
                    if (a.extVertexArrayObject) {
                        this.vao && this.destroy(), this.vao = a.extVertexArrayObject.createVertexArrayOES(), a.bindVertexArrayOES.set(this.vao), o = 0, this.boundProgram = t, this.boundLayoutVertexBuffer = e, this.boundPaintVertexBuffers = r, this.boundIndexBuffer = i, this.boundVertexOffset = n, this.boundDynamicVertexBuffer = s, this.boundDynamicVertexBuffer2 = u;
                    } else {
                        o = a.currentNumAttributes || 0;
                        for (var x = b; x < o; x++) {
                            f.disableVertexAttribArray(x);
                        }
                    }
                    e.enableAttributes(f, t);
                    for (var d = 0, h = r; d < h.length; d += 1) {
                        h[d].enableAttributes(f, t);
                    }
                    s && s.enableAttributes(f, t), u && u.enableAttributes(f, t), e.bind(), e.setVertexAttribPointers(f, t, n);
                    for (var V = 0, l = r; V < l.length; V += 1) {
                        var y = l[V];
                        y.bind(), y.setVertexAttribPointers(f, t, n);
                    }
                    s && (s.bind(), s.setVertexAttribPointers(f, t, n)), i && i.bind(), u && (u.bind(), u.setVertexAttribPointers(f, t, n)), a.currentNumAttributes = b;
                }, VertexArrayObject.prototype.destroy = function () {
                    this.vao && (this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao), this.vao = null);
                }, module.exports = VertexArrayObject;
            },
            {}
        ],
        96: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util');
                exports.packUint8ToFloat = function (t, l) {
                    return t = util.clamp(Math.floor(t), 0, 255), l = util.clamp(Math.floor(l), 0, 255), 256 * t + l;
                };
            },
            { '../util/util': 275 }
        ],
        97: [
            function (_dereq_, module, exports) {
                'use strict';
                var shaders = {
                        prelude: {
                            fragmentSource: '#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n',
                            vertexSource: '#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n'
                        },
                        background: {
                            fragmentSource: 'uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n'
                        },
                        backgroundPattern: {
                            fragmentSource: 'uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n'
                        },
                        circle: {
                            fragmentSource: '#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle\'s size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n'
                        },
                        clippingMask: {
                            fragmentSource: 'void main() {\n    gl_FragColor = vec4(1.0);\n}\n',
                            vertexSource: 'attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n'
                        },
                        heatmap: {
                            fragmentSource: '#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: '#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective "0" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This \'extrude\' comes in ranging from [-1, -1], to [1, 1].  We\'ll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we\'re adding to the kernel density texture.  We\'ll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n'
                        },
                        heatmapTexture: {
                            fragmentSource: 'uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n'
                        },
                        collisionBox: {
                            fragmentSource: '\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}',
                            vertexSource: 'attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n'
                        },
                        collisionCircle: {
                            fragmentSource: '\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n',
                            vertexSource: 'attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don\'t pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n'
                        },
                        debug: {
                            fragmentSource: 'uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n',
                            vertexSource: 'attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n'
                        },
                        fill: {
                            fragmentSource: '#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n'
                        },
                        fillOutline: {
                            fragmentSource: '#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n'
                        },
                        fillOutlinePattern: {
                            fragmentSource: 'uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n'
                        },
                        fillPattern: {
                            fragmentSource: 'uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n'
                        },
                        fillExtrusion: {
                            fragmentSource: 'varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n'
                        },
                        fillExtrusionPattern: {
                            fragmentSource: 'uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n'
                        },
                        extrusionTexture: {
                            fragmentSource: 'uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n'
                        },
                        hillshadePrepare: {
                            fragmentSource: '#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - 14) * a) where a is an arbitrary value and 14 is the\n    // maxzoom of the tile source. here we use a=0.3 which works out to the\n    // expression below. see nickidlugash\'s awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - 14.0) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n'
                        },
                        hillshade: {
                            fragmentSource: 'uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel\'s approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light\'s azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color\'s rate of change eases in while the shade color\'s eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n'
                        },
                        line: {
                            fragmentSource: '#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: '\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also "special" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it\'s a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we\'re drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n'
                        },
                        linePattern: {
                            fragmentSource: 'uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: '// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also "special" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it\'s a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we\'re drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n'
                        },
                        lineSDF: {
                            fragmentSource: '\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: '// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also "special" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it\'s a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we\'re drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n'
                        },
                        raster: {
                            fragmentSource: 'uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n'
                        },
                        symbolIcon: {
                            fragmentSource: 'uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n'
                        },
                        symbolSDF: {
                            fragmentSource: '#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n',
                            vertexSource: 'const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn\'t pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with \'rotation-alignment: map\' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n'
                        }
                    }, re = /#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g, loop = function (e) {
                        var n = shaders[e], a = {};
                        n.fragmentSource = n.fragmentSource.replace(re, function (e, n, t, o, i) {
                            return a[i] = !0, 'define' === n ? '\n#ifndef HAS_UNIFORM_u_' + i + '\nvarying ' + t + ' ' + o + ' ' + i + ';\n#else\nuniform ' + t + ' ' + o + ' u_' + i + ';\n#endif\n' : '\n#ifdef HAS_UNIFORM_u_' + i + '\n    ' + t + ' ' + o + ' ' + i + ' = u_' + i + ';\n#endif\n';
                        }), n.vertexSource = n.vertexSource.replace(re, function (e, n, t, o, i) {
                            var r = 'float' === o ? 'vec2' : 'vec4';
                            return a[i] ? 'define' === n ? '\n#ifndef HAS_UNIFORM_u_' + i + '\nuniform lowp float a_' + i + '_t;\nattribute ' + t + ' ' + r + ' a_' + i + ';\nvarying ' + t + ' ' + o + ' ' + i + ';\n#else\nuniform ' + t + ' ' + o + ' u_' + i + ';\n#endif\n' : '\n#ifndef HAS_UNIFORM_u_' + i + '\n    ' + i + ' = unpack_mix_' + r + '(a_' + i + ', a_' + i + '_t);\n#else\n    ' + t + ' ' + o + ' ' + i + ' = u_' + i + ';\n#endif\n' : 'define' === n ? '\n#ifndef HAS_UNIFORM_u_' + i + '\nuniform lowp float a_' + i + '_t;\nattribute ' + t + ' ' + r + ' a_' + i + ';\n#else\nuniform ' + t + ' ' + o + ' u_' + i + ';\n#endif\n' : '\n#ifndef HAS_UNIFORM_u_' + i + '\n    ' + t + ' ' + o + ' ' + i + ' = unpack_mix_' + r + '(a_' + i + ', a_' + i + '_t);\n#else\n    ' + t + ' ' + o + ' ' + i + ' = u_' + i + ';\n#endif\n';
                        });
                    };
                for (var programName in shaders) {
                    loop(programName);
                }
                module.exports = shaders;
            },
            {}
        ],
        98: [
            function (_dereq_, module, exports) {
                'use strict';
                var ImageSource = _dereq_('./image_source'), window = _dereq_('../util/window'), rasterBoundsAttributes = _dereq_('../data/raster_bounds_attributes'), VertexArrayObject = _dereq_('../render/vertex_array_object'), Texture = _dereq_('../render/texture'), CanvasSource = function (t) {
                        function e(e, i, s, a) {
                            t.call(this, e, i, s, a), this.options = i, this.animate = void 0 === i.animate || i.animate;
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.load = function () {
                            if (this.canvas = this.canvas || window.document.getElementById(this.options.canvas), this.width = this.canvas.width, this.height = this.canvas.height, this._hasInvalidDimensions()) {
                                return void this.fire('error', new Error('Canvas dimensions cannot be less than or equal to zero.'));
                            }
                            this.play = function () {
                                this._playing = !0, this.map._rerender();
                            }, this.pause = function () {
                                this._playing = !1;
                            }, this._finishLoading();
                        }, e.prototype.getCanvas = function () {
                            return this.canvas;
                        }, e.prototype.onAdd = function (t) {
                            this.map = t, this.load(), this.canvas && this.animate && this.play();
                        }, e.prototype.onRemove = function () {
                            this.pause();
                        }, e.prototype.prepare = function () {
                            var t = this, e = !1;
                            if (this.canvas.width !== this.width && (this.width = this.canvas.width, e = !0), this.canvas.height !== this.height && (this.height = this.canvas.height, e = !0), !this._hasInvalidDimensions() && 0 !== Object.keys(this.tiles).length) {
                                var i = this.map.painter.context, s = i.gl;
                                this.boundsBuffer || (this.boundsBuffer = i.createVertexBuffer(this._boundsArray, rasterBoundsAttributes.members)), this.boundsVAO || (this.boundsVAO = new VertexArrayObject()), this.texture ? e ? this.texture.update(this.canvas) : this._playing && (this.texture.bind(s.LINEAR, s.CLAMP_TO_EDGE), s.texSubImage2D(s.TEXTURE_2D, 0, 0, 0, s.RGBA, s.UNSIGNED_BYTE, this.canvas)) : (this.texture = new Texture(i, this.canvas, s.RGBA), this.texture.bind(s.LINEAR, s.CLAMP_TO_EDGE));
                                for (var a in t.tiles) {
                                    var r = t.tiles[a];
                                    'loaded' !== r.state && (r.state = 'loaded', r.texture = t.texture);
                                }
                            }
                        }, e.prototype.serialize = function () {
                            return {
                                type: 'canvas',
                                canvas: this.canvas,
                                coordinates: this.coordinates
                            };
                        }, e.prototype.hasTransition = function () {
                            return this._playing;
                        }, e.prototype._hasInvalidDimensions = function () {
                            for (var t = this, e = 0, i = [
                                        t.canvas.width,
                                        t.canvas.height
                                    ]; e < i.length; e += 1) {
                                var s = i[e];
                                if (isNaN(s) || s <= 0) {
                                    return !0;
                                }
                            }
                            return !1;
                        }, e;
                    }(ImageSource);
                module.exports = CanvasSource;
            },
            {
                '../data/raster_bounds_attributes': 59,
                '../render/texture': 93,
                '../render/vertex_array_object': 95,
                '../util/window': 254,
                './image_source': 102
            }
        ],
        99: [
            function (_dereq_, module, exports) {
                'use strict';
                function resolveURL(e) {
                    var t = window.document.createElement('a');
                    return t.href = e, t.href;
                }
                var Evented = _dereq_('../util/evented'), util = _dereq_('../util/util'), window = _dereq_('../util/window'), EXTENT = _dereq_('../data/extent'), ResourceType = _dereq_('../util/ajax').ResourceType, browser = _dereq_('../util/browser'), GeoJSONSource = function (e) {
                        function t(t, i, o, r) {
                            e.call(this), this.id = t, this.type = 'geojson', this.minzoom = 0, this.maxzoom = 18, this.tileSize = 512, this.isTileClipped = !0, this.reparseOverscaled = !0, this.dispatcher = o, this.setEventedParent(r), this._data = i.data, this._options = util.extend({}, i), this._collectResourceTiming = i.collectResourceTiming, this._resourceTiming = [], void 0 !== i.maxzoom && (this.maxzoom = i.maxzoom), i.type && (this.type = i.type);
                            var s = EXTENT / this.tileSize;
                            this.workerOptions = util.extend({
                                source: this.id,
                                cluster: i.cluster || !1,
                                geojsonVtOptions: {
                                    buffer: (void 0 !== i.buffer ? i.buffer : 128) * s,
                                    tolerance: (void 0 !== i.tolerance ? i.tolerance : 0.375) * s,
                                    extent: EXTENT,
                                    maxZoom: this.maxzoom
                                },
                                superclusterOptions: {
                                    maxZoom: void 0 !== i.clusterMaxZoom ? Math.min(i.clusterMaxZoom, this.maxzoom - 1) : this.maxzoom - 1,
                                    extent: EXTENT,
                                    radius: (i.clusterRadius || 50) * s,
                                    log: !1
                                }
                            }, i.workerOptions);
                        }
                        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.load = function () {
                            var e = this;
                            this.fire('dataloading', { dataType: 'source' }), this._updateWorkerData(function (t) {
                                if (t) {
                                    return void e.fire('error', { error: t });
                                }
                                var i = {
                                    dataType: 'source',
                                    sourceDataType: 'metadata'
                                };
                                e._collectResourceTiming && e._resourceTiming && e._resourceTiming.length > 0 && (i.resourceTiming = e._resourceTiming, e._resourceTiming = []), e.fire('data', i);
                            });
                        }, t.prototype.onAdd = function (e) {
                            this.map = e, this.load();
                        }, t.prototype.setData = function (e) {
                            var t = this;
                            return this._data = e, this.fire('dataloading', { dataType: 'source' }), this._updateWorkerData(function (e) {
                                if (e) {
                                    return t.fire('error', { error: e });
                                }
                                var i = {
                                    dataType: 'source',
                                    sourceDataType: 'content'
                                };
                                t._collectResourceTiming && t._resourceTiming && t._resourceTiming.length > 0 && (i.resourceTiming = t._resourceTiming, t._resourceTiming = []), t.fire('data', i);
                            }), this;
                        }, t.prototype._updateWorkerData = function (e) {
                            var t = this, i = util.extend({}, this.workerOptions), o = this._data;
                            'string' == typeof o ? (i.request = this.map._transformRequest(resolveURL(o), ResourceType.Source), i.request.collectResourceTiming = this._collectResourceTiming) : i.data = JSON.stringify(o), this.workerID = this.dispatcher.send(this.type + '.loadData', i, function (i, o) {
                                t._loaded = !0, o && o.resourceTiming && o.resourceTiming[t.id] && (t._resourceTiming = o.resourceTiming[t.id].slice(0)), e(i);
                            }, this.workerID);
                        }, t.prototype.loadTile = function (e, t) {
                            var i = this, o = void 0 === e.workerID || 'expired' === e.state ? 'loadTile' : 'reloadTile', r = {
                                    type: this.type,
                                    uid: e.uid,
                                    tileID: e.tileID,
                                    zoom: e.tileID.overscaledZ,
                                    maxZoom: this.maxzoom,
                                    tileSize: this.tileSize,
                                    source: this.id,
                                    pixelRatio: browser.devicePixelRatio,
                                    overscaling: e.tileID.overscaleFactor(),
                                    showCollisionBoxes: this.map.showCollisionBoxes
                                };
                            e.workerID = this.dispatcher.send(o, r, function (r, s) {
                                return e.unloadVectorData(), e.aborted ? t(null) : r ? t(r) : (e.loadVectorData(s, i.map.painter, 'reloadTile' === o), t(null));
                            }, this.workerID);
                        }, t.prototype.abortTile = function (e) {
                            e.aborted = !0;
                        }, t.prototype.unloadTile = function (e) {
                            e.unloadVectorData(), this.dispatcher.send('removeTile', {
                                uid: e.uid,
                                type: this.type,
                                source: this.id
                            }, null, e.workerID);
                        }, t.prototype.onRemove = function () {
                            this.dispatcher.broadcast('removeSource', {
                                type: this.type,
                                source: this.id
                            });
                        }, t.prototype.serialize = function () {
                            return util.extend({}, this._options, {
                                type: this.type,
                                data: this._data
                            });
                        }, t.prototype.hasTransition = function () {
                            return !1;
                        }, t;
                    }(Evented);
                module.exports = GeoJSONSource;
            },
            {
                '../data/extent': 53,
                '../util/ajax': 251,
                '../util/browser': 252,
                '../util/evented': 260,
                '../util/util': 275,
                '../util/window': 254
            }
        ],
        100: [
            function (_dereq_, module, exports) {
                'use strict';
                function loadGeoJSONTile(e, r) {
                    var t = e.source, o = e.tileID.canonical;
                    if (!this._geoJSONIndexes[t]) {
                        return r(null, null);
                    }
                    var u = this._geoJSONIndexes[t].getTile(o.z, o.x, o.y);
                    if (!u) {
                        return r(null, null);
                    }
                    var n = new GeoJSONWrapper(u.features), i = vtpbf(n);
                    0 === i.byteOffset && i.byteLength === i.buffer.byteLength || (i = new Uint8Array(i)), r(null, {
                        vectorTile: n,
                        rawData: i.buffer
                    });
                }
                var ajax = _dereq_('../util/ajax'), perf = _dereq_('../util/performance'), rewind = _dereq_('geojson-rewind'), GeoJSONWrapper = _dereq_('./geojson_wrapper'), vtpbf = _dereq_('vt-pbf'), supercluster = _dereq_('supercluster'), geojsonvt = _dereq_('geojson-vt'), VectorTileWorkerSource = _dereq_('./vector_tile_worker_source'), GeoJSONWorkerSource = function (e) {
                        function r(r, t, o) {
                            e.call(this, r, t, loadGeoJSONTile), o && (this.loadGeoJSON = o), this._geoJSONIndexes = {};
                        }
                        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.loadData = function (e, r) {
                            var t = this;
                            this.loadGeoJSON(e, function (o, u) {
                                if (o || !u) {
                                    return r(o);
                                }
                                if ('object' != typeof u) {
                                    return r(new Error('Input data is not a valid GeoJSON object.'));
                                }
                                rewind(u, !0);
                                try {
                                    t._geoJSONIndexes[e.source] = e.cluster ? supercluster(e.superclusterOptions).load(u.features) : geojsonvt(u, e.geojsonVtOptions);
                                } catch (o) {
                                    return r(o);
                                }
                                t.loaded[e.source] = {};
                                var n = {};
                                if (e.request && e.request.collectResourceTiming) {
                                    var i = perf.getEntriesByName(e.request.url);
                                    i && (n.resourceTiming = {}, n.resourceTiming[e.source] = JSON.parse(JSON.stringify(i)));
                                }
                                r(null, n);
                            });
                        }, r.prototype.reloadTile = function (r, t) {
                            var o = this.loaded[r.source], u = r.uid;
                            return o && o[u] ? e.prototype.reloadTile.call(this, r, t) : this.loadTile(r, t);
                        }, r.prototype.loadGeoJSON = function (e, r) {
                            if (e.request) {
                                ajax.getJSON(e.request, r);
                            } else {
                                if ('string' != typeof e.data) {
                                    return r(new Error('Input data is not a valid GeoJSON object.'));
                                }
                                try {
                                    return r(null, JSON.parse(e.data));
                                } catch (e) {
                                    return r(new Error('Input data is not a valid GeoJSON object.'));
                                }
                            }
                        }, r.prototype.removeSource = function (e, r) {
                            this._geoJSONIndexes[e.source] && delete this._geoJSONIndexes[e.source], r();
                        }, r;
                    }(VectorTileWorkerSource);
                module.exports = GeoJSONWorkerSource;
            },
            {
                '../util/ajax': 251,
                '../util/performance': 268,
                './geojson_wrapper': 101,
                './vector_tile_worker_source': 116,
                'geojson-rewind': 15,
                'geojson-vt': 19,
                'supercluster': 32,
                'vt-pbf': 34
            }
        ],
        101: [
            function (_dereq_, module, exports) {
                'use strict';
                var Point = _dereq_('@mapbox/point-geometry'), toGeoJSON = _dereq_('@mapbox/vector-tile').VectorTileFeature.prototype.toGeoJSON, EXTENT = _dereq_('../data/extent'), FeatureWrapper = function (e) {
                        this._feature = e, this.extent = EXTENT, this.type = e.type, this.properties = e.tags, 'id' in e && !isNaN(e.id) && (this.id = parseInt(e.id, 10));
                    };
                FeatureWrapper.prototype.loadGeometry = function () {
                    var e = this;
                    if (1 === this._feature.type) {
                        for (var t = [], r = 0, o = e._feature.geometry; r < o.length; r += 1) {
                            var a = o[r];
                            t.push([new Point(a[0], a[1])]);
                        }
                        return t;
                    }
                    for (var i = [], p = 0, n = e._feature.geometry; p < n.length; p += 1) {
                        for (var s = n[p], u = [], h = 0, f = s; h < f.length; h += 1) {
                            var l = f[h];
                            u.push(new Point(l[0], l[1]));
                        }
                        i.push(u);
                    }
                    return i;
                }, FeatureWrapper.prototype.toGeoJSON = function (e, t, r) {
                    return toGeoJSON.call(this, e, t, r);
                };
                var GeoJSONWrapper = function (e) {
                    this.layers = { _geojsonTileLayer: this }, this.name = '_geojsonTileLayer', this.extent = EXTENT, this.length = e.length, this._features = e;
                };
                GeoJSONWrapper.prototype.feature = function (e) {
                    return new FeatureWrapper(this._features[e]);
                }, module.exports = GeoJSONWrapper;
            },
            {
                '../data/extent': 53,
                '@mapbox/point-geometry': 4,
                '@mapbox/vector-tile': 8
            }
        ],
        102: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util'), ref = _dereq_('./tile_id'), CanonicalTileID = ref.CanonicalTileID, LngLat = _dereq_('../geo/lng_lat'), Point = _dereq_('@mapbox/point-geometry'), Evented = _dereq_('../util/evented'), ajax = _dereq_('../util/ajax'), browser = _dereq_('../util/browser'), EXTENT = _dereq_('../data/extent'), ref$1 = _dereq_('../data/array_types'), RasterBoundsArray = ref$1.RasterBoundsArray, rasterBoundsAttributes = _dereq_('../data/raster_bounds_attributes'), VertexArrayObject = _dereq_('../render/vertex_array_object'), Texture = _dereq_('../render/texture'), ImageSource = function (t) {
                        function e(e, r, o, i) {
                            t.call(this), this.id = e, this.dispatcher = o, this.coordinates = r.coordinates, this.type = 'image', this.minzoom = 0, this.maxzoom = 22, this.tileSize = 512, this.tiles = {}, this.setEventedParent(i), this.options = r;
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.load = function () {
                            var t = this;
                            this.fire('dataloading', { dataType: 'source' }), this.url = this.options.url, ajax.getImage(this.map._transformRequest(this.url, ajax.ResourceType.Image), function (e, r) {
                                e ? t.fire('error', { error: e }) : r && (t.image = browser.getImageData(r), t._finishLoading());
                            });
                        }, e.prototype._finishLoading = function () {
                            this.map && (this.setCoordinates(this.coordinates), this.fire('data', {
                                dataType: 'source',
                                sourceDataType: 'metadata'
                            }));
                        }, e.prototype.onAdd = function (t) {
                            this.map = t, this.load();
                        }, e.prototype.setCoordinates = function (t) {
                            this.coordinates = t;
                            var e = this.map, r = t.map(function (t) {
                                    return e.transform.locationCoordinate(LngLat.convert(t)).zoomTo(0);
                                }), o = this.centerCoord = util.getCoordinatesCenter(r);
                            o.column = Math.floor(o.column), o.row = Math.floor(o.row), this.tileID = new CanonicalTileID(o.zoom, o.column, o.row), this.minzoom = this.maxzoom = o.zoom;
                            var i = r.map(function (t) {
                                var e = t.zoomTo(o.zoom);
                                return new Point(Math.round((e.column - o.column) * EXTENT), Math.round((e.row - o.row) * EXTENT));
                            });
                            return this._boundsArray = new RasterBoundsArray(), this._boundsArray.emplaceBack(i[0].x, i[0].y, 0, 0), this._boundsArray.emplaceBack(i[1].x, i[1].y, EXTENT, 0), this._boundsArray.emplaceBack(i[3].x, i[3].y, 0, EXTENT), this._boundsArray.emplaceBack(i[2].x, i[2].y, EXTENT, EXTENT), this.boundsBuffer && (this.boundsBuffer.destroy(), delete this.boundsBuffer), this.fire('data', {
                                dataType: 'source',
                                sourceDataType: 'content'
                            }), this;
                        }, e.prototype.prepare = function () {
                            var t = this;
                            if (0 !== Object.keys(this.tiles).length && this.image) {
                                var e = this.map.painter.context, r = e.gl;
                                this.boundsBuffer || (this.boundsBuffer = e.createVertexBuffer(this._boundsArray, rasterBoundsAttributes.members)), this.boundsVAO || (this.boundsVAO = new VertexArrayObject()), this.texture || (this.texture = new Texture(e, this.image, r.RGBA), this.texture.bind(r.LINEAR, r.CLAMP_TO_EDGE));
                                for (var o in t.tiles) {
                                    var i = t.tiles[o];
                                    'loaded' !== i.state && (i.state = 'loaded', i.texture = t.texture);
                                }
                            }
                        }, e.prototype.loadTile = function (t, e) {
                            this.tileID && this.tileID.equals(t.tileID.canonical) ? (this.tiles[String(t.tileID.wrap)] = t, t.buckets = {}, e(null)) : (t.state = 'errored', e(null));
                        }, e.prototype.serialize = function () {
                            return {
                                type: 'image',
                                url: this.options.url,
                                coordinates: this.coordinates
                            };
                        }, e.prototype.hasTransition = function () {
                            return !1;
                        }, e;
                    }(Evented);
                module.exports = ImageSource;
            },
            {
                '../data/array_types': 39,
                '../data/extent': 53,
                '../data/raster_bounds_attributes': 59,
                '../geo/lng_lat': 62,
                '../render/texture': 93,
                '../render/vertex_array_object': 95,
                '../util/ajax': 251,
                '../util/browser': 252,
                '../util/evented': 260,
                '../util/util': 275,
                './tile_id': 114,
                '@mapbox/point-geometry': 4
            }
        ],
        103: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util'), ajax = _dereq_('../util/ajax'), browser = _dereq_('../util/browser'), normalizeURL = _dereq_('../util/mapbox').normalizeSourceURL;
                module.exports = function (r, e, o) {
                    var u = function (r, e) {
                        if (r) {
                            return o(r);
                        }
                        if (e) {
                            var u = util.pick(e, [
                                'tiles',
                                'minzoom',
                                'maxzoom',
                                'attribution',
                                'mapbox_logo',
                                'bounds'
                            ]);
                            e.vector_layers && (u.vectorLayers = e.vector_layers, u.vectorLayerIds = u.vectorLayers.map(function (r) {
                                return r.id;
                            })), o(null, u);
                        }
                    };
                    r.url ? ajax.getJSON(e(normalizeURL(r.url), ajax.ResourceType.Source), u) : browser.frame(function () {
                        return u(null, r);
                    });
                };
            },
            {
                '../util/ajax': 251,
                '../util/browser': 252,
                '../util/mapbox': 267,
                '../util/util': 275
            }
        ],
        104: [
            function (_dereq_, module, exports) {
                'use strict';
                var EXTENT = _dereq_('../data/extent');
                module.exports = function (e, t, r) {
                    return t * (EXTENT / (e.tileSize * Math.pow(2, r - e.tileID.overscaledZ)));
                };
            },
            { '../data/extent': 53 }
        ],
        105: [
            function (_dereq_, module, exports) {
                'use strict';
                function sortTilesIn(e, r) {
                    var a = e.tileID, n = r.tileID;
                    return a.overscaledZ - n.overscaledZ || a.canonical.y - n.canonical.y || a.wrap - n.wrap || a.canonical.x - n.canonical.x;
                }
                function mergeRenderedFeatureLayers(e) {
                    for (var r = {}, a = {}, n = 0, t = e; n < t.length; n += 1) {
                        var u = t[n], l = u.queryResults, o = u.wrappedTileID, s = a[o] = a[o] || {};
                        for (var i in l) {
                            for (var c = l[i], d = s[i] = s[i] || {}, f = r[i] = r[i] || [], p = 0, v = c; p < v.length; p += 1) {
                                var y = v[p];
                                d[y.featureIndex] || (d[y.featureIndex] = !0, f.push(y.feature));
                            }
                        }
                    }
                    return r;
                }
                exports.rendered = function (e, r, a, n, t, u, l) {
                    var o = e.tilesIn(a);
                    o.sort(sortTilesIn);
                    for (var s = [], i = 0, c = o; i < c.length; i += 1) {
                        var d = c[i];
                        s.push({
                            wrappedTileID: d.tileID.wrapped().key,
                            queryResults: d.tile.queryRenderedFeatures(r, d.queryGeometry, d.scale, n, u, e.id, l)
                        });
                    }
                    return mergeRenderedFeatureLayers(s);
                }, exports.source = function (e, r) {
                    for (var a = e.getRenderableIds().map(function (r) {
                                return e.getTileByID(r);
                            }), n = [], t = {}, u = 0; u < a.length; u++) {
                        var l = a[u], o = l.tileID.canonical.key;
                        t[o] || (t[o] = !0, l.querySourceFeatures(n, r));
                    }
                    return n;
                };
            },
            {}
        ],
        106: [
            function (_dereq_, module, exports) {
                'use strict';
                var ajax = _dereq_('../util/ajax'), util = _dereq_('../util/util'), Evented = _dereq_('../util/evented'), normalizeURL = _dereq_('../util/mapbox').normalizeTileURL, browser = _dereq_('../util/browser'), ref = _dereq_('./tile_id'), OverscaledTileID = ref.OverscaledTileID, RasterTileSource = _dereq_('./raster_tile_source'), RasterDEMTileSource = function (e) {
                        function r(r, i, t, l) {
                            e.call(this, r, i, t, l), this.type = 'raster-dem', this.maxzoom = 22, this._options = util.extend({}, i);
                        }
                        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.serialize = function () {
                            return {
                                type: 'raster-dem',
                                url: this.url,
                                tileSize: this.tileSize,
                                tiles: this.tiles,
                                bounds: this.bounds
                            };
                        }, r.prototype.loadTile = function (e, r) {
                            function i(i, l) {
                                if (delete e.request, e.aborted) {
                                    e.state = 'unloaded', r(null);
                                } else if (i) {
                                    e.state = 'errored', r(i);
                                } else if (l) {
                                    this.map._refreshExpiredTiles && e.setExpiryData(l), delete l.cacheControl, delete l.expires;
                                    var a = browser.getImageData(l), s = {
                                            uid: e.uid,
                                            coord: e.tileID,
                                            source: this.id,
                                            rawImageData: a
                                        };
                                    e.workerID && 'expired' !== e.state || (e.workerID = this.dispatcher.send('loadDEMTile', s, t.bind(this)));
                                }
                            }
                            function t(i, t) {
                                i && (e.state = 'errored', r(i)), t && (e.dem = t, e.needsHillshadePrepare = !0, e.state = 'loaded', r(null));
                            }
                            var l = normalizeURL(e.tileID.canonical.url(this.tiles, this.scheme), this.url, this.tileSize);
                            e.request = ajax.getImage(this.map._transformRequest(l, ajax.ResourceType.Tile), i.bind(this)), e.neighboringTiles = this._getNeighboringTiles(e.tileID);
                        }, r.prototype._getNeighboringTiles = function (e) {
                            var r = e.canonical, i = Math.pow(2, r.z), t = (r.x - 1 + i) % i, l = 0 === r.x ? e.wrap - 1 : e.wrap, a = (r.x + 1 + i) % i, s = r.x + 1 === i ? e.wrap + 1 : e.wrap, o = {};
                            return o[new OverscaledTileID(e.overscaledZ, l, r.z, t, r.y).key] = { backfilled: !1 }, o[new OverscaledTileID(e.overscaledZ, s, r.z, a, r.y).key] = { backfilled: !1 }, r.y > 0 && (o[new OverscaledTileID(e.overscaledZ, l, r.z, t, r.y - 1).key] = { backfilled: !1 }, o[new OverscaledTileID(e.overscaledZ, e.wrap, r.z, r.x, r.y - 1).key] = { backfilled: !1 }, o[new OverscaledTileID(e.overscaledZ, s, r.z, a, r.y - 1).key] = { backfilled: !1 }), r.y + 1 < i && (o[new OverscaledTileID(e.overscaledZ, l, r.z, t, r.y + 1).key] = { backfilled: !1 }, o[new OverscaledTileID(e.overscaledZ, e.wrap, r.z, r.x, r.y + 1).key] = { backfilled: !1 }, o[new OverscaledTileID(e.overscaledZ, s, r.z, a, r.y + 1).key] = { backfilled: !1 }), o;
                        }, r.prototype.unloadTile = function (e) {
                            e.demTexture && this.map.painter.saveTileTexture(e.demTexture), e.fbo && (e.fbo.destroy(), delete e.fbo), e.dem && delete e.dem, delete e.neighboringTiles, e.state = 'unloaded', this.dispatcher.send('removeDEMTile', {
                                uid: e.uid,
                                source: this.id
                            }, void 0, e.workerID);
                        }, r;
                    }(RasterTileSource);
                module.exports = RasterDEMTileSource;
            },
            {
                '../util/ajax': 251,
                '../util/browser': 252,
                '../util/evented': 260,
                '../util/mapbox': 267,
                '../util/util': 275,
                './raster_tile_source': 108,
                './tile_id': 114
            }
        ],
        107: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../data/dem_data'), DEMData = ref.DEMData, RasterDEMTileWorkerSource = function () {
                        this.loading = {}, this.loaded = {};
                    };
                RasterDEMTileWorkerSource.prototype.loadTile = function (e, a) {
                    var o = e.source, r = e.uid;
                    this.loading[o] || (this.loading[o] = {});
                    var t = new DEMData(r);
                    this.loading[o][r] = t, t.loadFromImage(e.rawImageData), delete this.loading[o][r], this.loaded[o] = this.loaded[o] || {}, this.loaded[o][r] = t, a(null, t);
                }, RasterDEMTileWorkerSource.prototype.removeTile = function (e) {
                    var a = this.loaded[e.source], o = e.uid;
                    a && a[o] && delete a[o];
                }, module.exports = RasterDEMTileWorkerSource;
            },
            { '../data/dem_data': 52 }
        ],
        108: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util'), ajax = _dereq_('../util/ajax'), Evented = _dereq_('../util/evented'), loadTileJSON = _dereq_('./load_tilejson'), normalizeURL = _dereq_('../util/mapbox').normalizeTileURL, TileBounds = _dereq_('./tile_bounds'), Texture = _dereq_('../render/texture'), RasterTileSource = function (e) {
                        function t(t, i, r, o) {
                            e.call(this), this.id = t, this.dispatcher = r, this.setEventedParent(o), this.type = 'raster', this.minzoom = 0, this.maxzoom = 22, this.roundZoom = !0, this.scheme = 'xyz', this.tileSize = 512, this._loaded = !1, this._options = util.extend({}, i), util.extend(this, util.pick(i, [
                                'url',
                                'scheme',
                                'tileSize'
                            ]));
                        }
                        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.load = function () {
                            var e = this;
                            this.fire('dataloading', { dataType: 'source' }), loadTileJSON(this._options, this.map._transformRequest, function (t, i) {
                                t ? e.fire('error', t) : i && (util.extend(e, i), i.bounds && (e.tileBounds = new TileBounds(i.bounds, e.minzoom, e.maxzoom)), e.fire('data', {
                                    dataType: 'source',
                                    sourceDataType: 'metadata'
                                }), e.fire('data', {
                                    dataType: 'source',
                                    sourceDataType: 'content'
                                }));
                            });
                        }, t.prototype.onAdd = function (e) {
                            this.map = e, this.load();
                        }, t.prototype.serialize = function () {
                            return util.extend({}, this._options);
                        }, t.prototype.hasTile = function (e) {
                            return !this.tileBounds || this.tileBounds.contains(e.canonical);
                        }, t.prototype.loadTile = function (e, t) {
                            var i = this, r = normalizeURL(e.tileID.canonical.url(this.tiles, this.scheme), this.url, this.tileSize);
                            e.request = ajax.getImage(this.map._transformRequest(r, ajax.ResourceType.Tile), function (r, o) {
                                if (delete e.request, e.aborted) {
                                    e.state = 'unloaded', t(null);
                                } else if (r) {
                                    e.state = 'errored', t(r);
                                } else if (o) {
                                    i.map._refreshExpiredTiles && e.setExpiryData(o), delete o.cacheControl, delete o.expires;
                                    var a = i.map.painter.context, n = a.gl;
                                    e.texture = i.map.painter.getTileTexture(o.width), e.texture ? (e.texture.bind(n.LINEAR, n.CLAMP_TO_EDGE, n.LINEAR_MIPMAP_NEAREST), n.texSubImage2D(n.TEXTURE_2D, 0, 0, 0, n.RGBA, n.UNSIGNED_BYTE, o)) : (e.texture = new Texture(a, o, n.RGBA), e.texture.bind(n.LINEAR, n.CLAMP_TO_EDGE, n.LINEAR_MIPMAP_NEAREST), a.extTextureFilterAnisotropic && n.texParameterf(n.TEXTURE_2D, a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, a.extTextureFilterAnisotropicMax)), n.generateMipmap(n.TEXTURE_2D), e.state = 'loaded', t(null);
                                }
                            });
                        }, t.prototype.abortTile = function (e, t) {
                            e.request && (e.request.abort(), delete e.request), t();
                        }, t.prototype.unloadTile = function (e, t) {
                            e.texture && this.map.painter.saveTileTexture(e.texture), t();
                        }, t.prototype.hasTransition = function () {
                            return !1;
                        }, t;
                    }(Evented);
                module.exports = RasterTileSource;
            },
            {
                '../render/texture': 93,
                '../util/ajax': 251,
                '../util/evented': 260,
                '../util/mapbox': 267,
                '../util/util': 275,
                './load_tilejson': 103,
                './tile_bounds': 113
            }
        ],
        109: [
            function (_dereq_, module, exports) {
                'use strict';
                var ajax = _dereq_('../util/ajax'), Evented = _dereq_('../util/evented'), window = _dereq_('../util/window'), pluginRequested = !1, pluginBlobURL = null;
                module.exports.evented = new Evented(), module.exports.registerForPluginAvailability = function (e) {
                    return pluginBlobURL ? e({
                        pluginBlobURL: pluginBlobURL,
                        errorCallback: module.exports.errorCallback
                    }) : module.exports.evented.once('pluginAvailable', e), e;
                }, module.exports.createBlobURL = function (e) {
                    return window.URL.createObjectURL(new window.Blob([e.data], { type: 'text/javascript' }));
                }, module.exports.clearRTLTextPlugin = function () {
                    pluginRequested = !1, pluginBlobURL = null;
                }, module.exports.setRTLTextPlugin = function (e, l) {
                    if (pluginRequested) {
                        throw new Error('setRTLTextPlugin cannot be called multiple times.');
                    }
                    pluginRequested = !0, module.exports.errorCallback = l, ajax.getArrayBuffer({ url: e }, function (e, t) {
                        e ? l(e) : t && (pluginBlobURL = module.exports.createBlobURL(t), module.exports.evented.fire('pluginAvailable', {
                            pluginBlobURL: pluginBlobURL,
                            errorCallback: l
                        }));
                    });
                }, module.exports.applyArabicShaping = null, module.exports.processBidirectionalText = null;
            },
            {
                '../util/ajax': 251,
                '../util/evented': 260,
                '../util/window': 254
            }
        ],
        110: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util'), sourceTypes = {
                        vector: _dereq_('../source/vector_tile_source'),
                        raster: _dereq_('../source/raster_tile_source'),
                        'raster-dem': _dereq_('../source/raster_dem_tile_source'),
                        geojson: _dereq_('../source/geojson_source'),
                        video: _dereq_('../source/video_source'),
                        image: _dereq_('../source/image_source'),
                        canvas: _dereq_('../source/canvas_source')
                    };
                exports.create = function (e, r, o, s) {
                    var u = new sourceTypes[r.type](e, r, o, s);
                    if (u.id !== e) {
                        throw new Error('Expected Source id to be ' + e + ' instead of ' + u.id);
                    }
                    return util.bindAll([
                        'load',
                        'abort',
                        'unload',
                        'serialize',
                        'prepare'
                    ], u), u;
                }, exports.getType = function (e) {
                    return sourceTypes[e];
                }, exports.setType = function (e, r) {
                    sourceTypes[e] = r;
                };
            },
            {
                '../source/canvas_source': 98,
                '../source/geojson_source': 99,
                '../source/image_source': 102,
                '../source/raster_dem_tile_source': 106,
                '../source/raster_tile_source': 108,
                '../source/vector_tile_source': 115,
                '../source/video_source': 117,
                '../util/util': 275
            }
        ],
        111: [
            function (_dereq_, module, exports) {
                'use strict';
                function coordinateToTilePoint(e, t) {
                    var i = t.zoomTo(e.canonical.z);
                    return new Point((i.column - (e.canonical.x + e.wrap * Math.pow(2, e.canonical.z))) * EXTENT, (i.row - e.canonical.y) * EXTENT);
                }
                function isRasterType(e) {
                    return 'raster' === e || 'image' === e || 'video' === e;
                }
                var createSource = _dereq_('./source').create, Tile = _dereq_('./tile'), Evented = _dereq_('../util/evented'), Cache = _dereq_('../util/lru_cache'), Coordinate = _dereq_('../geo/coordinate'), util = _dereq_('../util/util'), EXTENT = _dereq_('../data/extent'), Context = _dereq_('../gl/context'), Point = _dereq_('@mapbox/point-geometry'), browser = _dereq_('../util/browser'), ref = _dereq_('./tile_id'), OverscaledTileID = ref.OverscaledTileID, SourceCache = function (e) {
                        function t(t, i, r) {
                            var o = this;
                            e.call(this), this.id = t, this.dispatcher = r, this.on('data', function (e) {
                                'source' === e.dataType && 'metadata' === e.sourceDataType && (o._sourceLoaded = !0), o._sourceLoaded && !o._paused && 'source' === e.dataType && 'content' === e.sourceDataType && (o.reload(), o.transform && o.update(o.transform));
                            }), this.on('error', function () {
                                o._sourceErrored = !0;
                            }), this._source = createSource(t, i, r, this), this._tiles = {}, this._cache = new Cache(0, this._unloadTile.bind(this)), this._timers = {}, this._cacheTimers = {}, this._maxTileCacheSize = null, this._isIdRenderable = this._isIdRenderable.bind(this), this._coveredTiles = {};
                        }
                        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.onAdd = function (e) {
                            this.map = e, this._maxTileCacheSize = e ? e._maxTileCacheSize : null, this._source && this._source.onAdd && this._source.onAdd(e);
                        }, t.prototype.onRemove = function (e) {
                            this._source && this._source.onRemove && this._source.onRemove(e);
                        }, t.prototype.loaded = function () {
                            var e = this;
                            if (this._sourceErrored) {
                                return !0;
                            }
                            if (!this._sourceLoaded) {
                                return !1;
                            }
                            for (var t in e._tiles) {
                                var i = e._tiles[t];
                                if ('loaded' !== i.state && 'errored' !== i.state) {
                                    return !1;
                                }
                            }
                            return !0;
                        }, t.prototype.getSource = function () {
                            return this._source;
                        }, t.prototype.pause = function () {
                            this._paused = !0;
                        }, t.prototype.resume = function () {
                            if (this._paused) {
                                var e = this._shouldReloadOnResume;
                                this._paused = !1, this._shouldReloadOnResume = !1, e && this.reload(), this.transform && this.update(this.transform);
                            }
                        }, t.prototype._loadTile = function (e, t) {
                            return this._source.loadTile(e, t);
                        }, t.prototype._unloadTile = function (e) {
                            if (this._source.unloadTile) {
                                return this._source.unloadTile(e, function () {
                                });
                            }
                        }, t.prototype._abortTile = function (e) {
                            if (this._source.abortTile) {
                                return this._source.abortTile(e, function () {
                                });
                            }
                        }, t.prototype.serialize = function () {
                            return this._source.serialize();
                        }, t.prototype.prepare = function (e) {
                            var t = this;
                            this._source.prepare && this._source.prepare();
                            for (var i in t._tiles) {
                                t._tiles[i].upload(e);
                            }
                        }, t.prototype.getIds = function () {
                            var e = this, t = function (t, i) {
                                    var r = e._tiles[t].tileID, o = e._tiles[i].tileID, a = new Point(r.canonical.x, r.canonical.y).rotate(e.transform.angle), s = new Point(o.canonical.x, o.canonical.y).rotate(e.transform.angle);
                                    return r.overscaledZ - o.overscaledZ || s.y - a.y || s.x - a.x;
                                };
                            return Object.keys(this._tiles).map(Number).sort(t);
                        }, t.prototype.getRenderableIds = function () {
                            return this.getIds().filter(this._isIdRenderable);
                        }, t.prototype.hasRenderableParent = function (e) {
                            var t = this.findLoadedParent(e, 0, {});
                            return !!t && this._isIdRenderable(t.tileID.key);
                        }, t.prototype._isIdRenderable = function (e) {
                            return this._tiles[e] && this._tiles[e].hasData() && !this._coveredTiles[e];
                        }, t.prototype.reload = function () {
                            var e = this;
                            if (this._paused) {
                                return void (this._shouldReloadOnResume = !0);
                            }
                            this._resetCache();
                            for (var t in e._tiles) {
                                e._reloadTile(t, 'reloading');
                            }
                        }, t.prototype._reloadTile = function (e, t) {
                            var i = this._tiles[e];
                            i && ('loading' !== i.state && (i.state = t), this._loadTile(i, this._tileLoaded.bind(this, i, e, t)));
                        }, t.prototype._tileLoaded = function (e, t, i, r) {
                            if (r) {
                                return e.state = 'errored', void (404 !== r.status ? this._source.fire('error', {
                                    tile: e,
                                    error: r
                                }) : this.update(this.transform));
                            }
                            e.timeAdded = browser.now(), 'expired' === i && (e.refreshedUponExpiration = !0), this._setTileReloadTimer(t, e), 'raster-dem' === this.getSource().type && e.dem && this._backfillDEM(e), this._source.fire('data', {
                                dataType: 'source',
                                tile: e,
                                coord: e.tileID
                            }), this.map && (this.map.painter.tileExtentVAO.vao = null);
                        }, t.prototype._backfillDEM = function (e) {
                            function t(e, t) {
                                e.needsHillshadePrepare = !0;
                                var i = t.tileID.canonical.x - e.tileID.canonical.x, r = t.tileID.canonical.y - e.tileID.canonical.y, o = Math.pow(2, e.tileID.canonical.z), a = t.tileID.key;
                                0 === i && 0 === r || Math.abs(r) > 1 || (Math.abs(i) > 1 && (1 === Math.abs(i + o) ? i += o : 1 === Math.abs(i - o) && (i -= o)), t.dem && e.dem && (e.dem.backfillBorder(t.dem, i, r), e.neighboringTiles && e.neighboringTiles[a] && (e.neighboringTiles[a].backfilled = !0)));
                            }
                            for (var i = this, r = this.getRenderableIds(), o = 0; o < r.length; o++) {
                                var a = r[o];
                                if (e.neighboringTiles && e.neighboringTiles[a]) {
                                    var s = i.getTileByID(a);
                                    t(e, s), t(s, e);
                                }
                            }
                        }, t.prototype.getTile = function (e) {
                            return this.getTileByID(e.key);
                        }, t.prototype.getTileByID = function (e) {
                            return this._tiles[e];
                        }, t.prototype.getZoom = function (e) {
                            return e.zoom + e.scaleZoom(e.tileSize / this._source.tileSize);
                        }, t.prototype._findLoadedChildren = function (e, t, i) {
                            var r = this, o = !1;
                            for (var a in r._tiles) {
                                var s = r._tiles[a];
                                if (!(i[a] || !s.hasData() || s.tileID.overscaledZ <= e.overscaledZ || s.tileID.overscaledZ > t)) {
                                    var n = Math.pow(2, s.tileID.canonical.z - e.canonical.z);
                                    if (Math.floor(s.tileID.canonical.x / n) === e.canonical.x && Math.floor(s.tileID.canonical.y / n) === e.canonical.y) {
                                        for (i[a] = s.tileID, o = !0; s && s.tileID.overscaledZ - 1 > e.overscaledZ;) {
                                            var l = s.tileID.scaledTo(s.tileID.overscaledZ - 1);
                                            if (!l) {
                                                break;
                                            }
                                            s = r._tiles[l.key], s && s.hasData() && (delete i[a], i[l.key] = l);
                                        }
                                    }
                                }
                            }
                            return o;
                        }, t.prototype.findLoadedParent = function (e, t, i) {
                            for (var r = this, o = e.overscaledZ - 1; o >= t; o--) {
                                var a = e.scaledTo(o);
                                if (!a) {
                                    return;
                                }
                                var s = String(a.key), n = r._tiles[s];
                                if (n && n.hasData()) {
                                    return i[s] = a, n;
                                }
                                if (r._cache.has(s)) {
                                    return i[s] = a, r._cache.get(s);
                                }
                            }
                        }, t.prototype.updateCacheSize = function (e) {
                            var t = Math.ceil(e.width / this._source.tileSize) + 1, i = Math.ceil(e.height / this._source.tileSize) + 1, r = t * i, o = Math.floor(5 * r), a = 'number' == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, o) : o;
                            this._cache.setMaxSize(a);
                        }, t.prototype.update = function (e) {
                            var i = this;
                            if (this.transform = e, this._sourceLoaded && !this._paused) {
                                this.updateCacheSize(e), this._coveredTiles = {};
                                var r;
                                this.used ? this._source.tileID ? r = e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function (e) {
                                    return new OverscaledTileID(e.canonical.z, e.wrap, e.canonical.z, e.canonical.x, e.canonical.y);
                                }) : (r = e.coveringTiles({
                                    tileSize: this._source.tileSize,
                                    minzoom: this._source.minzoom,
                                    maxzoom: this._source.maxzoom,
                                    roundZoom: this._source.roundZoom,
                                    reparseOverscaled: this._source.reparseOverscaled
                                }), this._source.hasTile && (r = r.filter(function (e) {
                                    return i._source.hasTile(e);
                                }))) : r = [];
                                var o = (this._source.roundZoom ? Math.round : Math.floor)(this.getZoom(e)), a = Math.max(o - t.maxOverzooming, this._source.minzoom), s = Math.max(o + t.maxUnderzooming, this._source.minzoom), n = this._updateRetainedTiles(r, o), l = {};
                                if (isRasterType(this._source.type)) {
                                    for (var c = Object.keys(n), h = 0; h < c.length; h++) {
                                        var d = c[h], u = n[d], _ = i._tiles[d];
                                        if (_ && (void 0 === _.fadeEndTime || _.fadeEndTime >= browser.now())) {
                                            i._findLoadedChildren(u, s, n) && (n[d] = u);
                                            var p = i.findLoadedParent(u, a, l);
                                            p && i._addTile(p.tileID);
                                        }
                                    }
                                }
                                var m;
                                for (m in l) {
                                    n[m] || (i._coveredTiles[m] = !0);
                                }
                                for (m in l) {
                                    n[m] = l[m];
                                }
                                for (var f = util.keysDifference(this._tiles, n), T = 0; T < f.length; T++) {
                                    i._removeTile(f[T]);
                                }
                            }
                        }, t.prototype._updateRetainedTiles = function (e, i) {
                            for (var r = this, o = {}, a = {}, s = Math.max(i - t.maxOverzooming, this._source.minzoom), n = Math.max(i + t.maxUnderzooming, this._source.minzoom), l = 0; l < e.length; l++) {
                                var c = e[l], h = r._addTile(c), d = !1;
                                if (h.hasData()) {
                                    o[c.key] = c;
                                } else {
                                    d = h.wasRequested(), o[c.key] = c;
                                    var u = !0;
                                    if (i + 1 > r._source.maxzoom) {
                                        var _ = c.children(r._source.maxzoom)[0], p = r.getTile(_);
                                        p && p.hasData() ? o[_.key] = _ : u = !1;
                                    } else {
                                        r._findLoadedChildren(c, n, o);
                                        for (var m = c.children(r._source.maxzoom), f = 0; f < m.length; f++) {
                                            if (!o[m[f].key]) {
                                                u = !1;
                                                break;
                                            }
                                        }
                                    }
                                    if (!u) {
                                        for (var T = c.overscaledZ - 1; T >= s; --T) {
                                            var v = c.scaledTo(T);
                                            if (a[v.key]) {
                                                break;
                                            }
                                            if (a[v.key] = !0, h = r.getTile(v), !h && d && (h = r._addTile(v)), h && (o[v.key] = v, d = h.wasRequested(), h.hasData())) {
                                                break;
                                            }
                                        }
                                    }
                                }
                            }
                            return o;
                        }, t.prototype._addTile = function (e) {
                            var t = this._tiles[e.key];
                            if (t) {
                                return t;
                            }
                            (t = this._cache.getAndRemove(e.key)) && this._cacheTimers[e.key] && (clearTimeout(this._cacheTimers[e.key]), delete this._cacheTimers[e.key], this._setTileReloadTimer(e.key, t));
                            var i = Boolean(t);
                            return i || (t = new Tile(e, this._source.tileSize * e.overscaleFactor()), this._loadTile(t, this._tileLoaded.bind(this, t, e.key, t.state))), t ? (t.uses++, this._tiles[e.key] = t, i || this._source.fire('dataloading', {
                                tile: t,
                                coord: t.tileID,
                                dataType: 'source'
                            }), t) : null;
                        }, t.prototype._setTileReloadTimer = function (e, t) {
                            var i = this;
                            e in this._timers && (clearTimeout(this._timers[e]), delete this._timers[e]);
                            var r = t.getExpiryTimeout();
                            r && (this._timers[e] = setTimeout(function () {
                                i._reloadTile(e, 'expired'), delete i._timers[e];
                            }, r));
                        }, t.prototype._setCacheInvalidationTimer = function (e, t) {
                            var i = this;
                            e in this._cacheTimers && (clearTimeout(this._cacheTimers[e]), delete this._cacheTimers[e]);
                            var r = t.getExpiryTimeout();
                            r && (this._cacheTimers[e] = setTimeout(function () {
                                i._cache.remove(e), delete i._cacheTimers[e];
                            }, r));
                        }, t.prototype._removeTile = function (e) {
                            var t = this._tiles[e];
                            if (t && (t.uses--, delete this._tiles[e], this._timers[e] && (clearTimeout(this._timers[e]), delete this._timers[e]), !(t.uses > 0))) {
                                if (t.hasData()) {
                                    t.tileID = t.tileID.wrapped();
                                    var i = t.tileID.key;
                                    this._cache.add(i, t), this._setCacheInvalidationTimer(i, t);
                                } else {
                                    t.aborted = !0, this._abortTile(t), this._unloadTile(t);
                                }
                            }
                        }, t.prototype.clearTiles = function () {
                            var e = this;
                            this._shouldReloadOnResume = !1, this._paused = !1;
                            for (var t in e._tiles) {
                                e._removeTile(t);
                            }
                            this._resetCache();
                        }, t.prototype._resetCache = function () {
                            var e = this;
                            for (var t in e._cacheTimers) {
                                clearTimeout(e._cacheTimers[t]);
                            }
                            this._cacheTimers = {}, this._cache.reset();
                        }, t.prototype.tilesIn = function (e) {
                            for (var t = this, i = [], r = this.getIds(), o = 1 / 0, a = 1 / 0, s = -1 / 0, n = -1 / 0, l = e[0].zoom, c = 0; c < e.length; c++) {
                                var h = e[c];
                                o = Math.min(o, h.column), a = Math.min(a, h.row), s = Math.max(s, h.column), n = Math.max(n, h.row);
                            }
                            for (var d = 0; d < r.length; d++) {
                                var u = t._tiles[r[d]], _ = u.tileID, p = [
                                        coordinateToTilePoint(_, new Coordinate(o, a, l)),
                                        coordinateToTilePoint(_, new Coordinate(s, n, l))
                                    ];
                                if (p[0].x < EXTENT && p[0].y < EXTENT && p[1].x >= 0 && p[1].y >= 0) {
                                    for (var m = [], f = 0; f < e.length; f++) {
                                        m.push(coordinateToTilePoint(_, e[f]));
                                    }
                                    i.push({
                                        tile: u,
                                        tileID: _,
                                        queryGeometry: [m],
                                        scale: Math.pow(2, t.transform.zoom - u.tileID.overscaledZ)
                                    });
                                }
                            }
                            return i;
                        }, t.prototype.getVisibleCoordinates = function () {
                            for (var e = this, t = this.getRenderableIds().map(function (t) {
                                        return e._tiles[t].tileID;
                                    }), i = 0, r = t; i < r.length; i += 1) {
                                var o = r[i];
                                o.posMatrix = e.transform.calculatePosMatrix(o.toUnwrapped());
                            }
                            return t;
                        }, t.prototype.hasTransition = function () {
                            var e = this;
                            if (this._source.hasTransition()) {
                                return !0;
                            }
                            if (isRasterType(this._source.type)) {
                                for (var t in e._tiles) {
                                    var i = e._tiles[t];
                                    if (void 0 !== i.fadeEndTime && i.fadeEndTime >= browser.now()) {
                                        return !0;
                                    }
                                }
                            }
                            return !1;
                        }, t;
                    }(Evented);
                SourceCache.maxOverzooming = 10, SourceCache.maxUnderzooming = 3, module.exports = SourceCache;
            },
            {
                '../data/extent': 53,
                '../geo/coordinate': 61,
                '../gl/context': 66,
                '../util/browser': 252,
                '../util/evented': 260,
                '../util/lru_cache': 266,
                '../util/util': 275,
                './source': 110,
                './tile': 112,
                './tile_id': 114,
                '@mapbox/point-geometry': 4
            }
        ],
        112: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util'), deserializeBucket = _dereq_('../data/bucket').deserialize, FeatureIndex = _dereq_('../data/feature_index'), vt = _dereq_('@mapbox/vector-tile'), Protobuf = _dereq_('pbf'), GeoJSONFeature = _dereq_('../util/vectortile_to_geojson'), featureFilter = _dereq_('../style-spec/feature_filter'), CollisionIndex = _dereq_('../symbol/collision_index'), SymbolBucket = _dereq_('../data/bucket/symbol_bucket'), ref = _dereq_('../data/array_types'), RasterBoundsArray = ref.RasterBoundsArray, CollisionBoxArray = ref.CollisionBoxArray, rasterBoundsAttributes = _dereq_('../data/raster_bounds_attributes'), EXTENT = _dereq_('../data/extent'), Point = _dereq_('@mapbox/point-geometry'), Texture = _dereq_('../render/texture'), ref$1 = _dereq_('../data/segment'), SegmentVector = ref$1.SegmentVector, ref$2 = _dereq_('../data/index_array_type'), TriangleIndexArray = ref$2.TriangleIndexArray, browser = _dereq_('../util/browser'), CLOCK_SKEW_RETRY_TIMEOUT = 30000, Tile = function (e, t) {
                        this.tileID = e, this.uid = util.uniqueId(), this.uses = 0, this.tileSize = t, this.buckets = {}, this.expirationTime = null, this.expiredRequestCount = 0, this.state = 'loading';
                    };
                Tile.prototype.registerFadeDuration = function (e) {
                    var t = e + this.timeAdded;
                    t < browser.now() || this.fadeEndTime && t < this.fadeEndTime || (this.fadeEndTime = t);
                }, Tile.prototype.wasRequested = function () {
                    return 'errored' === this.state || 'loaded' === this.state || 'reloading' === this.state;
                }, Tile.prototype.loadVectorData = function (e, t, i) {
                    var r = this;
                    if (this.hasData() && this.unloadVectorData(), this.state = 'loaded', !e) {
                        return void (this.collisionBoxArray = new CollisionBoxArray());
                    }
                    if (e.rawTileData && (this.rawTileData = e.rawTileData), this.collisionBoxArray = e.collisionBoxArray, this.featureIndex = e.featureIndex, this.featureIndex.rawTileData = this.rawTileData, this.buckets = deserializeBucket(e.buckets, t.style), i) {
                        for (var a in r.buckets) {
                            var s = r.buckets[a];
                            s instanceof SymbolBucket && (s.justReloaded = !0);
                        }
                    }
                    e.iconAtlasImage && (this.iconAtlasImage = e.iconAtlasImage), e.glyphAtlasImage && (this.glyphAtlasImage = e.glyphAtlasImage);
                }, Tile.prototype.unloadVectorData = function () {
                    var e = this;
                    for (var t in e.buckets) {
                        e.buckets[t].destroy();
                    }
                    this.buckets = {}, this.iconAtlasTexture && this.iconAtlasTexture.destroy(), this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(), this.collisionBoxArray = null, this.featureIndex = null, this.state = 'unloaded';
                }, Tile.prototype.unloadDEMData = function () {
                    this.dem = null, this.neighboringTiles = null, this.state = 'unloaded';
                }, Tile.prototype.getBucket = function (e) {
                    return this.buckets[e.id];
                }, Tile.prototype.upload = function (e) {
                    var t = this;
                    for (var i in t.buckets) {
                        var r = t.buckets[i];
                        r.uploaded || (r.upload(e), r.uploaded = !0);
                    }
                    var a = e.gl;
                    this.iconAtlasImage && (this.iconAtlasTexture = new Texture(e, this.iconAtlasImage, a.RGBA), this.iconAtlasImage = null), this.glyphAtlasImage && (this.glyphAtlasTexture = new Texture(e, this.glyphAtlasImage, a.ALPHA), this.glyphAtlasImage = null);
                }, Tile.prototype.queryRenderedFeatures = function (e, t, i, r, a, s, o) {
                    var n = this;
                    if (!this.featureIndex || !this.collisionBoxArray) {
                        return {};
                    }
                    var l = 0, u = {};
                    for (var h in e) {
                        var d = n.getBucket(e[h]);
                        d && (l = Math.max(l, e[h].queryRadius(d)), d instanceof SymbolBucket && void 0 !== d.bucketInstanceId && (u[d.bucketInstanceId] = !0));
                    }
                    return this.featureIndex.query({
                        queryGeometry: t,
                        scale: i,
                        tileSize: this.tileSize,
                        bearing: a,
                        params: r,
                        additionalRadius: l,
                        collisionBoxArray: this.collisionBoxArray,
                        sourceID: s,
                        collisionIndex: o,
                        bucketInstanceIds: u
                    }, e);
                }, Tile.prototype.querySourceFeatures = function (e, t) {
                    var i = this;
                    if (this.rawTileData) {
                        this.vtLayers || (this.vtLayers = new vt.VectorTile(new Protobuf(this.rawTileData)).layers);
                        var r = t ? t.sourceLayer : '', a = this.vtLayers._geojsonTileLayer || this.vtLayers[r];
                        if (a) {
                            for (var s = featureFilter(t && t.filter), o = {
                                        z: this.tileID.overscaledZ,
                                        x: this.tileID.canonical.x,
                                        y: this.tileID.canonical.y
                                    }, n = 0; n < a.length; n++) {
                                var l = a.feature(n);
                                if (s({ zoom: i.tileID.overscaledZ }, l)) {
                                    var u = new GeoJSONFeature(l, o.z, o.x, o.y);
                                    u.tile = o, e.push(u);
                                }
                            }
                        }
                    }
                }, Tile.prototype.clearMask = function () {
                    this.segments && (this.segments.destroy(), delete this.segments), this.maskedBoundsBuffer && (this.maskedBoundsBuffer.destroy(), delete this.maskedBoundsBuffer), this.maskedIndexBuffer && (this.maskedIndexBuffer.destroy(), delete this.maskedIndexBuffer);
                }, Tile.prototype.setMask = function (e, t) {
                    var i = this;
                    if (!util.deepEqual(this.mask, e) && (this.mask = e, this.clearMask(), !util.deepEqual(e, { 0: !0 }))) {
                        var r = new RasterBoundsArray(), a = new TriangleIndexArray();
                        this.segments = new SegmentVector(), this.segments.prepareSegment(0, r, a);
                        for (var s = Object.keys(e), o = 0; o < s.length; o++) {
                            var n = e[s[o]], l = EXTENT >> n.z, u = new Point(n.x * l, n.y * l), h = new Point(u.x + l, u.y + l), d = i.segments.prepareSegment(4, r, a);
                            r.emplaceBack(u.x, u.y, u.x, u.y), r.emplaceBack(h.x, u.y, h.x, u.y), r.emplaceBack(u.x, h.y, u.x, h.y), r.emplaceBack(h.x, h.y, h.x, h.y);
                            var c = d.vertexLength;
                            a.emplaceBack(c, c + 1, c + 2), a.emplaceBack(c + 1, c + 2, c + 3), d.vertexLength += 4, d.primitiveLength += 2;
                        }
                        this.maskedBoundsBuffer = t.createVertexBuffer(r, rasterBoundsAttributes.members), this.maskedIndexBuffer = t.createIndexBuffer(a);
                    }
                }, Tile.prototype.hasData = function () {
                    return 'loaded' === this.state || 'reloading' === this.state || 'expired' === this.state;
                }, Tile.prototype.setExpiryData = function (e) {
                    var t = this.expirationTime;
                    if (e.cacheControl) {
                        var i = util.parseCacheControl(e.cacheControl);
                        i['max-age'] && (this.expirationTime = Date.now() + 1000 * i['max-age']);
                    } else {
                        e.expires && (this.expirationTime = new Date(e.expires).getTime());
                    }
                    if (this.expirationTime) {
                        var r = Date.now(), a = !1;
                        if (this.expirationTime > r) {
                            a = !1;
                        } else if (t) {
                            if (this.expirationTime < t) {
                                a = !0;
                            } else {
                                var s = this.expirationTime - t;
                                s ? this.expirationTime = r + Math.max(s, CLOCK_SKEW_RETRY_TIMEOUT) : a = !0;
                            }
                        } else {
                            a = !0;
                        }
                        a ? (this.expiredRequestCount++, this.state = 'expired') : this.expiredRequestCount = 0;
                    }
                }, Tile.prototype.getExpiryTimeout = function () {
                    if (this.expirationTime) {
                        return this.expiredRequestCount ? 1000 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - new Date().getTime(), Math.pow(2, 31) - 1);
                    }
                }, module.exports = Tile;
            },
            {
                '../data/array_types': 39,
                '../data/bucket': 40,
                '../data/bucket/symbol_bucket': 51,
                '../data/extent': 53,
                '../data/feature_index': 54,
                '../data/index_array_type': 55,
                '../data/raster_bounds_attributes': 59,
                '../data/segment': 60,
                '../render/texture': 93,
                '../style-spec/feature_filter': 148,
                '../symbol/collision_index': 217,
                '../util/browser': 252,
                '../util/util': 275,
                '../util/vectortile_to_geojson': 276,
                '@mapbox/point-geometry': 4,
                '@mapbox/vector-tile': 8,
                'pbf': 30
            }
        ],
        113: [
            function (_dereq_, module, exports) {
                'use strict';
                var LngLatBounds = _dereq_('../geo/lng_lat_bounds'), clamp = _dereq_('../util/util').clamp, TileBounds = function (t, n, o) {
                        this.bounds = LngLatBounds.convert(this.validateBounds(t)), this.minzoom = n || 0, this.maxzoom = o || 24;
                    };
                TileBounds.prototype.validateBounds = function (t) {
                    return Array.isArray(t) && 4 === t.length ? [
                        Math.max(-180, t[0]),
                        Math.max(-90, t[1]),
                        Math.min(180, t[2]),
                        Math.min(90, t[3])
                    ] : [
                        -180,
                        -90,
                        180,
                        90
                    ];
                }, TileBounds.prototype.contains = function (t) {
                    var n = {
                        minX: Math.floor(this.lngX(this.bounds.getWest(), t.z)),
                        minY: Math.floor(this.latY(this.bounds.getNorth(), t.z)),
                        maxX: Math.ceil(this.lngX(this.bounds.getEast(), t.z)),
                        maxY: Math.ceil(this.latY(this.bounds.getSouth(), t.z))
                    };
                    return t.x >= n.minX && t.x < n.maxX && t.y >= n.minY && t.y < n.maxY;
                }, TileBounds.prototype.lngX = function (t, n) {
                    return (t + 180) * (Math.pow(2, n) / 360);
                }, TileBounds.prototype.latY = function (t, n) {
                    var o = clamp(Math.sin(Math.PI / 180 * t), -0.9999, 0.9999), a = Math.pow(2, n) / (2 * Math.PI);
                    return Math.pow(2, n - 1) + 0.5 * Math.log((1 + o) / (1 - o)) * -a;
                }, module.exports = TileBounds;
            },
            {
                '../geo/lng_lat_bounds': 63,
                '../util/util': 275
            }
        ],
        114: [
            function (_dereq_, module, exports) {
                'use strict';
                function calculateKey(e, i, a, t) {
                    (e *= 2) < 0 && (e = -1 * e - 1);
                    var n = 1 << i;
                    return 32 * (n * n * e + n * t + a) + i;
                }
                function getQuadkey(e, i, a) {
                    for (var t, n = '', c = e; c > 0; c--) {
                        t = 1 << c - 1, n += (i & t ? 1 : 0) + (a & t ? 2 : 0);
                    }
                    return n;
                }
                var WhooTS = _dereq_('@mapbox/whoots-js'), ref = _dereq_('../util/web_worker_transfer'), register = ref.register, Coordinate = _dereq_('../geo/coordinate'), CanonicalTileID = function (e, i, a) {
                        this.z = e, this.x = i, this.y = a, this.key = calculateKey(0, e, i, a);
                    };
                CanonicalTileID.prototype.equals = function (e) {
                    return this.z === e.z && this.x === e.x && this.y === e.y;
                }, CanonicalTileID.prototype.url = function (e, i) {
                    var a = WhooTS.getTileBBox(this.x, this.y, this.z), t = getQuadkey(this.z, this.x, this.y);
                    return e[(this.x + this.y) % e.length].replace('{prefix}', (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace('{z}', String(this.z)).replace('{x}', String(this.x)).replace('{y}', String('tms' === i ? Math.pow(2, this.z) - this.y - 1 : this.y)).replace('{quadkey}', t).replace('{bbox-epsg-3857}', a);
                };
                var UnwrappedTileID = function (e, i) {
                        this.wrap = e, this.canonical = i, this.key = calculateKey(e, i.z, i.x, i.y);
                    }, OverscaledTileID = function (e, i, a, t, n) {
                        this.overscaledZ = e, this.wrap = i, this.canonical = new CanonicalTileID(a, +t, +n), this.key = calculateKey(i, e, t, n);
                    };
                OverscaledTileID.prototype.scaledTo = function (e) {
                    var i = this.canonical.z - e;
                    return e > this.canonical.z ? new OverscaledTileID(e, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y) : new OverscaledTileID(e, this.wrap, e, this.canonical.x >> i, this.canonical.y >> i);
                }, OverscaledTileID.prototype.isChildOf = function (e) {
                    var i = this.canonical.z - e.canonical.z;
                    return 0 === e.overscaledZ || e.overscaledZ < this.overscaledZ && e.canonical.x === this.canonical.x >> i && e.canonical.y === this.canonical.y >> i;
                }, OverscaledTileID.prototype.children = function (e) {
                    if (this.overscaledZ >= e) {
                        return [new OverscaledTileID(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y)];
                    }
                    var i = this.canonical.z + 1, a = 2 * this.canonical.x, t = 2 * this.canonical.y;
                    return [
                        new OverscaledTileID(i, this.wrap, i, a, t),
                        new OverscaledTileID(i, this.wrap, i, a + 1, t),
                        new OverscaledTileID(i, this.wrap, i, a, t + 1),
                        new OverscaledTileID(i, this.wrap, i, a + 1, t + 1)
                    ];
                }, OverscaledTileID.prototype.isLessThan = function (e) {
                    return this.wrap < e.wrap || !(this.wrap > e.wrap) && (this.overscaledZ < e.overscaledZ || !(this.overscaledZ > e.overscaledZ) && (this.canonical.x < e.canonical.x || !(this.canonical.x > e.canonical.x) && this.canonical.y < e.canonical.y));
                }, OverscaledTileID.prototype.wrapped = function () {
                    return new OverscaledTileID(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y);
                }, OverscaledTileID.prototype.overscaleFactor = function () {
                    return Math.pow(2, this.overscaledZ - this.canonical.z);
                }, OverscaledTileID.prototype.toUnwrapped = function () {
                    return new UnwrappedTileID(this.wrap, this.canonical);
                }, OverscaledTileID.prototype.toString = function () {
                    return this.overscaledZ + '/' + this.canonical.x + '/' + this.canonical.y;
                }, OverscaledTileID.prototype.toCoordinate = function () {
                    return new Coordinate(this.canonical.x + Math.pow(2, this.wrap), this.canonical.y, this.canonical.z);
                }, register('CanonicalTileID', CanonicalTileID), register('OverscaledTileID', OverscaledTileID, { omit: ['posMatrix'] }), module.exports = {
                    CanonicalTileID: CanonicalTileID,
                    OverscaledTileID: OverscaledTileID,
                    UnwrappedTileID: UnwrappedTileID
                };
            },
            {
                '../geo/coordinate': 61,
                '../util/web_worker_transfer': 278,
                '@mapbox/whoots-js': 12
            }
        ],
        115: [
            function (_dereq_, module, exports) {
                'use strict';
                var Evented = _dereq_('../util/evented'), util = _dereq_('../util/util'), loadTileJSON = _dereq_('./load_tilejson'), normalizeURL = _dereq_('../util/mapbox').normalizeTileURL, TileBounds = _dereq_('./tile_bounds'), ResourceType = _dereq_('../util/ajax').ResourceType, browser = _dereq_('../util/browser'), VectorTileSource = function (e) {
                        function t(t, i, o, r) {
                            if (e.call(this), this.id = t, this.dispatcher = o, this.type = 'vector', this.minzoom = 0, this.maxzoom = 22, this.scheme = 'xyz', this.tileSize = 512, this.reparseOverscaled = !0, this.isTileClipped = !0, util.extend(this, util.pick(i, [
                                    'url',
                                    'scheme',
                                    'tileSize'
                                ])), this._options = util.extend({ type: 'vector' }, i), this._collectResourceTiming = i.collectResourceTiming, 512 !== this.tileSize) {
                                throw new Error('vector tile sources must have a tileSize of 512');
                            }
                            this.setEventedParent(r);
                        }
                        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.load = function () {
                            var e = this;
                            this.fire('dataloading', { dataType: 'source' }), loadTileJSON(this._options, this.map._transformRequest, function (t, i) {
                                t ? e.fire('error', t) : i && (util.extend(e, i), i.bounds && (e.tileBounds = new TileBounds(i.bounds, e.minzoom, e.maxzoom)), e.fire('data', {
                                    dataType: 'source',
                                    sourceDataType: 'metadata'
                                }), e.fire('data', {
                                    dataType: 'source',
                                    sourceDataType: 'content'
                                }));
                            });
                        }, t.prototype.hasTile = function (e) {
                            return !this.tileBounds || this.tileBounds.contains(e.canonical);
                        }, t.prototype.onAdd = function (e) {
                            this.map = e, this.load();
                        }, t.prototype.serialize = function () {
                            return util.extend({}, this._options);
                        }, t.prototype.loadTile = function (e, t) {
                            function i(i, o) {
                                return e.aborted ? t(null) : i ? t(i) : (o && o.resourceTiming && (e.resourceTiming = o.resourceTiming), this.map._refreshExpiredTiles && e.setExpiryData(o), e.loadVectorData(o, this.map.painter), t(null), void (e.reloadCallback && (this.loadTile(e, e.reloadCallback), e.reloadCallback = null)));
                            }
                            var o = e.tileID.overscaleFactor(), r = normalizeURL(e.tileID.canonical.url(this.tiles, this.scheme), this.url), s = {
                                    request: this.map._transformRequest(r, ResourceType.Tile),
                                    uid: e.uid,
                                    tileID: e.tileID,
                                    zoom: e.tileID.overscaledZ,
                                    tileSize: this.tileSize * o,
                                    type: this.type,
                                    source: this.id,
                                    pixelRatio: browser.devicePixelRatio,
                                    overscaling: o,
                                    showCollisionBoxes: this.map.showCollisionBoxes
                                };
                            s.request.collectResourceTiming = this._collectResourceTiming, void 0 === e.workerID || 'expired' === e.state ? e.workerID = this.dispatcher.send('loadTile', s, i.bind(this)) : 'loading' === e.state ? e.reloadCallback = t : this.dispatcher.send('reloadTile', s, i.bind(this), e.workerID);
                        }, t.prototype.abortTile = function (e) {
                            this.dispatcher.send('abortTile', {
                                uid: e.uid,
                                type: this.type,
                                source: this.id
                            }, void 0, e.workerID);
                        }, t.prototype.unloadTile = function (e) {
                            e.unloadVectorData(), this.dispatcher.send('removeTile', {
                                uid: e.uid,
                                type: this.type,
                                source: this.id
                            }, void 0, e.workerID);
                        }, t.prototype.hasTransition = function () {
                            return !1;
                        }, t;
                    }(Evented);
                module.exports = VectorTileSource;
            },
            {
                '../util/ajax': 251,
                '../util/browser': 252,
                '../util/evented': 260,
                '../util/mapbox': 267,
                '../util/util': 275,
                './load_tilejson': 103,
                './tile_bounds': 113
            }
        ],
        116: [
            function (_dereq_, module, exports) {
                'use strict';
                function loadVectorTile(e, r) {
                    var o = ajax.getArrayBuffer(e.request, function (e, o) {
                        e ? r(e) : o && r(null, {
                            vectorTile: new vt.VectorTile(new Protobuf(o.data)),
                            rawData: o.data,
                            cacheControl: o.cacheControl,
                            expires: o.expires
                        });
                    });
                    return function () {
                        o.abort(), r();
                    };
                }
                var ajax = _dereq_('../util/ajax'), vt = _dereq_('@mapbox/vector-tile'), Protobuf = _dereq_('pbf'), WorkerTile = _dereq_('./worker_tile'), util = _dereq_('../util/util'), perf = _dereq_('../util/performance'), VectorTileWorkerSource = function (e, r, o) {
                        this.actor = e, this.layerIndex = r, this.loadVectorData = o || loadVectorTile, this.loading = {}, this.loaded = {};
                    };
                VectorTileWorkerSource.prototype.loadTile = function (e, r) {
                    var o = this, t = e.source, i = e.uid;
                    this.loading[t] || (this.loading[t] = {});
                    var a = this.loading[t][i] = new WorkerTile(e);
                    a.abort = this.loadVectorData(e, function (l, c) {
                        if (delete o.loading[t][i], l || !c) {
                            return r(l);
                        }
                        var s = c.rawData, n = {};
                        c.expires && (n.expires = c.expires), c.cacheControl && (n.cacheControl = c.cacheControl);
                        var u = {};
                        if (e.request && e.request.collectResourceTiming) {
                            var d = perf.getEntriesByName(e.request.url);
                            d && (u.resourceTiming = JSON.parse(JSON.stringify(d)));
                        }
                        a.vectorTile = c.vectorTile, a.parse(c.vectorTile, o.layerIndex, o.actor, function (e, o) {
                            if (e || !o) {
                                return r(e);
                            }
                            r(null, util.extend({ rawTileData: s.slice(0) }, o, n, u));
                        }), o.loaded[t] = o.loaded[t] || {}, o.loaded[t][i] = a;
                    });
                }, VectorTileWorkerSource.prototype.reloadTile = function (e, r) {
                    function o(e, o) {
                        if (this.reloadCallback) {
                            var t = this.reloadCallback;
                            delete this.reloadCallback, this.parse(this.vectorTile, a.layerIndex, a.actor, t);
                        }
                        r(e, o);
                    }
                    var t = this.loaded[e.source], i = e.uid, a = this;
                    if (t && t[i]) {
                        var l = t[i];
                        l.showCollisionBoxes = e.showCollisionBoxes, 'parsing' === l.status ? l.reloadCallback = r : 'done' === l.status && l.parse(l.vectorTile, this.layerIndex, this.actor, o.bind(l));
                    }
                }, VectorTileWorkerSource.prototype.abortTile = function (e, r) {
                    var o = this.loading[e.source], t = e.uid;
                    o && o[t] && o[t].abort && (o[t].abort(), delete o[t]), r();
                }, VectorTileWorkerSource.prototype.removeTile = function (e, r) {
                    var o = this.loaded[e.source], t = e.uid;
                    o && o[t] && delete o[t], r();
                }, module.exports = VectorTileWorkerSource;
            },
            {
                '../util/ajax': 251,
                '../util/performance': 268,
                '../util/util': 275,
                './worker_tile': 119,
                '@mapbox/vector-tile': 8,
                'pbf': 30
            }
        ],
        117: [
            function (_dereq_, module, exports) {
                'use strict';
                var ajax = _dereq_('../util/ajax'), ImageSource = _dereq_('./image_source'), rasterBoundsAttributes = _dereq_('../data/raster_bounds_attributes'), VertexArrayObject = _dereq_('../render/vertex_array_object'), Texture = _dereq_('../render/texture'), VideoSource = function (e) {
                        function t(t, r, i, o) {
                            e.call(this, t, r, i, o), this.roundZoom = !0, this.type = 'video', this.options = r;
                        }
                        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.load = function () {
                            var e = this, t = this.options;
                            this.urls = t.urls, ajax.getVideo(t.urls, function (t, r) {
                                t ? e.fire('error', { error: t }) : r && (e.video = r, e.video.loop = !0, e.video.addEventListener('playing', function () {
                                    e.map._rerender();
                                }), e.map && e.video.play(), e._finishLoading());
                            });
                        }, t.prototype.getVideo = function () {
                            return this.video;
                        }, t.prototype.onAdd = function (e) {
                            this.map || (this.map = e, this.load(), this.video && (this.video.play(), this.setCoordinates(this.coordinates)));
                        }, t.prototype.prepare = function () {
                            var e = this;
                            if (!(0 === Object.keys(this.tiles).length || this.video.readyState < 2)) {
                                var t = this.map.painter.context, r = t.gl;
                                this.boundsBuffer || (this.boundsBuffer = t.createVertexBuffer(this._boundsArray, rasterBoundsAttributes.members)), this.boundsVAO || (this.boundsVAO = new VertexArrayObject()), this.texture ? this.video.paused || (this.texture.bind(r.LINEAR, r.CLAMP_TO_EDGE), r.texSubImage2D(r.TEXTURE_2D, 0, 0, 0, r.RGBA, r.UNSIGNED_BYTE, this.video)) : (this.texture = new Texture(t, this.video, r.RGBA), this.texture.bind(r.LINEAR, r.CLAMP_TO_EDGE));
                                for (var i in e.tiles) {
                                    var o = e.tiles[i];
                                    'loaded' !== o.state && (o.state = 'loaded', o.texture = e.texture);
                                }
                            }
                        }, t.prototype.serialize = function () {
                            return {
                                type: 'video',
                                urls: this.urls,
                                coordinates: this.coordinates
                            };
                        }, t.prototype.hasTransition = function () {
                            return this.video && !this.video.paused;
                        }, t;
                    }(ImageSource);
                module.exports = VideoSource;
            },
            {
                '../data/raster_bounds_attributes': 59,
                '../render/texture': 93,
                '../render/vertex_array_object': 95,
                '../util/ajax': 251,
                './image_source': 102
            }
        ],
        118: [
            function (_dereq_, module, exports) {
                'use strict';
                var Actor = _dereq_('../util/actor'), StyleLayerIndex = _dereq_('../style/style_layer_index'), VectorTileWorkerSource = _dereq_('./vector_tile_worker_source'), RasterDEMTileWorkerSource = _dereq_('./raster_dem_tile_worker_source'), GeoJSONWorkerSource = _dereq_('./geojson_worker_source'), globalRTLTextPlugin = _dereq_('./rtl_text_plugin'), Worker = function (e) {
                        var r = this;
                        this.self = e, this.actor = new Actor(e, this), this.layerIndexes = {}, this.workerSourceTypes = {
                            vector: VectorTileWorkerSource,
                            geojson: GeoJSONWorkerSource
                        }, this.workerSources = {}, this.demWorkerSources = {}, this.self.registerWorkerSource = function (e, o) {
                            if (r.workerSourceTypes[e]) {
                                throw new Error('Worker source with name "' + e + '" already registered.');
                            }
                            r.workerSourceTypes[e] = o;
                        }, this.self.registerRTLTextPlugin = function (e) {
                            if (globalRTLTextPlugin.applyArabicShaping || globalRTLTextPlugin.processBidirectionalText) {
                                throw new Error('RTL text plugin already registered.');
                            }
                            globalRTLTextPlugin.applyArabicShaping = e.applyArabicShaping, globalRTLTextPlugin.processBidirectionalText = e.processBidirectionalText;
                        };
                    };
                Worker.prototype.setLayers = function (e, r, o) {
                    this.getLayerIndex(e).replace(r), o();
                }, Worker.prototype.updateLayers = function (e, r, o) {
                    this.getLayerIndex(e).update(r.layers, r.removedIds), o();
                }, Worker.prototype.loadTile = function (e, r, o) {
                    this.getWorkerSource(e, r.type).loadTile(r, o);
                }, Worker.prototype.loadDEMTile = function (e, r, o) {
                    this.getDEMWorkerSource(e).loadTile(r, o);
                }, Worker.prototype.reloadTile = function (e, r, o) {
                    this.getWorkerSource(e, r.type).reloadTile(r, o);
                }, Worker.prototype.abortTile = function (e, r, o) {
                    this.getWorkerSource(e, r.type).abortTile(r, o);
                }, Worker.prototype.removeTile = function (e, r, o) {
                    this.getWorkerSource(e, r.type).removeTile(r, o);
                }, Worker.prototype.removeDEMTile = function (e, r) {
                    this.getDEMWorkerSource(e).removeTile(r);
                }, Worker.prototype.removeSource = function (e, r, o) {
                    var t = this.getWorkerSource(e, r.type);
                    void 0 !== t.removeSource ? t.removeSource(r, o) : o();
                }, Worker.prototype.loadWorkerSource = function (e, r, o) {
                    try {
                        this.self.importScripts(r.url), o();
                    } catch (e) {
                        o(e);
                    }
                }, Worker.prototype.loadRTLTextPlugin = function (e, r, o) {
                    try {
                        globalRTLTextPlugin.applyArabicShaping || globalRTLTextPlugin.processBidirectionalText || (this.self.importScripts(r), globalRTLTextPlugin.applyArabicShaping && globalRTLTextPlugin.processBidirectionalText || o(new Error('RTL Text Plugin failed to import scripts from ' + r)));
                    } catch (e) {
                        o(e);
                    }
                }, Worker.prototype.getLayerIndex = function (e) {
                    var r = this.layerIndexes[e];
                    return r || (r = this.layerIndexes[e] = new StyleLayerIndex()), r;
                }, Worker.prototype.getWorkerSource = function (e, r) {
                    var o = this;
                    if (this.workerSources[e] || (this.workerSources[e] = {}), !this.workerSources[e][r]) {
                        var t = {
                            send: function (r, t, i) {
                                o.actor.send(r, t, i, e);
                            }
                        };
                        this.workerSources[e][r] = new this.workerSourceTypes[r](t, this.getLayerIndex(e));
                    }
                    return this.workerSources[e][r];
                }, Worker.prototype.getDEMWorkerSource = function (e) {
                    return this.demWorkerSources[e] || (this.demWorkerSources[e] = new RasterDEMTileWorkerSource()), this.demWorkerSources[e];
                }, module.exports = function (e) {
                    return new Worker(e);
                };
            },
            {
                '../style/style_layer_index': 210,
                '../util/actor': 250,
                './geojson_worker_source': 100,
                './raster_dem_tile_worker_source': 107,
                './rtl_text_plugin': 109,
                './vector_tile_worker_source': 116
            }
        ],
        119: [
            function (_dereq_, module, exports) {
                'use strict';
                function recalculateLayers(e, r) {
                    for (var i = new EvaluationParameters(r), o = 0, a = e; o < a.length; o += 1) {
                        a[o].recalculate(i);
                    }
                }
                var FeatureIndex = _dereq_('../data/feature_index'), ref = _dereq_('../symbol/symbol_layout'), performSymbolLayout = ref.performSymbolLayout, ref$1 = _dereq_('../data/array_types'), CollisionBoxArray = ref$1.CollisionBoxArray, DictionaryCoder = _dereq_('../util/dictionary_coder'), SymbolBucket = _dereq_('../data/bucket/symbol_bucket'), util = _dereq_('../util/util'), ref$2 = _dereq_('../render/image_atlas'), makeImageAtlas = ref$2.makeImageAtlas, ref$3 = _dereq_('../render/glyph_atlas'), makeGlyphAtlas = ref$3.makeGlyphAtlas, EvaluationParameters = _dereq_('../style/evaluation_parameters'), ref$4 = _dereq_('./tile_id'), OverscaledTileID = ref$4.OverscaledTileID, WorkerTile = function (e) {
                        this.tileID = new OverscaledTileID(e.tileID.overscaledZ, e.tileID.wrap, e.tileID.canonical.z, e.tileID.canonical.x, e.tileID.canonical.y), this.uid = e.uid, this.zoom = e.zoom, this.pixelRatio = e.pixelRatio, this.tileSize = e.tileSize, this.source = e.source, this.overscaling = e.overscaling, this.showCollisionBoxes = e.showCollisionBoxes, this.collectResourceTiming = !!e.collectResourceTiming;
                    };
                WorkerTile.prototype.parse = function (e, r, i, o) {
                    function a() {
                        var e = this;
                        if (k) {
                            return o(k);
                        }
                        if (b && D) {
                            var r = makeGlyphAtlas(b), i = makeImageAtlas(D);
                            for (var a in n) {
                                var t = n[a];
                                t instanceof SymbolBucket && (recalculateLayers(t.layers, e.zoom), performSymbolLayout(t, b, r.positions, D, i.positions, e.showCollisionBoxes));
                            }
                            this.status = 'done', o(null, {
                                buckets: util.values(n).filter(function (e) {
                                    return !e.isEmpty();
                                }),
                                featureIndex: s,
                                collisionBoxArray: this.collisionBoxArray,
                                glyphAtlasImage: r.image,
                                iconAtlasImage: i.image
                            });
                        }
                    }
                    var t = this;
                    this.status = 'parsing', this.data = e, this.collisionBoxArray = new CollisionBoxArray();
                    var l = new DictionaryCoder(Object.keys(e.layers).sort()), s = new FeatureIndex(this.tileID, this.overscaling);
                    s.bucketLayerIDs = [];
                    var n = {}, c = {
                            featureIndex: s,
                            iconDependencies: {},
                            glyphDependencies: {}
                        }, u = r.familiesBySource[this.source];
                    for (var m in u) {
                        var y = e.layers[m];
                        if (y) {
                            1 === y.version && util.warnOnce('Vector tile source "' + t.source + '" layer "' + m + '" does not use vector tile spec v2 and therefore may have some rendering errors.');
                            for (var h = l.encode(m), d = [], f = 0; f < y.length; f++) {
                                var p = y.feature(f);
                                d.push({
                                    feature: p,
                                    index: f,
                                    sourceLayerIndex: h
                                });
                            }
                            for (var v = 0, g = u[m]; v < g.length; v += 1) {
                                var x = g[v], I = x[0];
                                if (!(I.minzoom && t.zoom < Math.floor(I.minzoom)) && (!(I.maxzoom && t.zoom >= I.maxzoom) && 'none' !== I.visibility)) {
                                    recalculateLayers(x, t.zoom);
                                    (n[I.id] = I.createBucket({
                                        index: s.bucketLayerIDs.length,
                                        layers: x,
                                        zoom: t.zoom,
                                        pixelRatio: t.pixelRatio,
                                        overscaling: t.overscaling,
                                        collisionBoxArray: t.collisionBoxArray
                                    })).populate(d, c), s.bucketLayerIDs.push(x.map(function (e) {
                                        return e.id;
                                    }));
                                }
                            }
                        }
                    }
                    var k, b, D, A = util.mapObject(c.glyphDependencies, function (e) {
                            return Object.keys(e).map(Number);
                        });
                    Object.keys(A).length ? i.send('getGlyphs', {
                        uid: this.uid,
                        stacks: A
                    }, function (e, r) {
                        k || (k = e, b = r, a.call(t));
                    }) : b = {};
                    var z = Object.keys(c.iconDependencies);
                    z.length ? i.send('getImages', { icons: z }, function (e, r) {
                        k || (k = e, D = r, a.call(t));
                    }) : D = {}, a.call(this);
                }, module.exports = WorkerTile;
            },
            {
                '../data/array_types': 39,
                '../data/bucket/symbol_bucket': 51,
                '../data/feature_index': 54,
                '../render/glyph_atlas': 85,
                '../render/image_atlas': 87,
                '../style/evaluation_parameters': 182,
                '../symbol/symbol_layout': 227,
                '../util/dictionary_coder': 257,
                '../util/util': 275,
                './tile_id': 114
            }
        ],
        120: [
            function (_dereq_, module, exports) {
                'use strict';
                function deref(r, e) {
                    var f = {};
                    for (var t in r) {
                        'ref' !== t && (f[t] = r[t]);
                    }
                    return refProperties.forEach(function (r) {
                        r in e && (f[r] = e[r]);
                    }), f;
                }
                function derefLayers(r) {
                    r = r.slice();
                    for (var e = Object.create(null), f = 0; f < r.length; f++) {
                        e[r[f].id] = r[f];
                    }
                    for (var t = 0; t < r.length; t++) {
                        'ref' in r[t] && (r[t] = deref(r[t], e[r[t].ref]));
                    }
                    return r;
                }
                var refProperties = _dereq_('./util/ref_properties');
                module.exports = derefLayers;
            },
            { './util/ref_properties': 159 }
        ],
        121: [
            function (_dereq_, module, exports) {
                'use strict';
                function addSource(e, r, o) {
                    o.push({
                        command: operations.addSource,
                        args: [
                            e,
                            r[e]
                        ]
                    });
                }
                function removeSource(e, r, o) {
                    r.push({
                        command: operations.removeSource,
                        args: [e]
                    }), o[e] = !0;
                }
                function updateSource(e, r, o, a) {
                    removeSource(e, o, a), addSource(e, r, o);
                }
                function canUpdateGeoJSON(e, r, o) {
                    var a;
                    for (a in e[o]) {
                        if (e[o].hasOwnProperty(a) && 'data' !== a && !isEqual(e[o][a], r[o][a])) {
                            return !1;
                        }
                    }
                    for (a in r[o]) {
                        if (r[o].hasOwnProperty(a) && 'data' !== a && !isEqual(e[o][a], r[o][a])) {
                            return !1;
                        }
                    }
                    return !0;
                }
                function diffSources(e, r, o, a) {
                    e = e || {}, r = r || {};
                    var t;
                    for (t in e) {
                        e.hasOwnProperty(t) && (r.hasOwnProperty(t) || removeSource(t, o, a));
                    }
                    for (t in r) {
                        r.hasOwnProperty(t) && (e.hasOwnProperty(t) ? isEqual(e[t], r[t]) || ('geojson' === e[t].type && 'geojson' === r[t].type && canUpdateGeoJSON(e, r, t) ? o.push({
                            command: operations.setGeoJSONSourceData,
                            args: [
                                t,
                                r[t].data
                            ]
                        }) : updateSource(t, r, o, a)) : addSource(t, r, o));
                    }
                }
                function diffLayerPropertyChanges(e, r, o, a, t, s) {
                    e = e || {}, r = r || {};
                    var n;
                    for (n in e) {
                        e.hasOwnProperty(n) && (isEqual(e[n], r[n]) || o.push({
                            command: s,
                            args: [
                                a,
                                n,
                                r[n],
                                t
                            ]
                        }));
                    }
                    for (n in r) {
                        r.hasOwnProperty(n) && !e.hasOwnProperty(n) && (isEqual(e[n], r[n]) || o.push({
                            command: s,
                            args: [
                                a,
                                n,
                                r[n],
                                t
                            ]
                        }));
                    }
                }
                function pluckId(e) {
                    return e.id;
                }
                function indexById(e, r) {
                    return e[r.id] = r, e;
                }
                function diffLayers(e, r, o) {
                    e = e || [], r = r || [];
                    var a, t, s, n, i, p, u, m = e.map(pluckId), c = r.map(pluckId), l = e.reduce(indexById, {}), d = r.reduce(indexById, {}), y = m.slice(), h = Object.create(null);
                    for (a = 0, t = 0; a < m.length; a++) {
                        s = m[a], d.hasOwnProperty(s) ? t++ : (o.push({
                            command: operations.removeLayer,
                            args: [s]
                        }), y.splice(y.indexOf(s, t), 1));
                    }
                    for (a = 0, t = 0; a < c.length; a++) {
                        s = c[c.length - 1 - a], y[y.length - 1 - a] !== s && (l.hasOwnProperty(s) ? (o.push({
                            command: operations.removeLayer,
                            args: [s]
                        }), y.splice(y.lastIndexOf(s, y.length - t), 1)) : t++, p = y[y.length - a], o.push({
                            command: operations.addLayer,
                            args: [
                                d[s],
                                p
                            ]
                        }), y.splice(y.length - a, 0, s), h[s] = !0);
                    }
                    for (a = 0; a < c.length; a++) {
                        if (s = c[a], n = l[s], i = d[s], !h[s] && !isEqual(n, i)) {
                            if (isEqual(n.source, i.source) && isEqual(n['source-layer'], i['source-layer']) && isEqual(n.type, i.type)) {
                                diffLayerPropertyChanges(n.layout, i.layout, o, s, null, operations.setLayoutProperty), diffLayerPropertyChanges(n.paint, i.paint, o, s, null, operations.setPaintProperty), isEqual(n.filter, i.filter) || o.push({
                                    command: operations.setFilter,
                                    args: [
                                        s,
                                        i.filter
                                    ]
                                }), isEqual(n.minzoom, i.minzoom) && isEqual(n.maxzoom, i.maxzoom) || o.push({
                                    command: operations.setLayerZoomRange,
                                    args: [
                                        s,
                                        i.minzoom,
                                        i.maxzoom
                                    ]
                                });
                                for (u in n) {
                                    n.hasOwnProperty(u) && 'layout' !== u && 'paint' !== u && 'filter' !== u && 'metadata' !== u && 'minzoom' !== u && 'maxzoom' !== u && (0 === u.indexOf('paint.') ? diffLayerPropertyChanges(n[u], i[u], o, s, u.slice(6), operations.setPaintProperty) : isEqual(n[u], i[u]) || o.push({
                                        command: operations.setLayerProperty,
                                        args: [
                                            s,
                                            u,
                                            i[u]
                                        ]
                                    }));
                                }
                                for (u in i) {
                                    i.hasOwnProperty(u) && !n.hasOwnProperty(u) && 'layout' !== u && 'paint' !== u && 'filter' !== u && 'metadata' !== u && 'minzoom' !== u && 'maxzoom' !== u && (0 === u.indexOf('paint.') ? diffLayerPropertyChanges(n[u], i[u], o, s, u.slice(6), operations.setPaintProperty) : isEqual(n[u], i[u]) || o.push({
                                        command: operations.setLayerProperty,
                                        args: [
                                            s,
                                            u,
                                            i[u]
                                        ]
                                    }));
                                }
                            } else {
                                o.push({
                                    command: operations.removeLayer,
                                    args: [s]
                                }), p = y[y.lastIndexOf(s) + 1], o.push({
                                    command: operations.addLayer,
                                    args: [
                                        i,
                                        p
                                    ]
                                });
                            }
                        }
                    }
                }
                function diffStyles(e, r) {
                    if (!e) {
                        return [{
                                command: operations.setStyle,
                                args: [r]
                            }];
                    }
                    var o = [];
                    try {
                        if (!isEqual(e.version, r.version)) {
                            return [{
                                    command: operations.setStyle,
                                    args: [r]
                                }];
                        }
                        isEqual(e.center, r.center) || o.push({
                            command: operations.setCenter,
                            args: [r.center]
                        }), isEqual(e.zoom, r.zoom) || o.push({
                            command: operations.setZoom,
                            args: [r.zoom]
                        }), isEqual(e.bearing, r.bearing) || o.push({
                            command: operations.setBearing,
                            args: [r.bearing]
                        }), isEqual(e.pitch, r.pitch) || o.push({
                            command: operations.setPitch,
                            args: [r.pitch]
                        }), isEqual(e.sprite, r.sprite) || o.push({
                            command: operations.setSprite,
                            args: [r.sprite]
                        }), isEqual(e.glyphs, r.glyphs) || o.push({
                            command: operations.setGlyphs,
                            args: [r.glyphs]
                        }), isEqual(e.transition, r.transition) || o.push({
                            command: operations.setTransition,
                            args: [r.transition]
                        }), isEqual(e.light, r.light) || o.push({
                            command: operations.setLight,
                            args: [r.light]
                        });
                        var a = {}, t = [];
                        diffSources(e.sources, r.sources, t, a);
                        var s = [];
                        e.layers && e.layers.forEach(function (e) {
                            a[e.source] ? o.push({
                                command: operations.removeLayer,
                                args: [e.id]
                            }) : s.push(e);
                        }), o = o.concat(t), diffLayers(s, r.layers, o);
                    } catch (e) {
                        console.warn('Unable to compute style diff:', e), o = [{
                                command: operations.setStyle,
                                args: [r]
                            }];
                    }
                    return o;
                }
                var isEqual = _dereq_('./util/deep_equal'), operations = {
                        setStyle: 'setStyle',
                        addLayer: 'addLayer',
                        removeLayer: 'removeLayer',
                        setPaintProperty: 'setPaintProperty',
                        setLayoutProperty: 'setLayoutProperty',
                        setFilter: 'setFilter',
                        addSource: 'addSource',
                        removeSource: 'removeSource',
                        setGeoJSONSourceData: 'setGeoJSONSourceData',
                        setLayerZoomRange: 'setLayerZoomRange',
                        setLayerProperty: 'setLayerProperty',
                        setCenter: 'setCenter',
                        setZoom: 'setZoom',
                        setBearing: 'setBearing',
                        setPitch: 'setPitch',
                        setSprite: 'setSprite',
                        setGlyphs: 'setGlyphs',
                        setTransition: 'setTransition',
                        setLight: 'setLight'
                    };
                module.exports = diffStyles, module.exports.operations = operations;
            },
            { './util/deep_equal': 155 }
        ],
        122: [
            function (_dereq_, module, exports) {
                'use strict';
                function ValidationError(i, e, l) {
                    this.message = (i ? i + ': ' : '') + l, null !== e && void 0 !== e && e.__line__ && (this.line = e.__line__);
                }
                module.exports = ValidationError;
            },
            {}
        ],
        123: [
            function (_dereq_, module, exports) {
                'use strict';
                function varargs(r) {
                    return { type: r };
                }
                function stringifySignature(r) {
                    return Array.isArray(r) ? '(' + r.map(toString).join(', ') + ')' : '(' + toString(r.type) + '...)';
                }
                var ref = _dereq_('./types'), toString = ref.toString, ParsingContext = _dereq_('./parsing_context'), EvaluationContext = _dereq_('./evaluation_context'), CompoundExpression = function (r, e, n, t) {
                        this.name = r, this.type = e, this._evaluate = n, this.args = t;
                    };
                CompoundExpression.prototype.evaluate = function (r) {
                    return this._evaluate(r, this.args);
                }, CompoundExpression.prototype.eachChild = function (r) {
                    this.args.forEach(r);
                }, CompoundExpression.prototype.possibleOutputs = function () {
                    return [void 0];
                }, CompoundExpression.parse = function (r, e) {
                    var n = r[0], t = CompoundExpression.definitions[n];
                    if (!t) {
                        return e.error('Unknown expression "' + n + '". If you wanted a literal array, use ["literal", [...]].', 0);
                    }
                    for (var o = Array.isArray(t) ? t[0] : t.type, i = Array.isArray(t) ? [[
                                    t[1],
                                    t[2]
                                ]] : t.overloads, s = i.filter(function (e) {
                                var n = e[0];
                                return !Array.isArray(n) || n.length === r.length - 1;
                            }), a = [], u = 1; u < r.length; u++) {
                        var p = r[u], l = void 0;
                        if (1 === s.length) {
                            var g = s[0][0];
                            l = Array.isArray(g) ? g[u - 1] : g.type;
                        }
                        var y = e.parse(p, 1 + a.length, l);
                        if (!y) {
                            return null;
                        }
                        a.push(y);
                    }
                    for (var f = null, h = 0, d = s; h < d.length; h += 1) {
                        var v = d[h], c = v[0], x = v[1];
                        if (f = new ParsingContext(e.registry, e.path, null, e.scope), Array.isArray(c) && c.length !== a.length) {
                            f.error('Expected ' + c.length + ' arguments, but found ' + a.length + ' instead.');
                        } else {
                            for (var m = 0; m < a.length; m++) {
                                var C = Array.isArray(c) ? c[m] : c.type, E = a[m];
                                f.concat(m + 1).checkSubtype(C, E.type);
                            }
                            if (0 === f.errors.length) {
                                return new CompoundExpression(n, o, x, a);
                            }
                        }
                    }
                    if (1 === s.length) {
                        e.errors.push.apply(e.errors, f.errors);
                    } else {
                        var A = s.length ? s : i, S = A.map(function (r) {
                                return stringifySignature(r[0]);
                            }).join(' | '), b = a.map(function (r) {
                                return toString(r.type);
                            }).join(', ');
                        e.error('Expected arguments of type ' + S + ', but found (' + b + ') instead.');
                    }
                    return null;
                }, CompoundExpression.register = function (r, e) {
                    CompoundExpression.definitions = e;
                    for (var n in e) {
                        r[n] = CompoundExpression;
                    }
                }, module.exports = {
                    CompoundExpression: CompoundExpression,
                    varargs: varargs
                };
            },
            {
                './evaluation_context': 138,
                './parsing_context': 141,
                './types': 146
            }
        ],
        124: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../types'), toString = ref.toString, array = ref.array, ValueType = ref.ValueType, StringType = ref.StringType, NumberType = ref.NumberType, BooleanType = ref.BooleanType, checkSubtype = ref.checkSubtype, ref$1 = _dereq_('../values'), typeOf = ref$1.typeOf, RuntimeError = _dereq_('../runtime_error'), types = {
                        string: StringType,
                        number: NumberType,
                        boolean: BooleanType
                    }, ArrayAssertion = function (e, r) {
                        this.type = e, this.input = r;
                    };
                ArrayAssertion.parse = function (e, r) {
                    if (e.length < 2 || e.length > 4) {
                        return r.error('Expected 1, 2, or 3 arguments, but found ' + (e.length - 1) + ' instead.');
                    }
                    var t, n;
                    if (e.length > 2) {
                        var i = e[1];
                        if ('string' != typeof i || !(i in types)) {
                            return r.error('The item type argument of "array" must be one of string, number, boolean', 1);
                        }
                        t = types[i];
                    } else {
                        t = ValueType;
                    }
                    if (e.length > 3) {
                        if ('number' != typeof e[2] || e[2] < 0 || e[2] !== Math.floor(e[2])) {
                            return r.error('The length argument to "array" must be a positive integer literal', 2);
                        }
                        n = e[2];
                    }
                    var o = array(t, n), u = r.parse(e[e.length - 1], e.length - 1, ValueType);
                    return u ? new ArrayAssertion(o, u) : null;
                }, ArrayAssertion.prototype.evaluate = function (e) {
                    var r = this.input.evaluate(e);
                    if (checkSubtype(this.type, typeOf(r))) {
                        throw new RuntimeError('Expected value to be of type ' + toString(this.type) + ', but found ' + toString(typeOf(r)) + ' instead.');
                    }
                    return r;
                }, ArrayAssertion.prototype.eachChild = function (e) {
                    e(this.input);
                }, ArrayAssertion.prototype.possibleOutputs = function () {
                    return this.input.possibleOutputs();
                }, module.exports = ArrayAssertion;
            },
            {
                '../runtime_error': 143,
                '../types': 146,
                '../values': 147
            }
        ],
        125: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../types'), ObjectType = ref.ObjectType, ValueType = ref.ValueType, StringType = ref.StringType, NumberType = ref.NumberType, BooleanType = ref.BooleanType, RuntimeError = _dereq_('../runtime_error'), ref$1 = _dereq_('../types'), checkSubtype = ref$1.checkSubtype, toString = ref$1.toString, ref$2 = _dereq_('../values'), typeOf = ref$2.typeOf, types = {
                        string: StringType,
                        number: NumberType,
                        boolean: BooleanType,
                        object: ObjectType
                    }, Assertion = function (e, r) {
                        this.type = e, this.args = r;
                    };
                Assertion.parse = function (e, r) {
                    if (e.length < 2) {
                        return r.error('Expected at least one argument.');
                    }
                    for (var t = e[0], n = types[t], o = [], p = 1; p < e.length; p++) {
                        var s = r.parse(e[p], p, ValueType);
                        if (!s) {
                            return null;
                        }
                        o.push(s);
                    }
                    return new Assertion(n, o);
                }, Assertion.prototype.evaluate = function (e) {
                    for (var r = this, t = 0; t < this.args.length; t++) {
                        var n = r.args[t].evaluate(e);
                        if (!checkSubtype(r.type, typeOf(n))) {
                            return n;
                        }
                        if (t === r.args.length - 1) {
                            throw new RuntimeError('Expected value to be of type ' + toString(r.type) + ', but found ' + toString(typeOf(n)) + ' instead.');
                        }
                    }
                    return null;
                }, Assertion.prototype.eachChild = function (e) {
                    this.args.forEach(e);
                }, Assertion.prototype.possibleOutputs = function () {
                    return (e = []).concat.apply(e, this.args.map(function (e) {
                        return e.possibleOutputs();
                    }));
                    var e;
                }, module.exports = Assertion;
            },
            {
                '../runtime_error': 143,
                '../types': 146,
                '../values': 147
            }
        ],
        126: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../types'), array = ref.array, ValueType = ref.ValueType, NumberType = ref.NumberType, RuntimeError = _dereq_('../runtime_error'), At = function (e, t, r) {
                        this.type = e, this.index = t, this.input = r;
                    };
                At.parse = function (e, t) {
                    if (3 !== e.length) {
                        return t.error('Expected 2 arguments, but found ' + (e.length - 1) + ' instead.');
                    }
                    var r = t.parse(e[1], 1, NumberType), n = t.parse(e[2], 2, array(t.expectedType || ValueType));
                    if (!r || !n) {
                        return null;
                    }
                    var u = n.type;
                    return new At(u.itemType, r, n);
                }, At.prototype.evaluate = function (e) {
                    var t = this.index.evaluate(e), r = this.input.evaluate(e);
                    if (t < 0 || t >= r.length) {
                        throw new RuntimeError('Array index out of bounds: ' + t + ' > ' + r.length + '.');
                    }
                    if (t !== Math.floor(t)) {
                        throw new RuntimeError('Array index must be an integer, but found ' + t + ' instead.');
                    }
                    return r[t];
                }, At.prototype.eachChild = function (e) {
                    e(this.index), e(this.input);
                }, At.prototype.possibleOutputs = function () {
                    return [void 0];
                }, module.exports = At;
            },
            {
                '../runtime_error': 143,
                '../types': 146
            }
        ],
        127: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../types'), BooleanType = ref.BooleanType, Case = function (e, t, r) {
                        this.type = e, this.branches = t, this.otherwise = r;
                    };
                Case.parse = function (e, t) {
                    if (e.length < 4) {
                        return t.error('Expected at least 3 arguments, but found only ' + (e.length - 1) + '.');
                    }
                    if (e.length % 2 != 0) {
                        return t.error('Expected an odd number of arguments.');
                    }
                    var r;
                    t.expectedType && 'value' !== t.expectedType.kind && (r = t.expectedType);
                    for (var n = [], a = 1; a < e.length - 1; a += 2) {
                        var s = t.parse(e[a], a, BooleanType);
                        if (!s) {
                            return null;
                        }
                        var o = t.parse(e[a + 1], a + 1, r);
                        if (!o) {
                            return null;
                        }
                        n.push([
                            s,
                            o
                        ]), r = r || o.type;
                    }
                    var u = t.parse(e[e.length - 1], e.length - 1, r);
                    return u ? new Case(r, n, u) : null;
                }, Case.prototype.evaluate = function (e) {
                    for (var t = this, r = 0, n = t.branches; r < n.length; r += 1) {
                        var a = n[r], s = a[0], o = a[1];
                        if (s.evaluate(e)) {
                            return o.evaluate(e);
                        }
                    }
                    return this.otherwise.evaluate(e);
                }, Case.prototype.eachChild = function (e) {
                    for (var t = this, r = 0, n = t.branches; r < n.length; r += 1) {
                        var a = n[r], s = a[0], o = a[1];
                        e(s), e(o);
                    }
                    e(this.otherwise);
                }, Case.prototype.possibleOutputs = function () {
                    return (e = []).concat.apply(e, this.branches.map(function (e) {
                        e[0];
                        return e[1].possibleOutputs();
                    })).concat(this.otherwise.possibleOutputs());
                    var e;
                }, module.exports = Case;
            },
            { '../types': 146 }
        ],
        128: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../types'), checkSubtype = ref.checkSubtype, ValueType = ref.ValueType, Coalesce = function (e, t) {
                        this.type = e, this.args = t;
                    };
                Coalesce.parse = function (e, t) {
                    if (e.length < 2) {
                        return t.error('Expectected at least one argument.');
                    }
                    var r = null, a = t.expectedType;
                    a && 'value' !== a.kind && (r = a);
                    for (var n = [], o = 0, u = e.slice(1); o < u.length; o += 1) {
                        var s = u[o], l = t.parse(s, 1 + n.length, r, void 0, { omitTypeAnnotations: !0 });
                        if (!l) {
                            return null;
                        }
                        r = r || l.type, n.push(l);
                    }
                    return a && n.some(function (e) {
                        return checkSubtype(a, e.type);
                    }) ? new Coalesce(ValueType, n) : new Coalesce(r, n);
                }, Coalesce.prototype.evaluate = function (e) {
                    for (var t = this, r = null, a = 0, n = t.args; a < n.length; a += 1) {
                        if (null !== (r = n[a].evaluate(e))) {
                            break;
                        }
                    }
                    return r;
                }, Coalesce.prototype.eachChild = function (e) {
                    this.args.forEach(e);
                }, Coalesce.prototype.possibleOutputs = function () {
                    return (e = []).concat.apply(e, this.args.map(function (e) {
                        return e.possibleOutputs();
                    }));
                    var e;
                }, module.exports = Coalesce;
            },
            { '../types': 146 }
        ],
        129: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../types'), ColorType = ref.ColorType, ValueType = ref.ValueType, NumberType = ref.NumberType, ref$1 = _dereq_('../values'), Color = ref$1.Color, validateRGBA = ref$1.validateRGBA, RuntimeError = _dereq_('../runtime_error'), types = {
                        'to-number': NumberType,
                        'to-color': ColorType
                    }, Coercion = function (r, e) {
                        this.type = r, this.args = e;
                    };
                Coercion.parse = function (r, e) {
                    if (r.length < 2) {
                        return e.error('Expected at least one argument.');
                    }
                    for (var t = r[0], o = types[t], n = [], i = 1; i < r.length; i++) {
                        var a = e.parse(r[i], i, ValueType);
                        if (!a) {
                            return null;
                        }
                        n.push(a);
                    }
                    return new Coercion(o, n);
                }, Coercion.prototype.evaluate = function (r) {
                    var e = this;
                    if ('color' === this.type.kind) {
                        for (var t, o, n = 0, i = e.args; n < i.length; n += 1) {
                            if (t = i[n].evaluate(r), o = null, 'string' == typeof t) {
                                var a = r.parseColor(t);
                                if (a) {
                                    return a;
                                }
                            } else if (Array.isArray(t) && !(o = t.length < 3 || t.length > 4 ? 'Invalid rbga value ' + JSON.stringify(t) + ': expected an array containing either three or four numeric values.' : validateRGBA(t[0], t[1], t[2], t[3]))) {
                                return new Color(t[0] / 255, t[1] / 255, t[2] / 255, t[3]);
                            }
                        }
                        throw new RuntimeError(o || 'Could not parse color from value \'' + ('string' == typeof t ? t : JSON.stringify(t)) + '\'');
                    }
                    for (var u = null, l = 0, s = e.args; l < s.length; l += 1) {
                        if (null !== (u = s[l].evaluate(r))) {
                            var p = Number(u);
                            if (!isNaN(p)) {
                                return p;
                            }
                        }
                    }
                    throw new RuntimeError('Could not convert ' + JSON.stringify(u) + ' to number.');
                }, Coercion.prototype.eachChild = function (r) {
                    this.args.forEach(r);
                }, Coercion.prototype.possibleOutputs = function () {
                    return (r = []).concat.apply(r, this.args.map(function (r) {
                        return r.possibleOutputs();
                    }));
                    var r;
                }, module.exports = Coercion;
            },
            {
                '../runtime_error': 143,
                '../types': 146,
                '../values': 147
            }
        ],
        130: [
            function (_dereq_, module, exports) {
                'use strict';
                function isComparableType(e) {
                    return 'string' === e.kind || 'number' === e.kind || 'boolean' === e.kind || 'null' === e.kind;
                }
                function makeComparison(e) {
                    return function () {
                        function t(e, t) {
                            this.type = BooleanType, this.lhs = e, this.rhs = t;
                        }
                        return t.parse = function (e, r) {
                            if (3 !== e.length) {
                                return r.error('Expected two arguments.');
                            }
                            var n = r.parse(e[1], 1, ValueType);
                            if (!n) {
                                return null;
                            }
                            var o = r.parse(e[2], 2, ValueType);
                            return o ? isComparableType(n.type) || isComparableType(o.type) ? n.type.kind !== o.type.kind && 'value' !== n.type.kind && 'value' !== o.type.kind ? r.error('Cannot compare ' + toString(n.type) + ' and ' + toString(o.type) + '.') : new t(n, o) : r.error('Expected at least one argument to be a string, number, boolean, or null, but found (' + toString(n.type) + ', ' + toString(o.type) + ') instead.') : null;
                        }, t.prototype.evaluate = function (t) {
                            return e(this.lhs.evaluate(t), this.rhs.evaluate(t));
                        }, t.prototype.eachChild = function (e) {
                            e(this.lhs), e(this.rhs);
                        }, t.prototype.possibleOutputs = function () {
                            return [
                                !0,
                                !1
                            ];
                        }, t;
                    }();
                }
                var ref = _dereq_('../types'), ValueType = ref.ValueType, BooleanType = ref.BooleanType, ref$1 = _dereq_('../types'), toString = ref$1.toString;
                module.exports = {
                    Equals: makeComparison(function (e, t) {
                        return e === t;
                    }),
                    NotEquals: makeComparison(function (e, t) {
                        return e !== t;
                    })
                };
            },
            { '../types': 146 }
        ],
        131: [
            function (_dereq_, module, exports) {
                'use strict';
                function rgba(e, r) {
                    var t = r[0], a = r[1], n = r[2], u = r[3];
                    t = t.evaluate(e), a = a.evaluate(e), n = n.evaluate(e);
                    var o = u ? u.evaluate(e) : 1, p = validateRGBA(t, a, n, o);
                    if (p) {
                        throw new RuntimeError(p);
                    }
                    return new Color(t / 255 * o, a / 255 * o, n / 255 * o, o);
                }
                function has(e, r) {
                    return e in r;
                }
                function get(e, r) {
                    var t = r[e];
                    return void 0 === t ? null : t;
                }
                function length(e, r) {
                    return r[0].evaluate(e).length;
                }
                function lt(e, r) {
                    var t = r[0], a = r[1];
                    return t.evaluate(e) < a.evaluate(e);
                }
                function gt(e, r) {
                    var t = r[0], a = r[1];
                    return t.evaluate(e) > a.evaluate(e);
                }
                function lteq(e, r) {
                    var t = r[0], a = r[1];
                    return t.evaluate(e) <= a.evaluate(e);
                }
                function gteq(e, r) {
                    var t = r[0], a = r[1];
                    return t.evaluate(e) >= a.evaluate(e);
                }
                function binarySearch(e, r, t, a) {
                    for (; t <= a;) {
                        var n = t + a >> 1;
                        if (r[n] === e) {
                            return !0;
                        }
                        r[n] > e ? a = n - 1 : t = n + 1;
                    }
                    return !1;
                }
                var ref = _dereq_('../types'), NumberType = ref.NumberType, StringType = ref.StringType, BooleanType = ref.BooleanType, ColorType = ref.ColorType, ObjectType = ref.ObjectType, ValueType = ref.ValueType, ErrorType = ref.ErrorType, array = ref.array, toString = ref.toString, ref$1 = _dereq_('../values'), typeOf = ref$1.typeOf, Color = ref$1.Color, validateRGBA = ref$1.validateRGBA, ref$2 = _dereq_('../compound_expression'), CompoundExpression = ref$2.CompoundExpression, varargs = ref$2.varargs, RuntimeError = _dereq_('../runtime_error'), Let = _dereq_('./let'), Var = _dereq_('./var'), Literal = _dereq_('./literal'), Assertion = _dereq_('./assertion'), ArrayAssertion = _dereq_('./array'), Coercion = _dereq_('./coercion'), At = _dereq_('./at'), Match = _dereq_('./match'), Case = _dereq_('./case'), Step = _dereq_('./step'), Interpolate = _dereq_('./interpolate'), Coalesce = _dereq_('./coalesce'), ref$3 = _dereq_('./equals'), Equals = ref$3.Equals, NotEquals = ref$3.NotEquals, expressions = {
                        '==': Equals,
                        '!=': NotEquals,
                        array: ArrayAssertion,
                        at: At,
                        boolean: Assertion,
                        case: Case,
                        coalesce: Coalesce,
                        interpolate: Interpolate,
                        let: Let,
                        literal: Literal,
                        match: Match,
                        number: Assertion,
                        object: Assertion,
                        step: Step,
                        string: Assertion,
                        'to-color': Coercion,
                        'to-number': Coercion,
                        var: Var
                    };
                CompoundExpression.register(expressions, {
                    error: [
                        ErrorType,
                        [StringType],
                        function (e, r) {
                            var t = r[0];
                            throw new RuntimeError(t.evaluate(e));
                        }
                    ],
                    typeof: [
                        StringType,
                        [ValueType],
                        function (e, r) {
                            var t = r[0];
                            return toString(typeOf(t.evaluate(e)));
                        }
                    ],
                    'to-string': [
                        StringType,
                        [ValueType],
                        function (e, r) {
                            var t = r[0];
                            t = t.evaluate(e);
                            var a = typeof t;
                            return null === t || 'string' === a || 'number' === a || 'boolean' === a ? String(t) : t instanceof Color ? t.toString() : JSON.stringify(t);
                        }
                    ],
                    'to-boolean': [
                        BooleanType,
                        [ValueType],
                        function (e, r) {
                            var t = r[0];
                            return Boolean(t.evaluate(e));
                        }
                    ],
                    'to-rgba': [
                        array(NumberType, 4),
                        [ColorType],
                        function (e, r) {
                            var t = r[0], a = t.evaluate(e), n = a.r, u = a.g, o = a.b, p = a.a;
                            return [
                                255 * n / p,
                                255 * u / p,
                                255 * o / p,
                                p
                            ];
                        }
                    ],
                    rgb: [
                        ColorType,
                        [
                            NumberType,
                            NumberType,
                            NumberType
                        ],
                        rgba
                    ],
                    rgba: [
                        ColorType,
                        [
                            NumberType,
                            NumberType,
                            NumberType,
                            NumberType
                        ],
                        rgba
                    ],
                    length: {
                        type: NumberType,
                        overloads: [
                            [
                                [StringType],
                                length
                            ],
                            [
                                [array(ValueType)],
                                length
                            ]
                        ]
                    },
                    has: {
                        type: BooleanType,
                        overloads: [
                            [
                                [StringType],
                                function (e, r) {
                                    return has(r[0].evaluate(e), e.properties());
                                }
                            ],
                            [
                                [
                                    StringType,
                                    ObjectType
                                ],
                                function (e, r) {
                                    var t = r[0], a = r[1];
                                    return has(t.evaluate(e), a.evaluate(e));
                                }
                            ]
                        ]
                    },
                    get: {
                        type: ValueType,
                        overloads: [
                            [
                                [StringType],
                                function (e, r) {
                                    return get(r[0].evaluate(e), e.properties());
                                }
                            ],
                            [
                                [
                                    StringType,
                                    ObjectType
                                ],
                                function (e, r) {
                                    var t = r[0], a = r[1];
                                    return get(t.evaluate(e), a.evaluate(e));
                                }
                            ]
                        ]
                    },
                    properties: [
                        ObjectType,
                        [],
                        function (e) {
                            return e.properties();
                        }
                    ],
                    'geometry-type': [
                        StringType,
                        [],
                        function (e) {
                            return e.geometryType();
                        }
                    ],
                    id: [
                        ValueType,
                        [],
                        function (e) {
                            return e.id();
                        }
                    ],
                    zoom: [
                        NumberType,
                        [],
                        function (e) {
                            return e.globals.zoom;
                        }
                    ],
                    'heatmap-density': [
                        NumberType,
                        [],
                        function (e) {
                            return e.globals.heatmapDensity || 0;
                        }
                    ],
                    '+': [
                        NumberType,
                        varargs(NumberType),
                        function (e, r) {
                            for (var t = 0, a = 0, n = r; a < n.length; a += 1) {
                                t += n[a].evaluate(e);
                            }
                            return t;
                        }
                    ],
                    '*': [
                        NumberType,
                        varargs(NumberType),
                        function (e, r) {
                            for (var t = 1, a = 0, n = r; a < n.length; a += 1) {
                                t *= n[a].evaluate(e);
                            }
                            return t;
                        }
                    ],
                    '-': {
                        type: NumberType,
                        overloads: [
                            [
                                [
                                    NumberType,
                                    NumberType
                                ],
                                function (e, r) {
                                    var t = r[0], a = r[1];
                                    return t.evaluate(e) - a.evaluate(e);
                                }
                            ],
                            [
                                [NumberType],
                                function (e, r) {
                                    return -r[0].evaluate(e);
                                }
                            ]
                        ]
                    },
                    '/': [
                        NumberType,
                        [
                            NumberType,
                            NumberType
                        ],
                        function (e, r) {
                            var t = r[0], a = r[1];
                            return t.evaluate(e) / a.evaluate(e);
                        }
                    ],
                    '%': [
                        NumberType,
                        [
                            NumberType,
                            NumberType
                        ],
                        function (e, r) {
                            var t = r[0], a = r[1];
                            return t.evaluate(e) % a.evaluate(e);
                        }
                    ],
                    ln2: [
                        NumberType,
                        [],
                        function () {
                            return Math.LN2;
                        }
                    ],
                    pi: [
                        NumberType,
                        [],
                        function () {
                            return Math.PI;
                        }
                    ],
                    e: [
                        NumberType,
                        [],
                        function () {
                            return Math.E;
                        }
                    ],
                    '^': [
                        NumberType,
                        [
                            NumberType,
                            NumberType
                        ],
                        function (e, r) {
                            var t = r[0], a = r[1];
                            return Math.pow(t.evaluate(e), a.evaluate(e));
                        }
                    ],
                    sqrt: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.sqrt(t.evaluate(e));
                        }
                    ],
                    log10: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.log10(t.evaluate(e));
                        }
                    ],
                    ln: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.log(t.evaluate(e));
                        }
                    ],
                    log2: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.log2(t.evaluate(e));
                        }
                    ],
                    sin: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.sin(t.evaluate(e));
                        }
                    ],
                    cos: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.cos(t.evaluate(e));
                        }
                    ],
                    tan: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.tan(t.evaluate(e));
                        }
                    ],
                    asin: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.asin(t.evaluate(e));
                        }
                    ],
                    acos: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.acos(t.evaluate(e));
                        }
                    ],
                    atan: [
                        NumberType,
                        [NumberType],
                        function (e, r) {
                            var t = r[0];
                            return Math.atan(t.evaluate(e));
                        }
                    ],
                    min: [
                        NumberType,
                        varargs(NumberType),
                        function (e, r) {
                            return Math.min.apply(Math, r.map(function (r) {
                                return r.evaluate(e);
                            }));
                        }
                    ],
                    max: [
                        NumberType,
                        varargs(NumberType),
                        function (e, r) {
                            return Math.max.apply(Math, r.map(function (r) {
                                return r.evaluate(e);
                            }));
                        }
                    ],
                    'filter-==': [
                        BooleanType,
                        [
                            StringType,
                            ValueType
                        ],
                        function (e, r) {
                            var t = r[0], a = r[1];
                            return e.properties()[t.value] === a.value;
                        }
                    ],
                    'filter-id-==': [
                        BooleanType,
                        [ValueType],
                        function (e, r) {
                            var t = r[0];
                            return e.id() === t.value;
                        }
                    ],
                    'filter-type-==': [
                        BooleanType,
                        [StringType],
                        function (e, r) {
                            var t = r[0];
                            return e.geometryType() === t.value;
                        }
                    ],
                    'filter-<': [
                        BooleanType,
                        [
                            StringType,
                            ValueType
                        ],
                        function (e, r) {
                            var t = r[0], a = r[1], n = e.properties()[t.value], u = a.value;
                            return typeof n == typeof u && n < u;
                        }
                    ],
                    'filter-id-<': [
                        BooleanType,
                        [ValueType],
                        function (e, r) {
                            var t = r[0], a = e.id(), n = t.value;
                            return typeof a == typeof n && a < n;
                        }
                    ],
                    'filter->': [
                        BooleanType,
                        [
                            StringType,
                            ValueType
                        ],
                        function (e, r) {
                            var t = r[0], a = r[1], n = e.properties()[t.value], u = a.value;
                            return typeof n == typeof u && n > u;
                        }
                    ],
                    'filter-id->': [
                        BooleanType,
                        [ValueType],
                        function (e, r) {
                            var t = r[0], a = e.id(), n = t.value;
                            return typeof a == typeof n && a > n;
                        }
                    ],
                    'filter-<=': [
                        BooleanType,
                        [
                            StringType,
                            ValueType
                        ],
                        function (e, r) {
                            var t = r[0], a = r[1], n = e.properties()[t.value], u = a.value;
                            return typeof n == typeof u && n <= u;
                        }
                    ],
                    'filter-id-<=': [
                        BooleanType,
                        [ValueType],
                        function (e, r) {
                            var t = r[0], a = e.id(), n = t.value;
                            return typeof a == typeof n && a <= n;
                        }
                    ],
                    'filter->=': [
                        BooleanType,
                        [
                            StringType,
                            ValueType
                        ],
                        function (e, r) {
                            var t = r[0], a = r[1], n = e.properties()[t.value], u = a.value;
                            return typeof n == typeof u && n >= u;
                        }
                    ],
                    'filter-id->=': [
                        BooleanType,
                        [ValueType],
                        function (e, r) {
                            var t = r[0], a = e.id(), n = t.value;
                            return typeof a == typeof n && a >= n;
                        }
                    ],
                    'filter-has': [
                        BooleanType,
                        [ValueType],
                        function (e, r) {
                            return r[0].value in e.properties();
                        }
                    ],
                    'filter-has-id': [
                        BooleanType,
                        [],
                        function (e) {
                            return null !== e.id();
                        }
                    ],
                    'filter-type-in': [
                        BooleanType,
                        [array(StringType)],
                        function (e, r) {
                            return r[0].value.indexOf(e.geometryType()) >= 0;
                        }
                    ],
                    'filter-id-in': [
                        BooleanType,
                        [array(ValueType)],
                        function (e, r) {
                            return r[0].value.indexOf(e.id()) >= 0;
                        }
                    ],
                    'filter-in-small': [
                        BooleanType,
                        [
                            StringType,
                            array(ValueType)
                        ],
                        function (e, r) {
                            var t = r[0];
                            return r[1].value.indexOf(e.properties()[t.value]) >= 0;
                        }
                    ],
                    'filter-in-large': [
                        BooleanType,
                        [
                            StringType,
                            array(ValueType)
                        ],
                        function (e, r) {
                            var t = r[0], a = r[1];
                            return binarySearch(e.properties()[t.value], a.value, 0, a.value.length - 1);
                        }
                    ],
                    '>': {
                        type: BooleanType,
                        overloads: [
                            [
                                [
                                    NumberType,
                                    NumberType
                                ],
                                gt
                            ],
                            [
                                [
                                    StringType,
                                    StringType
                                ],
                                gt
                            ]
                        ]
                    },
                    '<': {
                        type: BooleanType,
                        overloads: [
                            [
                                [
                                    NumberType,
                                    NumberType
                                ],
                                lt
                            ],
                            [
                                [
                                    StringType,
                                    StringType
                                ],
                                lt
                            ]
                        ]
                    },
                    '>=': {
                        type: BooleanType,
                        overloads: [
                            [
                                [
                                    NumberType,
                                    NumberType
                                ],
                                gteq
                            ],
                            [
                                [
                                    StringType,
                                    StringType
                                ],
                                gteq
                            ]
                        ]
                    },
                    '<=': {
                        type: BooleanType,
                        overloads: [
                            [
                                [
                                    NumberType,
                                    NumberType
                                ],
                                lteq
                            ],
                            [
                                [
                                    StringType,
                                    StringType
                                ],
                                lteq
                            ]
                        ]
                    },
                    all: {
                        type: BooleanType,
                        overloads: [
                            [
                                [
                                    BooleanType,
                                    BooleanType
                                ],
                                function (e, r) {
                                    var t = r[0], a = r[1];
                                    return t.evaluate(e) && a.evaluate(e);
                                }
                            ],
                            [
                                varargs(BooleanType),
                                function (e, r) {
                                    for (var t = 0, a = r; t < a.length; t += 1) {
                                        if (!a[t].evaluate(e)) {
                                            return !1;
                                        }
                                    }
                                    return !0;
                                }
                            ]
                        ]
                    },
                    any: {
                        type: BooleanType,
                        overloads: [
                            [
                                [
                                    BooleanType,
                                    BooleanType
                                ],
                                function (e, r) {
                                    var t = r[0], a = r[1];
                                    return t.evaluate(e) || a.evaluate(e);
                                }
                            ],
                            [
                                varargs(BooleanType),
                                function (e, r) {
                                    for (var t = 0, a = r; t < a.length; t += 1) {
                                        if (a[t].evaluate(e)) {
                                            return !0;
                                        }
                                    }
                                    return !1;
                                }
                            ]
                        ]
                    },
                    '!': [
                        BooleanType,
                        [BooleanType],
                        function (e, r) {
                            return !r[0].evaluate(e);
                        }
                    ],
                    upcase: [
                        StringType,
                        [StringType],
                        function (e, r) {
                            return r[0].evaluate(e).toUpperCase();
                        }
                    ],
                    downcase: [
                        StringType,
                        [StringType],
                        function (e, r) {
                            return r[0].evaluate(e).toLowerCase();
                        }
                    ],
                    concat: [
                        StringType,
                        varargs(StringType),
                        function (e, r) {
                            return r.map(function (r) {
                                return r.evaluate(e);
                            }).join('');
                        }
                    ]
                }), module.exports = expressions;
            },
            {
                '../compound_expression': 123,
                '../runtime_error': 143,
                '../types': 146,
                '../values': 147,
                './array': 124,
                './assertion': 125,
                './at': 126,
                './case': 127,
                './coalesce': 128,
                './coercion': 129,
                './equals': 130,
                './interpolate': 132,
                './let': 133,
                './literal': 134,
                './match': 135,
                './step': 136,
                './var': 137
            }
        ],
        132: [
            function (_dereq_, module, exports) {
                'use strict';
                function exponentialInterpolation(e, t, r, n) {
                    var i = n - r, o = e - r;
                    return 0 === i ? 0 : 1 === t ? o / i : (Math.pow(t, o) - 1) / (Math.pow(t, i) - 1);
                }
                var UnitBezier = _dereq_('@mapbox/unitbezier'), interpolate = _dereq_('../../util/interpolate'), ref = _dereq_('../types'), toString = ref.toString, NumberType = ref.NumberType, ref$1 = _dereq_('../stops'), findStopLessThanOrEqualTo = ref$1.findStopLessThanOrEqualTo, Interpolate = function (e, t, r, n) {
                        var i = this;
                        this.type = e, this.interpolation = t, this.input = r, this.labels = [], this.outputs = [];
                        for (var o = 0, a = n; o < a.length; o += 1) {
                            var u = a[o], p = u[0], l = u[1];
                            i.labels.push(p), i.outputs.push(l);
                        }
                    };
                Interpolate.interpolationFactor = function (e, t, r, n) {
                    var i = 0;
                    if ('exponential' === e.name) {
                        i = exponentialInterpolation(t, e.base, r, n);
                    } else if ('linear' === e.name) {
                        i = exponentialInterpolation(t, 1, r, n);
                    } else if ('cubic-bezier' === e.name) {
                        var o = e.controlPoints, a = new UnitBezier(o[0], o[1], o[2], o[3]);
                        i = a.solve(exponentialInterpolation(t, 1, r, n));
                    }
                    return i;
                }, Interpolate.parse = function (e, t) {
                    var r = e[1], n = e[2], i = e.slice(3);
                    if (!Array.isArray(r) || 0 === r.length) {
                        return t.error('Expected an interpolation type expression.', 1);
                    }
                    if ('linear' === r[0]) {
                        r = { name: 'linear' };
                    } else if ('exponential' === r[0]) {
                        var o = r[1];
                        if ('number' != typeof o) {
                            return t.error('Exponential interpolation requires a numeric base.', 1, 1);
                        }
                        r = {
                            name: 'exponential',
                            base: o
                        };
                    } else {
                        if ('cubic-bezier' !== r[0]) {
                            return t.error('Unknown interpolation type ' + String(r[0]), 1, 0);
                        }
                        var a = r.slice(1);
                        if (4 !== a.length || a.some(function (e) {
                                return 'number' != typeof e || e < 0 || e > 1;
                            })) {
                            return t.error('Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.', 1);
                        }
                        r = {
                            name: 'cubic-bezier',
                            controlPoints: a
                        };
                    }
                    if (e.length - 1 < 4) {
                        return t.error('Expected at least 4 arguments, but found only ' + (e.length - 1) + '.');
                    }
                    if ((e.length - 1) % 2 != 0) {
                        return t.error('Expected an even number of arguments.');
                    }
                    if (!(n = t.parse(n, 2, NumberType))) {
                        return null;
                    }
                    var u = [], p = null;
                    t.expectedType && 'value' !== t.expectedType.kind && (p = t.expectedType);
                    for (var l = 0; l < i.length; l += 2) {
                        var s = i[l], f = i[l + 1], c = l + 3, h = l + 4;
                        if ('number' != typeof s) {
                            return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.', c);
                        }
                        if (u.length && u[u.length - 1][0] >= s) {
                            return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.', c);
                        }
                        var v = t.parse(f, h, p);
                        if (!v) {
                            return null;
                        }
                        p = p || v.type, u.push([
                            s,
                            v
                        ]);
                    }
                    return 'number' === p.kind || 'color' === p.kind || 'array' === p.kind && 'number' === p.itemType.kind && 'number' == typeof p.N ? new Interpolate(p, r, n, u) : t.error('Type ' + toString(p) + ' is not interpolatable.');
                }, Interpolate.prototype.evaluate = function (e) {
                    var t = this.labels, r = this.outputs;
                    if (1 === t.length) {
                        return r[0].evaluate(e);
                    }
                    var n = this.input.evaluate(e);
                    if (n <= t[0]) {
                        return r[0].evaluate(e);
                    }
                    var i = t.length;
                    if (n >= t[i - 1]) {
                        return r[i - 1].evaluate(e);
                    }
                    var o = findStopLessThanOrEqualTo(t, n), a = t[o], u = t[o + 1], p = Interpolate.interpolationFactor(this.interpolation, n, a, u), l = r[o].evaluate(e), s = r[o + 1].evaluate(e);
                    return interpolate[this.type.kind.toLowerCase()](l, s, p);
                }, Interpolate.prototype.eachChild = function (e) {
                    var t = this;
                    e(this.input);
                    for (var r = 0, n = t.outputs; r < n.length; r += 1) {
                        e(n[r]);
                    }
                }, Interpolate.prototype.possibleOutputs = function () {
                    return (e = []).concat.apply(e, this.outputs.map(function (e) {
                        return e.possibleOutputs();
                    }));
                    var e;
                }, module.exports = Interpolate;
            },
            {
                '../../util/interpolate': 158,
                '../stops': 145,
                '../types': 146,
                '@mapbox/unitbezier': 7
            }
        ],
        133: [
            function (_dereq_, module, exports) {
                'use strict';
                var Let = function (t, e) {
                    this.type = e.type, this.bindings = [].concat(t), this.result = e;
                };
                Let.prototype.evaluate = function (t) {
                    t.pushScope(this.bindings);
                    var e = this.result.evaluate(t);
                    return t.popScope(), e;
                }, Let.prototype.eachChild = function (t) {
                    for (var e = this, r = 0, n = e.bindings; r < n.length; r += 1) {
                        t(n[r][1]);
                    }
                    t(this.result);
                }, Let.parse = function (t, e) {
                    if (t.length < 4) {
                        return e.error('Expected at least 3 arguments, but found ' + (t.length - 1) + ' instead.');
                    }
                    for (var r = [], n = 1; n < t.length - 1; n += 2) {
                        var s = t[n];
                        if ('string' != typeof s) {
                            return e.error('Expected string, but found ' + typeof s + ' instead.', n);
                        }
                        if (/[^a-zA-Z0-9_]/.test(s)) {
                            return e.error('Variable names must contain only alphanumeric characters or \'_\'.', n);
                        }
                        var i = e.parse(t[n + 1], n + 1);
                        if (!i) {
                            return null;
                        }
                        r.push([
                            s,
                            i
                        ]);
                    }
                    var u = e.parse(t[t.length - 1], t.length - 1, void 0, r);
                    return u ? new Let(r, u) : null;
                }, Let.prototype.possibleOutputs = function () {
                    return this.result.possibleOutputs();
                }, module.exports = Let;
            },
            {}
        ],
        134: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../values'), isValue = ref.isValue, typeOf = ref.typeOf, Literal = function (e, r) {
                        this.type = e, this.value = r;
                    };
                Literal.parse = function (e, r) {
                    if (2 !== e.length) {
                        return r.error('\'literal\' expression requires exactly one argument, but found ' + (e.length - 1) + ' instead.');
                    }
                    if (!isValue(e[1])) {
                        return r.error('invalid value');
                    }
                    var t = e[1], i = typeOf(t), a = r.expectedType;
                    return 'array' !== i.kind || 0 !== i.N || !a || 'array' !== a.kind || 'number' == typeof a.N && 0 !== a.N || (i = a), new Literal(i, t);
                }, Literal.prototype.evaluate = function () {
                    return this.value;
                }, Literal.prototype.eachChild = function () {
                }, Literal.prototype.possibleOutputs = function () {
                    return [this.value];
                }, module.exports = Literal;
            },
            { '../values': 147 }
        ],
        135: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../values'), typeOf = ref.typeOf, Match = function (e, t, r, n, u, s) {
                        this.inputType = e, this.type = t, this.input = r, this.cases = n, this.outputs = u, this.otherwise = s;
                    };
                Match.parse = function (e, t) {
                    if (e.length < 5) {
                        return t.error('Expected at least 4 arguments, but found only ' + (e.length - 1) + '.');
                    }
                    if (e.length % 2 != 1) {
                        return t.error('Expected an even number of arguments.');
                    }
                    var r, n;
                    t.expectedType && 'value' !== t.expectedType.kind && (n = t.expectedType);
                    for (var u = {}, s = [], a = 2; a < e.length - 1; a += 2) {
                        var i = e[a], o = e[a + 1];
                        Array.isArray(i) || (i = [i]);
                        var p = t.concat(a);
                        if (0 === i.length) {
                            return p.error('Expected at least one branch label.');
                        }
                        for (var h = 0, l = i; h < l.length; h += 1) {
                            var c = l[h];
                            if ('number' != typeof c && 'string' != typeof c) {
                                return p.error('Branch labels must be numbers or strings.');
                            }
                            if ('number' == typeof c && Math.abs(c) > Number.MAX_SAFE_INTEGER) {
                                return p.error('Branch labels must be integers no larger than ' + Number.MAX_SAFE_INTEGER + '.');
                            }
                            if ('number' == typeof c && Math.floor(c) !== c) {
                                return p.error('Numeric branch labels must be integer values.');
                            }
                            if (r) {
                                if (p.checkSubtype(r, typeOf(c))) {
                                    return null;
                                }
                            } else {
                                r = typeOf(c);
                            }
                            if (void 0 !== u[String(c)]) {
                                return p.error('Branch labels must be unique.');
                            }
                            u[String(c)] = s.length;
                        }
                        var f = t.parse(o, a, n);
                        if (!f) {
                            return null;
                        }
                        n = n || f.type, s.push(f);
                    }
                    var b = t.parse(e[1], 1, r);
                    if (!b) {
                        return null;
                    }
                    var y = t.parse(e[e.length - 1], e.length - 1, n);
                    return y ? new Match(r, n, b, u, s, y) : null;
                }, Match.prototype.evaluate = function (e) {
                    var t = this.input.evaluate(e);
                    return (this.outputs[this.cases[t]] || this.otherwise).evaluate(e);
                }, Match.prototype.eachChild = function (e) {
                    e(this.input), this.outputs.forEach(e), e(this.otherwise);
                }, Match.prototype.possibleOutputs = function () {
                    return (e = []).concat.apply(e, this.outputs.map(function (e) {
                        return e.possibleOutputs();
                    })).concat(this.otherwise.possibleOutputs());
                    var e;
                }, module.exports = Match;
            },
            { '../values': 147 }
        ],
        136: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../types'), NumberType = ref.NumberType, ref$1 = _dereq_('../stops'), findStopLessThanOrEqualTo = ref$1.findStopLessThanOrEqualTo, Step = function (e, t, r) {
                        var u = this;
                        this.type = e, this.input = t, this.labels = [], this.outputs = [];
                        for (var n = 0, s = r; n < s.length; n += 1) {
                            var p = s[n], a = p[0], i = p[1];
                            u.labels.push(a), u.outputs.push(i);
                        }
                    };
                Step.parse = function (e, t) {
                    var r = e[1], u = e.slice(2);
                    if (e.length - 1 < 4) {
                        return t.error('Expected at least 4 arguments, but found only ' + (e.length - 1) + '.');
                    }
                    if ((e.length - 1) % 2 != 0) {
                        return t.error('Expected an even number of arguments.');
                    }
                    if (!(r = t.parse(r, 1, NumberType))) {
                        return null;
                    }
                    var n = [], s = null;
                    t.expectedType && 'value' !== t.expectedType.kind && (s = t.expectedType), u.unshift(-1 / 0);
                    for (var p = 0; p < u.length; p += 2) {
                        var a = u[p], i = u[p + 1], o = p + 1, l = p + 2;
                        if ('number' != typeof a) {
                            return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.', o);
                        }
                        if (n.length && n[n.length - 1][0] >= a) {
                            return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.', o);
                        }
                        var f = t.parse(i, l, s);
                        if (!f) {
                            return null;
                        }
                        s = s || f.type, n.push([
                            a,
                            f
                        ]);
                    }
                    return new Step(s, r, n);
                }, Step.prototype.evaluate = function (e) {
                    var t = this.labels, r = this.outputs;
                    if (1 === t.length) {
                        return r[0].evaluate(e);
                    }
                    var u = this.input.evaluate(e);
                    if (u <= t[0]) {
                        return r[0].evaluate(e);
                    }
                    var n = t.length;
                    return u >= t[n - 1] ? r[n - 1].evaluate(e) : r[findStopLessThanOrEqualTo(t, u)].evaluate(e);
                }, Step.prototype.eachChild = function (e) {
                    var t = this;
                    e(this.input);
                    for (var r = 0, u = t.outputs; r < u.length; r += 1) {
                        e(u[r]);
                    }
                }, Step.prototype.possibleOutputs = function () {
                    return (e = []).concat.apply(e, this.outputs.map(function (e) {
                        return e.possibleOutputs();
                    }));
                    var e;
                }, module.exports = Step;
            },
            {
                '../stops': 145,
                '../types': 146
            }
        ],
        137: [
            function (_dereq_, module, exports) {
                'use strict';
                var Var = function (e, r) {
                    this.type = r, this.name = e;
                };
                Var.parse = function (e, r) {
                    if (2 !== e.length || 'string' != typeof e[1]) {
                        return r.error('\'var\' expression requires exactly one string literal argument.');
                    }
                    var t = e[1];
                    return r.scope.has(t) ? new Var(t, r.scope.get(t).type) : r.error('Unknown variable "' + t + '". Make sure "' + t + '" has been bound in an enclosing "let" expression before using it.', 1);
                }, Var.prototype.evaluate = function (e) {
                    return e.scope.get(this.name).evaluate(e);
                }, Var.prototype.eachChild = function () {
                }, Var.prototype.possibleOutputs = function () {
                    return [void 0];
                }, module.exports = Var;
            },
            {}
        ],
        138: [
            function (_dereq_, module, exports) {
                'use strict';
                var Scope = _dereq_('./scope'), ref = _dereq_('./values'), Color = ref.Color, geometryTypes = [
                        'Unknown',
                        'Point',
                        'LineString',
                        'Polygon'
                    ], EvaluationContext = function () {
                        this.scope = new Scope(), this._parseColorCache = {};
                    };
                EvaluationContext.prototype.id = function () {
                    return this.feature && 'id' in this.feature ? this.feature.id : null;
                }, EvaluationContext.prototype.geometryType = function () {
                    return this.feature ? 'number' == typeof this.feature.type ? geometryTypes[this.feature.type] : this.feature.type : null;
                }, EvaluationContext.prototype.properties = function () {
                    return this.feature && this.feature.properties || {};
                }, EvaluationContext.prototype.pushScope = function (t) {
                    this.scope = this.scope.concat(t);
                }, EvaluationContext.prototype.popScope = function () {
                    this.scope = this.scope.parent;
                }, EvaluationContext.prototype.parseColor = function (t) {
                    var e = this._parseColorCache[t];
                    return e || (e = this._parseColorCache[t] = Color.parse(t)), e;
                }, module.exports = EvaluationContext;
            },
            {
                './scope': 144,
                './values': 147
            }
        ],
        139: [
            function (_dereq_, module, exports) {
                'use strict';
                function isExpression(e) {
                    return Array.isArray(e) && e.length > 0 && 'string' == typeof e[0] && e[0] in definitions;
                }
                function createExpression(e, r, n) {
                    void 0 === n && (n = {});
                    var t = new ParsingContext(definitions, [], getExpectedType(r)), o = t.parse(e);
                    return o ? success(!1 === n.handleErrors ? new StyleExpression(o) : new StyleExpressionWithErrorHandling(o, r)) : error(t.errors);
                }
                function createPropertyExpression(e, r, n) {
                    if (void 0 === n && (n = {}), e = createExpression(e, r, n), 'error' === e.result) {
                        return e;
                    }
                    var t = e.value.expression, o = isConstant.isFeatureConstant(t);
                    if (!o && !r['property-function']) {
                        return error([new ParsingError('', 'property expressions not supported')]);
                    }
                    var i = isConstant.isGlobalPropertyConstant(t, ['zoom']);
                    if (!i && !1 === r['zoom-function']) {
                        return error([new ParsingError('', 'zoom expressions not supported')]);
                    }
                    var s = findZoomCurve(t);
                    return s || i ? s instanceof ParsingError ? error([s]) : s instanceof Interpolate && 'piecewise-constant' === r.function ? error([new ParsingError('', '"interpolate" expressions cannot be used with this property')]) : success(s ? o ? new ZoomDependentExpression('camera', e.value, s) : new ZoomDependentExpression('composite', e.value, s) : o ? new ZoomConstantExpression('constant', e.value) : new ZoomConstantExpression('source', e.value)) : error([new ParsingError('', '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);
                }
                function normalizePropertyExpression(e, r) {
                    if (isFunction(e)) {
                        return new StylePropertyFunction(e, r);
                    }
                    if (isExpression(e)) {
                        var n = createPropertyExpression(e, r);
                        if ('error' === n.result) {
                            throw new Error(n.value.map(function (e) {
                                return e.key + ': ' + e.message;
                            }).join(', '));
                        }
                        return n.value;
                    }
                    var t = e;
                    return 'string' == typeof e && 'color' === r.type && (t = Color.parse(e)), {
                        kind: 'constant',
                        evaluate: function () {
                            return t;
                        }
                    };
                }
                function findZoomCurve(e) {
                    var r = null;
                    if (e instanceof Let) {
                        r = findZoomCurve(e.result);
                    } else if (e instanceof Coalesce) {
                        for (var n = 0, t = e.args; n < t.length; n += 1) {
                            var o = t[n];
                            if (r = findZoomCurve(o)) {
                                break;
                            }
                        }
                    } else {
                        (e instanceof Step || e instanceof Interpolate) && e.input instanceof CompoundExpression && 'zoom' === e.input.name && (r = e);
                    }
                    return r instanceof ParsingError ? r : (e.eachChild(function (e) {
                        var n = findZoomCurve(e);
                        n instanceof ParsingError ? r = n : !r && n ? r = new ParsingError('', '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.') : r && n && r !== n && (r = new ParsingError('', 'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));
                    }), r);
                }
                function getExpectedType(e) {
                    var r = {
                        color: ColorType,
                        string: StringType,
                        number: NumberType,
                        enum: StringType,
                        boolean: BooleanType
                    };
                    return 'array' === e.type ? array(r[e.value] || ValueType, e.length) : r[e.type] || null;
                }
                function getDefaultValue(e) {
                    return 'color' === e.type && isFunction(e.default) ? new Color(0, 0, 0, 0) : 'color' === e.type ? Color.parse(e.default) || null : void 0 === e.default ? null : e.default;
                }
                var extend = _dereq_('../util/extend'), ParsingError = _dereq_('./parsing_error'), ParsingContext = _dereq_('./parsing_context'), EvaluationContext = _dereq_('./evaluation_context'), ref = _dereq_('./compound_expression'), CompoundExpression = ref.CompoundExpression, Step = _dereq_('./definitions/step'), Interpolate = _dereq_('./definitions/interpolate'), Coalesce = _dereq_('./definitions/coalesce'), Let = _dereq_('./definitions/let'), definitions = _dereq_('./definitions'), isConstant = _dereq_('./is_constant'), RuntimeError = _dereq_('./runtime_error'), ref$1 = _dereq_('../util/result'), success = ref$1.success, error = ref$1.error, StyleExpression = function (e) {
                        this.expression = e;
                    };
                StyleExpression.prototype.evaluate = function (e, r) {
                    return this._evaluator || (this._evaluator = new EvaluationContext()), this._evaluator.globals = e, this._evaluator.feature = r, this.expression.evaluate(this._evaluator);
                };
                var StyleExpressionWithErrorHandling = function (e) {
                        function r(r, n) {
                            e.call(this, r), this._warningHistory = {}, this._defaultValue = getDefaultValue(n), 'enum' === n.type && (this._enumValues = n.values);
                        }
                        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.evaluate = function (e, r) {
                            this._evaluator || (this._evaluator = new EvaluationContext()), this._evaluator.globals = e, this._evaluator.feature = r;
                            try {
                                var n = this.expression.evaluate(this._evaluator);
                                if (null === n || void 0 === n) {
                                    return this._defaultValue;
                                }
                                if (this._enumValues && !(n in this._enumValues)) {
                                    throw new RuntimeError('Expected value to be one of ' + Object.keys(this._enumValues).map(function (e) {
                                        return JSON.stringify(e);
                                    }).join(', ') + ', but found ' + JSON.stringify(n) + ' instead.');
                                }
                                return n;
                            } catch (e) {
                                return this._warningHistory[e.message] || (this._warningHistory[e.message] = !0, 'undefined' != typeof console && console.warn(e.message)), this._defaultValue;
                            }
                        }, r;
                    }(StyleExpression), ZoomConstantExpression = function (e, r) {
                        this.kind = e, this._styleExpression = r;
                    };
                ZoomConstantExpression.prototype.evaluate = function (e, r) {
                    return this._styleExpression.evaluate(e, r);
                };
                var ZoomDependentExpression = function (e, r, n) {
                    this.kind = e, this.zoomStops = n.labels, this._styleExpression = r, n instanceof Interpolate && (this._interpolationType = n.interpolation);
                };
                ZoomDependentExpression.prototype.evaluate = function (e, r) {
                    return this._styleExpression.evaluate(e, r);
                }, ZoomDependentExpression.prototype.interpolationFactor = function (e, r, n) {
                    return this._interpolationType ? Interpolate.interpolationFactor(this._interpolationType, e, r, n) : 0;
                };
                var ref$2 = _dereq_('../function'), isFunction = ref$2.isFunction, createFunction = ref$2.createFunction, ref$3 = _dereq_('./values'), Color = ref$3.Color, StylePropertyFunction = function (e, r) {
                        this._parameters = e, this._specification = r, extend(this, createFunction(this._parameters, this._specification));
                    };
                StylePropertyFunction.deserialize = function (e) {
                    return new StylePropertyFunction(e._parameters, e._specification);
                }, StylePropertyFunction.serialize = function (e) {
                    return {
                        _parameters: e._parameters,
                        _specification: e._specification
                    };
                }, module.exports = {
                    StyleExpression: StyleExpression,
                    StyleExpressionWithErrorHandling: StyleExpressionWithErrorHandling,
                    isExpression: isExpression,
                    createExpression: createExpression,
                    createPropertyExpression: createPropertyExpression,
                    normalizePropertyExpression: normalizePropertyExpression,
                    ZoomConstantExpression: ZoomConstantExpression,
                    ZoomDependentExpression: ZoomDependentExpression,
                    StylePropertyFunction: StylePropertyFunction
                };
                var ref$4 = _dereq_('./types'), ColorType = ref$4.ColorType, StringType = ref$4.StringType, NumberType = ref$4.NumberType, BooleanType = ref$4.BooleanType, ValueType = ref$4.ValueType, array = ref$4.array;
            },
            {
                '../function': 149,
                '../util/extend': 156,
                '../util/result': 160,
                './compound_expression': 123,
                './definitions': 131,
                './definitions/coalesce': 128,
                './definitions/interpolate': 132,
                './definitions/let': 133,
                './definitions/step': 136,
                './evaluation_context': 138,
                './is_constant': 140,
                './parsing_context': 141,
                './parsing_error': 142,
                './runtime_error': 143,
                './types': 146,
                './values': 147
            }
        ],
        140: [
            function (_dereq_, module, exports) {
                'use strict';
                function isFeatureConstant(n) {
                    if (n instanceof CompoundExpression) {
                        if ('get' === n.name && 1 === n.args.length) {
                            return !1;
                        }
                        if ('has' === n.name && 1 === n.args.length) {
                            return !1;
                        }
                        if ('properties' === n.name || 'geometry-type' === n.name || 'id' === n.name) {
                            return !1;
                        }
                        if (/^filter-/.test(n.name)) {
                            return !1;
                        }
                    }
                    var e = !0;
                    return n.eachChild(function (n) {
                        e && !isFeatureConstant(n) && (e = !1);
                    }), e;
                }
                function isGlobalPropertyConstant(n, e) {
                    if (n instanceof CompoundExpression && e.indexOf(n.name) >= 0) {
                        return !1;
                    }
                    var t = !0;
                    return n.eachChild(function (n) {
                        t && !isGlobalPropertyConstant(n, e) && (t = !1);
                    }), t;
                }
                var ref = _dereq_('./compound_expression'), CompoundExpression = ref.CompoundExpression;
                module.exports = {
                    isFeatureConstant: isFeatureConstant,
                    isGlobalPropertyConstant: isGlobalPropertyConstant
                };
            },
            { './compound_expression': 123 }
        ],
        141: [
            function (_dereq_, module, exports) {
                'use strict';
                function isConstant(e) {
                    var r = _dereq_('./compound_expression'), t = r.CompoundExpression, n = _dereq_('./is_constant'), i = n.isGlobalPropertyConstant, o = n.isFeatureConstant;
                    if (e instanceof _dereq_('./definitions/var')) {
                        return !1;
                    }
                    if (e instanceof t && 'error' === e.name) {
                        return !1;
                    }
                    var a = !0;
                    return e.eachChild(function (e) {
                        e instanceof Literal || (a = !1);
                    }), !!a && (o(e) && i(e, [
                        'zoom',
                        'heatmap-density'
                    ]));
                }
                var Scope = _dereq_('./scope'), ref = _dereq_('./types'), checkSubtype = ref.checkSubtype, ParsingError = _dereq_('./parsing_error'), Literal = _dereq_('./definitions/literal'), Assertion = _dereq_('./definitions/assertion'), ArrayAssertion = _dereq_('./definitions/array'), Coercion = _dereq_('./definitions/coercion'), ParsingContext = function (e, r, t, n, i) {
                        void 0 === r && (r = []), void 0 === n && (n = new Scope()), void 0 === i && (i = []), this.registry = e, this.path = r, this.key = r.map(function (e) {
                            return '[' + e + ']';
                        }).join(''), this.scope = n, this.errors = i, this.expectedType = t;
                    };
                ParsingContext.prototype.parse = function (e, r, t, n, i) {
                    void 0 === i && (i = {});
                    var o = this;
                    if (r && (o = o.concat(r, t, n)), null !== e && 'string' != typeof e && 'boolean' != typeof e && 'number' != typeof e || (e = [
                            'literal',
                            e
                        ]), Array.isArray(e)) {
                        if (0 === e.length) {
                            return o.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
                        }
                        var a = e[0];
                        if ('string' != typeof a) {
                            return o.error('Expression name must be a string, but found ' + typeof a + ' instead. If you wanted a literal array, use ["literal", [...]].', 0), null;
                        }
                        var s = o.registry[a];
                        if (s) {
                            var u = s.parse(e, o);
                            if (!u) {
                                return null;
                            }
                            if (o.expectedType) {
                                var p = o.expectedType, l = u.type;
                                if ('string' !== p.kind && 'number' !== p.kind && 'boolean' !== p.kind || 'value' !== l.kind) {
                                    if ('array' === p.kind && 'value' === l.kind) {
                                        i.omitTypeAnnotations || (u = new ArrayAssertion(p, u));
                                    } else if ('color' !== p.kind || 'value' !== l.kind && 'string' !== l.kind) {
                                        if (o.checkSubtype(o.expectedType, u.type)) {
                                            return null;
                                        }
                                    } else {
                                        i.omitTypeAnnotations || (u = new Coercion(p, [u]));
                                    }
                                } else {
                                    i.omitTypeAnnotations || (u = new Assertion(p, [u]));
                                }
                            }
                            if (!(u instanceof Literal) && isConstant(u)) {
                                var c = new (_dereq_('./evaluation_context'))();
                                try {
                                    u = new Literal(u.type, u.evaluate(c));
                                } catch (e) {
                                    return o.error(e.message), null;
                                }
                            }
                            return u;
                        }
                        return o.error('Unknown expression "' + a + '". If you wanted a literal array, use ["literal", [...]].', 0);
                    }
                    return void 0 === e ? o.error('\'undefined\' value invalid. Use null instead.') : 'object' == typeof e ? o.error('Bare objects invalid. Use ["literal", {...}] instead.') : o.error('Expected an array, but found ' + typeof e + ' instead.');
                }, ParsingContext.prototype.concat = function (e, r, t) {
                    var n = 'number' == typeof e ? this.path.concat(e) : this.path, i = t ? this.scope.concat(t) : this.scope;
                    return new ParsingContext(this.registry, n, r || null, i, this.errors);
                }, ParsingContext.prototype.error = function (e) {
                    var arguments$1 = arguments;
                    for (var r = [], t = arguments.length - 1; t-- > 0;) {
                        r[t] = arguments$1[t + 1];
                    }
                    var n = '' + this.key + r.map(function (e) {
                        return '[' + e + ']';
                    }).join('');
                    this.errors.push(new ParsingError(n, e));
                }, ParsingContext.prototype.checkSubtype = function (e, r) {
                    var t = checkSubtype(e, r);
                    return t && this.error(t), t;
                }, module.exports = ParsingContext;
            },
            {
                './compound_expression': 123,
                './definitions/array': 124,
                './definitions/assertion': 125,
                './definitions/coercion': 129,
                './definitions/literal': 134,
                './definitions/var': 137,
                './evaluation_context': 138,
                './is_constant': 140,
                './parsing_error': 142,
                './scope': 144,
                './types': 146
            }
        ],
        142: [
            function (_dereq_, module, exports) {
                'use strict';
                var ParsingError = function (r) {
                    function t(t, o) {
                        r.call(this, o), this.message = o, this.key = t;
                    }
                    return r && (t.__proto__ = r), t.prototype = Object.create(r && r.prototype), t.prototype.constructor = t, t;
                }(Error);
                module.exports = ParsingError;
            },
            {}
        ],
        143: [
            function (_dereq_, module, exports) {
                'use strict';
                var RuntimeError = function (r) {
                    this.name = 'ExpressionEvaluationError', this.message = r;
                };
                RuntimeError.prototype.toJSON = function () {
                    return this.message;
                }, module.exports = RuntimeError;
            },
            {}
        ],
        144: [
            function (_dereq_, module, exports) {
                'use strict';
                var Scope = function (t, n) {
                    var i = this;
                    void 0 === n && (n = []), this.parent = t, this.bindings = {};
                    for (var e = 0, r = n; e < r.length; e += 1) {
                        var o = r[e], s = o[0], p = o[1];
                        i.bindings[s] = p;
                    }
                };
                Scope.prototype.concat = function (t) {
                    return new Scope(this, t);
                }, Scope.prototype.get = function (t) {
                    if (this.bindings[t]) {
                        return this.bindings[t];
                    }
                    if (this.parent) {
                        return this.parent.get(t);
                    }
                    throw new Error(t + ' not found in scope.');
                }, Scope.prototype.has = function (t) {
                    return !!this.bindings[t] || !!this.parent && this.parent.has(t);
                }, module.exports = Scope;
            },
            {}
        ],
        145: [
            function (_dereq_, module, exports) {
                'use strict';
                function findStopLessThanOrEqualTo(r, e) {
                    for (var n, t, o = r.length, u = 0, i = o - 1, a = 0; u <= i;) {
                        if (a = Math.floor((u + i) / 2), n = r[a], t = r[a + 1], e === n || e > n && e < t) {
                            return a;
                        }
                        if (n < e) {
                            u = a + 1;
                        } else {
                            if (!(n > e)) {
                                throw new RuntimeError('Input is not a number.');
                            }
                            i = a - 1;
                        }
                    }
                    return Math.max(a - 1, 0);
                }
                var RuntimeError = _dereq_('./runtime_error');
                module.exports = { findStopLessThanOrEqualTo: findStopLessThanOrEqualTo };
            },
            { './runtime_error': 143 }
        ],
        146: [
            function (_dereq_, module, exports) {
                'use strict';
                function array(e, r) {
                    return {
                        kind: 'array',
                        itemType: e,
                        N: r
                    };
                }
                function toString(e) {
                    if ('array' === e.kind) {
                        var r = toString(e.itemType);
                        return 'number' == typeof e.N ? 'array<' + r + ', ' + e.N + '>' : 'value' === e.itemType.kind ? 'array' : 'array<' + r + '>';
                    }
                    return e.kind;
                }
                function checkSubtype(e, r) {
                    if ('error' === r.kind) {
                        return null;
                    }
                    if ('array' === e.kind) {
                        if ('array' === r.kind && !checkSubtype(e.itemType, r.itemType) && ('number' != typeof e.N || e.N === r.N)) {
                            return null;
                        }
                    } else {
                        if (e.kind === r.kind) {
                            return null;
                        }
                        if ('value' === e.kind) {
                            for (var n = 0, y = valueMemberTypes; n < y.length; n += 1) {
                                var t = y[n];
                                if (!checkSubtype(t, r)) {
                                    return null;
                                }
                            }
                        }
                    }
                    return 'Expected ' + toString(e) + ' but found ' + toString(r) + ' instead.';
                }
                var NullType = { kind: 'null' }, NumberType = { kind: 'number' }, StringType = { kind: 'string' }, BooleanType = { kind: 'boolean' }, ColorType = { kind: 'color' }, ObjectType = { kind: 'object' }, ValueType = { kind: 'value' }, ErrorType = { kind: 'error' }, valueMemberTypes = [
                        NullType,
                        NumberType,
                        StringType,
                        BooleanType,
                        ColorType,
                        ObjectType,
                        array(ValueType)
                    ];
                module.exports = {
                    NullType: NullType,
                    NumberType: NumberType,
                    StringType: StringType,
                    BooleanType: BooleanType,
                    ColorType: ColorType,
                    ObjectType: ObjectType,
                    ValueType: ValueType,
                    array: array,
                    ErrorType: ErrorType,
                    toString: toString,
                    checkSubtype: checkSubtype
                };
            },
            {}
        ],
        147: [
            function (_dereq_, module, exports) {
                'use strict';
                function validateRGBA(e, r, t, n) {
                    if (!('number' == typeof e && e >= 0 && e <= 255 && 'number' == typeof r && r >= 0 && r <= 255 && 'number' == typeof t && t >= 0 && t <= 255)) {
                        return 'Invalid rgba value [' + ('number' == typeof n ? [
                            e,
                            r,
                            t,
                            n
                        ] : [
                            e,
                            r,
                            t
                        ]).join(', ') + ']: \'r\', \'g\', and \'b\' must be between 0 and 255.';
                    }
                    return void 0 === n || 'number' == typeof n && n >= 0 && n <= 1 ? null : 'Invalid rgba value [' + [
                        e,
                        r,
                        t,
                        n
                    ].join(', ') + ']: \'a\' must be between 0 and 1.';
                }
                function isValue(e) {
                    if (null === e) {
                        return !0;
                    }
                    if ('string' == typeof e) {
                        return !0;
                    }
                    if ('boolean' == typeof e) {
                        return !0;
                    }
                    if ('number' == typeof e) {
                        return !0;
                    }
                    if (e instanceof Color) {
                        return !0;
                    }
                    if (Array.isArray(e)) {
                        for (var r = 0, t = e; r < t.length; r += 1) {
                            if (!isValue(t[r])) {
                                return !1;
                            }
                        }
                        return !0;
                    }
                    if ('object' == typeof e) {
                        for (var n in e) {
                            if (!isValue(e[n])) {
                                return !1;
                            }
                        }
                        return !0;
                    }
                    return !1;
                }
                function typeOf(e) {
                    if (null === e) {
                        return NullType;
                    }
                    if ('string' == typeof e) {
                        return StringType;
                    }
                    if ('boolean' == typeof e) {
                        return BooleanType;
                    }
                    if ('number' == typeof e) {
                        return NumberType;
                    }
                    if (e instanceof Color) {
                        return ColorType;
                    }
                    if (Array.isArray(e)) {
                        for (var r, t = e.length, n = 0, u = e; n < u.length; n += 1) {
                            var o = u[n], f = typeOf(o);
                            if (r) {
                                if (r === f) {
                                    continue;
                                }
                                r = ValueType;
                                break;
                            }
                            r = f;
                        }
                        return array(r || ValueType, t);
                    }
                    return ObjectType;
                }
                var Color = _dereq_('../util/color'), ref = _dereq_('./types'), NullType = ref.NullType, NumberType = ref.NumberType, StringType = ref.StringType, BooleanType = ref.BooleanType, ColorType = ref.ColorType, ObjectType = ref.ObjectType, ValueType = ref.ValueType, array = ref.array;
                module.exports = {
                    Color: Color,
                    validateRGBA: validateRGBA,
                    isValue: isValue,
                    typeOf: typeOf
                };
            },
            {
                '../util/color': 153,
                './types': 146
            }
        ],
        148: [
            function (_dereq_, module, exports) {
                'use strict';
                function isExpressionFilter(e) {
                    if (!Array.isArray(e) || 0 === e.length) {
                        return !1;
                    }
                    switch (e[0]) {
                    case 'has':
                        return e.length >= 2 && '$id' !== e[1] && '$type' !== e[1];
                    case 'in':
                    case '!in':
                    case '!has':
                    case 'none':
                        return !1;
                    case '==':
                    case '!=':
                    case '>':
                    case '>=':
                    case '<':
                    case '<=':
                        return 3 === e.length && (Array.isArray(e[1]) || Array.isArray(e[2]));
                    case 'any':
                    case 'all':
                        for (var r = 0, t = e.slice(1); r < t.length; r += 1) {
                            var n = t[r];
                            if (!isExpressionFilter(n) && 'boolean' != typeof n) {
                                return !1;
                            }
                        }
                        return !0;
                    default:
                        return !0;
                    }
                }
                function createFilter(e) {
                    if (!e) {
                        return function () {
                            return !0;
                        };
                    }
                    isExpressionFilter(e) || (e = convertFilter(e));
                    var r = createExpression(e, filterSpec);
                    if ('error' === r.result) {
                        throw new Error(r.value.map(function (e) {
                            return e.key + ': ' + e.message;
                        }).join(', '));
                    }
                    return function (e, t) {
                        return r.value.evaluate(e, t);
                    };
                }
                function compare(e, r) {
                    return e < r ? -1 : e > r ? 1 : 0;
                }
                function convertFilter(e) {
                    if (!e) {
                        return !0;
                    }
                    var r = e[0];
                    return e.length <= 1 ? 'any' !== r : '==' === r ? convertComparisonOp(e[1], e[2], '==') : '!=' === r ? convertNegation(convertComparisonOp(e[1], e[2], '==')) : '<' === r || '>' === r || '<=' === r || '>=' === r ? convertComparisonOp(e[1], e[2], r) : 'any' === r ? convertDisjunctionOp(e.slice(1)) : 'all' === r ? ['all'].concat(e.slice(1).map(convertFilter)) : 'none' === r ? ['all'].concat(e.slice(1).map(convertFilter).map(convertNegation)) : 'in' === r ? convertInOp(e[1], e.slice(2)) : '!in' === r ? convertNegation(convertInOp(e[1], e.slice(2))) : 'has' === r ? convertHasOp(e[1]) : '!has' !== r || convertNegation(convertHasOp(e[1]));
                }
                function convertComparisonOp(e, r, t) {
                    switch (e) {
                    case '$type':
                        return [
                            'filter-type-' + t,
                            r
                        ];
                    case '$id':
                        return [
                            'filter-id-' + t,
                            r
                        ];
                    default:
                        return [
                            'filter-' + t,
                            e,
                            r
                        ];
                    }
                }
                function convertDisjunctionOp(e) {
                    return ['any'].concat(e.map(convertFilter));
                }
                function convertInOp(e, r) {
                    if (0 === r.length) {
                        return !1;
                    }
                    switch (e) {
                    case '$type':
                        return [
                            'filter-type-in',
                            [
                                'literal',
                                r
                            ]
                        ];
                    case '$id':
                        return [
                            'filter-id-in',
                            [
                                'literal',
                                r
                            ]
                        ];
                    default:
                        return r.length > 200 && !r.some(function (e) {
                            return typeof e != typeof r[0];
                        }) ? [
                            'filter-in-large',
                            e,
                            [
                                'literal',
                                r.sort(compare)
                            ]
                        ] : [
                            'filter-in-small',
                            e,
                            [
                                'literal',
                                r
                            ]
                        ];
                    }
                }
                function convertHasOp(e) {
                    switch (e) {
                    case '$type':
                        return !0;
                    case '$id':
                        return ['filter-has-id'];
                    default:
                        return [
                            'filter-has',
                            e
                        ];
                    }
                }
                function convertNegation(e) {
                    return [
                        '!',
                        e
                    ];
                }
                var ref = _dereq_('../expression'), createExpression = ref.createExpression;
                module.exports = createFilter, module.exports.isExpressionFilter = isExpressionFilter;
                var filterSpec = {
                    type: 'boolean',
                    default: !1,
                    function: !0,
                    'property-function': !0,
                    'zoom-function': !0
                };
            },
            { '../expression': 139 }
        ],
        149: [
            function (_dereq_, module, exports) {
                'use strict';
                function isFunction(e) {
                    return 'object' == typeof e && null !== e && !Array.isArray(e);
                }
                function identityFunction(e) {
                    return e;
                }
                function createFunction(e, t) {
                    var o = 'color' === t.type, r = e.stops && 'object' == typeof e.stops[0][0], n = r || void 0 !== e.property, a = r || !n, i = e.type || ('interpolated' === t.function ? 'exponential' : 'interval');
                    if (o && (e = extend({}, e), e.stops && (e.stops = e.stops.map(function (e) {
                            return [
                                e[0],
                                Color.parse(e[1])
                            ];
                        })), e.default ? e.default = Color.parse(e.default) : e.default = Color.parse(t.default)), e.colorSpace && 'rgb' !== e.colorSpace && !colorSpaces[e.colorSpace]) {
                        throw new Error('Unknown color space: ' + e.colorSpace);
                    }
                    var u, p, l;
                    if ('exponential' === i) {
                        u = evaluateExponentialFunction;
                    } else if ('interval' === i) {
                        u = evaluateIntervalFunction;
                    } else if ('categorical' === i) {
                        u = evaluateCategoricalFunction, p = Object.create(null);
                        for (var s = 0, c = e.stops; s < c.length; s += 1) {
                            var f = c[s];
                            p[f[0]] = f[1];
                        }
                        l = typeof e.stops[0][0];
                    } else {
                        if ('identity' !== i) {
                            throw new Error('Unknown function type "' + i + '"');
                        }
                        u = evaluateIdentityFunction;
                    }
                    if (r) {
                        for (var v = {}, d = [], y = 0; y < e.stops.length; y++) {
                            var F = e.stops[y], h = F[0].zoom;
                            void 0 === v[h] && (v[h] = {
                                zoom: h,
                                type: e.type,
                                property: e.property,
                                default: e.default,
                                stops: []
                            }, d.push(h)), v[h].stops.push([
                                F[0].value,
                                F[1]
                            ]);
                        }
                        for (var m = [], g = 0, b = d; g < b.length; g += 1) {
                            var S = b[g];
                            m.push([
                                v[S].zoom,
                                createFunction(v[S], t)
                            ]);
                        }
                        return {
                            kind: 'composite',
                            interpolationFactor: Interpolate.interpolationFactor.bind(void 0, { name: 'linear' }),
                            zoomStops: m.map(function (e) {
                                return e[0];
                            }),
                            evaluate: function (o, r) {
                                var n = o.zoom;
                                return evaluateExponentialFunction({
                                    stops: m,
                                    base: e.base
                                }, t, n).evaluate(n, r);
                            }
                        };
                    }
                    return a ? {
                        kind: 'camera',
                        interpolationFactor: 'exponential' === i ? Interpolate.interpolationFactor.bind(void 0, {
                            name: 'exponential',
                            base: void 0 !== e.base ? e.base : 1
                        }) : function () {
                            return 0;
                        },
                        zoomStops: e.stops.map(function (e) {
                            return e[0];
                        }),
                        evaluate: function (o) {
                            var r = o.zoom;
                            return u(e, t, r, p, l);
                        }
                    } : {
                        kind: 'source',
                        evaluate: function (o, r) {
                            var n = r && r.properties ? r.properties[e.property] : void 0;
                            return void 0 === n ? coalesce(e.default, t.default) : u(e, t, n, p, l);
                        }
                    };
                }
                function coalesce(e, t, o) {
                    return void 0 !== e ? e : void 0 !== t ? t : void 0 !== o ? o : void 0;
                }
                function evaluateCategoricalFunction(e, t, o, r, n) {
                    return coalesce(typeof o === n ? r[o] : void 0, e.default, t.default);
                }
                function evaluateIntervalFunction(e, t, o) {
                    if ('number' !== getType(o)) {
                        return coalesce(e.default, t.default);
                    }
                    var r = e.stops.length;
                    if (1 === r) {
                        return e.stops[0][1];
                    }
                    if (o <= e.stops[0][0]) {
                        return e.stops[0][1];
                    }
                    if (o >= e.stops[r - 1][0]) {
                        return e.stops[r - 1][1];
                    }
                    var n = findStopLessThanOrEqualTo(e.stops, o);
                    return e.stops[n][1];
                }
                function evaluateExponentialFunction(e, t, o) {
                    var r = void 0 !== e.base ? e.base : 1;
                    if ('number' !== getType(o)) {
                        return coalesce(e.default, t.default);
                    }
                    var n = e.stops.length;
                    if (1 === n) {
                        return e.stops[0][1];
                    }
                    if (o <= e.stops[0][0]) {
                        return e.stops[0][1];
                    }
                    if (o >= e.stops[n - 1][0]) {
                        return e.stops[n - 1][1];
                    }
                    var a = findStopLessThanOrEqualTo(e.stops, o), i = interpolationFactor(o, r, e.stops[a][0], e.stops[a + 1][0]), u = e.stops[a][1], p = e.stops[a + 1][1], l = interpolate[t.type] || identityFunction;
                    if (e.colorSpace && 'rgb' !== e.colorSpace) {
                        var s = colorSpaces[e.colorSpace];
                        l = function (e, t) {
                            return s.reverse(s.interpolate(s.forward(e), s.forward(t), i));
                        };
                    }
                    return 'function' == typeof u.evaluate ? {
                        evaluate: function () {
                            var arguments$1 = arguments;
                            for (var e = [], t = arguments.length; t--;) {
                                e[t] = arguments$1[t];
                            }
                            var o = u.evaluate.apply(void 0, e), r = p.evaluate.apply(void 0, e);
                            if (void 0 !== o && void 0 !== r) {
                                return l(o, r, i);
                            }
                        }
                    } : l(u, p, i);
                }
                function evaluateIdentityFunction(e, t, o) {
                    return 'color' === t.type ? o = Color.parse(o) : getType(o) === t.type || 'enum' === t.type && t.values[o] || (o = void 0), coalesce(o, e.default, t.default);
                }
                function findStopLessThanOrEqualTo(e, t) {
                    for (var o, r, n = e.length, a = 0, i = n - 1, u = 0; a <= i;) {
                        if (u = Math.floor((a + i) / 2), o = e[u][0], r = e[u + 1][0], t === o || t > o && t < r) {
                            return u;
                        }
                        o < t ? a = u + 1 : o > t && (i = u - 1);
                    }
                    return Math.max(u - 1, 0);
                }
                function interpolationFactor(e, t, o, r) {
                    var n = r - o, a = e - o;
                    return 0 === n ? 0 : 1 === t ? a / n : (Math.pow(t, a) - 1) / (Math.pow(t, n) - 1);
                }
                var colorSpaces = _dereq_('../util/color_spaces'), Color = _dereq_('../util/color'), extend = _dereq_('../util/extend'), getType = _dereq_('../util/get_type'), interpolate = _dereq_('../util/interpolate'), Interpolate = _dereq_('../expression/definitions/interpolate');
                module.exports = {
                    createFunction: createFunction,
                    isFunction: isFunction
                };
            },
            {
                '../expression/definitions/interpolate': 132,
                '../util/color': 153,
                '../util/color_spaces': 154,
                '../util/extend': 156,
                '../util/get_type': 157,
                '../util/interpolate': 158
            }
        ],
        150: [
            function (_dereq_, module, exports) {
                'use strict';
                function stringify(r) {
                    var t = typeof r;
                    if ('number' === t || 'boolean' === t || 'string' === t || void 0 === r || null === r) {
                        return JSON.stringify(r);
                    }
                    if (Array.isArray(r)) {
                        for (var e = '[', i = 0, n = r; i < n.length; i += 1) {
                            e += stringify(n[i]) + ',';
                        }
                        return e + ']';
                    }
                    for (var o = Object.keys(r).sort(), f = '{', u = 0; u < o.length; u++) {
                        f += JSON.stringify(o[u]) + ':' + stringify(r[o[u]]) + ',';
                    }
                    return f + '}';
                }
                function getKey(r) {
                    for (var t = '', e = 0, i = refProperties; e < i.length; e += 1) {
                        t += '/' + stringify(r[i[e]]);
                    }
                    return t;
                }
                function groupByLayout(r) {
                    for (var t = {}, e = 0; e < r.length; e++) {
                        var i = getKey(r[e]), n = t[i];
                        n || (n = t[i] = []), n.push(r[e]);
                    }
                    var o = [];
                    for (var f in t) {
                        o.push(t[f]);
                    }
                    return o;
                }
                var refProperties = _dereq_('./util/ref_properties');
                module.exports = groupByLayout;
            },
            { './util/ref_properties': 159 }
        ],
        151: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = _dereq_('./v8.json');
            },
            { './v8.json': 152 }
        ],
        152: [
            function (_dereq_, module, exports) {
                module.exports = {
                    '$version': 8,
                    '$root': {
                        'version': {
                            'required': true,
                            'type': 'enum',
                            'values': [8]
                        },
                        'name': { 'type': 'string' },
                        'metadata': { 'type': '*' },
                        'center': {
                            'type': 'array',
                            'value': 'number'
                        },
                        'zoom': { 'type': 'number' },
                        'bearing': {
                            'type': 'number',
                            'default': 0,
                            'period': 360,
                            'units': 'degrees'
                        },
                        'pitch': {
                            'type': 'number',
                            'default': 0,
                            'units': 'degrees'
                        },
                        'light': { 'type': 'light' },
                        'sources': {
                            'required': true,
                            'type': 'sources'
                        },
                        'sprite': { 'type': 'string' },
                        'glyphs': { 'type': 'string' },
                        'transition': { 'type': 'transition' },
                        'layers': {
                            'required': true,
                            'type': 'array',
                            'value': 'layer'
                        }
                    },
                    'sources': { '*': { 'type': 'source' } },
                    'source': [
                        'source_vector',
                        'source_raster',
                        'source_raster_dem',
                        'source_geojson',
                        'source_video',
                        'source_image',
                        'source_canvas'
                    ],
                    'source_vector': {
                        'type': {
                            'required': true,
                            'type': 'enum',
                            'values': { 'vector': {} }
                        },
                        'url': { 'type': 'string' },
                        'tiles': {
                            'type': 'array',
                            'value': 'string'
                        },
                        'bounds': {
                            'type': 'array',
                            'value': 'number',
                            'length': 4,
                            'default': [
                                -180,
                                -85.0511,
                                180,
                                85.0511
                            ]
                        },
                        'minzoom': {
                            'type': 'number',
                            'default': 0
                        },
                        'maxzoom': {
                            'type': 'number',
                            'default': 22
                        },
                        'attribution': { 'type': 'string' },
                        '*': { 'type': '*' }
                    },
                    'source_raster': {
                        'type': {
                            'required': true,
                            'type': 'enum',
                            'values': { 'raster': {} }
                        },
                        'url': { 'type': 'string' },
                        'tiles': {
                            'type': 'array',
                            'value': 'string'
                        },
                        'bounds': {
                            'type': 'array',
                            'value': 'number',
                            'length': 4,
                            'default': [
                                -180,
                                -85.0511,
                                180,
                                85.0511
                            ]
                        },
                        'minzoom': {
                            'type': 'number',
                            'default': 0
                        },
                        'maxzoom': {
                            'type': 'number',
                            'default': 22
                        },
                        'tileSize': {
                            'type': 'number',
                            'default': 512,
                            'units': 'pixels'
                        },
                        'scheme': {
                            'type': 'enum',
                            'values': {
                                'xyz': {},
                                'tms': {}
                            },
                            'default': 'xyz'
                        },
                        'attribution': { 'type': 'string' },
                        '*': { 'type': '*' }
                    },
                    'source_raster_dem': {
                        'type': {
                            'required': true,
                            'type': 'enum',
                            'values': { 'raster-dem': {} }
                        },
                        'url': { 'type': 'string' },
                        'tiles': {
                            'type': 'array',
                            'value': 'string'
                        },
                        'bounds': {
                            'type': 'array',
                            'value': 'number',
                            'length': 4,
                            'default': [
                                -180,
                                -85.0511,
                                180,
                                85.0511
                            ]
                        },
                        'minzoom': {
                            'type': 'number',
                            'default': 0
                        },
                        'maxzoom': {
                            'type': 'number',
                            'default': 22
                        },
                        'tileSize': {
                            'type': 'number',
                            'default': 512,
                            'units': 'pixels'
                        },
                        'attribution': { 'type': 'string' },
                        '*': { 'type': '*' }
                    },
                    'source_geojson': {
                        'type': {
                            'required': true,
                            'type': 'enum',
                            'values': { 'geojson': {} }
                        },
                        'data': { 'type': '*' },
                        'maxzoom': {
                            'type': 'number',
                            'default': 18
                        },
                        'buffer': {
                            'type': 'number',
                            'default': 128,
                            'maximum': 512,
                            'minimum': 0
                        },
                        'tolerance': {
                            'type': 'number',
                            'default': 0.375
                        },
                        'cluster': {
                            'type': 'boolean',
                            'default': false
                        },
                        'clusterRadius': {
                            'type': 'number',
                            'default': 50,
                            'minimum': 0
                        },
                        'clusterMaxZoom': { 'type': 'number' }
                    },
                    'source_video': {
                        'type': {
                            'required': true,
                            'type': 'enum',
                            'values': { 'video': {} }
                        },
                        'urls': {
                            'required': true,
                            'type': 'array',
                            'value': 'string'
                        },
                        'coordinates': {
                            'required': true,
                            'type': 'array',
                            'length': 4,
                            'value': {
                                'type': 'array',
                                'length': 2,
                                'value': 'number'
                            }
                        }
                    },
                    'source_image': {
                        'type': {
                            'required': true,
                            'type': 'enum',
                            'values': { 'image': {} }
                        },
                        'url': {
                            'required': true,
                            'type': 'string'
                        },
                        'coordinates': {
                            'required': true,
                            'type': 'array',
                            'length': 4,
                            'value': {
                                'type': 'array',
                                'length': 2,
                                'value': 'number'
                            }
                        }
                    },
                    'source_canvas': {
                        'type': {
                            'required': true,
                            'type': 'enum',
                            'values': { 'canvas': {} }
                        },
                        'coordinates': {
                            'required': true,
                            'type': 'array',
                            'length': 4,
                            'value': {
                                'type': 'array',
                                'length': 2,
                                'value': 'number'
                            }
                        },
                        'animate': {
                            'type': 'boolean',
                            'default': 'true'
                        },
                        'canvas': {
                            'type': 'string',
                            'required': true
                        }
                    },
                    'layer': {
                        'id': {
                            'type': 'string',
                            'required': true
                        },
                        'type': {
                            'type': 'enum',
                            'values': {
                                'fill': {},
                                'line': {},
                                'symbol': {},
                                'circle': {},
                                'heatmap': {},
                                'fill-extrusion': {},
                                'raster': {},
                                'hillshade': {},
                                'background': {}
                            },
                            'required': true
                        },
                        'metadata': { 'type': '*' },
                        'source': { 'type': 'string' },
                        'source-layer': { 'type': 'string' },
                        'minzoom': {
                            'type': 'number',
                            'minimum': 0,
                            'maximum': 24
                        },
                        'maxzoom': {
                            'type': 'number',
                            'minimum': 0,
                            'maximum': 24
                        },
                        'filter': { 'type': 'filter' },
                        'layout': { 'type': 'layout' },
                        'paint': { 'type': 'paint' }
                    },
                    'layout': [
                        'layout_fill',
                        'layout_line',
                        'layout_circle',
                        'layout_heatmap',
                        'layout_fill-extrusion',
                        'layout_symbol',
                        'layout_raster',
                        'layout_hillshade',
                        'layout_background'
                    ],
                    'layout_background': {
                        'visibility': {
                            'type': 'enum',
                            'values': {
                                'visible': {},
                                'none': {}
                            },
                            'default': 'visible'
                        }
                    },
                    'layout_fill': {
                        'visibility': {
                            'type': 'enum',
                            'values': {
                                'visible': {},
                                'none': {}
                            },
                            'default': 'visible'
                        }
                    },
                    'layout_circle': {
                        'visibility': {
                            'type': 'enum',
                            'values': {
                                'visible': {},
                                'none': {}
                            },
                            'default': 'visible'
                        }
                    },
                    'layout_heatmap': {
                        'visibility': {
                            'type': 'enum',
                            'values': {
                                'visible': {},
                                'none': {}
                            },
                            'default': 'visible'
                        }
                    },
                    'layout_fill-extrusion': {
                        'visibility': {
                            'type': 'enum',
                            'values': {
                                'visible': {},
                                'none': {}
                            },
                            'default': 'visible'
                        }
                    },
                    'layout_line': {
                        'line-cap': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'butt': {},
                                'round': {},
                                'square': {}
                            },
                            'default': 'butt'
                        },
                        'line-join': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'property-function': true,
                            'values': {
                                'bevel': {},
                                'round': {},
                                'miter': {}
                            },
                            'default': 'miter'
                        },
                        'line-miter-limit': {
                            'type': 'number',
                            'default': 2,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'requires': [{ 'line-join': 'miter' }]
                        },
                        'line-round-limit': {
                            'type': 'number',
                            'default': 1.05,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'requires': [{ 'line-join': 'round' }]
                        },
                        'visibility': {
                            'type': 'enum',
                            'values': {
                                'visible': {},
                                'none': {}
                            },
                            'default': 'visible'
                        }
                    },
                    'layout_symbol': {
                        'symbol-placement': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'point': {},
                                'line': {}
                            },
                            'default': 'point'
                        },
                        'symbol-spacing': {
                            'type': 'number',
                            'default': 250,
                            'minimum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'units': 'pixels',
                            'requires': [{ 'symbol-placement': 'line' }]
                        },
                        'symbol-avoid-edges': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': false
                        },
                        'icon-allow-overlap': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': false,
                            'requires': ['icon-image']
                        },
                        'icon-ignore-placement': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': false,
                            'requires': ['icon-image']
                        },
                        'icon-optional': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': false,
                            'requires': [
                                'icon-image',
                                'text-field'
                            ]
                        },
                        'icon-rotation-alignment': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {},
                                'auto': {}
                            },
                            'default': 'auto',
                            'requires': ['icon-image']
                        },
                        'icon-size': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'units': 'factor of the original icon size',
                            'requires': ['icon-image']
                        },
                        'icon-text-fit': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'none': {},
                                'width': {},
                                'height': {},
                                'both': {}
                            },
                            'default': 'none',
                            'requires': [
                                'icon-image',
                                'text-field'
                            ]
                        },
                        'icon-text-fit-padding': {
                            'type': 'array',
                            'value': 'number',
                            'length': 4,
                            'default': [
                                0,
                                0,
                                0,
                                0
                            ],
                            'units': 'pixels',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'requires': [
                                'icon-image',
                                'text-field',
                                {
                                    'icon-text-fit': [
                                        'both',
                                        'width',
                                        'height'
                                    ]
                                }
                            ]
                        },
                        'icon-image': {
                            'type': 'string',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'property-function': true,
                            'tokens': true
                        },
                        'icon-rotate': {
                            'type': 'number',
                            'default': 0,
                            'period': 360,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'units': 'degrees',
                            'requires': ['icon-image']
                        },
                        'icon-padding': {
                            'type': 'number',
                            'default': 2,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'units': 'pixels',
                            'requires': ['icon-image']
                        },
                        'icon-keep-upright': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': false,
                            'requires': [
                                'icon-image',
                                { 'icon-rotation-alignment': 'map' },
                                { 'symbol-placement': 'line' }
                            ]
                        },
                        'icon-offset': {
                            'type': 'array',
                            'value': 'number',
                            'length': 2,
                            'default': [
                                0,
                                0
                            ],
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'requires': ['icon-image']
                        },
                        'icon-anchor': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'property-function': true,
                            'values': {
                                'center': {},
                                'left': {},
                                'right': {},
                                'top': {},
                                'bottom': {},
                                'top-left': {},
                                'top-right': {},
                                'bottom-left': {},
                                'bottom-right': {}
                            },
                            'default': 'center',
                            'requires': ['icon-image']
                        },
                        'icon-pitch-alignment': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {},
                                'auto': {}
                            },
                            'default': 'auto',
                            'requires': ['icon-image']
                        },
                        'text-pitch-alignment': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {},
                                'auto': {}
                            },
                            'default': 'auto',
                            'requires': ['text-field']
                        },
                        'text-rotation-alignment': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {},
                                'auto': {}
                            },
                            'default': 'auto',
                            'requires': ['text-field']
                        },
                        'text-field': {
                            'type': 'string',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'property-function': true,
                            'default': '',
                            'tokens': true
                        },
                        'text-font': {
                            'type': 'array',
                            'value': 'string',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'property-function': true,
                            'default': [
                                'Open Sans Regular',
                                'Arial Unicode MS Regular'
                            ],
                            'requires': ['text-field']
                        },
                        'text-size': {
                            'type': 'number',
                            'default': 16,
                            'minimum': 0,
                            'units': 'pixels',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'requires': ['text-field']
                        },
                        'text-max-width': {
                            'type': 'number',
                            'default': 10,
                            'minimum': 0,
                            'units': 'ems',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'requires': ['text-field']
                        },
                        'text-line-height': {
                            'type': 'number',
                            'default': 1.2,
                            'units': 'ems',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'requires': ['text-field']
                        },
                        'text-letter-spacing': {
                            'type': 'number',
                            'default': 0,
                            'units': 'ems',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'requires': ['text-field']
                        },
                        'text-justify': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'property-function': true,
                            'values': {
                                'left': {},
                                'center': {},
                                'right': {}
                            },
                            'default': 'center',
                            'requires': ['text-field']
                        },
                        'text-anchor': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'property-function': true,
                            'values': {
                                'center': {},
                                'left': {},
                                'right': {},
                                'top': {},
                                'bottom': {},
                                'top-left': {},
                                'top-right': {},
                                'bottom-left': {},
                                'bottom-right': {}
                            },
                            'default': 'center',
                            'requires': ['text-field']
                        },
                        'text-max-angle': {
                            'type': 'number',
                            'default': 45,
                            'units': 'degrees',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'requires': [
                                'text-field',
                                { 'symbol-placement': 'line' }
                            ]
                        },
                        'text-rotate': {
                            'type': 'number',
                            'default': 0,
                            'period': 360,
                            'units': 'degrees',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'requires': ['text-field']
                        },
                        'text-padding': {
                            'type': 'number',
                            'default': 2,
                            'minimum': 0,
                            'units': 'pixels',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'requires': ['text-field']
                        },
                        'text-keep-upright': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': true,
                            'requires': [
                                'text-field',
                                { 'text-rotation-alignment': 'map' },
                                { 'symbol-placement': 'line' }
                            ]
                        },
                        'text-transform': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'property-function': true,
                            'values': {
                                'none': {},
                                'uppercase': {},
                                'lowercase': {}
                            },
                            'default': 'none',
                            'requires': ['text-field']
                        },
                        'text-offset': {
                            'type': 'array',
                            'value': 'number',
                            'units': 'ems',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'length': 2,
                            'default': [
                                0,
                                0
                            ],
                            'requires': ['text-field']
                        },
                        'text-allow-overlap': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': false,
                            'requires': ['text-field']
                        },
                        'text-ignore-placement': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': false,
                            'requires': ['text-field']
                        },
                        'text-optional': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': false,
                            'requires': [
                                'text-field',
                                'icon-image'
                            ]
                        },
                        'visibility': {
                            'type': 'enum',
                            'values': {
                                'visible': {},
                                'none': {}
                            },
                            'default': 'visible'
                        }
                    },
                    'layout_raster': {
                        'visibility': {
                            'type': 'enum',
                            'values': {
                                'visible': {},
                                'none': {}
                            },
                            'default': 'visible'
                        }
                    },
                    'layout_hillshade': {
                        'visibility': {
                            'type': 'enum',
                            'values': {
                                'visible': {},
                                'none': {}
                            },
                            'default': 'visible'
                        }
                    },
                    'filter': {
                        'type': 'array',
                        'value': '*'
                    },
                    'filter_operator': {
                        'type': 'enum',
                        'values': {
                            '==': {},
                            '!=': {},
                            '>': {},
                            '>=': {},
                            '<': {},
                            '<=': {},
                            'in': {},
                            '!in': {},
                            'all': {},
                            'any': {},
                            'none': {},
                            'has': {},
                            '!has': {}
                        }
                    },
                    'geometry_type': {
                        'type': 'enum',
                        'values': {
                            'Point': {},
                            'LineString': {},
                            'Polygon': {}
                        }
                    },
                    'function': {
                        'expression': { 'type': 'expression' },
                        'stops': {
                            'type': 'array',
                            'value': 'function_stop'
                        },
                        'base': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0
                        },
                        'property': {
                            'type': 'string',
                            'default': '$zoom'
                        },
                        'type': {
                            'type': 'enum',
                            'values': {
                                'identity': {},
                                'exponential': {},
                                'interval': {},
                                'categorical': {}
                            },
                            'default': 'exponential'
                        },
                        'colorSpace': {
                            'type': 'enum',
                            'values': {
                                'rgb': {},
                                'lab': {},
                                'hcl': {}
                            },
                            'default': 'rgb'
                        },
                        'default': {
                            'type': '*',
                            'required': false
                        }
                    },
                    'function_stop': {
                        'type': 'array',
                        'minimum': 0,
                        'maximum': 22,
                        'value': [
                            'number',
                            'color'
                        ],
                        'length': 2
                    },
                    'expression': {
                        'type': 'array',
                        'value': '*',
                        'minimum': 1
                    },
                    'expression_name': {
                        'type': 'enum',
                        'values': {
                            'let': { 'group': 'Variable binding' },
                            'var': { 'group': 'Variable binding' },
                            'literal': { 'group': 'Types' },
                            'array': { 'group': 'Types' },
                            'at': { 'group': 'Lookup' },
                            'case': { 'group': 'Decision' },
                            'match': { 'group': 'Decision' },
                            'coalesce': { 'group': 'Decision' },
                            'step': { 'group': 'Ramps, scales, curves' },
                            'interpolate': { 'group': 'Ramps, scales, curves' },
                            'ln2': { 'group': 'Math' },
                            'pi': { 'group': 'Math' },
                            'e': { 'group': 'Math' },
                            'typeof': { 'group': 'Types' },
                            'string': { 'group': 'Types' },
                            'number': { 'group': 'Types' },
                            'boolean': { 'group': 'Types' },
                            'object': { 'group': 'Types' },
                            'to-string': { 'group': 'Types' },
                            'to-number': { 'group': 'Types' },
                            'to-boolean': { 'group': 'Types' },
                            'to-rgba': { 'group': 'Color' },
                            'to-color': { 'group': 'Types' },
                            'rgb': { 'group': 'Color' },
                            'rgba': { 'group': 'Color' },
                            'get': { 'group': 'Lookup' },
                            'has': { 'group': 'Lookup' },
                            'length': { 'group': 'Lookup' },
                            'properties': { 'group': 'Feature data' },
                            'geometry-type': { 'group': 'Feature data' },
                            'id': { 'group': 'Feature data' },
                            'zoom': { 'group': 'Zoom' },
                            'heatmap-density': { 'group': 'Heatmap' },
                            '+': { 'group': 'Math' },
                            '*': { 'group': 'Math' },
                            '-': { 'group': 'Math' },
                            '/': { 'group': 'Math' },
                            '%': { 'group': 'Math' },
                            '^': { 'group': 'Math' },
                            'sqrt': { 'group': 'Math' },
                            'log10': { 'group': 'Math' },
                            'ln': { 'group': 'Math' },
                            'log2': { 'group': 'Math' },
                            'sin': { 'group': 'Math' },
                            'cos': { 'group': 'Math' },
                            'tan': { 'group': 'Math' },
                            'asin': { 'group': 'Math' },
                            'acos': { 'group': 'Math' },
                            'atan': { 'group': 'Math' },
                            'min': { 'group': 'Math' },
                            'max': { 'group': 'Math' },
                            '==': { 'group': 'Decision' },
                            '!=': { 'group': 'Decision' },
                            '>': { 'group': 'Decision' },
                            '<': { 'group': 'Decision' },
                            '>=': { 'group': 'Decision' },
                            '<=': { 'group': 'Decision' },
                            'all': { 'group': 'Decision' },
                            'any': { 'group': 'Decision' },
                            '!': { 'group': 'Decision' },
                            'upcase': { 'group': 'String' },
                            'downcase': { 'group': 'String' },
                            'concat': { 'group': 'String' }
                        }
                    },
                    'light': {
                        'anchor': {
                            'type': 'enum',
                            'default': 'viewport',
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'transition': false,
                            'zoom-function': true,
                            'property-function': false,
                            'function': 'piecewise-constant'
                        },
                        'position': {
                            'type': 'array',
                            'default': [
                                1.15,
                                210,
                                30
                            ],
                            'length': 3,
                            'value': 'number',
                            'transition': true,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': false
                        },
                        'color': {
                            'type': 'color',
                            'default': '#ffffff',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': false,
                            'transition': true
                        },
                        'intensity': {
                            'type': 'number',
                            'default': 0.5,
                            'minimum': 0,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': false,
                            'transition': true
                        }
                    },
                    'paint': [
                        'paint_fill',
                        'paint_line',
                        'paint_circle',
                        'paint_heatmap',
                        'paint_fill-extrusion',
                        'paint_symbol',
                        'paint_raster',
                        'paint_hillshade',
                        'paint_background'
                    ],
                    'paint_fill': {
                        'fill-antialias': {
                            'type': 'boolean',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'default': true
                        },
                        'fill-opacity': {
                            'type': 'number',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'transition': true
                        },
                        'fill-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': [{ '!': 'fill-pattern' }]
                        },
                        'fill-outline-color': {
                            'type': 'color',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': [
                                { '!': 'fill-pattern' },
                                { 'fill-antialias': true }
                            ]
                        },
                        'fill-translate': {
                            'type': 'array',
                            'value': 'number',
                            'length': 2,
                            'default': [
                                0,
                                0
                            ],
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'fill-translate-anchor': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'default': 'map',
                            'requires': ['fill-translate']
                        },
                        'fill-pattern': {
                            'type': 'string',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'transition': true
                        }
                    },
                    'paint_fill-extrusion': {
                        'fill-extrusion-opacity': {
                            'type': 'number',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': false,
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'transition': true
                        },
                        'fill-extrusion-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': [{ '!': 'fill-extrusion-pattern' }]
                        },
                        'fill-extrusion-translate': {
                            'type': 'array',
                            'value': 'number',
                            'length': 2,
                            'default': [
                                0,
                                0
                            ],
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'fill-extrusion-translate-anchor': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'default': 'map',
                            'requires': ['fill-extrusion-translate']
                        },
                        'fill-extrusion-pattern': {
                            'type': 'string',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'transition': true
                        },
                        'fill-extrusion-height': {
                            'type': 'number',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'default': 0,
                            'minimum': 0,
                            'units': 'meters',
                            'transition': true
                        },
                        'fill-extrusion-base': {
                            'type': 'number',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'default': 0,
                            'minimum': 0,
                            'units': 'meters',
                            'transition': true,
                            'requires': ['fill-extrusion-height']
                        }
                    },
                    'paint_line': {
                        'line-opacity': {
                            'type': 'number',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'transition': true
                        },
                        'line-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': [{ '!': 'line-pattern' }]
                        },
                        'line-translate': {
                            'type': 'array',
                            'value': 'number',
                            'length': 2,
                            'default': [
                                0,
                                0
                            ],
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'line-translate-anchor': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'default': 'map',
                            'requires': ['line-translate']
                        },
                        'line-width': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'line-gap-width': {
                            'type': 'number',
                            'default': 0,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'line-offset': {
                            'type': 'number',
                            'default': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'line-blur': {
                            'type': 'number',
                            'default': 0,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'line-dasharray': {
                            'type': 'array',
                            'value': 'number',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'minimum': 0,
                            'transition': true,
                            'units': 'line widths',
                            'requires': [{ '!': 'line-pattern' }]
                        },
                        'line-pattern': {
                            'type': 'string',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'transition': true
                        }
                    },
                    'paint_circle': {
                        'circle-radius': {
                            'type': 'number',
                            'default': 5,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'circle-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true
                        },
                        'circle-blur': {
                            'type': 'number',
                            'default': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true
                        },
                        'circle-opacity': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true
                        },
                        'circle-translate': {
                            'type': 'array',
                            'value': 'number',
                            'length': 2,
                            'default': [
                                0,
                                0
                            ],
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'circle-translate-anchor': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'default': 'map',
                            'requires': ['circle-translate']
                        },
                        'circle-pitch-scale': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'default': 'map'
                        },
                        'circle-pitch-alignment': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'default': 'viewport'
                        },
                        'circle-stroke-width': {
                            'type': 'number',
                            'default': 0,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'circle-stroke-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true
                        },
                        'circle-stroke-opacity': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true
                        }
                    },
                    'paint_heatmap': {
                        'heatmap-radius': {
                            'type': 'number',
                            'default': 30,
                            'minimum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels'
                        },
                        'heatmap-weight': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': false
                        },
                        'heatmap-intensity': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': false,
                            'transition': true
                        },
                        'heatmap-color': {
                            'type': 'color',
                            'default': [
                                'interpolate',
                                ['linear'],
                                ['heatmap-density'],
                                0,
                                'rgba(0, 0, 255, 0)',
                                0.1,
                                'royalblue',
                                0.3,
                                'cyan',
                                0.5,
                                'lime',
                                0.7,
                                'yellow',
                                1,
                                'red'
                            ],
                            'function': 'interpolated',
                            'zoom-function': false,
                            'property-function': false,
                            'transition': false
                        },
                        'heatmap-opacity': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': false,
                            'transition': true
                        }
                    },
                    'paint_symbol': {
                        'icon-opacity': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': ['icon-image']
                        },
                        'icon-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': ['icon-image']
                        },
                        'icon-halo-color': {
                            'type': 'color',
                            'default': 'rgba(0, 0, 0, 0)',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': ['icon-image']
                        },
                        'icon-halo-width': {
                            'type': 'number',
                            'default': 0,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels',
                            'requires': ['icon-image']
                        },
                        'icon-halo-blur': {
                            'type': 'number',
                            'default': 0,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels',
                            'requires': ['icon-image']
                        },
                        'icon-translate': {
                            'type': 'array',
                            'value': 'number',
                            'length': 2,
                            'default': [
                                0,
                                0
                            ],
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true,
                            'units': 'pixels',
                            'requires': ['icon-image']
                        },
                        'icon-translate-anchor': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'default': 'map',
                            'requires': [
                                'icon-image',
                                'icon-translate'
                            ]
                        },
                        'text-opacity': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': ['text-field']
                        },
                        'text-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': ['text-field']
                        },
                        'text-halo-color': {
                            'type': 'color',
                            'default': 'rgba(0, 0, 0, 0)',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'requires': ['text-field']
                        },
                        'text-halo-width': {
                            'type': 'number',
                            'default': 0,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels',
                            'requires': ['text-field']
                        },
                        'text-halo-blur': {
                            'type': 'number',
                            'default': 0,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'property-function': true,
                            'transition': true,
                            'units': 'pixels',
                            'requires': ['text-field']
                        },
                        'text-translate': {
                            'type': 'array',
                            'value': 'number',
                            'length': 2,
                            'default': [
                                0,
                                0
                            ],
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true,
                            'units': 'pixels',
                            'requires': ['text-field']
                        },
                        'text-translate-anchor': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'default': 'map',
                            'requires': [
                                'text-field',
                                'text-translate'
                            ]
                        }
                    },
                    'paint_raster': {
                        'raster-opacity': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true
                        },
                        'raster-hue-rotate': {
                            'type': 'number',
                            'default': 0,
                            'period': 360,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true,
                            'units': 'degrees'
                        },
                        'raster-brightness-min': {
                            'type': 'number',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'default': 0,
                            'minimum': 0,
                            'maximum': 1,
                            'transition': true
                        },
                        'raster-brightness-max': {
                            'type': 'number',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'transition': true
                        },
                        'raster-saturation': {
                            'type': 'number',
                            'default': 0,
                            'minimum': -1,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true
                        },
                        'raster-contrast': {
                            'type': 'number',
                            'default': 0,
                            'minimum': -1,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true
                        },
                        'raster-fade-duration': {
                            'type': 'number',
                            'default': 300,
                            'minimum': 0,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': false,
                            'units': 'milliseconds'
                        }
                    },
                    'paint_hillshade': {
                        'hillshade-illumination-direction': {
                            'type': 'number',
                            'default': 335,
                            'minimum': 0,
                            'maximum': 359,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': false
                        },
                        'hillshade-illumination-anchor': {
                            'type': 'enum',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'values': {
                                'map': {},
                                'viewport': {}
                            },
                            'default': 'viewport'
                        },
                        'hillshade-exaggeration': {
                            'type': 'number',
                            'default': 0.5,
                            'minimum': 0,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true
                        },
                        'hillshade-shadow-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true
                        },
                        'hillshade-highlight-color': {
                            'type': 'color',
                            'default': '#FFFFFF',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true
                        },
                        'hillshade-accent-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true
                        }
                    },
                    'paint_background': {
                        'background-color': {
                            'type': 'color',
                            'default': '#000000',
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true,
                            'requires': [{ '!': 'background-pattern' }]
                        },
                        'background-pattern': {
                            'type': 'string',
                            'function': 'piecewise-constant',
                            'zoom-function': true,
                            'transition': true
                        },
                        'background-opacity': {
                            'type': 'number',
                            'default': 1,
                            'minimum': 0,
                            'maximum': 1,
                            'function': 'interpolated',
                            'zoom-function': true,
                            'transition': true
                        }
                    },
                    'transition': {
                        'duration': {
                            'type': 'number',
                            'default': 300,
                            'minimum': 0,
                            'units': 'milliseconds'
                        },
                        'delay': {
                            'type': 'number',
                            'default': 0,
                            'minimum': 0,
                            'units': 'milliseconds'
                        }
                    }
                };
            },
            {}
        ],
        153: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('csscolorparser'), parseCSSColor = ref.parseCSSColor, Color = function (r, o, t, e) {
                        void 0 === e && (e = 1), this.r = r, this.g = o, this.b = t, this.a = e;
                    };
                Color.parse = function (r) {
                    if (r) {
                        if (r instanceof Color) {
                            return r;
                        }
                        if ('string' == typeof r) {
                            var o = parseCSSColor(r);
                            if (o) {
                                return new Color(o[0] / 255 * o[3], o[1] / 255 * o[3], o[2] / 255 * o[3], o[3]);
                            }
                        }
                    }
                }, Color.prototype.toString = function () {
                    var r = this, o = function (o) {
                            return Math.round(255 * o / r.a);
                        };
                    return 'rgba(' + [
                        this.r,
                        this.g,
                        this.b
                    ].map(o).concat(this.a).join(',') + ')';
                }, Color.black = new Color(0, 0, 0, 1), Color.white = new Color(1, 1, 1, 1), Color.transparent = new Color(0, 0, 0, 0), module.exports = Color;
            },
            { 'csscolorparser': 13 }
        ],
        154: [
            function (_dereq_, module, exports) {
                'use strict';
                function xyz2lab(a) {
                    return a > t3 ? Math.pow(a, 1 / 3) : a / t2 + t0;
                }
                function lab2xyz(a) {
                    return a > t1 ? a * a * a : t2 * (a - t0);
                }
                function xyz2rgb(a) {
                    return 255 * (a <= 0.0031308 ? 12.92 * a : 1.055 * Math.pow(a, 1 / 2.4) - 0.055);
                }
                function rgb2xyz(a) {
                    return a /= 255, a <= 0.04045 ? a / 12.92 : Math.pow((a + 0.055) / 1.055, 2.4);
                }
                function rgbToLab(a) {
                    var r = rgb2xyz(a.r), t = rgb2xyz(a.g), e = rgb2xyz(a.b), n = xyz2lab((0.4124564 * r + 0.3575761 * t + 0.1804375 * e) / Xn), l = xyz2lab((0.2126729 * r + 0.7151522 * t + 0.072175 * e) / Yn);
                    return {
                        l: 116 * l - 16,
                        a: 500 * (n - l),
                        b: 200 * (l - xyz2lab((0.0193339 * r + 0.119192 * t + 0.9503041 * e) / Zn)),
                        alpha: a.a
                    };
                }
                function labToRgb(a) {
                    var r = (a.l + 16) / 116, t = isNaN(a.a) ? r : r + a.a / 500, e = isNaN(a.b) ? r : r - a.b / 200;
                    return r = Yn * lab2xyz(r), t = Xn * lab2xyz(t), e = Zn * lab2xyz(e), new Color(xyz2rgb(3.2404542 * t - 1.5371385 * r - 0.4985314 * e), xyz2rgb(-0.969266 * t + 1.8760108 * r + 0.041556 * e), xyz2rgb(0.0556434 * t - 0.2040259 * r + 1.0572252 * e), a.alpha);
                }
                function interpolateLab(a, r, t) {
                    return {
                        l: interpolateNumber(a.l, r.l, t),
                        a: interpolateNumber(a.a, r.a, t),
                        b: interpolateNumber(a.b, r.b, t),
                        alpha: interpolateNumber(a.alpha, r.alpha, t)
                    };
                }
                function rgbToHcl(a) {
                    var r = rgbToLab(a), t = r.l, e = r.a, n = r.b, l = Math.atan2(n, e) * rad2deg;
                    return {
                        h: l < 0 ? l + 360 : l,
                        c: Math.sqrt(e * e + n * n),
                        l: t,
                        alpha: a.a
                    };
                }
                function hclToRgb(a) {
                    var r = a.h * deg2rad, t = a.c;
                    return labToRgb({
                        l: a.l,
                        a: Math.cos(r) * t,
                        b: Math.sin(r) * t,
                        alpha: a.alpha
                    });
                }
                function interpolateHue(a, r, t) {
                    var e = r - a;
                    return a + t * (e > 180 || e < -180 ? e - 360 * Math.round(e / 360) : e);
                }
                function interpolateHcl(a, r, t) {
                    return {
                        h: interpolateHue(a.h, r.h, t),
                        c: interpolateNumber(a.c, r.c, t),
                        l: interpolateNumber(a.l, r.l, t),
                        alpha: interpolateNumber(a.alpha, r.alpha, t)
                    };
                }
                var Color = _dereq_('./color'), interpolateNumber = _dereq_('./interpolate').number, Xn = 0.95047, Yn = 1, Zn = 1.08883, t0 = 4 / 29, t1 = 6 / 29, t2 = 3 * t1 * t1, t3 = t1 * t1 * t1, deg2rad = Math.PI / 180, rad2deg = 180 / Math.PI;
                module.exports = {
                    lab: {
                        forward: rgbToLab,
                        reverse: labToRgb,
                        interpolate: interpolateLab
                    },
                    hcl: {
                        forward: rgbToHcl,
                        reverse: hclToRgb,
                        interpolate: interpolateHcl
                    }
                };
            },
            {
                './color': 153,
                './interpolate': 158
            }
        ],
        155: [
            function (_dereq_, module, exports) {
                'use strict';
                function deepEqual(e, r) {
                    if (Array.isArray(e)) {
                        if (!Array.isArray(r) || e.length !== r.length) {
                            return !1;
                        }
                        for (var t = 0; t < e.length; t++) {
                            if (!deepEqual(e[t], r[t])) {
                                return !1;
                            }
                        }
                        return !0;
                    }
                    if ('object' == typeof e && null !== e && null !== r) {
                        if ('object' != typeof r) {
                            return !1;
                        }
                        if (Object.keys(e).length !== Object.keys(r).length) {
                            return !1;
                        }
                        for (var n in e) {
                            if (!deepEqual(e[n], r[n])) {
                                return !1;
                            }
                        }
                        return !0;
                    }
                    return e === r;
                }
                module.exports = deepEqual;
            },
            {}
        ],
        156: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = function (r) {
                    var arguments$1 = arguments;
                    for (var t = [], e = arguments.length - 1; e-- > 0;) {
                        t[e] = arguments$1[e + 1];
                    }
                    for (var n = 0, o = t; n < o.length; n += 1) {
                        var a = o[n];
                        for (var f in a) {
                            r[f] = a[f];
                        }
                    }
                    return r;
                };
            },
            {}
        ],
        157: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = function (n) {
                    return n instanceof Number ? 'number' : n instanceof String ? 'string' : n instanceof Boolean ? 'boolean' : Array.isArray(n) ? 'array' : null === n ? 'null' : typeof n;
                };
            },
            {}
        ],
        158: [
            function (_dereq_, module, exports) {
                'use strict';
                function number(r, n, u) {
                    return r * (1 - u) + n * u;
                }
                function color(r, n, u) {
                    return new Color(number(r.r, n.r, u), number(r.g, n.g, u), number(r.b, n.b, u), number(r.a, n.a, u));
                }
                function array(r, n, u) {
                    return r.map(function (r, e) {
                        return number(r, n[e], u);
                    });
                }
                var Color = _dereq_('./color');
                module.exports = {
                    number: number,
                    color: color,
                    array: array
                };
            },
            { './color': 153 }
        ],
        159: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = [
                    'type',
                    'source',
                    'source-layer',
                    'minzoom',
                    'maxzoom',
                    'filter',
                    'layout'
                ];
            },
            {}
        ],
        160: [
            function (_dereq_, module, exports) {
                'use strict';
                function success(r) {
                    return {
                        result: 'success',
                        value: r
                    };
                }
                function error(r) {
                    return {
                        result: 'error',
                        value: r
                    };
                }
                module.exports = {
                    success: success,
                    error: error
                };
            },
            {}
        ],
        161: [
            function (_dereq_, module, exports) {
                'use strict';
                function unbundle(e) {
                    return e instanceof Number || e instanceof String || e instanceof Boolean ? e.valueOf() : e;
                }
                function deepUnbundle(e) {
                    return Array.isArray(e) ? e.map(deepUnbundle) : unbundle(e);
                }
                module.exports = unbundle, module.exports.deep = deepUnbundle;
            },
            {}
        ],
        162: [
            function (_dereq_, module, exports) {
                'use strict';
                var extend = _dereq_('../util/extend'), unbundle = _dereq_('../util/unbundle_jsonlint'), ref = _dereq_('../expression'), isExpression = ref.isExpression, ref$1 = _dereq_('../function'), isFunction = ref$1.isFunction;
                module.exports = function (e) {
                    var r = _dereq_('./validate_function'), i = _dereq_('./validate_expression'), t = _dereq_('./validate_object'), n = {
                            '*': function () {
                                return [];
                            },
                            array: _dereq_('./validate_array'),
                            boolean: _dereq_('./validate_boolean'),
                            number: _dereq_('./validate_number'),
                            color: _dereq_('./validate_color'),
                            constants: _dereq_('./validate_constants'),
                            enum: _dereq_('./validate_enum'),
                            filter: _dereq_('./validate_filter'),
                            function: _dereq_('./validate_function'),
                            layer: _dereq_('./validate_layer'),
                            object: _dereq_('./validate_object'),
                            source: _dereq_('./validate_source'),
                            light: _dereq_('./validate_light'),
                            string: _dereq_('./validate_string')
                        }, u = e.value, a = e.valueSpec, l = e.styleSpec;
                    return a.function && isFunction(unbundle(u)) ? r(e) : a.function && isExpression(unbundle.deep(u)) ? i(e) : a.type && n[a.type] ? n[a.type](e) : t(extend({}, e, { valueSpec: a.type ? l[a.type] : a }));
                };
            },
            {
                '../expression': 139,
                '../function': 149,
                '../util/extend': 156,
                '../util/unbundle_jsonlint': 161,
                './validate_array': 163,
                './validate_boolean': 164,
                './validate_color': 165,
                './validate_constants': 166,
                './validate_enum': 167,
                './validate_expression': 168,
                './validate_filter': 169,
                './validate_function': 170,
                './validate_layer': 172,
                './validate_light': 174,
                './validate_number': 175,
                './validate_object': 176,
                './validate_source': 179,
                './validate_string': 180
            }
        ],
        163: [
            function (_dereq_, module, exports) {
                'use strict';
                var getType = _dereq_('../util/get_type'), validate = _dereq_('./validate'), ValidationError = _dereq_('../error/validation_error');
                module.exports = function (e) {
                    var r = e.value, t = e.valueSpec, a = e.style, n = e.styleSpec, l = e.key, i = e.arrayElementValidator || validate;
                    if ('array' !== getType(r)) {
                        return [new ValidationError(l, r, 'array expected, ' + getType(r) + ' found')];
                    }
                    if (t.length && r.length !== t.length) {
                        return [new ValidationError(l, r, 'array length ' + t.length + ' expected, length ' + r.length + ' found')];
                    }
                    if (t['min-length'] && r.length < t['min-length']) {
                        return [new ValidationError(l, r, 'array length at least ' + t['min-length'] + ' expected, length ' + r.length + ' found')];
                    }
                    var o = { type: t.value };
                    n.$version < 7 && (o.function = t.function), 'object' === getType(t.value) && (o = t.value);
                    for (var u = [], g = 0; g < r.length; g++) {
                        u = u.concat(i({
                            array: r,
                            arrayIndex: g,
                            value: r[g],
                            valueSpec: o,
                            style: a,
                            styleSpec: n,
                            key: l + '[' + g + ']'
                        }));
                    }
                    return u;
                };
            },
            {
                '../error/validation_error': 122,
                '../util/get_type': 157,
                './validate': 162
            }
        ],
        164: [
            function (_dereq_, module, exports) {
                'use strict';
                var getType = _dereq_('../util/get_type'), ValidationError = _dereq_('../error/validation_error');
                module.exports = function (e) {
                    var r = e.value, o = e.key, t = getType(r);
                    return 'boolean' !== t ? [new ValidationError(o, r, 'boolean expected, ' + t + ' found')] : [];
                };
            },
            {
                '../error/validation_error': 122,
                '../util/get_type': 157
            }
        ],
        165: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error'), getType = _dereq_('../util/get_type'), parseCSSColor = _dereq_('csscolorparser').parseCSSColor;
                module.exports = function (r) {
                    var e = r.key, o = r.value, t = getType(o);
                    return 'string' !== t ? [new ValidationError(e, o, 'color expected, ' + t + ' found')] : null === parseCSSColor(o) ? [new ValidationError(e, o, 'color expected, "' + o + '" found')] : [];
                };
            },
            {
                '../error/validation_error': 122,
                '../util/get_type': 157,
                'csscolorparser': 13
            }
        ],
        166: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error');
                module.exports = function (r) {
                    var e = r.key, a = r.value;
                    return a ? [new ValidationError(e, a, 'constants have been deprecated as of v8')] : [];
                };
            },
            { '../error/validation_error': 122 }
        ],
        167: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error'), unbundle = _dereq_('../util/unbundle_jsonlint');
                module.exports = function (e) {
                    var r = e.key, n = e.value, u = e.valueSpec, i = [];
                    return Array.isArray(u.values) ? -1 === u.values.indexOf(unbundle(n)) && i.push(new ValidationError(r, n, 'expected one of [' + u.values.join(', ') + '], ' + JSON.stringify(n) + ' found')) : -1 === Object.keys(u.values).indexOf(unbundle(n)) && i.push(new ValidationError(r, n, 'expected one of [' + Object.keys(u.values).join(', ') + '], ' + JSON.stringify(n) + ' found')), i;
                };
            },
            {
                '../error/validation_error': 122,
                '../util/unbundle_jsonlint': 161
            }
        ],
        168: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error'), ref = _dereq_('../expression'), createExpression = ref.createExpression, createPropertyExpression = ref.createPropertyExpression, unbundle = _dereq_('../util/unbundle_jsonlint');
                module.exports = function (e) {
                    var r = ('property' === e.expressionContext ? createPropertyExpression : createExpression)(unbundle.deep(e.value), e.valueSpec);
                    return 'error' === r.result ? r.value.map(function (r) {
                        return new ValidationError('' + e.key + r.key, e.value, r.message);
                    }) : 'property' === e.expressionContext && 'text-font' === e.propertyKey && -1 !== r.value._styleExpression.expression.possibleOutputs().indexOf(void 0) ? [new ValidationError(e.key, e.value, 'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')] : [];
                };
            },
            {
                '../error/validation_error': 122,
                '../expression': 139,
                '../util/unbundle_jsonlint': 161
            }
        ],
        169: [
            function (_dereq_, module, exports) {
                'use strict';
                function validateNonExpressionFilter(e) {
                    var r = e.value, t = e.key;
                    if ('array' !== getType(r)) {
                        return [new ValidationError(t, r, 'array expected, ' + getType(r) + ' found')];
                    }
                    var a, n = e.styleSpec, i = [];
                    if (r.length < 1) {
                        return [new ValidationError(t, r, 'filter array must have at least 1 element')];
                    }
                    switch (i = i.concat(validateEnum({
                            key: t + '[0]',
                            value: r[0],
                            valueSpec: n.filter_operator,
                            style: e.style,
                            styleSpec: e.styleSpec
                        })), unbundle(r[0])) {
                    case '<':
                    case '<=':
                    case '>':
                    case '>=':
                        r.length >= 2 && '$type' === unbundle(r[1]) && i.push(new ValidationError(t, r, '"$type" cannot be use with operator "' + r[0] + '"'));
                    case '==':
                    case '!=':
                        3 !== r.length && i.push(new ValidationError(t, r, 'filter array for operator "' + r[0] + '" must have 3 elements'));
                    case 'in':
                    case '!in':
                        r.length >= 2 && 'string' !== (a = getType(r[1])) && i.push(new ValidationError(t + '[1]', r[1], 'string expected, ' + a + ' found'));
                        for (var l = 2; l < r.length; l++) {
                            a = getType(r[l]), '$type' === unbundle(r[1]) ? i = i.concat(validateEnum({
                                key: t + '[' + l + ']',
                                value: r[l],
                                valueSpec: n.geometry_type,
                                style: e.style,
                                styleSpec: e.styleSpec
                            })) : 'string' !== a && 'number' !== a && 'boolean' !== a && i.push(new ValidationError(t + '[' + l + ']', r[l], 'string, number, or boolean expected, ' + a + ' found'));
                        }
                        break;
                    case 'any':
                    case 'all':
                    case 'none':
                        for (var s = 1; s < r.length; s++) {
                            i = i.concat(validateNonExpressionFilter({
                                key: t + '[' + s + ']',
                                value: r[s],
                                style: e.style,
                                styleSpec: e.styleSpec
                            }));
                        }
                        break;
                    case 'has':
                    case '!has':
                        a = getType(r[1]), 2 !== r.length ? i.push(new ValidationError(t, r, 'filter array for "' + r[0] + '" operator must have 2 elements')) : 'string' !== a && i.push(new ValidationError(t + '[1]', r[1], 'string expected, ' + a + ' found'));
                    }
                    return i;
                }
                var ValidationError = _dereq_('../error/validation_error'), validateExpression = _dereq_('./validate_expression'), validateEnum = _dereq_('./validate_enum'), getType = _dereq_('../util/get_type'), unbundle = _dereq_('../util/unbundle_jsonlint'), extend = _dereq_('../util/extend'), ref = _dereq_('../feature_filter'), isExpressionFilter = ref.isExpressionFilter;
                module.exports = function (e) {
                    return isExpressionFilter(unbundle.deep(e.value)) ? validateExpression(extend({}, e, {
                        expressionContext: 'filter',
                        valueSpec: { value: 'boolean' }
                    })) : validateNonExpressionFilter(e);
                };
            },
            {
                '../error/validation_error': 122,
                '../feature_filter': 148,
                '../util/extend': 156,
                '../util/get_type': 157,
                '../util/unbundle_jsonlint': 161,
                './validate_enum': 167,
                './validate_expression': 168
            }
        ],
        170: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error'), getType = _dereq_('../util/get_type'), validate = _dereq_('./validate'), validateObject = _dereq_('./validate_object'), validateArray = _dereq_('./validate_array'), validateNumber = _dereq_('./validate_number'), unbundle = _dereq_('../util/unbundle_jsonlint');
                module.exports = function (e) {
                    function t(e) {
                        if ('identity' === p) {
                            return [new ValidationError(e.key, e.value, 'identity function may not have a "stops" property')];
                        }
                        var t = [], a = e.value;
                        return t = t.concat(validateArray({
                            key: e.key,
                            value: a,
                            valueSpec: e.valueSpec,
                            style: e.style,
                            styleSpec: e.styleSpec,
                            arrayElementValidator: r
                        })), 'array' === getType(a) && 0 === a.length && t.push(new ValidationError(e.key, a, 'array must have at least one stop')), t;
                    }
                    function r(e) {
                        var t = [], r = e.value, o = e.key;
                        if ('array' !== getType(r)) {
                            return [new ValidationError(o, r, 'array expected, ' + getType(r) + ' found')];
                        }
                        if (2 !== r.length) {
                            return [new ValidationError(o, r, 'array length 2 expected, length ' + r.length + ' found')];
                        }
                        if (d) {
                            if ('object' !== getType(r[0])) {
                                return [new ValidationError(o, r, 'object expected, ' + getType(r[0]) + ' found')];
                            }
                            if (void 0 === r[0].zoom) {
                                return [new ValidationError(o, r, 'object stop key must have zoom')];
                            }
                            if (void 0 === r[0].value) {
                                return [new ValidationError(o, r, 'object stop key must have value')];
                            }
                            if (l && l > unbundle(r[0].zoom)) {
                                return [new ValidationError(o, r[0].zoom, 'stop zoom values must appear in ascending order')];
                            }
                            unbundle(r[0].zoom) !== l && (l = unbundle(r[0].zoom), i = void 0, s = {}), t = t.concat(validateObject({
                                key: o + '[0]',
                                value: r[0],
                                valueSpec: { zoom: {} },
                                style: e.style,
                                styleSpec: e.styleSpec,
                                objectElementValidators: {
                                    zoom: validateNumber,
                                    value: a
                                }
                            }));
                        } else {
                            t = t.concat(a({
                                key: o + '[0]',
                                value: r[0],
                                valueSpec: {},
                                style: e.style,
                                styleSpec: e.styleSpec
                            }, r));
                        }
                        return t.concat(validate({
                            key: o + '[1]',
                            value: r[1],
                            valueSpec: u,
                            style: e.style,
                            styleSpec: e.styleSpec
                        }));
                    }
                    function a(e, t) {
                        var r = getType(e.value), a = unbundle(e.value), o = null !== e.value ? e.value : t;
                        if (n) {
                            if (r !== n) {
                                return [new ValidationError(e.key, o, r + ' stop domain type must match previous stop domain type ' + n)];
                            }
                        } else {
                            n = r;
                        }
                        if ('number' !== r && 'string' !== r && 'boolean' !== r) {
                            return [new ValidationError(e.key, o, 'stop domain value must be a number, string, or boolean')];
                        }
                        if ('number' !== r && 'categorical' !== p) {
                            var l = 'number expected, ' + r + ' found';
                            return u['property-function'] && void 0 === p && (l += '\nIf you intended to use a categorical function, specify `"type": "categorical"`.'), [new ValidationError(e.key, o, l)];
                        }
                        return 'categorical' !== p || 'number' !== r || isFinite(a) && Math.floor(a) === a ? 'categorical' !== p && 'number' === r && void 0 !== i && a < i ? [new ValidationError(e.key, o, 'stop domain values must appear in ascending order')] : (i = a, 'categorical' === p && a in s ? [new ValidationError(e.key, o, 'stop domain values must be unique')] : (s[a] = !0, [])) : [new ValidationError(e.key, o, 'integer expected, found ' + a)];
                    }
                    function o(e) {
                        return validate({
                            key: e.key,
                            value: e.value,
                            valueSpec: u,
                            style: e.style,
                            styleSpec: e.styleSpec
                        });
                    }
                    var n, i, l, u = e.valueSpec, p = unbundle(e.value.type), s = {}, y = 'categorical' !== p && void 0 === e.value.property, c = !y, d = 'array' === getType(e.value.stops) && 'array' === getType(e.value.stops[0]) && 'object' === getType(e.value.stops[0][0]), v = validateObject({
                            key: e.key,
                            value: e.value,
                            valueSpec: e.styleSpec.function,
                            style: e.style,
                            styleSpec: e.styleSpec,
                            objectElementValidators: {
                                stops: t,
                                default: o
                            }
                        });
                    return 'identity' === p && y && v.push(new ValidationError(e.key, e.value, 'missing required property "property"')), 'identity' === p || e.value.stops || v.push(new ValidationError(e.key, e.value, 'missing required property "stops"')), 'exponential' === p && 'piecewise-constant' === e.valueSpec.function && v.push(new ValidationError(e.key, e.value, 'exponential functions not supported')), e.styleSpec.$version >= 8 && (c && !e.valueSpec['property-function'] ? v.push(new ValidationError(e.key, e.value, 'property functions not supported')) : y && !e.valueSpec['zoom-function'] && 'heatmap-color' !== e.objectKey && v.push(new ValidationError(e.key, e.value, 'zoom functions not supported'))), 'categorical' !== p && !d || void 0 !== e.value.property || v.push(new ValidationError(e.key, e.value, '"property" property is required')), v;
                };
            },
            {
                '../error/validation_error': 122,
                '../util/get_type': 157,
                '../util/unbundle_jsonlint': 161,
                './validate': 162,
                './validate_array': 163,
                './validate_number': 175,
                './validate_object': 176
            }
        ],
        171: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error'), validateString = _dereq_('./validate_string');
                module.exports = function (r) {
                    var e = r.value, t = r.key, a = validateString(r);
                    return a.length ? a : (-1 === e.indexOf('{fontstack}') && a.push(new ValidationError(t, e, '"glyphs" url must include a "{fontstack}" token')), -1 === e.indexOf('{range}') && a.push(new ValidationError(t, e, '"glyphs" url must include a "{range}" token')), a);
                };
            },
            {
                '../error/validation_error': 122,
                './validate_string': 180
            }
        ],
        172: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error'), unbundle = _dereq_('../util/unbundle_jsonlint'), validateObject = _dereq_('./validate_object'), validateFilter = _dereq_('./validate_filter'), validatePaintProperty = _dereq_('./validate_paint_property'), validateLayoutProperty = _dereq_('./validate_layout_property'), validateSpec = _dereq_('./validate'), extend = _dereq_('../util/extend');
                module.exports = function (e) {
                    var r = [], t = e.value, a = e.key, l = e.style, i = e.styleSpec;
                    t.type || t.ref || r.push(new ValidationError(a, t, 'either "type" or "ref" is required'));
                    var u = unbundle(t.type), n = unbundle(t.ref);
                    if (t.id) {
                        for (var o = unbundle(t.id), s = 0; s < e.arrayIndex; s++) {
                            var y = l.layers[s];
                            unbundle(y.id) === o && r.push(new ValidationError(a, t.id, 'duplicate layer id "' + t.id + '", previously used at line ' + y.id.__line__));
                        }
                    }
                    if ('ref' in t) {
                        [
                            'type',
                            'source',
                            'source-layer',
                            'filter',
                            'layout'
                        ].forEach(function (e) {
                            e in t && r.push(new ValidationError(a, t[e], '"' + e + '" is prohibited for ref layers'));
                        });
                        var d;
                        l.layers.forEach(function (e) {
                            unbundle(e.id) === n && (d = e);
                        }), d ? d.ref ? r.push(new ValidationError(a, t.ref, 'ref cannot reference another ref layer')) : u = unbundle(d.type) : r.push(new ValidationError(a, t.ref, 'ref layer "' + n + '" not found'));
                    } else if ('background' !== u) {
                        if (t.source) {
                            var c = l.sources && l.sources[t.source], p = c && unbundle(c.type);
                            c ? 'vector' === p && 'raster' === u ? r.push(new ValidationError(a, t.source, 'layer "' + t.id + '" requires a raster source')) : 'raster' === p && 'raster' !== u ? r.push(new ValidationError(a, t.source, 'layer "' + t.id + '" requires a vector source')) : 'vector' !== p || t['source-layer'] ? 'raster-dem' === p && 'hillshade' !== u && r.push(new ValidationError(a, t.source, 'raster-dem source can only be used with layer type \'hillshade\'.')) : r.push(new ValidationError(a, t, 'layer "' + t.id + '" must specify a "source-layer"')) : r.push(new ValidationError(a, t.source, 'source "' + t.source + '" not found'));
                        } else {
                            r.push(new ValidationError(a, t, 'missing required property "source"'));
                        }
                    }
                    return r = r.concat(validateObject({
                        key: a,
                        value: t,
                        valueSpec: i.layer,
                        style: e.style,
                        styleSpec: e.styleSpec,
                        objectElementValidators: {
                            '*': function () {
                                return [];
                            },
                            type: function () {
                                return validateSpec({
                                    key: a + '.type',
                                    value: t.type,
                                    valueSpec: i.layer.type,
                                    style: e.style,
                                    styleSpec: e.styleSpec,
                                    object: t,
                                    objectKey: 'type'
                                });
                            },
                            filter: validateFilter,
                            layout: function (e) {
                                return validateObject({
                                    layer: t,
                                    key: e.key,
                                    value: e.value,
                                    style: e.style,
                                    styleSpec: e.styleSpec,
                                    objectElementValidators: {
                                        '*': function (e) {
                                            return validateLayoutProperty(extend({ layerType: u }, e));
                                        }
                                    }
                                });
                            },
                            paint: function (e) {
                                return validateObject({
                                    layer: t,
                                    key: e.key,
                                    value: e.value,
                                    style: e.style,
                                    styleSpec: e.styleSpec,
                                    objectElementValidators: {
                                        '*': function (e) {
                                            return validatePaintProperty(extend({ layerType: u }, e));
                                        }
                                    }
                                });
                            }
                        }
                    }));
                };
            },
            {
                '../error/validation_error': 122,
                '../util/extend': 156,
                '../util/unbundle_jsonlint': 161,
                './validate': 162,
                './validate_filter': 169,
                './validate_layout_property': 173,
                './validate_object': 176,
                './validate_paint_property': 177
            }
        ],
        173: [
            function (_dereq_, module, exports) {
                'use strict';
                var validateProperty = _dereq_('./validate_property');
                module.exports = function (r) {
                    return validateProperty(r, 'layout');
                };
            },
            { './validate_property': 178 }
        ],
        174: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error'), getType = _dereq_('../util/get_type'), validate = _dereq_('./validate');
                module.exports = function (e) {
                    var t = e.value, r = e.styleSpec, a = r.light, i = e.style, n = [], o = getType(t);
                    if (void 0 === t) {
                        return n;
                    }
                    if ('object' !== o) {
                        return n = n.concat([new ValidationError('light', t, 'object expected, ' + o + ' found')]);
                    }
                    for (var l in t) {
                        var c = l.match(/^(.*)-transition$/);
                        n = c && a[c[1]] && a[c[1]].transition ? n.concat(validate({
                            key: l,
                            value: t[l],
                            valueSpec: r.transition,
                            style: i,
                            styleSpec: r
                        })) : a[l] ? n.concat(validate({
                            key: l,
                            value: t[l],
                            valueSpec: a[l],
                            style: i,
                            styleSpec: r
                        })) : n.concat([new ValidationError(l, t[l], 'unknown property "' + l + '"')]);
                    }
                    return n;
                };
            },
            {
                '../error/validation_error': 122,
                '../util/get_type': 157,
                './validate': 162
            }
        ],
        175: [
            function (_dereq_, module, exports) {
                'use strict';
                var getType = _dereq_('../util/get_type'), ValidationError = _dereq_('../error/validation_error');
                module.exports = function (e) {
                    var r = e.key, i = e.value, m = e.valueSpec, a = getType(i);
                    return 'number' !== a ? [new ValidationError(r, i, 'number expected, ' + a + ' found')] : 'minimum' in m && i < m.minimum ? [new ValidationError(r, i, i + ' is less than the minimum value ' + m.minimum)] : 'maximum' in m && i > m.maximum ? [new ValidationError(r, i, i + ' is greater than the maximum value ' + m.maximum)] : [];
                };
            },
            {
                '../error/validation_error': 122,
                '../util/get_type': 157
            }
        ],
        176: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error'), getType = _dereq_('../util/get_type'), validateSpec = _dereq_('./validate');
                module.exports = function (e) {
                    var r = e.key, t = e.value, i = e.valueSpec || {}, a = e.objectElementValidators || {}, o = e.style, l = e.styleSpec, n = [], u = getType(t);
                    if ('object' !== u) {
                        return [new ValidationError(r, t, 'object expected, ' + u + ' found')];
                    }
                    for (var d in t) {
                        var p = d.split('.')[0], c = i[p] || i['*'], v = void 0;
                        if (a[p]) {
                            v = a[p];
                        } else if (i[p]) {
                            v = validateSpec;
                        } else if (a['*']) {
                            v = a['*'];
                        } else {
                            if (!i['*']) {
                                n.push(new ValidationError(r, t[d], 'unknown property "' + d + '"'));
                                continue;
                            }
                            v = validateSpec;
                        }
                        n = n.concat(v({
                            key: (r ? r + '.' : r) + d,
                            value: t[d],
                            valueSpec: c,
                            style: o,
                            styleSpec: l,
                            object: t,
                            objectKey: d
                        }, t));
                    }
                    for (var s in i) {
                        a[s] || i[s].required && void 0 === i[s].default && void 0 === t[s] && n.push(new ValidationError(r, t, 'missing required property "' + s + '"'));
                    }
                    return n;
                };
            },
            {
                '../error/validation_error': 122,
                '../util/get_type': 157,
                './validate': 162
            }
        ],
        177: [
            function (_dereq_, module, exports) {
                'use strict';
                var validateProperty = _dereq_('./validate_property');
                module.exports = function (r) {
                    return validateProperty(r, 'paint');
                };
            },
            { './validate_property': 178 }
        ],
        178: [
            function (_dereq_, module, exports) {
                'use strict';
                var validate = _dereq_('./validate'), ValidationError = _dereq_('../error/validation_error'), getType = _dereq_('../util/get_type'), ref = _dereq_('../function'), isFunction = ref.isFunction, unbundle = _dereq_('../util/unbundle_jsonlint');
                module.exports = function (e, t) {
                    var r = e.key, n = e.style, i = e.styleSpec, o = e.value, a = e.objectKey, u = i[t + '_' + e.layerType];
                    if (!u) {
                        return [];
                    }
                    var p = a.match(/^(.*)-transition$/);
                    if ('paint' === t && p && u[p[1]] && u[p[1]].transition) {
                        return validate({
                            key: r,
                            value: o,
                            valueSpec: i.transition,
                            style: n,
                            styleSpec: i
                        });
                    }
                    var l = e.valueSpec || u[a];
                    if (!l) {
                        return [new ValidationError(r, o, 'unknown property "' + a + '"')];
                    }
                    var y;
                    if ('string' === getType(o) && l['property-function'] && !l.tokens && (y = /^{([^}]+)}$/.exec(o))) {
                        return [new ValidationError(r, o, '"' + a + '" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ' + JSON.stringify(y[1]) + ' }`.')];
                    }
                    var s = [];
                    return 'symbol' === e.layerType && ('text-field' === a && n && !n.glyphs && s.push(new ValidationError(r, o, 'use of "text-field" requires a style "glyphs" property')), 'text-font' === a && isFunction(unbundle.deep(o)) && 'identity' === unbundle(o.type) && s.push(new ValidationError(r, o, '"text-font" does not support identity functions'))), s.concat(validate({
                        key: e.key,
                        value: o,
                        valueSpec: l,
                        style: n,
                        styleSpec: i,
                        expressionContext: 'property',
                        propertyKey: a
                    }));
                };
            },
            {
                '../error/validation_error': 122,
                '../function': 149,
                '../util/get_type': 157,
                '../util/unbundle_jsonlint': 161,
                './validate': 162
            }
        ],
        179: [
            function (_dereq_, module, exports) {
                'use strict';
                var ValidationError = _dereq_('../error/validation_error'), unbundle = _dereq_('../util/unbundle_jsonlint'), validateObject = _dereq_('./validate_object'), validateEnum = _dereq_('./validate_enum');
                module.exports = function (e) {
                    var a = e.value, r = e.key, t = e.styleSpec, l = e.style;
                    if (!a.type) {
                        return [new ValidationError(r, a, '"type" is required')];
                    }
                    var u = unbundle(a.type), s = [];
                    switch (u) {
                    case 'vector':
                    case 'raster':
                    case 'raster-dem':
                        if (s = s.concat(validateObject({
                                key: r,
                                value: a,
                                valueSpec: t['source_' + u.replace('-', '_')],
                                style: e.style,
                                styleSpec: t
                            })), 'url' in a) {
                            for (var c in a) {
                                [
                                    'type',
                                    'url',
                                    'tileSize'
                                ].indexOf(c) < 0 && s.push(new ValidationError(r + '.' + c, a[c], 'a source with a "url" property may not include a "' + c + '" property'));
                            }
                        }
                        return s;
                    case 'geojson':
                        return validateObject({
                            key: r,
                            value: a,
                            valueSpec: t.source_geojson,
                            style: l,
                            styleSpec: t
                        });
                    case 'video':
                        return validateObject({
                            key: r,
                            value: a,
                            valueSpec: t.source_video,
                            style: l,
                            styleSpec: t
                        });
                    case 'image':
                        return validateObject({
                            key: r,
                            value: a,
                            valueSpec: t.source_image,
                            style: l,
                            styleSpec: t
                        });
                    case 'canvas':
                        return validateObject({
                            key: r,
                            value: a,
                            valueSpec: t.source_canvas,
                            style: l,
                            styleSpec: t
                        });
                    default:
                        return validateEnum({
                            key: r + '.type',
                            value: a.type,
                            valueSpec: {
                                values: [
                                    'vector',
                                    'raster',
                                    'raster-dem',
                                    'geojson',
                                    'video',
                                    'image',
                                    'canvas'
                                ]
                            },
                            style: l,
                            styleSpec: t
                        });
                    }
                };
            },
            {
                '../error/validation_error': 122,
                '../util/unbundle_jsonlint': 161,
                './validate_enum': 167,
                './validate_object': 176
            }
        ],
        180: [
            function (_dereq_, module, exports) {
                'use strict';
                var getType = _dereq_('../util/get_type'), ValidationError = _dereq_('../error/validation_error');
                module.exports = function (r) {
                    var e = r.value, t = r.key, i = getType(e);
                    return 'string' !== i ? [new ValidationError(t, e, 'string expected, ' + i + ' found')] : [];
                };
            },
            {
                '../error/validation_error': 122,
                '../util/get_type': 157
            }
        ],
        181: [
            function (_dereq_, module, exports) {
                'use strict';
                function validateStyleMin(e, a) {
                    a = a || latestStyleSpec;
                    var t = [];
                    return t = t.concat(validate({
                        key: '',
                        value: e,
                        valueSpec: a.$root,
                        styleSpec: a,
                        style: e,
                        objectElementValidators: {
                            glyphs: validateGlyphsURL,
                            '*': function () {
                                return [];
                            }
                        }
                    })), e.constants && (t = t.concat(validateConstants({
                        key: 'constants',
                        value: e.constants,
                        style: e,
                        styleSpec: a
                    }))), sortErrors(t);
                }
                function sortErrors(e) {
                    return [].concat(e).sort(function (e, a) {
                        return e.line - a.line;
                    });
                }
                function wrapCleanErrors(e) {
                    return function () {
                        return sortErrors(e.apply(this, arguments));
                    };
                }
                var validateConstants = _dereq_('./validate/validate_constants'), validate = _dereq_('./validate/validate'), latestStyleSpec = _dereq_('./reference/latest'), validateGlyphsURL = _dereq_('./validate/validate_glyphs_url');
                validateStyleMin.source = wrapCleanErrors(_dereq_('./validate/validate_source')), validateStyleMin.light = wrapCleanErrors(_dereq_('./validate/validate_light')), validateStyleMin.layer = wrapCleanErrors(_dereq_('./validate/validate_layer')), validateStyleMin.filter = wrapCleanErrors(_dereq_('./validate/validate_filter')), validateStyleMin.paintProperty = wrapCleanErrors(_dereq_('./validate/validate_paint_property')), validateStyleMin.layoutProperty = wrapCleanErrors(_dereq_('./validate/validate_layout_property')), module.exports = validateStyleMin;
            },
            {
                './reference/latest': 151,
                './validate/validate': 162,
                './validate/validate_constants': 166,
                './validate/validate_filter': 169,
                './validate/validate_glyphs_url': 171,
                './validate/validate_layer': 172,
                './validate/validate_layout_property': 173,
                './validate/validate_light': 174,
                './validate/validate_paint_property': 177,
                './validate/validate_source': 179
            }
        ],
        182: [
            function (_dereq_, module, exports) {
                'use strict';
                var ZoomHistory = _dereq_('./zoom_history'), EvaluationParameters = function (t, o) {
                        this.zoom = t, o ? (this.now = o.now, this.fadeDuration = o.fadeDuration, this.zoomHistory = o.zoomHistory, this.transition = o.transition) : (this.now = 0, this.fadeDuration = 0, this.zoomHistory = new ZoomHistory(), this.transition = {});
                    };
                EvaluationParameters.prototype.crossFadingFactor = function () {
                    return 0 === this.fadeDuration ? 1 : Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1);
                }, module.exports = EvaluationParameters;
            },
            { './zoom_history': 212 }
        ],
        183: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../style-spec/reference/latest'), util = _dereq_('../util/util'), Evented = _dereq_('../util/evented'), validateStyle = _dereq_('./validate_style'), ref = _dereq_('../util/util'), sphericalToCartesian = ref.sphericalToCartesian, Color = _dereq_('../style-spec/util/color'), interpolate = _dereq_('../style-spec/util/interpolate'), ref$1 = _dereq_('./properties'), Properties = ref$1.Properties, Transitionable = ref$1.Transitionable, Transitioning = ref$1.Transitioning, PossiblyEvaluated = ref$1.PossiblyEvaluated, DataConstantProperty = ref$1.DataConstantProperty, LightPositionProperty = function () {
                        this.specification = styleSpec.light.position;
                    };
                LightPositionProperty.prototype.possiblyEvaluate = function (t, e) {
                    return sphericalToCartesian(t.expression.evaluate(e));
                }, LightPositionProperty.prototype.interpolate = function (t, e, i) {
                    return {
                        x: interpolate.number(t.x, e.x, i),
                        y: interpolate.number(t.y, e.y, i),
                        z: interpolate.number(t.z, e.z, i)
                    };
                };
                var properties = new Properties({
                        anchor: new DataConstantProperty(styleSpec.light.anchor),
                        position: new LightPositionProperty(),
                        color: new DataConstantProperty(styleSpec.light.color),
                        intensity: new DataConstantProperty(styleSpec.light.intensity)
                    }), TRANSITION_SUFFIX = '-transition', Light = function (t) {
                        function e(e) {
                            t.call(this), this._transitionable = new Transitionable(properties), this.setLight(e), this._transitioning = this._transitionable.untransitioned();
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getLight = function () {
                            return this._transitionable.serialize();
                        }, e.prototype.setLight = function (t) {
                            var e = this;
                            if (!this._validate(validateStyle.light, t)) {
                                for (var i in t) {
                                    var r = t[i];
                                    util.endsWith(i, TRANSITION_SUFFIX) ? e._transitionable.setTransition(i.slice(0, -TRANSITION_SUFFIX.length), r) : e._transitionable.setValue(i, r);
                                }
                            }
                        }, e.prototype.updateTransitions = function (t) {
                            this._transitioning = this._transitionable.transitioned(t, this._transitioning);
                        }, e.prototype.hasTransition = function () {
                            return this._transitioning.hasTransition();
                        }, e.prototype.recalculate = function (t) {
                            this.properties = this._transitioning.possiblyEvaluate(t);
                        }, e.prototype._validate = function (t, e) {
                            return validateStyle.emitErrors(this, t.call(validateStyle, util.extend({
                                value: e,
                                style: {
                                    glyphs: !0,
                                    sprite: !0
                                },
                                styleSpec: styleSpec
                            })));
                        }, e;
                    }(Evented);
                module.exports = Light;
            },
            {
                '../style-spec/reference/latest': 151,
                '../style-spec/util/color': 153,
                '../style-spec/util/interpolate': 158,
                '../util/evented': 260,
                '../util/util': 275,
                './properties': 188,
                './validate_style': 211
            }
        ],
        184: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../util/mapbox'), normalizeGlyphsURL = ref.normalizeGlyphsURL, ajax = _dereq_('../util/ajax'), parseGlyphPBF = _dereq_('./parse_glyph_pbf');
                module.exports = function (e, r, a, l, p) {
                    var i = 256 * r, s = i + 255, t = l(normalizeGlyphsURL(a).replace('{fontstack}', e).replace('{range}', i + '-' + s), ajax.ResourceType.Glyphs);
                    ajax.getArrayBuffer(t, function (e, r) {
                        if (e) {
                            p(e);
                        } else if (r) {
                            for (var a = {}, l = 0, i = parseGlyphPBF(r.data); l < i.length; l += 1) {
                                var s = i[l];
                                a[s.id] = s;
                            }
                            p(null, a);
                        }
                    });
                };
            },
            {
                '../util/ajax': 251,
                '../util/mapbox': 267,
                './parse_glyph_pbf': 186
            }
        ],
        185: [
            function (_dereq_, module, exports) {
                'use strict';
                var ajax = _dereq_('../util/ajax'), browser = _dereq_('../util/browser'), ref = _dereq_('../util/mapbox'), normalizeSpriteURL = ref.normalizeSpriteURL, ref$1 = _dereq_('../util/image'), RGBAImage = ref$1.RGBAImage;
                module.exports = function (e, i, r) {
                    function a() {
                        if (n) {
                            r(n);
                        } else if (t && o) {
                            var e = browser.getImageData(o), i = {};
                            for (var a in t) {
                                var u = t[a], g = u.width, l = u.height, x = u.x, m = u.y, p = u.sdf, f = u.pixelRatio, s = new RGBAImage({
                                        width: g,
                                        height: l
                                    });
                                RGBAImage.copy(e, s, {
                                    x: x,
                                    y: m
                                }, {
                                    x: 0,
                                    y: 0
                                }, {
                                    width: g,
                                    height: l
                                }), i[a] = {
                                    data: s,
                                    pixelRatio: f,
                                    sdf: p
                                };
                            }
                            r(null, i);
                        }
                    }
                    var t, o, n, u = browser.devicePixelRatio > 1 ? '@2x' : '';
                    ajax.getJSON(i(normalizeSpriteURL(e, u, '.json'), ajax.ResourceType.SpriteJSON), function (e, i) {
                        n || (n = e, t = i, a());
                    }), ajax.getImage(i(normalizeSpriteURL(e, u, '.png'), ajax.ResourceType.SpriteImage), function (e, i) {
                        n || (n = e, o = i, a());
                    });
                };
            },
            {
                '../util/ajax': 251,
                '../util/browser': 252,
                '../util/image': 263,
                '../util/mapbox': 267
            }
        ],
        186: [
            function (_dereq_, module, exports) {
                'use strict';
                function readFontstacks(e, a, r) {
                    1 === e && r.readMessage(readFontstack, a);
                }
                function readFontstack(e, a, r) {
                    if (3 === e) {
                        var t = r.readMessage(readGlyph, {}), d = t.id, i = t.bitmap, n = t.width, o = t.height, h = t.left, s = t.top, p = t.advance;
                        a.push({
                            id: d,
                            bitmap: new AlphaImage({
                                width: n + 2 * border,
                                height: o + 2 * border
                            }, i),
                            metrics: {
                                width: n,
                                height: o,
                                left: h,
                                top: s,
                                advance: p
                            }
                        });
                    }
                }
                function readGlyph(e, a, r) {
                    1 === e ? a.id = r.readVarint() : 2 === e ? a.bitmap = r.readBytes() : 3 === e ? a.width = r.readVarint() : 4 === e ? a.height = r.readVarint() : 5 === e ? a.left = r.readSVarint() : 6 === e ? a.top = r.readSVarint() : 7 === e && (a.advance = r.readVarint());
                }
                var ref = _dereq_('../util/image'), AlphaImage = ref.AlphaImage, Protobuf = _dereq_('pbf'), border = 3;
                module.exports = function (e) {
                    return new Protobuf(e).readFields(readFontstacks, []);
                }, module.exports.GLYPH_PBF_BORDER = border;
            },
            {
                '../util/image': 263,
                'pbf': 30
            }
        ],
        187: [
            function (_dereq_, module, exports) {
                'use strict';
                var browser = _dereq_('../util/browser'), Placement = _dereq_('../symbol/placement'), LayerPlacement = function () {
                        this._currentTileIndex = 0, this._seenCrossTileIDs = {};
                    };
                LayerPlacement.prototype.continuePlacement = function (e, n, t, r, o) {
                    for (var l = this; this._currentTileIndex < e.length;) {
                        var s = e[l._currentTileIndex];
                        if (n.placeLayerTile(r, s, t, l._seenCrossTileIDs), l._currentTileIndex++, o()) {
                            return !0;
                        }
                    }
                };
                var PauseablePlacement = function (e, n, t, r, o) {
                    this.placement = new Placement(e, o), this._currentPlacementIndex = n.length - 1, this._forceFullPlacement = t, this._showCollisionBoxes = r, this._done = !1;
                };
                PauseablePlacement.prototype.isDone = function () {
                    return this._done;
                }, PauseablePlacement.prototype.continuePlacement = function (e, n, t) {
                    for (var r = this, o = browser.now(), l = function () {
                                var e = browser.now() - o;
                                return !r._forceFullPlacement && e > 2;
                            }; this._currentPlacementIndex >= 0;) {
                        var s = e[r._currentPlacementIndex], a = n[s], i = r.placement.collisionIndex.transform.zoom;
                        if ('symbol' === a.type && (!a.minzoom || a.minzoom <= i) && (!a.maxzoom || a.maxzoom > i)) {
                            r._inProgressLayer || (r._inProgressLayer = new LayerPlacement());
                            if (r._inProgressLayer.continuePlacement(t[a.source], r.placement, r._showCollisionBoxes, a, l)) {
                                return;
                            }
                            delete r._inProgressLayer;
                        }
                        r._currentPlacementIndex--;
                    }
                    this._done = !0;
                }, PauseablePlacement.prototype.commit = function (e, n) {
                    return this.placement.commit(e, n), this.placement;
                }, module.exports = PauseablePlacement;
            },
            {
                '../symbol/placement': 223,
                '../util/browser': 252
            }
        ],
        188: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../util/util'), clone = ref.clone, extend = ref.extend, easeCubicInOut = ref.easeCubicInOut, interpolate = _dereq_('../style-spec/util/interpolate'), ref$1 = _dereq_('../style-spec/expression'), normalizePropertyExpression = ref$1.normalizePropertyExpression, Color = _dereq_('../style-spec/util/color'), ref$2 = _dereq_('../util/web_worker_transfer'), register = ref$2.register, PropertyValue = function (t, e) {
                        this.property = t, this.value = e, this.expression = normalizePropertyExpression(void 0 === e ? t.specification.default : e, t.specification);
                    };
                PropertyValue.prototype.isDataDriven = function () {
                    return 'source' === this.expression.kind || 'composite' === this.expression.kind;
                }, PropertyValue.prototype.possiblyEvaluate = function (t) {
                    return this.property.possiblyEvaluate(this, t);
                };
                var TransitionablePropertyValue = function (t) {
                    this.property = t, this.value = new PropertyValue(t, void 0);
                };
                TransitionablePropertyValue.prototype.transitioned = function (t, e) {
                    return new TransitioningPropertyValue(this.property, this.value, e, extend({}, t.transition, this.transition), t.now);
                }, TransitionablePropertyValue.prototype.untransitioned = function () {
                    return new TransitioningPropertyValue(this.property, this.value, null, {}, 0);
                };
                var Transitionable = function (t) {
                    this._properties = t, this._values = Object.create(t.defaultTransitionablePropertyValues);
                };
                Transitionable.prototype.getValue = function (t) {
                    return clone(this._values[t].value.value);
                }, Transitionable.prototype.setValue = function (t, e) {
                    this._values.hasOwnProperty(t) || (this._values[t] = new TransitionablePropertyValue(this._values[t].property)), this._values[t].value = new PropertyValue(this._values[t].property, null === e ? void 0 : clone(e));
                }, Transitionable.prototype.getTransition = function (t) {
                    return clone(this._values[t].transition);
                }, Transitionable.prototype.setTransition = function (t, e) {
                    this._values.hasOwnProperty(t) || (this._values[t] = new TransitionablePropertyValue(this._values[t].property)), this._values[t].transition = clone(e) || void 0;
                }, Transitionable.prototype.serialize = function () {
                    for (var t = this, e = {}, r = 0, a = Object.keys(t._values); r < a.length; r += 1) {
                        var o = a[r], i = t.getValue(o);
                        void 0 !== i && (e[o] = i);
                        var n = t.getTransition(o);
                        void 0 !== n && (e[o + '-transition'] = n);
                    }
                    return e;
                }, Transitionable.prototype.transitioned = function (t, e) {
                    for (var r = this, a = new Transitioning(this._properties), o = 0, i = Object.keys(r._values); o < i.length; o += 1) {
                        var n = i[o];
                        a._values[n] = r._values[n].transitioned(t, e._values[n]);
                    }
                    return a;
                }, Transitionable.prototype.untransitioned = function () {
                    for (var t = this, e = new Transitioning(this._properties), r = 0, a = Object.keys(t._values); r < a.length; r += 1) {
                        var o = a[r];
                        e._values[o] = t._values[o].untransitioned();
                    }
                    return e;
                };
                var TransitioningPropertyValue = function (t, e, r, a, o) {
                    this.property = t, this.value = e, this.begin = o + a.delay || 0, this.end = this.begin + a.duration || 0, t.specification.transition && (a.delay || a.duration) && (this.prior = r);
                };
                TransitioningPropertyValue.prototype.possiblyEvaluate = function (t) {
                    var e = t.now || 0, r = this.value.possiblyEvaluate(t), a = this.prior;
                    if (a) {
                        if (e > this.end) {
                            return this.prior = null, r;
                        }
                        if (this.value.isDataDriven()) {
                            return this.prior = null, r;
                        }
                        if (e < this.begin) {
                            return a.possiblyEvaluate(t);
                        }
                        var o = (e - this.begin) / (this.end - this.begin);
                        return this.property.interpolate(a.possiblyEvaluate(t), r, easeCubicInOut(o));
                    }
                    return r;
                };
                var Transitioning = function (t) {
                    this._properties = t, this._values = Object.create(t.defaultTransitioningPropertyValues);
                };
                Transitioning.prototype.possiblyEvaluate = function (t) {
                    for (var e = this, r = new PossiblyEvaluated(this._properties), a = 0, o = Object.keys(e._values); a < o.length; a += 1) {
                        var i = o[a];
                        r._values[i] = e._values[i].possiblyEvaluate(t);
                    }
                    return r;
                }, Transitioning.prototype.hasTransition = function () {
                    for (var t = this, e = 0, r = Object.keys(t._values); e < r.length; e += 1) {
                        var a = r[e];
                        if (t._values[a].prior) {
                            return !0;
                        }
                    }
                    return !1;
                };
                var Layout = function (t) {
                    this._properties = t, this._values = Object.create(t.defaultPropertyValues);
                };
                Layout.prototype.getValue = function (t) {
                    return clone(this._values[t].value);
                }, Layout.prototype.setValue = function (t, e) {
                    this._values[t] = new PropertyValue(this._values[t].property, null === e ? void 0 : clone(e));
                }, Layout.prototype.serialize = function () {
                    for (var t = this, e = {}, r = 0, a = Object.keys(t._values); r < a.length; r += 1) {
                        var o = a[r], i = t.getValue(o);
                        void 0 !== i && (e[o] = i);
                    }
                    return e;
                }, Layout.prototype.possiblyEvaluate = function (t) {
                    for (var e = this, r = new PossiblyEvaluated(this._properties), a = 0, o = Object.keys(e._values); a < o.length; a += 1) {
                        var i = o[a];
                        r._values[i] = e._values[i].possiblyEvaluate(t);
                    }
                    return r;
                };
                var PossiblyEvaluatedPropertyValue = function (t, e, r) {
                    this.property = t, this.value = e, this.globals = r;
                };
                PossiblyEvaluatedPropertyValue.prototype.isConstant = function () {
                    return 'constant' === this.value.kind;
                }, PossiblyEvaluatedPropertyValue.prototype.constantOr = function (t) {
                    return 'constant' === this.value.kind ? this.value.value : t;
                }, PossiblyEvaluatedPropertyValue.prototype.evaluate = function (t) {
                    return this.property.evaluate(this.value, this.globals, t);
                };
                var PossiblyEvaluated = function (t) {
                    this._properties = t, this._values = Object.create(t.defaultPossiblyEvaluatedValues);
                };
                PossiblyEvaluated.prototype.get = function (t) {
                    return this._values[t];
                };
                var DataConstantProperty = function (t) {
                    this.specification = t;
                };
                DataConstantProperty.prototype.possiblyEvaluate = function (t, e) {
                    return t.expression.evaluate(e);
                }, DataConstantProperty.prototype.interpolate = function (t, e, r) {
                    var a = interpolate[this.specification.type];
                    return a ? a(t, e, r) : t;
                };
                var DataDrivenProperty = function (t) {
                    this.specification = t;
                };
                DataDrivenProperty.prototype.possiblyEvaluate = function (t, e) {
                    return 'constant' === t.expression.kind || 'camera' === t.expression.kind ? new PossiblyEvaluatedPropertyValue(this, {
                        kind: 'constant',
                        value: t.expression.evaluate(e)
                    }, e) : new PossiblyEvaluatedPropertyValue(this, t.expression, e);
                }, DataDrivenProperty.prototype.interpolate = function (t, e, r) {
                    if ('constant' !== t.value.kind || 'constant' !== e.value.kind) {
                        return t;
                    }
                    if (void 0 !== t.value.value && void 0 !== e.value.value) {
                        var a = interpolate[this.specification.type];
                        return a ? new PossiblyEvaluatedPropertyValue(this, {
                            kind: 'constant',
                            value: a(t.value.value, e.value.value, r)
                        }, t.globals) : t;
                    }
                }, DataDrivenProperty.prototype.evaluate = function (t, e, r) {
                    return 'constant' === t.kind ? t.value : t.evaluate(e, r);
                };
                var CrossFadedProperty = function (t) {
                    this.specification = t;
                };
                CrossFadedProperty.prototype.possiblyEvaluate = function (t, e) {
                    if (void 0 !== t.value) {
                        if ('constant' === t.expression.kind) {
                            var r = t.expression.evaluate(e);
                            return this._calculate(r, r, r, e);
                        }
                        return this._calculate(t.expression.evaluate({ zoom: e.zoom - 1 }), t.expression.evaluate({ zoom: e.zoom }), t.expression.evaluate({ zoom: e.zoom + 1 }), e);
                    }
                }, CrossFadedProperty.prototype._calculate = function (t, e, r, a) {
                    var o = a.zoom, i = o - Math.floor(o), n = a.crossFadingFactor();
                    return o > a.zoomHistory.lastIntegerZoom ? {
                        from: t,
                        to: e,
                        fromScale: 2,
                        toScale: 1,
                        t: i + (1 - i) * n
                    } : {
                        from: r,
                        to: e,
                        fromScale: 0.5,
                        toScale: 1,
                        t: 1 - (1 - n) * i
                    };
                }, CrossFadedProperty.prototype.interpolate = function (t) {
                    return t;
                };
                var HeatmapColorProperty = function (t) {
                    this.specification = t;
                };
                HeatmapColorProperty.prototype.possiblyEvaluate = function () {
                }, HeatmapColorProperty.prototype.interpolate = function () {
                };
                var Properties = function (t) {
                    var e = this;
                    this.properties = t, this.defaultPropertyValues = {}, this.defaultTransitionablePropertyValues = {}, this.defaultTransitioningPropertyValues = {}, this.defaultPossiblyEvaluatedValues = {};
                    for (var r in t) {
                        var a = t[r], o = e.defaultPropertyValues[r] = new PropertyValue(a, void 0), i = e.defaultTransitionablePropertyValues[r] = new TransitionablePropertyValue(a);
                        e.defaultTransitioningPropertyValues[r] = i.untransitioned(), e.defaultPossiblyEvaluatedValues[r] = o.possiblyEvaluate({});
                    }
                };
                register('DataDrivenProperty', DataDrivenProperty), register('DataConstantProperty', DataConstantProperty), register('CrossFadedProperty', CrossFadedProperty), register('HeatmapColorProperty', HeatmapColorProperty), module.exports = {
                    PropertyValue: PropertyValue,
                    Transitionable: Transitionable,
                    Transitioning: Transitioning,
                    Layout: Layout,
                    PossiblyEvaluatedPropertyValue: PossiblyEvaluatedPropertyValue,
                    PossiblyEvaluated: PossiblyEvaluated,
                    DataConstantProperty: DataConstantProperty,
                    DataDrivenProperty: DataDrivenProperty,
                    CrossFadedProperty: CrossFadedProperty,
                    HeatmapColorProperty: HeatmapColorProperty,
                    Properties: Properties
                };
            },
            {
                '../style-spec/expression': 139,
                '../style-spec/util/color': 153,
                '../style-spec/util/interpolate': 158,
                '../util/util': 275,
                '../util/web_worker_transfer': 278
            }
        ],
        189: [
            function (_dereq_, module, exports) {
                'use strict';
                function getMaximumPaintValue(t, a, e) {
                    var n = a.paint.get(t).value;
                    return 'constant' === n.kind ? n.value : e.programConfigurations.get(a.id).binders[t].statistics.max;
                }
                function translateDistance(t) {
                    return Math.sqrt(t[0] * t[0] + t[1] * t[1]);
                }
                function translate(t, a, e, n, r) {
                    if (!a[0] && !a[1]) {
                        return t;
                    }
                    var i = Point.convert(a);
                    'viewport' === e && i._rotate(-n);
                    for (var u = [], s = 0; s < t.length; s++) {
                        for (var o = t[s], l = [], m = 0; m < o.length; m++) {
                            l.push(o[m].sub(i._mult(r)));
                        }
                        u.push(l);
                    }
                    return u;
                }
                var Point = _dereq_('@mapbox/point-geometry');
                module.exports = {
                    getMaximumPaintValue: getMaximumPaintValue,
                    translateDistance: translateDistance,
                    translate: translate
                };
            },
            { '@mapbox/point-geometry': 4 }
        ],
        190: [
            function (_dereq_, module, exports) {
                'use strict';
                var Evented = _dereq_('../util/evented'), StyleLayer = _dereq_('./style_layer'), loadSprite = _dereq_('./load_sprite'), ImageManager = _dereq_('../render/image_manager'), GlyphManager = _dereq_('../render/glyph_manager'), Light = _dereq_('./light'), LineAtlas = _dereq_('../render/line_atlas'), util = _dereq_('../util/util'), ajax = _dereq_('../util/ajax'), mapbox = _dereq_('../util/mapbox'), browser = _dereq_('../util/browser'), Dispatcher = _dereq_('../util/dispatcher'), validateStyle = _dereq_('./validate_style'), getSourceType = _dereq_('../source/source').getType, setSourceType = _dereq_('../source/source').setType, QueryFeatures = _dereq_('../source/query_features'), SourceCache = _dereq_('../source/source_cache'), GeoJSONSource = _dereq_('../source/geojson_source'), styleSpec = _dereq_('../style-spec/reference/latest'), getWorkerPool = _dereq_('../util/global_worker_pool'), deref = _dereq_('../style-spec/deref'), diff = _dereq_('../style-spec/diff'), rtlTextPlugin = _dereq_('../source/rtl_text_plugin'), PauseablePlacement = _dereq_('./pauseable_placement'), ZoomHistory = _dereq_('./zoom_history'), CrossTileSymbolIndex = _dereq_('../symbol/cross_tile_symbol_index'), supportedDiffOperations = util.pick(diff.operations, [
                        'addLayer',
                        'removeLayer',
                        'setPaintProperty',
                        'setLayoutProperty',
                        'setFilter',
                        'addSource',
                        'removeSource',
                        'setLayerZoomRange',
                        'setLight',
                        'setTransition',
                        'setGeoJSONSourceData'
                    ]), ignoredDiffOperations = util.pick(diff.operations, [
                        'setCenter',
                        'setZoom',
                        'setBearing',
                        'setPitch'
                    ]), Style = function (e) {
                        function r(r, t) {
                            var a = this;
                            void 0 === t && (t = {}), e.call(this), this.map = r, this.dispatcher = new Dispatcher(getWorkerPool(), this), this.imageManager = new ImageManager(), this.glyphManager = new GlyphManager(r._transformRequest, t.localIdeographFontFamily), this.lineAtlas = new LineAtlas(256, 512), this.crossTileSymbolIndex = new CrossTileSymbolIndex(), this._layers = {}, this._order = [], this.sourceCaches = {}, this.zoomHistory = new ZoomHistory(), this._loaded = !1, this._resetUpdates();
                            var i = this;
                            this._rtlTextPluginCallback = rtlTextPlugin.registerForPluginAvailability(function (e) {
                                i.dispatcher.broadcast('loadRTLTextPlugin', e.pluginBlobURL, e.errorCallback);
                                for (var r in i.sourceCaches) {
                                    i.sourceCaches[r].reload();
                                }
                            }), this.on('data', function (e) {
                                if ('source' === e.dataType && 'metadata' === e.sourceDataType) {
                                    var r = a.sourceCaches[e.sourceId];
                                    if (r) {
                                        var t = r.getSource();
                                        if (t && t.vectorLayerIds) {
                                            for (var i in a._layers) {
                                                var s = a._layers[i];
                                                s.source === t.id && a._validateLayer(s);
                                            }
                                        }
                                    }
                                }
                            });
                        }
                        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.loadURL = function (e, r) {
                            var t = this;
                            void 0 === r && (r = {}), this.fire('dataloading', { dataType: 'style' });
                            var a = 'boolean' == typeof r.validate ? r.validate : !mapbox.isMapboxURL(e);
                            e = mapbox.normalizeStyleURL(e, r.accessToken);
                            var i = this.map._transformRequest(e, ajax.ResourceType.Style);
                            ajax.getJSON(i, function (e, r) {
                                e ? t.fire('error', { error: e }) : r && t._load(r, a);
                            });
                        }, r.prototype.loadJSON = function (e, r) {
                            var t = this;
                            void 0 === r && (r = {}), this.fire('dataloading', { dataType: 'style' }), browser.frame(function () {
                                t._load(e, !1 !== r.validate);
                            });
                        }, r.prototype._load = function (e, r) {
                            var t = this;
                            if (!r || !validateStyle.emitErrors(this, validateStyle(e))) {
                                this._loaded = !0, this.stylesheet = e;
                                for (var a in e.sources) {
                                    t.addSource(a, e.sources[a], { validate: !1 });
                                }
                                e.sprite ? loadSprite(e.sprite, this.map._transformRequest, function (e, r) {
                                    if (e) {
                                        t.fire('error', e);
                                    } else if (r) {
                                        for (var a in r) {
                                            t.imageManager.addImage(a, r[a]);
                                        }
                                    }
                                    t.imageManager.setLoaded(!0), t.fire('data', { dataType: 'style' });
                                }) : this.imageManager.setLoaded(!0), this.glyphManager.setURL(e.glyphs);
                                var i = deref(this.stylesheet.layers);
                                this._order = i.map(function (e) {
                                    return e.id;
                                }), this._layers = {};
                                for (var s = 0, o = i; s < o.length; s += 1) {
                                    var n = o[s];
                                    n = StyleLayer.create(n), n.setEventedParent(t, { layer: { id: n.id } }), t._layers[n.id] = n;
                                }
                                this.dispatcher.broadcast('setLayers', this._serializeLayers(this._order)), this.light = new Light(this.stylesheet.light), this.fire('data', { dataType: 'style' }), this.fire('style.load');
                            }
                        }, r.prototype._validateLayer = function (e) {
                            var r = this.sourceCaches[e.source];
                            if (r) {
                                var t = e.sourceLayer;
                                if (t) {
                                    var a = r.getSource();
                                    ('geojson' === a.type || a.vectorLayerIds && -1 === a.vectorLayerIds.indexOf(t)) && this.fire('error', { error: new Error('Source layer "' + t + '" does not exist on source "' + a.id + '" as specified by style layer "' + e.id + '"') });
                                }
                            }
                        }, r.prototype.loaded = function () {
                            var e = this;
                            if (!this._loaded) {
                                return !1;
                            }
                            if (Object.keys(this._updatedSources).length) {
                                return !1;
                            }
                            for (var r in e.sourceCaches) {
                                if (!e.sourceCaches[r].loaded()) {
                                    return !1;
                                }
                            }
                            return !!this.imageManager.isLoaded();
                        }, r.prototype._serializeLayers = function (e) {
                            var r = this;
                            return e.map(function (e) {
                                return r._layers[e].serialize();
                            });
                        }, r.prototype.hasTransitions = function () {
                            var e = this;
                            if (this.light && this.light.hasTransition()) {
                                return !0;
                            }
                            for (var r in e.sourceCaches) {
                                if (e.sourceCaches[r].hasTransition()) {
                                    return !0;
                                }
                            }
                            for (var t in e._layers) {
                                if (e._layers[t].hasTransition()) {
                                    return !0;
                                }
                            }
                            return !1;
                        }, r.prototype._checkLoaded = function () {
                            if (!this._loaded) {
                                throw new Error('Style is not done loading');
                            }
                        }, r.prototype.update = function (e) {
                            var r = this;
                            if (this._loaded) {
                                if (this._changed) {
                                    var t = Object.keys(this._updatedLayers), a = Object.keys(this._removedLayers);
                                    (t.length || a.length) && this._updateWorkerLayers(t, a);
                                    for (var i in r._updatedSources) {
                                        var s = r._updatedSources[i];
                                        'reload' === s ? r._reloadSource(i) : 'clear' === s && r._clearSource(i);
                                    }
                                    for (var o in r._updatedPaintProps) {
                                        r._layers[o].updateTransitions(e);
                                    }
                                    this.light.updateTransitions(e), this._resetUpdates(), this.fire('data', { dataType: 'style' });
                                }
                                for (var n in r.sourceCaches) {
                                    r.sourceCaches[n].used = !1;
                                }
                                for (var l = 0, h = r._order; l < h.length; l += 1) {
                                    var u = h[l], d = r._layers[u];
                                    d.recalculate(e), !d.isHidden(e.zoom) && d.source && (r.sourceCaches[d.source].used = !0);
                                }
                                this.light.recalculate(e), this.z = e.zoom;
                            }
                        }, r.prototype._updateWorkerLayers = function (e, r) {
                            this.dispatcher.broadcast('updateLayers', {
                                layers: this._serializeLayers(e),
                                removedIds: r
                            });
                        }, r.prototype._resetUpdates = function () {
                            this._changed = !1, this._updatedLayers = {}, this._removedLayers = {}, this._updatedSources = {}, this._updatedPaintProps = {};
                        }, r.prototype.setState = function (e) {
                            var r = this;
                            if (this._checkLoaded(), validateStyle.emitErrors(this, validateStyle(e))) {
                                return !1;
                            }
                            e = util.clone(e), e.layers = deref(e.layers);
                            var t = diff(this.serialize(), e).filter(function (e) {
                                return !(e.command in ignoredDiffOperations);
                            });
                            if (0 === t.length) {
                                return !1;
                            }
                            var a = t.filter(function (e) {
                                return !(e.command in supportedDiffOperations);
                            });
                            if (a.length > 0) {
                                throw new Error('Unimplemented: ' + a.map(function (e) {
                                    return e.command;
                                }).join(', ') + '.');
                            }
                            return t.forEach(function (e) {
                                'setTransition' !== e.command && r[e.command].apply(r, e.args);
                            }), this.stylesheet = e, !0;
                        }, r.prototype.addImage = function (e, r) {
                            if (this.getImage(e)) {
                                return this.fire('error', { error: new Error('An image with this name already exists.') });
                            }
                            this.imageManager.addImage(e, r), this.fire('data', { dataType: 'style' });
                        }, r.prototype.getImage = function (e) {
                            return this.imageManager.getImage(e);
                        }, r.prototype.removeImage = function (e) {
                            if (!this.getImage(e)) {
                                return this.fire('error', { error: new Error('No image with this name exists.') });
                            }
                            this.imageManager.removeImage(e), this.fire('data', { dataType: 'style' });
                        }, r.prototype.addSource = function (e, r, t) {
                            var a = this;
                            if (this._checkLoaded(), void 0 !== this.sourceCaches[e]) {
                                throw new Error('There is already a source with this ID');
                            }
                            if (!r.type) {
                                throw new Error('The type property must be defined, but the only the following properties were given: ' + Object.keys(r).join(', ') + '.');
                            }
                            if (!([
                                    'vector',
                                    'raster',
                                    'geojson',
                                    'video',
                                    'image',
                                    'canvas'
                                ].indexOf(r.type) >= 0 && this._validate(validateStyle.source, 'sources.' + e, r, null, t))) {
                                this.map && this.map._collectResourceTiming && (r.collectResourceTiming = !0);
                                var i = this.sourceCaches[e] = new SourceCache(e, r, this.dispatcher);
                                i.style = this, i.setEventedParent(this, function () {
                                    return {
                                        isSourceLoaded: a.loaded(),
                                        source: i.serialize(),
                                        sourceId: e
                                    };
                                }), i.onAdd(this.map), this._changed = !0;
                            }
                        }, r.prototype.removeSource = function (e) {
                            var r = this;
                            if (this._checkLoaded(), void 0 === this.sourceCaches[e]) {
                                throw new Error('There is no source with this ID');
                            }
                            for (var t in r._layers) {
                                if (r._layers[t].source === e) {
                                    return r.fire('error', { error: new Error('Source "' + e + '" cannot be removed while layer "' + t + '" is using it.') });
                                }
                            }
                            var a = this.sourceCaches[e];
                            delete this.sourceCaches[e], delete this._updatedSources[e], a.fire('data', {
                                sourceDataType: 'metadata',
                                dataType: 'source',
                                sourceId: e
                            }), a.setEventedParent(null), a.clearTiles(), a.onRemove && a.onRemove(this.map), this._changed = !0;
                        }, r.prototype.setGeoJSONSourceData = function (e, r) {
                            this._checkLoaded(), this.sourceCaches[e].getSource().setData(r), this._changed = !0;
                        }, r.prototype.getSource = function (e) {
                            return this.sourceCaches[e] && this.sourceCaches[e].getSource();
                        }, r.prototype.addLayer = function (e, r, t) {
                            this._checkLoaded();
                            var a = e.id;
                            if ('object' == typeof e.source && (this.addSource(a, e.source), e = util.clone(e), e = util.extend(e, { source: a })), !this._validate(validateStyle.layer, 'layers.' + a, e, { arrayIndex: -1 }, t)) {
                                var i = StyleLayer.create(e);
                                this._validateLayer(i), i.setEventedParent(this, { layer: { id: a } });
                                var s = r ? this._order.indexOf(r) : this._order.length;
                                if (r && -1 === s) {
                                    return void this.fire('error', { error: new Error('Layer with id "' + r + '" does not exist on this map.') });
                                }
                                if (this._order.splice(s, 0, a), this._layerOrderChanged = !0, this._layers[a] = i, this._removedLayers[a] && i.source) {
                                    var o = this._removedLayers[a];
                                    delete this._removedLayers[a], o.type !== i.type ? this._updatedSources[i.source] = 'clear' : (this._updatedSources[i.source] = 'reload', this.sourceCaches[i.source].pause());
                                }
                                this._updateLayer(i);
                            }
                        }, r.prototype.moveLayer = function (e, r) {
                            if (this._checkLoaded(), this._changed = !0, !this._layers[e]) {
                                return void this.fire('error', { error: new Error('The layer \'' + e + '\' does not exist in the map\'s style and cannot be moved.') });
                            }
                            var t = this._order.indexOf(e);
                            this._order.splice(t, 1);
                            var a = r ? this._order.indexOf(r) : this._order.length;
                            if (r && -1 === a) {
                                return void this.fire('error', { error: new Error('Layer with id "' + r + '" does not exist on this map.') });
                            }
                            this._order.splice(a, 0, e), this._layerOrderChanged = !0;
                        }, r.prototype.removeLayer = function (e) {
                            this._checkLoaded();
                            var r = this._layers[e];
                            if (!r) {
                                return void this.fire('error', { error: new Error('The layer \'' + e + '\' does not exist in the map\'s style and cannot be removed.') });
                            }
                            r.setEventedParent(null);
                            var t = this._order.indexOf(e);
                            this._order.splice(t, 1), this._layerOrderChanged = !0, this._changed = !0, this._removedLayers[e] = r, delete this._layers[e], delete this._updatedLayers[e], delete this._updatedPaintProps[e];
                        }, r.prototype.getLayer = function (e) {
                            return this._layers[e];
                        }, r.prototype.setLayerZoomRange = function (e, r, t) {
                            this._checkLoaded();
                            var a = this.getLayer(e);
                            if (!a) {
                                return void this.fire('error', { error: new Error('The layer \'' + e + '\' does not exist in the map\'s style and cannot have zoom extent.') });
                            }
                            a.minzoom === r && a.maxzoom === t || (null != r && (a.minzoom = r), null != t && (a.maxzoom = t), this._updateLayer(a));
                        }, r.prototype.setFilter = function (e, r) {
                            this._checkLoaded();
                            var t = this.getLayer(e);
                            if (!t) {
                                return void this.fire('error', { error: new Error('The layer \'' + e + '\' does not exist in the map\'s style and cannot be filtered.') });
                            }
                            if (!util.deepEqual(t.filter, r)) {
                                return null === r || void 0 === r ? (t.filter = void 0, void this._updateLayer(t)) : void (this._validate(validateStyle.filter, 'layers.' + t.id + '.filter', r) || (t.filter = util.clone(r), this._updateLayer(t)));
                            }
                        }, r.prototype.getFilter = function (e) {
                            return util.clone(this.getLayer(e).filter);
                        }, r.prototype.setLayoutProperty = function (e, r, t) {
                            this._checkLoaded();
                            var a = this.getLayer(e);
                            if (!a) {
                                return void this.fire('error', { error: new Error('The layer \'' + e + '\' does not exist in the map\'s style and cannot be styled.') });
                            }
                            util.deepEqual(a.getLayoutProperty(r), t) || (a.setLayoutProperty(r, t), this._updateLayer(a));
                        }, r.prototype.getLayoutProperty = function (e, r) {
                            return this.getLayer(e).getLayoutProperty(r);
                        }, r.prototype.setPaintProperty = function (e, r, t) {
                            this._checkLoaded();
                            var a = this.getLayer(e);
                            if (!a) {
                                return void this.fire('error', { error: new Error('The layer \'' + e + '\' does not exist in the map\'s style and cannot be styled.') });
                            }
                            if (!util.deepEqual(a.getPaintProperty(r), t)) {
                                var i = a._transitionablePaint._values[r].value.isDataDriven();
                                a.setPaintProperty(r, t);
                                (a._transitionablePaint._values[r].value.isDataDriven() || i) && this._updateLayer(a), this._changed = !0, this._updatedPaintProps[e] = !0;
                            }
                        }, r.prototype.getPaintProperty = function (e, r) {
                            return this.getLayer(e).getPaintProperty(r);
                        }, r.prototype.getTransition = function () {
                            return util.extend({
                                duration: 300,
                                delay: 0
                            }, this.stylesheet && this.stylesheet.transition);
                        }, r.prototype.serialize = function () {
                            var e = this;
                            return util.filterObject({
                                version: this.stylesheet.version,
                                name: this.stylesheet.name,
                                metadata: this.stylesheet.metadata,
                                light: this.stylesheet.light,
                                center: this.stylesheet.center,
                                zoom: this.stylesheet.zoom,
                                bearing: this.stylesheet.bearing,
                                pitch: this.stylesheet.pitch,
                                sprite: this.stylesheet.sprite,
                                glyphs: this.stylesheet.glyphs,
                                transition: this.stylesheet.transition,
                                sources: util.mapObject(this.sourceCaches, function (e) {
                                    return e.serialize();
                                }),
                                layers: this._order.map(function (r) {
                                    return e._layers[r].serialize();
                                })
                            }, function (e) {
                                return void 0 !== e;
                            });
                        }, r.prototype._updateLayer = function (e) {
                            this._updatedLayers[e.id] = !0, e.source && !this._updatedSources[e.source] && (this._updatedSources[e.source] = 'reload', this.sourceCaches[e.source].pause()), this._changed = !0;
                        }, r.prototype._flattenRenderedFeatures = function (e) {
                            for (var r = this, t = [], a = this._order.length - 1; a >= 0; a--) {
                                for (var i = r._order[a], s = 0, o = e; s < o.length; s += 1) {
                                    var n = o[s], l = n[i];
                                    if (l) {
                                        for (var h = 0, u = l; h < u.length; h += 1) {
                                            var d = u[h];
                                            t.push(d);
                                        }
                                    }
                                }
                            }
                            return t;
                        }, r.prototype.queryRenderedFeatures = function (e, r, t, a) {
                            var i = this;
                            r && r.filter && this._validate(validateStyle.filter, 'queryRenderedFeatures.filter', r.filter);
                            var s = {};
                            if (r && r.layers) {
                                if (!Array.isArray(r.layers)) {
                                    return this.fire('error', { error: 'parameters.layers must be an Array.' }), [];
                                }
                                for (var o = 0, n = r.layers; o < n.length; o += 1) {
                                    var l = n[o], h = i._layers[l];
                                    if (!h) {
                                        return i.fire('error', { error: 'The layer \'' + l + '\' does not exist in the map\'s style and cannot be queried for features.' }), [];
                                    }
                                    s[h.source] = !0;
                                }
                            }
                            var u = [];
                            for (var d in i.sourceCaches) {
                                if (!r.layers || s[d]) {
                                    var c = QueryFeatures.rendered(i.sourceCaches[d], i._layers, e, r, t, a, i.placement ? i.placement.collisionIndex : null);
                                    u.push(c);
                                }
                            }
                            return this._flattenRenderedFeatures(u);
                        }, r.prototype.querySourceFeatures = function (e, r) {
                            r && r.filter && this._validate(validateStyle.filter, 'querySourceFeatures.filter', r.filter);
                            var t = this.sourceCaches[e];
                            return t ? QueryFeatures.source(t, r) : [];
                        }, r.prototype.addSourceType = function (e, r, t) {
                            return getSourceType(e) ? t(new Error('A source type called "' + e + '" already exists.')) : (setSourceType(e, r), r.workerSourceURL ? void this.dispatcher.broadcast('loadWorkerSource', {
                                name: e,
                                url: r.workerSourceURL
                            }, t) : t(null, null));
                        }, r.prototype.getLight = function () {
                            return this.light.getLight();
                        }, r.prototype.setLight = function (e) {
                            this._checkLoaded();
                            var r = this.light.getLight(), t = !1;
                            for (var a in e) {
                                if (!util.deepEqual(e[a], r[a])) {
                                    t = !0;
                                    break;
                                }
                            }
                            if (t) {
                                var i = {
                                    now: browser.now(),
                                    transition: util.extend({
                                        duration: 300,
                                        delay: 0
                                    }, this.stylesheet.transition)
                                };
                                this.light.setLight(e), this.light.updateTransitions(i);
                            }
                        }, r.prototype._validate = function (e, r, t, a, i) {
                            return (!i || !1 !== i.validate) && validateStyle.emitErrors(this, e.call(validateStyle, util.extend({
                                key: r,
                                style: this.serialize(),
                                value: t,
                                styleSpec: styleSpec
                            }, a)));
                        }, r.prototype._remove = function () {
                            var e = this;
                            rtlTextPlugin.evented.off('pluginAvailable', this._rtlTextPluginCallback);
                            for (var r in e.sourceCaches) {
                                e.sourceCaches[r].clearTiles();
                            }
                            this.dispatcher.remove();
                        }, r.prototype._clearSource = function (e) {
                            this.sourceCaches[e].clearTiles();
                        }, r.prototype._reloadSource = function (e) {
                            this.sourceCaches[e].resume(), this.sourceCaches[e].reload();
                        }, r.prototype._updateSources = function (e) {
                            var r = this;
                            for (var t in r.sourceCaches) {
                                r.sourceCaches[t].update(e);
                            }
                        }, r.prototype._generateCollisionBoxes = function () {
                            var e = this;
                            for (var r in e.sourceCaches) {
                                e._reloadSource(r);
                            }
                        }, r.prototype._updatePlacement = function (e, r, t) {
                            for (var a = this, i = !1, s = !1, o = {}, n = 0, l = a._order; n < l.length; n += 1) {
                                var h = l[n], u = a._layers[h];
                                if ('symbol' === u.type) {
                                    if (!o[u.source]) {
                                        var d = a.sourceCaches[u.source];
                                        o[u.source] = d.getRenderableIds().map(function (e) {
                                            return d.getTileByID(e);
                                        }).sort(function (e, r) {
                                            return r.tileID.overscaledZ - e.tileID.overscaledZ || (e.tileID.isLessThan(r.tileID) ? -1 : 1);
                                        });
                                    }
                                    var c = a.crossTileSymbolIndex.addLayer(u, o[u.source]);
                                    i = i || c;
                                }
                            }
                            this.crossTileSymbolIndex.pruneUnusedLayers(this._order);
                            var y = this._layerOrderChanged;
                            if ((y || !this.pauseablePlacement || this.pauseablePlacement.isDone() && !this.placement.stillRecent(browser.now())) && (this.pauseablePlacement = new PauseablePlacement(e, this._order, y, r, t), this._layerOrderChanged = !1), this.pauseablePlacement.isDone() ? this.placement.setStale() : (this.pauseablePlacement.continuePlacement(this._order, this._layers, o), this.pauseablePlacement.isDone() && (this.placement = this.pauseablePlacement.commit(this.placement, browser.now()), s = !0), i && this.pauseablePlacement.placement.setStale()), s || i) {
                                for (var p = 0, f = a._order; p < f.length; p += 1) {
                                    var v = f[p], g = a._layers[v];
                                    'symbol' === g.type && a.placement.updateLayerOpacities(g, o[g.source]);
                                }
                            }
                            return !this.pauseablePlacement.isDone() || this.placement.hasTransitions(browser.now());
                        }, r.prototype.getImages = function (e, r, t) {
                            this.imageManager.getImages(r.icons, t);
                        }, r.prototype.getGlyphs = function (e, r, t) {
                            this.glyphManager.getGlyphs(r.stacks, t);
                        }, r;
                    }(Evented);
                module.exports = Style;
            },
            {
                '../render/glyph_manager': 86,
                '../render/image_manager': 88,
                '../render/line_atlas': 89,
                '../source/geojson_source': 99,
                '../source/query_features': 105,
                '../source/rtl_text_plugin': 109,
                '../source/source': 110,
                '../source/source_cache': 111,
                '../style-spec/deref': 120,
                '../style-spec/diff': 121,
                '../style-spec/reference/latest': 151,
                '../symbol/cross_tile_symbol_index': 218,
                '../util/ajax': 251,
                '../util/browser': 252,
                '../util/dispatcher': 258,
                '../util/evented': 260,
                '../util/global_worker_pool': 262,
                '../util/mapbox': 267,
                '../util/util': 275,
                './light': 183,
                './load_sprite': 185,
                './pauseable_placement': 187,
                './style_layer': 191,
                './validate_style': 211,
                './zoom_history': 212
            }
        ],
        191: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util'), styleSpec = _dereq_('../style-spec/reference/latest'), validateStyle = _dereq_('./validate_style'), Evented = _dereq_('../util/evented'), ref = _dereq_('./properties'), Layout = ref.Layout, Transitionable = ref.Transitionable, Transitioning = ref.Transitioning, Properties = ref.Properties, TRANSITION_SUFFIX = '-transition', StyleLayer = function (t) {
                        function e(e, i) {
                            var a = this;
                            t.call(this), this.id = e.id, this.metadata = e.metadata, this.type = e.type, this.minzoom = e.minzoom, this.maxzoom = e.maxzoom, this.visibility = 'visible', 'background' !== e.type && (this.source = e.source, this.sourceLayer = e['source-layer'], this.filter = e.filter), this._featureFilter = function () {
                                return !0;
                            }, i.layout && (this._unevaluatedLayout = new Layout(i.layout)), this._transitionablePaint = new Transitionable(i.paint);
                            for (var r in e.paint) {
                                a.setPaintProperty(r, e.paint[r], { validate: !1 });
                            }
                            for (var s in e.layout) {
                                a.setLayoutProperty(s, e.layout[s], { validate: !1 });
                            }
                            this._transitioningPaint = this._transitionablePaint.untransitioned();
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getLayoutProperty = function (t) {
                            return 'visibility' === t ? this.visibility : this._unevaluatedLayout.getValue(t);
                        }, e.prototype.setLayoutProperty = function (t, e, i) {
                            if (null !== e && void 0 !== e) {
                                var a = 'layers.' + this.id + '.layout.' + t;
                                if (this._validate(validateStyle.layoutProperty, a, t, e, i)) {
                                    return;
                                }
                            }
                            if ('visibility' === t) {
                                return void (this.visibility = 'none' === e ? e : 'visible');
                            }
                            this._unevaluatedLayout.setValue(t, e);
                        }, e.prototype.getPaintProperty = function (t) {
                            return util.endsWith(t, TRANSITION_SUFFIX) ? this._transitionablePaint.getTransition(t.slice(0, -TRANSITION_SUFFIX.length)) : this._transitionablePaint.getValue(t);
                        }, e.prototype.setPaintProperty = function (t, e, i) {
                            if (null !== e && void 0 !== e) {
                                var a = 'layers.' + this.id + '.paint.' + t;
                                if (this._validate(validateStyle.paintProperty, a, t, e, i)) {
                                    return;
                                }
                            }
                            util.endsWith(t, TRANSITION_SUFFIX) ? this._transitionablePaint.setTransition(t.slice(0, -TRANSITION_SUFFIX.length), e || void 0) : this._transitionablePaint.setValue(t, e);
                        }, e.prototype.isHidden = function (t) {
                            return !!(this.minzoom && t < this.minzoom) || (!!(this.maxzoom && t >= this.maxzoom) || 'none' === this.visibility);
                        }, e.prototype.updateTransitions = function (t) {
                            this._transitioningPaint = this._transitionablePaint.transitioned(t, this._transitioningPaint);
                        }, e.prototype.hasTransition = function () {
                            return this._transitioningPaint.hasTransition();
                        }, e.prototype.recalculate = function (t) {
                            this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t)), this.paint = this._transitioningPaint.possiblyEvaluate(t);
                        }, e.prototype.serialize = function () {
                            var t = {
                                id: this.id,
                                type: this.type,
                                source: this.source,
                                'source-layer': this.sourceLayer,
                                metadata: this.metadata,
                                minzoom: this.minzoom,
                                maxzoom: this.maxzoom,
                                filter: this.filter,
                                layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(),
                                paint: this._transitionablePaint && this._transitionablePaint.serialize()
                            };
                            return 'none' === this.visibility && (t.layout = t.layout || {}, t.layout.visibility = 'none'), util.filterObject(t, function (t, e) {
                                return !(void 0 === t || 'layout' === e && !Object.keys(t).length || 'paint' === e && !Object.keys(t).length);
                            });
                        }, e.prototype._validate = function (t, e, i, a, r) {
                            return (!r || !1 !== r.validate) && validateStyle.emitErrors(this, t.call(validateStyle, {
                                key: e,
                                layerType: this.type,
                                objectKey: i,
                                value: a,
                                styleSpec: styleSpec,
                                style: {
                                    glyphs: !0,
                                    sprite: !0
                                }
                            }));
                        }, e.prototype.hasOffscreenPass = function () {
                            return !1;
                        }, e.prototype.resize = function () {
                        }, e;
                    }(Evented);
                module.exports = StyleLayer;
                var subclasses = {
                    circle: _dereq_('./style_layer/circle_style_layer'),
                    heatmap: _dereq_('./style_layer/heatmap_style_layer'),
                    hillshade: _dereq_('./style_layer/hillshade_style_layer'),
                    fill: _dereq_('./style_layer/fill_style_layer'),
                    'fill-extrusion': _dereq_('./style_layer/fill_extrusion_style_layer'),
                    line: _dereq_('./style_layer/line_style_layer'),
                    symbol: _dereq_('./style_layer/symbol_style_layer'),
                    background: _dereq_('./style_layer/background_style_layer'),
                    raster: _dereq_('./style_layer/raster_style_layer')
                };
                StyleLayer.create = function (t) {
                    return new subclasses[t.type](t);
                };
            },
            {
                '../style-spec/reference/latest': 151,
                '../util/evented': 260,
                '../util/util': 275,
                './properties': 188,
                './style_layer/background_style_layer': 192,
                './style_layer/circle_style_layer': 194,
                './style_layer/fill_extrusion_style_layer': 196,
                './style_layer/fill_style_layer': 198,
                './style_layer/heatmap_style_layer': 200,
                './style_layer/hillshade_style_layer': 202,
                './style_layer/line_style_layer': 204,
                './style_layer/raster_style_layer': 206,
                './style_layer/symbol_style_layer': 208,
                './validate_style': 211
            }
        ],
        192: [
            function (_dereq_, module, exports) {
                'use strict';
                var StyleLayer = _dereq_('../style_layer'), properties = _dereq_('./background_style_layer_properties'), ref = _dereq_('../properties'), Transitionable = ref.Transitionable, Transitioning = ref.Transitioning, PossiblyEvaluated = ref.PossiblyEvaluated, BackgroundStyleLayer = function (e) {
                        function r(r) {
                            e.call(this, r, properties);
                        }
                        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r;
                    }(StyleLayer);
                module.exports = BackgroundStyleLayer;
            },
            {
                '../properties': 188,
                '../style_layer': 191,
                './background_style_layer_properties': 193
            }
        ],
        193: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../../style-spec/reference/latest'), ref = _dereq_('../properties'), Properties = ref.Properties, DataConstantProperty = ref.DataConstantProperty, DataDrivenProperty = ref.DataDrivenProperty, CrossFadedProperty = ref.CrossFadedProperty, HeatmapColorProperty = ref.HeatmapColorProperty, paint = new Properties({
                        'background-color': new DataConstantProperty(styleSpec.paint_background['background-color']),
                        'background-pattern': new CrossFadedProperty(styleSpec.paint_background['background-pattern']),
                        'background-opacity': new DataConstantProperty(styleSpec.paint_background['background-opacity'])
                    });
                module.exports = { paint: paint };
            },
            {
                '../../style-spec/reference/latest': 151,
                '../properties': 188
            }
        ],
        194: [
            function (_dereq_, module, exports) {
                'use strict';
                var StyleLayer = _dereq_('../style_layer'), CircleBucket = _dereq_('../../data/bucket/circle_bucket'), ref = _dereq_('../../util/intersection_tests'), multiPolygonIntersectsBufferedMultiPoint = ref.multiPolygonIntersectsBufferedMultiPoint, ref$1 = _dereq_('../query_utils'), getMaximumPaintValue = ref$1.getMaximumPaintValue, translateDistance = ref$1.translateDistance, translate = ref$1.translate, properties = _dereq_('./circle_style_layer_properties'), ref$2 = _dereq_('../properties'), Transitionable = ref$2.Transitionable, Transitioning = ref$2.Transitioning, PossiblyEvaluated = ref$2.PossiblyEvaluated, CircleStyleLayer = function (e) {
                        function t(t) {
                            e.call(this, t, properties);
                        }
                        return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t.prototype.createBucket = function (e) {
                            return new CircleBucket(e);
                        }, t.prototype.queryRadius = function (e) {
                            var t = e;
                            return getMaximumPaintValue('circle-radius', this, t) + getMaximumPaintValue('circle-stroke-width', this, t) + translateDistance(this.paint.get('circle-translate'));
                        }, t.prototype.queryIntersectsFeature = function (e, t, r, i, a, n) {
                            var l = translate(e, this.paint.get('circle-translate'), this.paint.get('circle-translate-anchor'), a, n), s = this.paint.get('circle-radius').evaluate(t) * n, u = this.paint.get('circle-stroke-width').evaluate(t) * n;
                            return multiPolygonIntersectsBufferedMultiPoint(l, r, s + u);
                        }, t;
                    }(StyleLayer);
                module.exports = CircleStyleLayer;
            },
            {
                '../../data/bucket/circle_bucket': 42,
                '../../util/intersection_tests': 264,
                '../properties': 188,
                '../query_utils': 189,
                '../style_layer': 191,
                './circle_style_layer_properties': 195
            }
        ],
        195: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../../style-spec/reference/latest'), ref = _dereq_('../properties'), Properties = ref.Properties, DataConstantProperty = ref.DataConstantProperty, DataDrivenProperty = ref.DataDrivenProperty, CrossFadedProperty = ref.CrossFadedProperty, HeatmapColorProperty = ref.HeatmapColorProperty, paint = new Properties({
                        'circle-radius': new DataDrivenProperty(styleSpec.paint_circle['circle-radius']),
                        'circle-color': new DataDrivenProperty(styleSpec.paint_circle['circle-color']),
                        'circle-blur': new DataDrivenProperty(styleSpec.paint_circle['circle-blur']),
                        'circle-opacity': new DataDrivenProperty(styleSpec.paint_circle['circle-opacity']),
                        'circle-translate': new DataConstantProperty(styleSpec.paint_circle['circle-translate']),
                        'circle-translate-anchor': new DataConstantProperty(styleSpec.paint_circle['circle-translate-anchor']),
                        'circle-pitch-scale': new DataConstantProperty(styleSpec.paint_circle['circle-pitch-scale']),
                        'circle-pitch-alignment': new DataConstantProperty(styleSpec.paint_circle['circle-pitch-alignment']),
                        'circle-stroke-width': new DataDrivenProperty(styleSpec.paint_circle['circle-stroke-width']),
                        'circle-stroke-color': new DataDrivenProperty(styleSpec.paint_circle['circle-stroke-color']),
                        'circle-stroke-opacity': new DataDrivenProperty(styleSpec.paint_circle['circle-stroke-opacity'])
                    });
                module.exports = { paint: paint };
            },
            {
                '../../style-spec/reference/latest': 151,
                '../properties': 188
            }
        ],
        196: [
            function (_dereq_, module, exports) {
                'use strict';
                var StyleLayer = _dereq_('../style_layer'), FillExtrusionBucket = _dereq_('../../data/bucket/fill_extrusion_bucket'), ref = _dereq_('../../util/intersection_tests'), multiPolygonIntersectsMultiPolygon = ref.multiPolygonIntersectsMultiPolygon, ref$1 = _dereq_('../query_utils'), translateDistance = ref$1.translateDistance, translate = ref$1.translate, properties = _dereq_('./fill_extrusion_style_layer_properties'), ref$2 = _dereq_('../properties'), Transitionable = ref$2.Transitionable, Transitioning = ref$2.Transitioning, PossiblyEvaluated = ref$2.PossiblyEvaluated, FillExtrusionStyleLayer = function (t) {
                        function e(e) {
                            t.call(this, e, properties);
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.createBucket = function (t) {
                            return new FillExtrusionBucket(t);
                        }, e.prototype.queryRadius = function () {
                            return translateDistance(this.paint.get('fill-extrusion-translate'));
                        }, e.prototype.queryIntersectsFeature = function (t, e, r, i, n, o) {
                            var s = translate(t, this.paint.get('fill-extrusion-translate'), this.paint.get('fill-extrusion-translate-anchor'), n, o);
                            return multiPolygonIntersectsMultiPolygon(s, r);
                        }, e.prototype.hasOffscreenPass = function () {
                            return 0 !== this.paint.get('fill-extrusion-opacity') && 'none' !== this.visibility;
                        }, e.prototype.resize = function () {
                            this.viewportFrame && (this.viewportFrame.destroy(), this.viewportFrame = null);
                        }, e;
                    }(StyleLayer);
                module.exports = FillExtrusionStyleLayer;
            },
            {
                '../../data/bucket/fill_extrusion_bucket': 46,
                '../../util/intersection_tests': 264,
                '../properties': 188,
                '../query_utils': 189,
                '../style_layer': 191,
                './fill_extrusion_style_layer_properties': 197
            }
        ],
        197: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../../style-spec/reference/latest'), ref = _dereq_('../properties'), Properties = ref.Properties, DataConstantProperty = ref.DataConstantProperty, DataDrivenProperty = ref.DataDrivenProperty, CrossFadedProperty = ref.CrossFadedProperty, HeatmapColorProperty = ref.HeatmapColorProperty, paint = new Properties({
                        'fill-extrusion-opacity': new DataConstantProperty(styleSpec['paint_fill-extrusion']['fill-extrusion-opacity']),
                        'fill-extrusion-color': new DataDrivenProperty(styleSpec['paint_fill-extrusion']['fill-extrusion-color']),
                        'fill-extrusion-translate': new DataConstantProperty(styleSpec['paint_fill-extrusion']['fill-extrusion-translate']),
                        'fill-extrusion-translate-anchor': new DataConstantProperty(styleSpec['paint_fill-extrusion']['fill-extrusion-translate-anchor']),
                        'fill-extrusion-pattern': new CrossFadedProperty(styleSpec['paint_fill-extrusion']['fill-extrusion-pattern']),
                        'fill-extrusion-height': new DataDrivenProperty(styleSpec['paint_fill-extrusion']['fill-extrusion-height']),
                        'fill-extrusion-base': new DataDrivenProperty(styleSpec['paint_fill-extrusion']['fill-extrusion-base'])
                    });
                module.exports = { paint: paint };
            },
            {
                '../../style-spec/reference/latest': 151,
                '../properties': 188
            }
        ],
        198: [
            function (_dereq_, module, exports) {
                'use strict';
                var StyleLayer = _dereq_('../style_layer'), FillBucket = _dereq_('../../data/bucket/fill_bucket'), ref = _dereq_('../../util/intersection_tests'), multiPolygonIntersectsMultiPolygon = ref.multiPolygonIntersectsMultiPolygon, ref$1 = _dereq_('../query_utils'), translateDistance = ref$1.translateDistance, translate = ref$1.translate, properties = _dereq_('./fill_style_layer_properties'), ref$2 = _dereq_('../properties'), Transitionable = ref$2.Transitionable, Transitioning = ref$2.Transitioning, PossiblyEvaluated = ref$2.PossiblyEvaluated, FillStyleLayer = function (t) {
                        function e(e) {
                            t.call(this, e, properties);
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.recalculate = function (t) {
                            this.paint = this._transitioningPaint.possiblyEvaluate(t), void 0 === this._transitionablePaint.getValue('fill-outline-color') && (this.paint._values['fill-outline-color'] = this.paint._values['fill-color']);
                        }, e.prototype.createBucket = function (t) {
                            return new FillBucket(t);
                        }, e.prototype.queryRadius = function () {
                            return translateDistance(this.paint.get('fill-translate'));
                        }, e.prototype.queryIntersectsFeature = function (t, e, r, i, l, n) {
                            var a = translate(t, this.paint.get('fill-translate'), this.paint.get('fill-translate-anchor'), l, n);
                            return multiPolygonIntersectsMultiPolygon(a, r);
                        }, e;
                    }(StyleLayer);
                module.exports = FillStyleLayer;
            },
            {
                '../../data/bucket/fill_bucket': 44,
                '../../util/intersection_tests': 264,
                '../properties': 188,
                '../query_utils': 189,
                '../style_layer': 191,
                './fill_style_layer_properties': 199
            }
        ],
        199: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../../style-spec/reference/latest'), ref = _dereq_('../properties'), Properties = ref.Properties, DataConstantProperty = ref.DataConstantProperty, DataDrivenProperty = ref.DataDrivenProperty, CrossFadedProperty = ref.CrossFadedProperty, HeatmapColorProperty = ref.HeatmapColorProperty, paint = new Properties({
                        'fill-antialias': new DataConstantProperty(styleSpec.paint_fill['fill-antialias']),
                        'fill-opacity': new DataDrivenProperty(styleSpec.paint_fill['fill-opacity']),
                        'fill-color': new DataDrivenProperty(styleSpec.paint_fill['fill-color']),
                        'fill-outline-color': new DataDrivenProperty(styleSpec.paint_fill['fill-outline-color']),
                        'fill-translate': new DataConstantProperty(styleSpec.paint_fill['fill-translate']),
                        'fill-translate-anchor': new DataConstantProperty(styleSpec.paint_fill['fill-translate-anchor']),
                        'fill-pattern': new CrossFadedProperty(styleSpec.paint_fill['fill-pattern'])
                    });
                module.exports = { paint: paint };
            },
            {
                '../../style-spec/reference/latest': 151,
                '../properties': 188
            }
        ],
        200: [
            function (_dereq_, module, exports) {
                'use strict';
                var StyleLayer = _dereq_('../style_layer'), HeatmapBucket = _dereq_('../../data/bucket/heatmap_bucket'), RGBAImage = _dereq_('../../util/image').RGBAImage, properties = _dereq_('./heatmap_style_layer_properties'), ref = _dereq_('../properties'), Transitionable = ref.Transitionable, Transitioning = ref.Transitioning, PossiblyEvaluated = ref.PossiblyEvaluated, HeatmapStyleLayer = function (t) {
                        function e(e) {
                            t.call(this, e, properties), this._updateColorRamp();
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.createBucket = function (t) {
                            return new HeatmapBucket(t);
                        }, e.prototype.setPaintProperty = function (e, r, a) {
                            t.prototype.setPaintProperty.call(this, e, r, a), 'heatmap-color' === e && this._updateColorRamp();
                        }, e.prototype._updateColorRamp = function () {
                            for (var t = this._transitionablePaint._values['heatmap-color'].value.expression, e = new Uint8Array(1024), r = e.length, a = 4; a < r; a += 4) {
                                var o = t.evaluate({ heatmapDensity: a / r });
                                e[a + 0] = Math.floor(255 * o.r / o.a), e[a + 1] = Math.floor(255 * o.g / o.a), e[a + 2] = Math.floor(255 * o.b / o.a), e[a + 3] = Math.floor(255 * o.a);
                            }
                            this.colorRamp = new RGBAImage({
                                width: 256,
                                height: 1
                            }, e), this.colorRampTexture = null;
                        }, e.prototype.resize = function () {
                            this.heatmapFbo && (this.heatmapFbo.destroy(), this.heatmapFbo = null);
                        }, e.prototype.queryRadius = function () {
                            return 0;
                        }, e.prototype.queryIntersectsFeature = function () {
                            return !1;
                        }, e.prototype.hasOffscreenPass = function () {
                            return 0 !== this.paint.get('heatmap-opacity') && 'none' !== this.visibility;
                        }, e;
                    }(StyleLayer);
                module.exports = HeatmapStyleLayer;
            },
            {
                '../../data/bucket/heatmap_bucket': 47,
                '../../util/image': 263,
                '../properties': 188,
                '../style_layer': 191,
                './heatmap_style_layer_properties': 201
            }
        ],
        201: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../../style-spec/reference/latest'), ref = _dereq_('../properties'), Properties = ref.Properties, DataConstantProperty = ref.DataConstantProperty, DataDrivenProperty = ref.DataDrivenProperty, CrossFadedProperty = ref.CrossFadedProperty, HeatmapColorProperty = ref.HeatmapColorProperty, paint = new Properties({
                        'heatmap-radius': new DataDrivenProperty(styleSpec.paint_heatmap['heatmap-radius']),
                        'heatmap-weight': new DataDrivenProperty(styleSpec.paint_heatmap['heatmap-weight']),
                        'heatmap-intensity': new DataConstantProperty(styleSpec.paint_heatmap['heatmap-intensity']),
                        'heatmap-color': new HeatmapColorProperty(styleSpec.paint_heatmap['heatmap-color']),
                        'heatmap-opacity': new DataConstantProperty(styleSpec.paint_heatmap['heatmap-opacity'])
                    });
                module.exports = { paint: paint };
            },
            {
                '../../style-spec/reference/latest': 151,
                '../properties': 188
            }
        ],
        202: [
            function (_dereq_, module, exports) {
                'use strict';
                var StyleLayer = _dereq_('../style_layer'), properties = _dereq_('./hillshade_style_layer_properties'), ref = _dereq_('../properties'), Transitionable = ref.Transitionable, Transitioning = ref.Transitioning, PossiblyEvaluated = ref.PossiblyEvaluated, HillshadeStyleLayer = function (e) {
                        function r(r) {
                            e.call(this, r, properties);
                        }
                        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.hasOffscreenPass = function () {
                            return 0 !== this.paint.get('hillshade-exaggeration') && 'none' !== this.visibility;
                        }, r;
                    }(StyleLayer);
                module.exports = HillshadeStyleLayer;
            },
            {
                '../properties': 188,
                '../style_layer': 191,
                './hillshade_style_layer_properties': 203
            }
        ],
        203: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../../style-spec/reference/latest'), ref = _dereq_('../properties'), Properties = ref.Properties, DataConstantProperty = ref.DataConstantProperty, DataDrivenProperty = ref.DataDrivenProperty, CrossFadedProperty = ref.CrossFadedProperty, HeatmapColorProperty = ref.HeatmapColorProperty, paint = new Properties({
                        'hillshade-illumination-direction': new DataConstantProperty(styleSpec.paint_hillshade['hillshade-illumination-direction']),
                        'hillshade-illumination-anchor': new DataConstantProperty(styleSpec.paint_hillshade['hillshade-illumination-anchor']),
                        'hillshade-exaggeration': new DataConstantProperty(styleSpec.paint_hillshade['hillshade-exaggeration']),
                        'hillshade-shadow-color': new DataConstantProperty(styleSpec.paint_hillshade['hillshade-shadow-color']),
                        'hillshade-highlight-color': new DataConstantProperty(styleSpec.paint_hillshade['hillshade-highlight-color']),
                        'hillshade-accent-color': new DataConstantProperty(styleSpec.paint_hillshade['hillshade-accent-color'])
                    });
                module.exports = { paint: paint };
            },
            {
                '../../style-spec/reference/latest': 151,
                '../properties': 188
            }
        ],
        204: [
            function (_dereq_, module, exports) {
                'use strict';
                function getLineWidth(t, e) {
                    return e > 0 ? e + 2 * t : t;
                }
                function offsetLine(t, e) {
                    for (var r = [], i = new Point(0, 0), n = 0; n < t.length; n++) {
                        for (var a = t[n], o = [], l = 0; l < a.length; l++) {
                            var u = a[l - 1], s = a[l], p = a[l + 1], y = 0 === l ? i : s.sub(u)._unit()._perp(), f = l === a.length - 1 ? i : p.sub(s)._unit()._perp(), c = y._add(f)._unit(), h = c.x * f.x + c.y * f.y;
                            c._mult(1 / h), o.push(c._mult(e)._add(s));
                        }
                        r.push(o);
                    }
                    return r;
                }
                var Point = _dereq_('@mapbox/point-geometry'), StyleLayer = _dereq_('../style_layer'), LineBucket = _dereq_('../../data/bucket/line_bucket'), ref = _dereq_('../../util/intersection_tests'), multiPolygonIntersectsBufferedMultiLine = ref.multiPolygonIntersectsBufferedMultiLine, ref$1 = _dereq_('../query_utils'), getMaximumPaintValue = ref$1.getMaximumPaintValue, translateDistance = ref$1.translateDistance, translate = ref$1.translate, properties = _dereq_('./line_style_layer_properties'), ref$2 = _dereq_('../../util/util'), extend = ref$2.extend, EvaluationParameters = _dereq_('../evaluation_parameters'), ref$3 = _dereq_('../properties'), Transitionable = ref$3.Transitionable, Transitioning = ref$3.Transitioning, Layout = ref$3.Layout, PossiblyEvaluated = ref$3.PossiblyEvaluated, DataDrivenProperty = ref$3.DataDrivenProperty, LineFloorwidthProperty = function (t) {
                        function e() {
                            t.apply(this, arguments);
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.possiblyEvaluate = function (e, r) {
                            return r = new EvaluationParameters(Math.floor(r.zoom), {
                                now: r.now,
                                fadeDuration: r.fadeDuration,
                                zoomHistory: r.zoomHistory,
                                transition: r.transition
                            }), t.prototype.possiblyEvaluate.call(this, e, r);
                        }, e.prototype.evaluate = function (e, r, i) {
                            return r = extend({}, r, { zoom: Math.floor(r.zoom) }), t.prototype.evaluate.call(this, e, r, i);
                        }, e;
                    }(DataDrivenProperty), lineFloorwidthProperty = new LineFloorwidthProperty(properties.paint.properties['line-width'].specification);
                lineFloorwidthProperty.useIntegerZoom = !0;
                var LineStyleLayer = function (t) {
                    function e(e) {
                        t.call(this, e, properties);
                    }
                    return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.recalculate = function (e) {
                        t.prototype.recalculate.call(this, e), this.paint._values['line-floorwidth'] = lineFloorwidthProperty.possiblyEvaluate(this._transitioningPaint._values['line-width'].value, e);
                    }, e.prototype.createBucket = function (t) {
                        return new LineBucket(t);
                    }, e.prototype.queryRadius = function (t) {
                        var e = t, r = getLineWidth(getMaximumPaintValue('line-width', this, e), getMaximumPaintValue('line-gap-width', this, e)), i = getMaximumPaintValue('line-offset', this, e);
                        return r / 2 + Math.abs(i) + translateDistance(this.paint.get('line-translate'));
                    }, e.prototype.queryIntersectsFeature = function (t, e, r, i, n, a) {
                        var o = translate(t, this.paint.get('line-translate'), this.paint.get('line-translate-anchor'), n, a), l = a / 2 * getLineWidth(this.paint.get('line-width').evaluate(e), this.paint.get('line-gap-width').evaluate(e)), u = this.paint.get('line-offset').evaluate(e);
                        return u && (r = offsetLine(r, u * a)), multiPolygonIntersectsBufferedMultiLine(o, r, l);
                    }, e;
                }(StyleLayer);
                module.exports = LineStyleLayer;
            },
            {
                '../../data/bucket/line_bucket': 49,
                '../../util/intersection_tests': 264,
                '../../util/util': 275,
                '../evaluation_parameters': 182,
                '../properties': 188,
                '../query_utils': 189,
                '../style_layer': 191,
                './line_style_layer_properties': 205,
                '@mapbox/point-geometry': 4
            }
        ],
        205: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../../style-spec/reference/latest'), ref = _dereq_('../properties'), Properties = ref.Properties, DataConstantProperty = ref.DataConstantProperty, DataDrivenProperty = ref.DataDrivenProperty, CrossFadedProperty = ref.CrossFadedProperty, HeatmapColorProperty = ref.HeatmapColorProperty, layout = new Properties({
                        'line-cap': new DataConstantProperty(styleSpec.layout_line['line-cap']),
                        'line-join': new DataDrivenProperty(styleSpec.layout_line['line-join']),
                        'line-miter-limit': new DataConstantProperty(styleSpec.layout_line['line-miter-limit']),
                        'line-round-limit': new DataConstantProperty(styleSpec.layout_line['line-round-limit'])
                    }), paint = new Properties({
                        'line-opacity': new DataDrivenProperty(styleSpec.paint_line['line-opacity']),
                        'line-color': new DataDrivenProperty(styleSpec.paint_line['line-color']),
                        'line-translate': new DataConstantProperty(styleSpec.paint_line['line-translate']),
                        'line-translate-anchor': new DataConstantProperty(styleSpec.paint_line['line-translate-anchor']),
                        'line-width': new DataDrivenProperty(styleSpec.paint_line['line-width']),
                        'line-gap-width': new DataDrivenProperty(styleSpec.paint_line['line-gap-width']),
                        'line-offset': new DataDrivenProperty(styleSpec.paint_line['line-offset']),
                        'line-blur': new DataDrivenProperty(styleSpec.paint_line['line-blur']),
                        'line-dasharray': new CrossFadedProperty(styleSpec.paint_line['line-dasharray']),
                        'line-pattern': new CrossFadedProperty(styleSpec.paint_line['line-pattern'])
                    });
                module.exports = {
                    paint: paint,
                    layout: layout
                };
            },
            {
                '../../style-spec/reference/latest': 151,
                '../properties': 188
            }
        ],
        206: [
            function (_dereq_, module, exports) {
                'use strict';
                var StyleLayer = _dereq_('../style_layer'), properties = _dereq_('./raster_style_layer_properties'), ref = _dereq_('../properties'), Transitionable = ref.Transitionable, Transitioning = ref.Transitioning, PossiblyEvaluated = ref.PossiblyEvaluated, RasterStyleLayer = function (e) {
                        function r(r) {
                            e.call(this, r, properties);
                        }
                        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r;
                    }(StyleLayer);
                module.exports = RasterStyleLayer;
            },
            {
                '../properties': 188,
                '../style_layer': 191,
                './raster_style_layer_properties': 207
            }
        ],
        207: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../../style-spec/reference/latest'), ref = _dereq_('../properties'), Properties = ref.Properties, DataConstantProperty = ref.DataConstantProperty, DataDrivenProperty = ref.DataDrivenProperty, CrossFadedProperty = ref.CrossFadedProperty, HeatmapColorProperty = ref.HeatmapColorProperty, paint = new Properties({
                        'raster-opacity': new DataConstantProperty(styleSpec.paint_raster['raster-opacity']),
                        'raster-hue-rotate': new DataConstantProperty(styleSpec.paint_raster['raster-hue-rotate']),
                        'raster-brightness-min': new DataConstantProperty(styleSpec.paint_raster['raster-brightness-min']),
                        'raster-brightness-max': new DataConstantProperty(styleSpec.paint_raster['raster-brightness-max']),
                        'raster-saturation': new DataConstantProperty(styleSpec.paint_raster['raster-saturation']),
                        'raster-contrast': new DataConstantProperty(styleSpec.paint_raster['raster-contrast']),
                        'raster-fade-duration': new DataConstantProperty(styleSpec.paint_raster['raster-fade-duration'])
                    });
                module.exports = { paint: paint };
            },
            {
                '../../style-spec/reference/latest': 151,
                '../properties': 188
            }
        ],
        208: [
            function (_dereq_, module, exports) {
                'use strict';
                var StyleLayer = _dereq_('../style_layer'), SymbolBucket = _dereq_('../../data/bucket/symbol_bucket'), resolveTokens = _dereq_('../../util/token'), ref = _dereq_('../../style-spec/expression'), isExpression = ref.isExpression, properties = _dereq_('./symbol_style_layer_properties'), ref$1 = _dereq_('../properties'), Transitionable = ref$1.Transitionable, Transitioning = ref$1.Transitioning, Layout = ref$1.Layout, PossiblyEvaluated = ref$1.PossiblyEvaluated, SymbolStyleLayer = function (t) {
                        function e(e) {
                            t.call(this, e, properties);
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.recalculate = function (e) {
                            t.prototype.recalculate.call(this, e), 'auto' === this.layout.get('icon-rotation-alignment') && ('line' === this.layout.get('symbol-placement') ? this.layout._values['icon-rotation-alignment'] = 'map' : this.layout._values['icon-rotation-alignment'] = 'viewport'), 'auto' === this.layout.get('text-rotation-alignment') && ('line' === this.layout.get('symbol-placement') ? this.layout._values['text-rotation-alignment'] = 'map' : this.layout._values['text-rotation-alignment'] = 'viewport'), 'auto' === this.layout.get('text-pitch-alignment') && (this.layout._values['text-pitch-alignment'] = this.layout.get('text-rotation-alignment')), 'auto' === this.layout.get('icon-pitch-alignment') && (this.layout._values['icon-pitch-alignment'] = this.layout.get('icon-rotation-alignment'));
                        }, e.prototype.getValueAndResolveTokens = function (t, e) {
                            var o = this.layout.get(t).evaluate(e), i = this._unevaluatedLayout._values[t];
                            return i.isDataDriven() || isExpression(i.value) ? o : resolveTokens(e.properties, o);
                        }, e.prototype.createBucket = function (t) {
                            return new SymbolBucket(t);
                        }, e.prototype.queryRadius = function () {
                            return 0;
                        }, e.prototype.queryIntersectsFeature = function () {
                            return !1;
                        }, e;
                    }(StyleLayer);
                module.exports = SymbolStyleLayer;
            },
            {
                '../../data/bucket/symbol_bucket': 51,
                '../../style-spec/expression': 139,
                '../../util/token': 274,
                '../properties': 188,
                '../style_layer': 191,
                './symbol_style_layer_properties': 209
            }
        ],
        209: [
            function (_dereq_, module, exports) {
                'use strict';
                var styleSpec = _dereq_('../../style-spec/reference/latest'), ref = _dereq_('../properties'), Properties = ref.Properties, DataConstantProperty = ref.DataConstantProperty, DataDrivenProperty = ref.DataDrivenProperty, CrossFadedProperty = ref.CrossFadedProperty, HeatmapColorProperty = ref.HeatmapColorProperty, layout = new Properties({
                        'symbol-placement': new DataConstantProperty(styleSpec.layout_symbol['symbol-placement']),
                        'symbol-spacing': new DataConstantProperty(styleSpec.layout_symbol['symbol-spacing']),
                        'symbol-avoid-edges': new DataConstantProperty(styleSpec.layout_symbol['symbol-avoid-edges']),
                        'icon-allow-overlap': new DataConstantProperty(styleSpec.layout_symbol['icon-allow-overlap']),
                        'icon-ignore-placement': new DataConstantProperty(styleSpec.layout_symbol['icon-ignore-placement']),
                        'icon-optional': new DataConstantProperty(styleSpec.layout_symbol['icon-optional']),
                        'icon-rotation-alignment': new DataConstantProperty(styleSpec.layout_symbol['icon-rotation-alignment']),
                        'icon-size': new DataDrivenProperty(styleSpec.layout_symbol['icon-size']),
                        'icon-text-fit': new DataConstantProperty(styleSpec.layout_symbol['icon-text-fit']),
                        'icon-text-fit-padding': new DataConstantProperty(styleSpec.layout_symbol['icon-text-fit-padding']),
                        'icon-image': new DataDrivenProperty(styleSpec.layout_symbol['icon-image']),
                        'icon-rotate': new DataDrivenProperty(styleSpec.layout_symbol['icon-rotate']),
                        'icon-padding': new DataConstantProperty(styleSpec.layout_symbol['icon-padding']),
                        'icon-keep-upright': new DataConstantProperty(styleSpec.layout_symbol['icon-keep-upright']),
                        'icon-offset': new DataDrivenProperty(styleSpec.layout_symbol['icon-offset']),
                        'icon-anchor': new DataDrivenProperty(styleSpec.layout_symbol['icon-anchor']),
                        'icon-pitch-alignment': new DataConstantProperty(styleSpec.layout_symbol['icon-pitch-alignment']),
                        'text-pitch-alignment': new DataConstantProperty(styleSpec.layout_symbol['text-pitch-alignment']),
                        'text-rotation-alignment': new DataConstantProperty(styleSpec.layout_symbol['text-rotation-alignment']),
                        'text-field': new DataDrivenProperty(styleSpec.layout_symbol['text-field']),
                        'text-font': new DataDrivenProperty(styleSpec.layout_symbol['text-font']),
                        'text-size': new DataDrivenProperty(styleSpec.layout_symbol['text-size']),
                        'text-max-width': new DataDrivenProperty(styleSpec.layout_symbol['text-max-width']),
                        'text-line-height': new DataConstantProperty(styleSpec.layout_symbol['text-line-height']),
                        'text-letter-spacing': new DataDrivenProperty(styleSpec.layout_symbol['text-letter-spacing']),
                        'text-justify': new DataDrivenProperty(styleSpec.layout_symbol['text-justify']),
                        'text-anchor': new DataDrivenProperty(styleSpec.layout_symbol['text-anchor']),
                        'text-max-angle': new DataConstantProperty(styleSpec.layout_symbol['text-max-angle']),
                        'text-rotate': new DataDrivenProperty(styleSpec.layout_symbol['text-rotate']),
                        'text-padding': new DataConstantProperty(styleSpec.layout_symbol['text-padding']),
                        'text-keep-upright': new DataConstantProperty(styleSpec.layout_symbol['text-keep-upright']),
                        'text-transform': new DataDrivenProperty(styleSpec.layout_symbol['text-transform']),
                        'text-offset': new DataDrivenProperty(styleSpec.layout_symbol['text-offset']),
                        'text-allow-overlap': new DataConstantProperty(styleSpec.layout_symbol['text-allow-overlap']),
                        'text-ignore-placement': new DataConstantProperty(styleSpec.layout_symbol['text-ignore-placement']),
                        'text-optional': new DataConstantProperty(styleSpec.layout_symbol['text-optional'])
                    }), paint = new Properties({
                        'icon-opacity': new DataDrivenProperty(styleSpec.paint_symbol['icon-opacity']),
                        'icon-color': new DataDrivenProperty(styleSpec.paint_symbol['icon-color']),
                        'icon-halo-color': new DataDrivenProperty(styleSpec.paint_symbol['icon-halo-color']),
                        'icon-halo-width': new DataDrivenProperty(styleSpec.paint_symbol['icon-halo-width']),
                        'icon-halo-blur': new DataDrivenProperty(styleSpec.paint_symbol['icon-halo-blur']),
                        'icon-translate': new DataConstantProperty(styleSpec.paint_symbol['icon-translate']),
                        'icon-translate-anchor': new DataConstantProperty(styleSpec.paint_symbol['icon-translate-anchor']),
                        'text-opacity': new DataDrivenProperty(styleSpec.paint_symbol['text-opacity']),
                        'text-color': new DataDrivenProperty(styleSpec.paint_symbol['text-color']),
                        'text-halo-color': new DataDrivenProperty(styleSpec.paint_symbol['text-halo-color']),
                        'text-halo-width': new DataDrivenProperty(styleSpec.paint_symbol['text-halo-width']),
                        'text-halo-blur': new DataDrivenProperty(styleSpec.paint_symbol['text-halo-blur']),
                        'text-translate': new DataConstantProperty(styleSpec.paint_symbol['text-translate']),
                        'text-translate-anchor': new DataConstantProperty(styleSpec.paint_symbol['text-translate-anchor'])
                    });
                module.exports = {
                    paint: paint,
                    layout: layout
                };
            },
            {
                '../../style-spec/reference/latest': 151,
                '../properties': 188
            }
        ],
        210: [
            function (_dereq_, module, exports) {
                'use strict';
                var StyleLayer = _dereq_('./style_layer'), util = _dereq_('../util/util'), featureFilter = _dereq_('../style-spec/feature_filter'), groupByLayout = _dereq_('../style-spec/group_by_layout'), StyleLayerIndex = function (e) {
                        e && this.replace(e);
                    };
                StyleLayerIndex.prototype.replace = function (e) {
                    this._layerConfigs = {}, this._layers = {}, this.update(e, []);
                }, StyleLayerIndex.prototype.update = function (e, r) {
                    for (var t = this, a = 0, i = e; a < i.length; a += 1) {
                        var l = i[a];
                        t._layerConfigs[l.id] = l;
                        var y = t._layers[l.id] = StyleLayer.create(l);
                        y._featureFilter = featureFilter(y.filter);
                    }
                    for (var u = 0, s = r; u < s.length; u += 1) {
                        var o = s[u];
                        delete t._layerConfigs[o], delete t._layers[o];
                    }
                    this.familiesBySource = {};
                    for (var n = groupByLayout(util.values(this._layerConfigs)), f = 0, p = n; f < p.length; f += 1) {
                        var c = p[f], _ = c.map(function (e) {
                                return t._layers[e.id];
                            }), d = _[0];
                        if ('none' !== d.visibility) {
                            var v = d.source || '', g = t.familiesBySource[v];
                            g || (g = t.familiesBySource[v] = {});
                            var h = d.sourceLayer || '_geojsonTileLayer', L = g[h];
                            L || (L = g[h] = []), L.push(_);
                        }
                    }
                }, module.exports = StyleLayerIndex;
            },
            {
                '../style-spec/feature_filter': 148,
                '../style-spec/group_by_layout': 150,
                '../util/util': 275,
                './style_layer': 191
            }
        ],
        211: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = _dereq_('../style-spec/validate_style.min'), module.exports.emitErrors = function (r, e) {
                    if (e && e.length) {
                        for (var t = 0, o = e; t < o.length; t += 1) {
                            var s = o[t], i = s.message;
                            r.fire('error', { error: new Error(i) });
                        }
                        return !0;
                    }
                    return !1;
                };
            },
            { '../style-spec/validate_style.min': 181 }
        ],
        212: [
            function (_dereq_, module, exports) {
                'use strict';
                var ZoomHistory = function () {
                    this.first = !0;
                };
                ZoomHistory.prototype.update = function (o, t) {
                    var s = Math.floor(o);
                    return this.first ? (this.first = !1, this.lastIntegerZoom = s, this.lastIntegerZoomTime = 0, this.lastZoom = o, this.lastFloorZoom = s, !0) : (this.lastFloorZoom > s ? (this.lastIntegerZoom = s + 1, this.lastIntegerZoomTime = t) : this.lastFloorZoom < s && (this.lastIntegerZoom = s, this.lastIntegerZoomTime = t), o !== this.lastZoom && (this.lastZoom = o, this.lastFloorZoom = s, !0));
                }, module.exports = ZoomHistory;
            },
            {}
        ],
        213: [
            function (_dereq_, module, exports) {
                'use strict';
                var Point = _dereq_('@mapbox/point-geometry'), ref = _dereq_('../util/web_worker_transfer'), register = ref.register, Anchor = function (t) {
                        function e(e, r, o, n) {
                            t.call(this, e, r), this.angle = o, void 0 !== n && (this.segment = n);
                        }
                        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.clone = function () {
                            return new e(this.x, this.y, this.angle, this.segment);
                        }, e;
                    }(Point);
                register('Anchor', Anchor), module.exports = Anchor;
            },
            {
                '../util/web_worker_transfer': 278,
                '@mapbox/point-geometry': 4
            }
        ],
        214: [
            function (_dereq_, module, exports) {
                'use strict';
                function checkMaxAngle(e, t, a, r, n) {
                    if (void 0 === t.segment) {
                        return !0;
                    }
                    for (var i = t, s = t.segment + 1, f = 0; f > -a / 2;) {
                        if (--s < 0) {
                            return !1;
                        }
                        f -= e[s].dist(i), i = e[s];
                    }
                    f += e[s].dist(e[s + 1]), s++;
                    for (var l = [], o = 0; f < a / 2;) {
                        var u = e[s - 1], c = e[s], g = e[s + 1];
                        if (!g) {
                            return !1;
                        }
                        var h = u.angleTo(c) - c.angleTo(g);
                        for (h = Math.abs((h + 3 * Math.PI) % (2 * Math.PI) - Math.PI), l.push({
                                distance: f,
                                angleDelta: h
                            }), o += h; f - l[0].distance > r;) {
                            o -= l.shift().angleDelta;
                        }
                        if (o > n) {
                            return !1;
                        }
                        s++, f += c.dist(g);
                    }
                    return !0;
                }
                module.exports = checkMaxAngle;
            },
            {}
        ],
        215: [
            function (_dereq_, module, exports) {
                'use strict';
                function clipLine(n, x, y, o, e) {
                    for (var r = [], t = 0; t < n.length; t++) {
                        for (var i = n[t], u = void 0, d = 0; d < i.length - 1; d++) {
                            var P = i[d], w = i[d + 1];
                            P.x < x && w.x < x || (P.x < x ? P = new Point(x, P.y + (w.y - P.y) * ((x - P.x) / (w.x - P.x)))._round() : w.x < x && (w = new Point(x, P.y + (w.y - P.y) * ((x - P.x) / (w.x - P.x)))._round()), P.y < y && w.y < y || (P.y < y ? P = new Point(P.x + (w.x - P.x) * ((y - P.y) / (w.y - P.y)), y)._round() : w.y < y && (w = new Point(P.x + (w.x - P.x) * ((y - P.y) / (w.y - P.y)), y)._round()), P.x >= o && w.x >= o || (P.x >= o ? P = new Point(o, P.y + (w.y - P.y) * ((o - P.x) / (w.x - P.x)))._round() : w.x >= o && (w = new Point(o, P.y + (w.y - P.y) * ((o - P.x) / (w.x - P.x)))._round()), P.y >= e && w.y >= e || (P.y >= e ? P = new Point(P.x + (w.x - P.x) * ((e - P.y) / (w.y - P.y)), e)._round() : w.y >= e && (w = new Point(P.x + (w.x - P.x) * ((e - P.y) / (w.y - P.y)), e)._round()), u && P.equals(u[u.length - 1]) || (u = [P], r.push(u)), u.push(w)))));
                        }
                    }
                    return r;
                }
                var Point = _dereq_('@mapbox/point-geometry');
                module.exports = clipLine;
            },
            { '@mapbox/point-geometry': 4 }
        ],
        216: [
            function (_dereq_, module, exports) {
                'use strict';
                var CollisionFeature = function (t, e, i, o, a, r, l, n, s, d, h) {
                    var u = l.top * n - s, f = l.bottom * n + s, c = l.left * n - s, x = l.right * n + s;
                    if (this.boxStartIndex = t.length, d) {
                        var m = f - u, v = x - c;
                        m > 0 && (m = Math.max(10 * n, m), this._addLineCollisionCircles(t, e, i, i.segment, v, m, o, a, r, h));
                    } else {
                        t.emplaceBack(i.x, i.y, c, u, x, f, o, a, r, 0, 0);
                    }
                    this.boxEndIndex = t.length;
                };
                CollisionFeature.prototype._addLineCollisionCircles = function (t, e, i, o, a, r, l, n, s, d) {
                    var h = r / 2, u = Math.floor(a / h), f = 1 + 0.4 * Math.log(d) / Math.LN2, c = Math.floor(u * f / 2), x = -r / 2, m = i, v = o + 1, C = x, b = -a / 2, g = b - a / 4;
                    do {
                        if (--v < 0) {
                            if (C > b) {
                                return;
                            }
                            v = 0;
                            break;
                        }
                        C -= e[v].dist(m), m = e[v];
                    } while (C > g);
                    for (var p = e[v].dist(e[v + 1]), M = -c; M < u + c; M++) {
                        var _ = M * h, k = b + _;
                        if (_ < 0 && (k += _), _ > a && (k += _ - a), !(k < C)) {
                            for (; C + p < k;) {
                                if (C += p, ++v + 1 >= e.length) {
                                    return;
                                }
                                p = e[v].dist(e[v + 1]);
                            }
                            var y = k - C, F = e[v], L = e[v + 1], B = L.sub(F)._unit()._mult(y)._add(F)._round(), I = Math.abs(k - x) < h ? 0 : 0.8 * (k - x);
                            t.emplaceBack(B.x, B.y, -r / 2, -r / 2, r / 2, r / 2, l, n, s, r / 2, I);
                        }
                    }
                }, module.exports = CollisionFeature;
            },
            {}
        ],
        217: [
            function (_dereq_, module, exports) {
                'use strict';
                function markCollisionCircleUsed(t, i, e) {
                    t[i + 4] = e ? 1 : 0;
                }
                var Point = _dereq_('@mapbox/point-geometry'), intersectionTests = _dereq_('../util/intersection_tests'), Grid = _dereq_('./grid_index'), glmatrix = _dereq_('@mapbox/gl-matrix'), mat4 = glmatrix.mat4, projection = _dereq_('../symbol/projection'), viewportPadding = 100, CollisionIndex = function (t, i, e) {
                        void 0 === i && (i = new Grid(t.width + 2 * viewportPadding, t.height + 2 * viewportPadding, 25)), void 0 === e && (e = new Grid(t.width + 2 * viewportPadding, t.height + 2 * viewportPadding, 25)), this.transform = t, this.grid = i, this.ignoredGrid = e, this.pitchfactor = Math.cos(t._pitch) * t.cameraToCenterDistance, this.screenRightBoundary = t.width + viewportPadding, this.screenBottomBoundary = t.height + viewportPadding;
                    };
                CollisionIndex.prototype.placeCollisionBox = function (t, i, e, n) {
                    var r = this.projectAndGetPerspectiveRatio(n, t.anchorPointX, t.anchorPointY), o = e * r.perspectiveRatio, s = t.x1 * o + r.point.x, a = t.y1 * o + r.point.y, c = t.x2 * o + r.point.x, p = t.y2 * o + r.point.y;
                    return !i && this.grid.hitTest(s, a, c, p) ? {
                        box: [],
                        offscreen: !1
                    } : {
                        box: [
                            s,
                            a,
                            c,
                            p
                        ],
                        offscreen: this.isOffscreen(s, a, c, p)
                    };
                }, CollisionIndex.prototype.approximateTileDistance = function (t, i, e, n, r) {
                    var o = r ? 1 : n / this.pitchfactor, s = t.lastSegmentViewportDistance * e;
                    return t.prevTileDistance + s + (o - 1) * s * Math.abs(Math.sin(i));
                }, CollisionIndex.prototype.placeCollisionCircles = function (t, i, e, n, r, o, s, a, c, p, d, l, h) {
                    var f = this, x = [], g = this.projectAnchor(p, o.anchorX, o.anchorY), u = {}, v = c / 24, y = o.lineOffsetX * c, m = o.lineOffsetY * c, I = new Point(o.anchorX, o.anchorY), P = projection.project(I, d).point, C = projection.placeFirstAndLastGlyph(v, a, y, m, !1, P, I, o, s, d, u, !0), w = !1, D = !0, b = g.perspectiveRatio * n, j = 1 / (n * e), T = 0, k = 0;
                    C && (T = this.approximateTileDistance(C.first.tileDistance, C.first.angle, j, g.cameraDistance, h), k = this.approximateTileDistance(C.last.tileDistance, C.last.angle, j, g.cameraDistance, h));
                    for (var G = 0; G < t.length; G += 5) {
                        var M = t[G], R = t[G + 1], q = t[G + 2], B = t[G + 3];
                        if (!C || B < -T || B > k) {
                            markCollisionCircleUsed(t, G, !1);
                        } else {
                            var A = f.projectPoint(p, M, R), O = q * b;
                            if (x.length > 0) {
                                var U = A.x - x[x.length - 4], X = A.y - x[x.length - 3];
                                if (O * O * 2 > U * U + X * X) {
                                    if (G + 8 < t.length) {
                                        var Y = t[G + 8];
                                        if (Y > -T && Y < k) {
                                            markCollisionCircleUsed(t, G, !1);
                                            continue;
                                        }
                                    }
                                }
                            }
                            var L = G / 5;
                            if (x.push(A.x, A.y, O, L), markCollisionCircleUsed(t, G, !0), D = D && f.isOffscreen(A.x - O, A.y - O, A.x + O, A.y + O), !i && f.grid.hitTestCircle(A.x, A.y, O)) {
                                if (!l) {
                                    return {
                                        circles: [],
                                        offscreen: !1
                                    };
                                }
                                w = !0;
                            }
                        }
                    }
                    return {
                        circles: w ? [] : x,
                        offscreen: D
                    };
                }, CollisionIndex.prototype.queryRenderedSymbols = function (t, i, e, n, r, o) {
                    var s = this, a = {}, c = [];
                    if (0 === t.length || 0 === this.grid.keysLength() && 0 === this.ignoredGrid.keysLength()) {
                        return c;
                    }
                    for (var p = this.transform.calculatePosMatrix(i.toUnwrapped()), d = [], l = 1 / 0, h = 1 / 0, f = -1 / 0, x = -1 / 0, g = 0; g < t.length; g++) {
                        for (var u = t[g], v = 0; v < u.length; v++) {
                            var y = s.projectPoint(p, u[v].x, u[v].y);
                            l = Math.min(l, y.x), h = Math.min(h, y.y), f = Math.max(f, y.x), x = Math.max(x, y.y), d.push(y);
                        }
                    }
                    for (var m = i.key, I = [], P = this.grid.query(l, h, f, x), C = 0; C < P.length; C++) {
                        P[C].sourceID === r && P[C].tileID === m && o[P[C].bucketInstanceId] && I.push(P[C].boxIndex);
                    }
                    for (var w = this.ignoredGrid.query(l, h, f, x), D = 0; D < w.length; D++) {
                        w[D].sourceID === r && w[D].tileID === m && o[w[D].bucketInstanceId] && I.push(w[D].boxIndex);
                    }
                    for (var b = 0; b < I.length; b++) {
                        var j = n.get(I[b]), T = j.sourceLayerIndex, k = j.featureIndex, G = j.bucketIndex;
                        if (void 0 === a[T] && (a[T] = {}), void 0 === a[T][k] && (a[T][k] = {}), !a[T][k][G]) {
                            var M = s.projectAndGetPerspectiveRatio(p, j.anchorPointX, j.anchorPointY), R = e * M.perspectiveRatio, q = j.x1 * R + M.point.x, B = j.y1 * R + M.point.y, A = j.x2 * R + M.point.x, O = j.y2 * R + M.point.y, U = [
                                    new Point(q, B),
                                    new Point(A, B),
                                    new Point(A, O),
                                    new Point(q, O)
                                ];
                            intersectionTests.polygonIntersectsPolygon(d, U) && (a[T][k][G] = !0, c.push(I[b]));
                        }
                    }
                    return c;
                }, CollisionIndex.prototype.insertCollisionBox = function (t, i, e, n, r, o) {
                    var s = i ? this.ignoredGrid : this.grid, a = {
                            tileID: e,
                            sourceID: n,
                            bucketInstanceId: r,
                            boxIndex: o
                        };
                    s.insert(a, t[0], t[1], t[2], t[3]);
                }, CollisionIndex.prototype.insertCollisionCircles = function (t, i, e, n, r, o) {
                    for (var s = i ? this.ignoredGrid : this.grid, a = 0; a < t.length; a += 4) {
                        var c = {
                            tileID: e,
                            sourceID: n,
                            bucketInstanceId: r,
                            boxIndex: o + t[a + 3]
                        };
                        s.insertCircle(c, t[a], t[a + 1], t[a + 2]);
                    }
                }, CollisionIndex.prototype.projectAnchor = function (t, i, e) {
                    var n = [
                        i,
                        e,
                        0,
                        1
                    ];
                    return projection.xyTransformMat4(n, n, t), {
                        perspectiveRatio: 0.5 + this.transform.cameraToCenterDistance / n[3] * 0.5,
                        cameraDistance: n[3]
                    };
                }, CollisionIndex.prototype.projectPoint = function (t, i, e) {
                    var n = [
                        i,
                        e,
                        0,
                        1
                    ];
                    return projection.xyTransformMat4(n, n, t), new Point((n[0] / n[3] + 1) / 2 * this.transform.width + viewportPadding, (-n[1] / n[3] + 1) / 2 * this.transform.height + viewportPadding);
                }, CollisionIndex.prototype.projectAndGetPerspectiveRatio = function (t, i, e) {
                    var n = [
                        i,
                        e,
                        0,
                        1
                    ];
                    return projection.xyTransformMat4(n, n, t), {
                        point: new Point((n[0] / n[3] + 1) / 2 * this.transform.width + viewportPadding, (-n[1] / n[3] + 1) / 2 * this.transform.height + viewportPadding),
                        perspectiveRatio: 0.5 + this.transform.cameraToCenterDistance / n[3] * 0.5
                    };
                }, CollisionIndex.prototype.isOffscreen = function (t, i, e, n) {
                    return e < viewportPadding || t >= this.screenRightBoundary || n < viewportPadding || i > this.screenBottomBoundary;
                }, module.exports = CollisionIndex;
            },
            {
                '../symbol/projection': 224,
                '../util/intersection_tests': 264,
                './grid_index': 220,
                '@mapbox/gl-matrix': 2,
                '@mapbox/point-geometry': 4
            }
        ],
        218: [
            function (_dereq_, module, exports) {
                'use strict';
                var EXTENT = _dereq_('../data/extent'), roundingFactor = 512 / EXTENT / 2, TileLayerIndex = function (e, s, r) {
                        var n = this;
                        this.tileID = e, this.indexedSymbolInstances = {}, this.bucketInstanceId = r;
                        for (var o = 0, t = s; o < t.length; o += 1) {
                            var i = t[o], a = i.key;
                            n.indexedSymbolInstances[a] || (n.indexedSymbolInstances[a] = []), n.indexedSymbolInstances[a].push({
                                crossTileID: i.crossTileID,
                                coord: n.getScaledCoordinates(i, e)
                            });
                        }
                    };
                TileLayerIndex.prototype.getScaledCoordinates = function (e, s) {
                    var r = s.canonical.z - this.tileID.canonical.z, n = roundingFactor / Math.pow(2, r), o = e.anchor;
                    return {
                        x: Math.floor((s.canonical.x * EXTENT + o.x) * n),
                        y: Math.floor((s.canonical.y * EXTENT + o.y) * n)
                    };
                }, TileLayerIndex.prototype.findMatches = function (e, s, r) {
                    for (var n = this, o = this.tileID.canonical.z < s.canonical.z ? 1 : Math.pow(2, this.tileID.canonical.z - s.canonical.z), t = 0, i = e; t < i.length; t += 1) {
                        var a = i[t];
                        if (!a.crossTileID) {
                            var l = n.indexedSymbolInstances[a.key];
                            if (l) {
                                for (var c = n.getScaledCoordinates(a, s), d = 0, I = l; d < I.length; d += 1) {
                                    var y = I[d];
                                    if (Math.abs(y.coord.x - c.x) <= o && Math.abs(y.coord.y - c.y) <= o && !r[y.crossTileID]) {
                                        r[y.crossTileID] = !0, a.crossTileID = y.crossTileID;
                                        break;
                                    }
                                }
                            }
                        }
                    }
                };
                var CrossTileIDs = function () {
                    this.maxCrossTileID = 0;
                };
                CrossTileIDs.prototype.generate = function () {
                    return ++this.maxCrossTileID;
                };
                var CrossTileSymbolLayerIndex = function () {
                    this.indexes = {}, this.usedCrossTileIDs = {};
                };
                CrossTileSymbolLayerIndex.prototype.addBucket = function (e, s, r) {
                    var n = this;
                    if (this.indexes[e.overscaledZ] && this.indexes[e.overscaledZ][e.key]) {
                        if (this.indexes[e.overscaledZ][e.key].bucketInstanceId === s.bucketInstanceId) {
                            return !1;
                        }
                        this.removeBucketCrossTileIDs(e.overscaledZ, this.indexes[e.overscaledZ][e.key]);
                    }
                    for (var o = 0, t = s.symbolInstances; o < t.length; o += 1) {
                        t[o].crossTileID = 0;
                    }
                    this.usedCrossTileIDs[e.overscaledZ] || (this.usedCrossTileIDs[e.overscaledZ] = {});
                    var i = this.usedCrossTileIDs[e.overscaledZ];
                    for (var a in n.indexes) {
                        var l = n.indexes[a];
                        if (Number(a) > e.overscaledZ) {
                            for (var c in l) {
                                var d = l[c];
                                d.tileID.isChildOf(e) && d.findMatches(s.symbolInstances, e, i);
                            }
                        } else {
                            var I = e.scaledTo(Number(a)), y = l[I.key];
                            y && y.findMatches(s.symbolInstances, e, i);
                        }
                    }
                    for (var v = 0, h = s.symbolInstances; v < h.length; v += 1) {
                        var u = h[v];
                        u.crossTileID || (u.crossTileID = r.generate(), i[u.crossTileID] = !0);
                    }
                    return void 0 === this.indexes[e.overscaledZ] && (this.indexes[e.overscaledZ] = {}), this.indexes[e.overscaledZ][e.key] = new TileLayerIndex(e, s.symbolInstances, s.bucketInstanceId), !0;
                }, CrossTileSymbolLayerIndex.prototype.removeBucketCrossTileIDs = function (e, s) {
                    var r = this;
                    for (var n in s.indexedSymbolInstances) {
                        for (var o = 0, t = s.indexedSymbolInstances[n]; o < t.length; o += 1) {
                            var i = t[o];
                            delete r.usedCrossTileIDs[e][i.crossTileID];
                        }
                    }
                }, CrossTileSymbolLayerIndex.prototype.removeStaleBuckets = function (e) {
                    var s = this, r = !1;
                    for (var n in s.indexes) {
                        var o = s.indexes[n];
                        for (var t in o) {
                            e[o[t].bucketInstanceId] || (s.removeBucketCrossTileIDs(n, o[t]), delete o[t], r = !0);
                        }
                    }
                    return r;
                };
                var CrossTileSymbolIndex = function () {
                    this.layerIndexes = {}, this.crossTileIDs = new CrossTileIDs(), this.maxBucketInstanceId = 0;
                };
                CrossTileSymbolIndex.prototype.addLayer = function (e, s) {
                    var r = this, n = this.layerIndexes[e.id];
                    void 0 === n && (n = this.layerIndexes[e.id] = new CrossTileSymbolLayerIndex());
                    for (var o = !1, t = {}, i = 0, a = s; i < a.length; i += 1) {
                        var l = a[i], c = l.getBucket(e);
                        c && (c.bucketInstanceId || (c.bucketInstanceId = ++r.maxBucketInstanceId), n.addBucket(l.tileID, c, r.crossTileIDs) && (o = !0), t[c.bucketInstanceId] = !0);
                    }
                    return n.removeStaleBuckets(t) && (o = !0), o;
                }, CrossTileSymbolIndex.prototype.pruneUnusedLayers = function (e) {
                    var s = this, r = {};
                    e.forEach(function (e) {
                        r[e] = !0;
                    });
                    for (var n in s.layerIndexes) {
                        r[n] || delete s.layerIndexes[n];
                    }
                }, module.exports = CrossTileSymbolIndex;
            },
            { '../data/extent': 53 }
        ],
        219: [
            function (_dereq_, module, exports) {
                'use strict';
                function getAnchors(e, r, t, n, a, l, o, i, c) {
                    var h = n ? 0.6 * l * o : 0, s = Math.max(n ? n.right - n.left : 0, a ? a.right - a.left : 0), u = 0 === e[0].x || e[0].x === c || 0 === e[0].y || e[0].y === c;
                    r - s * o < r / 4 && (r = s * o + r / 4);
                    var g = 2 * l;
                    return resample(e, u ? r / 2 * i % r : (s / 2 + g) * o * i % r, r, h, t, s * o, u, !1, c);
                }
                function resample(e, r, t, n, a, l, o, i, c) {
                    for (var h = l / 2, s = 0, u = 0; u < e.length - 1; u++) {
                        s += e[u].dist(e[u + 1]);
                    }
                    for (var g = 0, p = r - t, x = [], f = 0; f < e.length - 1; f++) {
                        for (var m = e[f], v = e[f + 1], y = m.dist(v), A = v.angleTo(m); p + t < g + y;) {
                            p += t;
                            var d = (p - g) / y, k = interpolate(m.x, v.x, d), q = interpolate(m.y, v.y, d);
                            if (k >= 0 && k < c && q >= 0 && q < c && p - h >= 0 && p + h <= s) {
                                var M = new Anchor(k, q, A, f);
                                M._round(), n && !checkMaxAngle(e, M, l, n, a) || x.push(M);
                            }
                        }
                        g += y;
                    }
                    return i || x.length || o || (x = resample(e, g / 2, t, n, a, l, o, !0, c)), x;
                }
                var interpolate = _dereq_('../style-spec/util/interpolate').number, Anchor = _dereq_('../symbol/anchor'), checkMaxAngle = _dereq_('./check_max_angle');
                module.exports = getAnchors;
            },
            {
                '../style-spec/util/interpolate': 158,
                '../symbol/anchor': 213,
                './check_max_angle': 214
            }
        ],
        220: [
            function (_dereq_, module, exports) {
                'use strict';
                var GridIndex = function (e, t, i) {
                    var r = this.boxCells = [], s = this.circleCells = [];
                    this.xCellCount = Math.ceil(e / i), this.yCellCount = Math.ceil(t / i);
                    for (var l = 0; l < this.xCellCount * this.yCellCount; l++) {
                        r.push([]), s.push([]);
                    }
                    this.circleKeys = [], this.boxKeys = [], this.bboxes = [], this.circles = [], this.width = e, this.height = t, this.xScale = this.xCellCount / e, this.yScale = this.yCellCount / t, this.boxUid = 0, this.circleUid = 0;
                };
                GridIndex.prototype.keysLength = function () {
                    return this.boxKeys.length + this.circleKeys.length;
                }, GridIndex.prototype.insert = function (e, t, i, r, s) {
                    this._forEachCell(t, i, r, s, this._insertBoxCell, this.boxUid++), this.boxKeys.push(e), this.bboxes.push(t), this.bboxes.push(i), this.bboxes.push(r), this.bboxes.push(s);
                }, GridIndex.prototype.insertCircle = function (e, t, i, r) {
                    this._forEachCell(t - r, i - r, t + r, i + r, this._insertCircleCell, this.circleUid++), this.circleKeys.push(e), this.circles.push(t), this.circles.push(i), this.circles.push(r);
                }, GridIndex.prototype._insertBoxCell = function (e, t, i, r, s, l) {
                    this.boxCells[s].push(l);
                }, GridIndex.prototype._insertCircleCell = function (e, t, i, r, s, l) {
                    this.circleCells[s].push(l);
                }, GridIndex.prototype._query = function (e, t, i, r, s) {
                    if (i < 0 || e > this.width || r < 0 || t > this.height) {
                        return !s && [];
                    }
                    var l = [];
                    if (e <= 0 && t <= 0 && this.width <= i && this.height <= r) {
                        l = Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys);
                    } else {
                        var o = {
                            hitTest: s,
                            seenUids: {
                                box: {},
                                circle: {}
                            }
                        };
                        this._forEachCell(e, t, i, r, this._queryCell, l, o);
                    }
                    return s ? l.length > 0 : l;
                }, GridIndex.prototype._queryCircle = function (e, t, i, r) {
                    var s = e - i, l = e + i, o = t - i, h = t + i;
                    if (l < 0 || s > this.width || h < 0 || o > this.height) {
                        return !r && [];
                    }
                    var n = [], c = {
                            hitTest: r,
                            circle: {
                                x: e,
                                y: t,
                                radius: i
                            },
                            seenUids: {
                                box: {},
                                circle: {}
                            }
                        };
                    return this._forEachCell(s, o, l, h, this._queryCellCircle, n, c), r ? n.length > 0 : n;
                }, GridIndex.prototype.query = function (e, t, i, r) {
                    return this._query(e, t, i, r, !1);
                }, GridIndex.prototype.hitTest = function (e, t, i, r) {
                    return this._query(e, t, i, r, !0);
                }, GridIndex.prototype.hitTestCircle = function (e, t, i) {
                    return this._queryCircle(e, t, i, !0);
                }, GridIndex.prototype._queryCell = function (e, t, i, r, s, l, o) {
                    var h = this, n = o.seenUids, c = this.boxCells[s];
                    if (null !== c) {
                        for (var u = this.bboxes, d = 0, C = c; d < C.length; d += 1) {
                            var a = C[d];
                            if (!n.box[a]) {
                                n.box[a] = !0;
                                var x = 4 * a;
                                if (e <= u[x + 2] && t <= u[x + 3] && i >= u[x + 0] && r >= u[x + 1]) {
                                    if (o.hitTest) {
                                        return l.push(!0), !0;
                                    }
                                    l.push(h.boxKeys[a]);
                                }
                            }
                        }
                    }
                    var p = this.circleCells[s];
                    if (null !== p) {
                        for (var f = this.circles, y = 0, v = p; y < v.length; y += 1) {
                            var b = v[y];
                            if (!n.circle[b]) {
                                n.circle[b] = !0;
                                var _ = 3 * b;
                                if (h._circleAndRectCollide(f[_], f[_ + 1], f[_ + 2], e, t, i, r)) {
                                    if (o.hitTest) {
                                        return l.push(!0), !0;
                                    }
                                    l.push(h.circleKeys[b]);
                                }
                            }
                        }
                    }
                }, GridIndex.prototype._queryCellCircle = function (e, t, i, r, s, l, o) {
                    var h = this, n = o.circle, c = o.seenUids, u = this.boxCells[s];
                    if (null !== u) {
                        for (var d = this.bboxes, C = 0, a = u; C < a.length; C += 1) {
                            var x = a[C];
                            if (!c.box[x]) {
                                c.box[x] = !0;
                                var p = 4 * x;
                                if (h._circleAndRectCollide(n.x, n.y, n.radius, d[p + 0], d[p + 1], d[p + 2], d[p + 3])) {
                                    return l.push(!0), !0;
                                }
                            }
                        }
                    }
                    var f = this.circleCells[s];
                    if (null !== f) {
                        for (var y = this.circles, v = 0, b = f; v < b.length; v += 1) {
                            var _ = b[v];
                            if (!c.circle[_]) {
                                c.circle[_] = !0;
                                var G = 3 * _;
                                if (h._circlesCollide(y[G], y[G + 1], y[G + 2], n.x, n.y, n.radius)) {
                                    return l.push(!0), !0;
                                }
                            }
                        }
                    }
                }, GridIndex.prototype._forEachCell = function (e, t, i, r, s, l, o) {
                    for (var h = this, n = this._convertToXCellCoord(e), c = this._convertToYCellCoord(t), u = this._convertToXCellCoord(i), d = this._convertToYCellCoord(r), C = n; C <= u; C++) {
                        for (var a = c; a <= d; a++) {
                            var x = h.xCellCount * a + C;
                            if (s.call(h, e, t, i, r, x, l, o)) {
                                return;
                            }
                        }
                    }
                }, GridIndex.prototype._convertToXCellCoord = function (e) {
                    return Math.max(0, Math.min(this.xCellCount - 1, Math.floor(e * this.xScale)));
                }, GridIndex.prototype._convertToYCellCoord = function (e) {
                    return Math.max(0, Math.min(this.yCellCount - 1, Math.floor(e * this.yScale)));
                }, GridIndex.prototype._circlesCollide = function (e, t, i, r, s, l) {
                    var o = r - e, h = s - t, n = i + l;
                    return n * n > o * o + h * h;
                }, GridIndex.prototype._circleAndRectCollide = function (e, t, i, r, s, l, o) {
                    var h = (l - r) / 2, n = Math.abs(e - (r + h));
                    if (n > h + i) {
                        return !1;
                    }
                    var c = (o - s) / 2, u = Math.abs(t - (s + c));
                    if (u > c + i) {
                        return !1;
                    }
                    if (n <= h || u <= c) {
                        return !0;
                    }
                    var d = n - h, C = u - c;
                    return d * d + C * C <= i * i;
                }, module.exports = GridIndex;
            },
            {}
        ],
        221: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = function (e) {
                    function t(t) {
                        g.push(e[t]), l++;
                    }
                    function r(e, t, r) {
                        var n = u[e];
                        return delete u[e], u[t] = n, g[n].geometry[0].pop(), g[n].geometry[0] = g[n].geometry[0].concat(r[0]), n;
                    }
                    function n(e, t, r) {
                        var n = i[t];
                        return delete i[t], i[e] = n, g[n].geometry[0].shift(), g[n].geometry[0] = r[0].concat(g[n].geometry[0]), n;
                    }
                    function o(e, t, r) {
                        var n = r ? t[0][t[0].length - 1] : t[0][0];
                        return e + ':' + n.x + ':' + n.y;
                    }
                    for (var i = {}, u = {}, g = [], l = 0, m = 0; m < e.length; m++) {
                        var y = e[m], c = y.geometry, f = y.text;
                        if (f) {
                            var a = o(f, c), s = o(f, c, !0);
                            if (a in u && s in i && u[a] !== i[s]) {
                                var v = n(a, s, c), d = r(a, s, g[v].geometry);
                                delete i[a], delete u[s], u[o(f, g[d].geometry, !0)] = d, g[v].geometry = null;
                            } else {
                                a in u ? r(a, s, c) : s in i ? n(a, s, c) : (t(m), i[a] = l - 1, u[s] = l - 1);
                            }
                        } else {
                            t(m);
                        }
                    }
                    return g.filter(function (e) {
                        return e.geometry;
                    });
                };
            },
            {}
        ],
        222: [
            function (_dereq_, module, exports) {
                'use strict';
                var ref = _dereq_('../util/web_worker_transfer'), register = ref.register, OpacityState = function () {
                        this.opacity = 0, this.targetOpacity = 0, this.time = 0;
                    };
                OpacityState.prototype.clone = function () {
                    var t = new OpacityState();
                    return t.opacity = this.opacity, t.targetOpacity = this.targetOpacity, t.time = this.time, t;
                }, register('OpacityState', OpacityState), module.exports = OpacityState;
            },
            { '../util/web_worker_transfer': 278 }
        ],
        223: [
            function (_dereq_, module, exports) {
                'use strict';
                function updateCollisionVertices(e, t, i) {
                    e.emplaceBack(t ? 1 : 0, i ? 1 : 0), e.emplaceBack(t ? 1 : 0, i ? 1 : 0), e.emplaceBack(t ? 1 : 0, i ? 1 : 0), e.emplaceBack(t ? 1 : 0, i ? 1 : 0);
                }
                function packOpacity(e) {
                    if (0 === e.opacity && !e.placed) {
                        return 0;
                    }
                    if (1 === e.opacity && e.placed) {
                        return 4294967295;
                    }
                    var t = e.placed ? 1 : 0, i = Math.floor(127 * e.opacity);
                    return i * shift25 + t * shift24 + i * shift17 + t * shift16 + i * shift9 + t * shift8 + i * shift1 + t;
                }
                var CollisionIndex = _dereq_('./collision_index'), EXTENT = _dereq_('../data/extent'), symbolSize = _dereq_('./symbol_size'), projection = _dereq_('./projection'), symbolLayoutProperties = _dereq_('../style/style_layer/symbol_style_layer_properties').layout, pixelsToTileUnits = _dereq_('../source/pixels_to_tile_units'), OpacityState = function (e, t, i, o) {
                        this.opacity = e ? Math.max(0, Math.min(1, e.opacity + (e.placed ? t : -t))) : o && i ? 1 : 0, this.placed = i;
                    };
                OpacityState.prototype.isHidden = function () {
                    return 0 === this.opacity && !this.placed;
                };
                var JointOpacityState = function (e, t, i, o, a) {
                    this.text = new OpacityState(e ? e.text : null, t, i, a), this.icon = new OpacityState(e ? e.icon : null, t, o, a);
                };
                JointOpacityState.prototype.isHidden = function () {
                    return this.text.isHidden() && this.icon.isHidden();
                };
                var JointPlacement = function (e, t, i) {
                        this.text = e, this.icon = t, this.skipFade = i;
                    }, Placement = function (e, t) {
                        this.transform = e.clone(), this.collisionIndex = new CollisionIndex(this.transform), this.placements = {}, this.opacities = {}, this.stale = !1, this.fadeDuration = t;
                    };
                Placement.prototype.placeLayerTile = function (e, t, i, o) {
                    var a = t.getBucket(e);
                    if (a) {
                        var l = a.layers[0].layout, n = Math.pow(2, this.transform.zoom - t.tileID.overscaledZ), r = t.tileSize / EXTENT, s = this.transform.calculatePosMatrix(t.tileID.toUnwrapped()), c = projection.getLabelPlaneMatrix(s, 'map' === l.get('text-pitch-alignment'), 'map' === l.get('text-rotation-alignment'), this.transform, pixelsToTileUnits(t, 1, this.transform.zoom)), p = projection.getLabelPlaneMatrix(s, 'map' === l.get('icon-pitch-alignment'), 'map' === l.get('icon-rotation-alignment'), this.transform, pixelsToTileUnits(t, 1, this.transform.zoom));
                        this.placeLayerBucket(a, s, c, p, n, r, i, o, t.collisionBoxArray, t.tileID.key, e.source);
                    }
                }, Placement.prototype.placeLayerBucket = function (e, t, i, o, a, l, n, r, s, c, p) {
                    for (var x = this, y = e.layers[0].layout, h = symbolSize.evaluateSizeForZoom(e.textSizeData, this.transform.zoom, symbolLayoutProperties.properties['text-size']), m = !e.hasTextData() || y.get('text-optional'), d = !e.hasIconData() || y.get('icon-optional'), u = 0, f = e.symbolInstances; u < f.length; u += 1) {
                        var B = f[u];
                        if (!r[B.crossTileID]) {
                            var g = !1, I = !1, v = !0, C = null, D = null, T = null;
                            B.collisionArrays || (B.collisionArrays = e.deserializeCollisionBoxes(s, B.textBoxStartIndex, B.textBoxEndIndex, B.iconBoxStartIndex, B.iconBoxEndIndex)), B.collisionArrays.textBox && (C = x.collisionIndex.placeCollisionBox(B.collisionArrays.textBox, y.get('text-allow-overlap'), l, t), g = C.box.length > 0, v = v && C.offscreen);
                            var V = B.collisionArrays.textCircles;
                            if (V) {
                                var S = e.text.placedSymbolArray.get(B.placedTextSymbolIndices[0]), A = symbolSize.evaluateSizeForFeature(e.textSizeData, h, S);
                                D = x.collisionIndex.placeCollisionCircles(V, y.get('text-allow-overlap'), a, l, B.key, S, e.lineVertexArray, e.glyphOffsetArray, A, t, i, n, 'map' === y.get('text-pitch-alignment')), g = y.get('text-allow-overlap') || D.circles.length > 0, v = v && D.offscreen;
                            }
                            B.collisionArrays.iconBox && (T = x.collisionIndex.placeCollisionBox(B.collisionArrays.iconBox, y.get('icon-allow-overlap'), l, t), I = T.box.length > 0, v = v && T.offscreen), m || d ? d ? m || (I = I && g) : g = I && g : I = g = I && g, g && C && x.collisionIndex.insertCollisionBox(C.box, y.get('text-ignore-placement'), c, p, e.bucketInstanceId, B.textBoxStartIndex), I && T && x.collisionIndex.insertCollisionBox(T.box, y.get('icon-ignore-placement'), c, p, e.bucketInstanceId, B.iconBoxStartIndex), g && D && x.collisionIndex.insertCollisionCircles(D.circles, y.get('text-ignore-placement'), c, p, e.bucketInstanceId, B.textBoxStartIndex), x.placements[B.crossTileID] = new JointPlacement(g, I, v || e.justReloaded), r[B.crossTileID] = !0;
                        }
                    }
                    e.justReloaded = !1;
                }, Placement.prototype.commit = function (e, t) {
                    var i = this;
                    this.commitTime = t;
                    var o = !1, a = e && 0 !== this.fadeDuration ? (this.commitTime - e.commitTime) / this.fadeDuration : 1, l = e ? e.opacities : {};
                    for (var n in i.placements) {
                        var r = i.placements[n], s = l[n];
                        s ? (i.opacities[n] = new JointOpacityState(s, a, r.text, r.icon), o = o || r.text !== s.text.placed || r.icon !== s.icon.placed) : (i.opacities[n] = new JointOpacityState(null, a, r.text, r.icon, r.skipFade), o = o || r.text || r.icon);
                    }
                    for (var c in l) {
                        var p = l[c];
                        if (!i.opacities[c]) {
                            var x = new JointOpacityState(p, a, !1, !1);
                            x.isHidden() || (i.opacities[c] = x, o = o || p.text.placed || p.icon.placed);
                        }
                    }
                    o ? this.lastPlacementChangeTime = t : 'number' != typeof this.lastPlacementChangeTime && (this.lastPlacementChangeTime = e ? e.lastPlacementChangeTime : t);
                }, Placement.prototype.updateLayerOpacities = function (e, t) {
                    for (var i = this, o = {}, a = 0, l = t; a < l.length; a += 1) {
                        var n = l[a], r = n.getBucket(e);
                        r && i.updateBucketOpacities(r, o, n.collisionBoxArray);
                    }
                }, Placement.prototype.updateBucketOpacities = function (e, t, i) {
                    var o = this;
                    e.hasTextData() && e.text.opacityVertexArray.clear(), e.hasIconData() && e.icon.opacityVertexArray.clear(), e.hasCollisionBoxData() && e.collisionBox.collisionVertexArray.clear(), e.hasCollisionCircleData() && e.collisionCircle.collisionVertexArray.clear();
                    for (var a = e.layers[0].layout, l = new JointOpacityState(null, 0, a.get('text-allow-overlap'), a.get('icon-allow-overlap'), !0), n = 0; n < e.symbolInstances.length; n++) {
                        var r = e.symbolInstances[n], s = t[r.crossTileID], c = o.opacities[r.crossTileID];
                        c ? s && (c = l) : (c = l, o.opacities[r.crossTileID] = c), t[r.crossTileID] = !0;
                        var p = r.numGlyphVertices > 0 || r.numVerticalGlyphVertices > 0, x = r.numIconVertices > 0;
                        if (p) {
                            for (var y = packOpacity(c.text), h = (r.numGlyphVertices + r.numVerticalGlyphVertices) / 4, m = 0; m < h; m++) {
                                e.text.opacityVertexArray.emplaceBack(y);
                            }
                            for (var d = 0, u = r.placedTextSymbolIndices; d < u.length; d += 1) {
                                var f = u[d];
                                e.text.placedSymbolArray.get(f).hidden = c.text.isHidden();
                            }
                        }
                        if (x) {
                            for (var B = packOpacity(c.icon), g = 0; g < r.numIconVertices / 4; g++) {
                                e.icon.opacityVertexArray.emplaceBack(B);
                            }
                            e.icon.placedSymbolArray.get(n).hidden = c.icon.isHidden();
                        }
                        r.collisionArrays || (r.collisionArrays = e.deserializeCollisionBoxes(i, r.textBoxStartIndex, r.textBoxEndIndex, r.iconBoxStartIndex, r.iconBoxEndIndex));
                        var I = r.collisionArrays;
                        if (I) {
                            I.textBox && e.hasCollisionBoxData() && updateCollisionVertices(e.collisionBox.collisionVertexArray, c.text.placed, !1), I.iconBox && e.hasCollisionBoxData() && updateCollisionVertices(e.collisionBox.collisionVertexArray, c.icon.placed, !1);
                            var v = I.textCircles;
                            if (v && e.hasCollisionCircleData()) {
                                for (var C = 0; C < v.length; C += 5) {
                                    var D = s || 0 === v[C + 4];
                                    updateCollisionVertices(e.collisionCircle.collisionVertexArray, c.text.placed, D);
                                }
                            }
                        }
                    }
                    e.sortFeatures(this.transform.angle), e.hasTextData() && e.text.opacityVertexBuffer && e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray), e.hasIconData() && e.icon.opacityVertexBuffer && e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray), e.hasCollisionBoxData() && e.collisionBox.collisionVertexBuffer && e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray), e.hasCollisionCircleData() && e.collisionCircle.collisionVertexBuffer && e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray);
                }, Placement.prototype.symbolFadeChange = function (e) {
                    return 0 === this.fadeDuration ? 1 : (e - this.commitTime) / this.fadeDuration;
                }, Placement.prototype.hasTransitions = function (e) {
                    return this.stale || e - this.lastPlacementChangeTime < this.fadeDuration;
                }, Placement.prototype.stillRecent = function (e) {
                    return 'undefined' !== this.commitTime && this.commitTime + this.fadeDuration > e;
                }, Placement.prototype.setStale = function () {
                    this.stale = !0;
                };
                var shift25 = Math.pow(2, 25), shift24 = Math.pow(2, 24), shift17 = Math.pow(2, 17), shift16 = Math.pow(2, 16), shift9 = Math.pow(2, 9), shift8 = Math.pow(2, 8), shift1 = Math.pow(2, 1);
                module.exports = Placement;
            },
            {
                '../data/extent': 53,
                '../source/pixels_to_tile_units': 104,
                '../style/style_layer/symbol_style_layer_properties': 209,
                './collision_index': 217,
                './projection': 224,
                './symbol_size': 228
            }
        ],
        224: [
            function (_dereq_, module, exports) {
                'use strict';
                function getLabelPlaneMatrix(e, t, r, n, a) {
                    var i = mat4.identity(new Float32Array(16));
                    return t ? (mat4.identity(i), mat4.scale(i, i, [
                        1 / a,
                        1 / a,
                        1
                    ]), r || mat4.rotateZ(i, i, n.angle)) : (mat4.scale(i, i, [
                        n.width / 2,
                        -n.height / 2,
                        1
                    ]), mat4.translate(i, i, [
                        1,
                        -1,
                        0
                    ]), mat4.multiply(i, i, e)), i;
                }
                function getGlCoordMatrix(e, t, r, n, a) {
                    var i = mat4.identity(new Float32Array(16));
                    return t ? (mat4.multiply(i, i, e), mat4.scale(i, i, [
                        a,
                        a,
                        1
                    ]), r || mat4.rotateZ(i, i, -n.angle)) : (mat4.scale(i, i, [
                        1,
                        -1,
                        1
                    ]), mat4.translate(i, i, [
                        -1,
                        -1,
                        0
                    ]), mat4.scale(i, i, [
                        2 / n.width,
                        2 / n.height,
                        1
                    ])), i;
                }
                function project(e, t) {
                    var r = [
                        e.x,
                        e.y,
                        0,
                        1
                    ];
                    xyTransformMat4(r, r, t);
                    var n = r[3];
                    return {
                        point: new Point(r[0] / n, r[1] / n),
                        signedDistanceFromCamera: n
                    };
                }
                function isVisible(e, t) {
                    var r = e[0] / e[3], n = e[1] / e[3];
                    return r >= -t[0] && r <= t[0] && n >= -t[1] && n <= t[1];
                }
                function updateLineLabels(e, t, r, n, a, i, o, l) {
                    var s = n ? e.textSizeData : e.iconSizeData, p = symbolSize.evaluateSizeForZoom(s, r.transform.zoom, symbolLayoutProperties.properties[n ? 'text-size' : 'icon-size']), u = [
                            256 / r.width * 2 + 1,
                            256 / r.height * 2 + 1
                        ], y = n ? e.text.dynamicLayoutVertexArray : e.icon.dynamicLayoutVertexArray;
                    y.clear();
                    for (var c = e.lineVertexArray, m = n ? e.text.placedSymbolArray : e.icon.placedSymbolArray, d = r.transform.width / r.transform.height, g = !1, h = 0; h < m.length; h++) {
                        var f = m.get(h);
                        if (f.hidden || f.writingMode === WritingMode.vertical && !g) {
                            hideGlyphs(f.numGlyphs, y);
                        } else {
                            g = !1;
                            var x = [
                                f.anchorX,
                                f.anchorY,
                                0,
                                1
                            ];
                            if (vec4.transformMat4(x, x, t), isVisible(x, u)) {
                                var v = x[3], b = 0.5 + v / r.transform.cameraToCenterDistance * 0.5, L = symbolSize.evaluateSizeForFeature(s, p, f), A = o ? L * b : L / b, G = new Point(f.anchorX, f.anchorY), M = project(G, a).point, S = {}, w = placeGlyphsAlongLine(f, A, !1, l, t, a, i, e.glyphOffsetArray, c, y, M, G, S, d);
                                g = w.useVertical, (w.notEnoughRoom || g || w.needsFlipping && placeGlyphsAlongLine(f, A, !0, l, t, a, i, e.glyphOffsetArray, c, y, M, G, S, d).notEnoughRoom) && hideGlyphs(f.numGlyphs, y);
                            } else {
                                hideGlyphs(f.numGlyphs, y);
                            }
                        }
                    }
                    n ? e.text.dynamicLayoutVertexBuffer.updateData(y) : e.icon.dynamicLayoutVertexBuffer.updateData(y);
                }
                function placeFirstAndLastGlyph(e, t, r, n, a, i, o, l, s, p, u, y) {
                    var c = l.glyphStartIndex + l.numGlyphs, m = l.lineStartIndex, d = l.lineStartIndex + l.lineLength, g = t.getoffsetX(l.glyphStartIndex), h = t.getoffsetX(c - 1), f = placeGlyphAlongLine(e * g, r, n, a, i, o, l.segment, m, d, s, p, u, y);
                    if (!f) {
                        return null;
                    }
                    var x = placeGlyphAlongLine(e * h, r, n, a, i, o, l.segment, m, d, s, p, u, y);
                    return x ? {
                        first: f,
                        last: x
                    } : null;
                }
                function requiresOrientationChange(e, t, r, n) {
                    if (e === WritingMode.horizontal) {
                        if (Math.abs(r.y - t.y) > Math.abs(r.x - t.x) * n) {
                            return { useVertical: !0 };
                        }
                    }
                    return (e === WritingMode.vertical ? t.y < r.y : t.x > r.x) ? { needsFlipping: !0 } : null;
                }
                function placeGlyphsAlongLine(e, t, r, n, a, i, o, l, s, p, u, y, c, m) {
                    var d, g = t / 24, h = e.lineOffsetX * t, f = e.lineOffsetY * t;
                    if (e.numGlyphs > 1) {
                        var x = e.glyphStartIndex + e.numGlyphs, v = e.lineStartIndex, b = e.lineStartIndex + e.lineLength, L = placeFirstAndLastGlyph(g, l, h, f, r, u, y, e, s, i, c, !1);
                        if (!L) {
                            return { notEnoughRoom: !0 };
                        }
                        var A = project(L.first.point, o).point, G = project(L.last.point, o).point;
                        if (n && !r) {
                            var M = requiresOrientationChange(e.writingMode, A, G, m);
                            if (M) {
                                return M;
                            }
                        }
                        d = [L.first];
                        for (var S = e.glyphStartIndex + 1; S < x - 1; S++) {
                            d.push(placeGlyphAlongLine(g * l.getoffsetX(S), h, f, r, u, y, e.segment, v, b, s, i, c, !1));
                        }
                        d.push(L.last);
                    } else {
                        if (n && !r) {
                            var w = project(y, a).point, F = e.lineStartIndex + e.segment + 1, D = new Point(s.getx(F), s.gety(F)), I = project(D, a), j = I.signedDistanceFromCamera > 0 ? I.point : projectTruncatedLineSegment(y, D, w, 1, a), z = requiresOrientationChange(e.writingMode, w, j, m);
                            if (z) {
                                return z;
                            }
                        }
                        var P = placeGlyphAlongLine(g * l.getoffsetX(e.glyphStartIndex), h, f, r, u, y, e.segment, e.lineStartIndex, e.lineStartIndex + e.lineLength, s, i, c, !1);
                        if (!P) {
                            return { notEnoughRoom: !0 };
                        }
                        d = [P];
                    }
                    for (var _ = 0, C = d; _ < C.length; _ += 1) {
                        var V = C[_];
                        addDynamicAttributes(p, V.point, V.angle);
                    }
                    return {};
                }
                function projectTruncatedLineSegment(e, t, r, n, a) {
                    var i = project(e.add(e.sub(t)._unit()), a).point, o = r.sub(i);
                    return r.add(o._mult(n / o.mag()));
                }
                function placeGlyphAlongLine(e, t, r, n, a, i, o, l, s, p, u, y, c) {
                    var m = n ? e - t : e + t, d = m > 0 ? 1 : -1, g = 0;
                    n && (d *= -1, g = Math.PI), d < 0 && (g += Math.PI);
                    for (var h = d > 0 ? l + o : l + o + 1, f = h, x = a, v = a, b = 0, L = 0, A = Math.abs(m); b + L <= A;) {
                        if ((h += d) < l || h >= s) {
                            return null;
                        }
                        if (v = x, void 0 === (x = y[h])) {
                            var G = new Point(p.getx(h), p.gety(h)), M = project(G, u);
                            if (M.signedDistanceFromCamera > 0) {
                                x = y[h] = M.point;
                            } else {
                                var S = h - d;
                                x = projectTruncatedLineSegment(0 === b ? i : new Point(p.getx(S), p.gety(S)), G, v, A - b + 1, u);
                            }
                        }
                        b += L, L = v.dist(x);
                    }
                    var w = (A - b) / L, F = x.sub(v), D = F.mult(w)._add(v);
                    return D._add(F._unit()._perp()._mult(r * d)), {
                        point: D,
                        angle: g + Math.atan2(x.y - v.y, x.x - v.x),
                        tileDistance: c ? {
                            prevTileDistance: h - d === f ? 0 : p.gettileUnitDistanceFromAnchor(h - d),
                            lastSegmentViewportDistance: A - b
                        } : null
                    };
                }
                function hideGlyphs(e, t) {
                    for (var r = 0; r < e; r++) {
                        var n = t.length;
                        t.resize(n + 4), t.float32.set(hiddenGlyphAttributes, 3 * n);
                    }
                }
                function xyTransformMat4(e, t, r) {
                    var n = t[0], a = t[1];
                    return e[0] = r[0] * n + r[4] * a + r[12], e[1] = r[1] * n + r[5] * a + r[13], e[3] = r[3] * n + r[7] * a + r[15], e;
                }
                var Point = _dereq_('@mapbox/point-geometry'), ref = _dereq_('@mapbox/gl-matrix'), mat4 = ref.mat4, vec4 = ref.vec4, symbolSize = _dereq_('./symbol_size'), ref$1 = _dereq_('../data/bucket/symbol_bucket'), addDynamicAttributes = ref$1.addDynamicAttributes, symbolLayoutProperties = _dereq_('../style/style_layer/symbol_style_layer_properties').layout, WritingMode = _dereq_('../symbol/shaping').WritingMode;
                module.exports = {
                    updateLineLabels: updateLineLabels,
                    getLabelPlaneMatrix: getLabelPlaneMatrix,
                    getGlCoordMatrix: getGlCoordMatrix,
                    project: project,
                    placeFirstAndLastGlyph: placeFirstAndLastGlyph,
                    xyTransformMat4: xyTransformMat4
                };
                var hiddenGlyphAttributes = new Float32Array([
                    -1 / 0,
                    -1 / 0,
                    0,
                    -1 / 0,
                    -1 / 0,
                    0,
                    -1 / 0,
                    -1 / 0,
                    0,
                    -1 / 0,
                    -1 / 0,
                    0
                ]);
            },
            {
                '../data/bucket/symbol_bucket': 51,
                '../style/style_layer/symbol_style_layer_properties': 209,
                '../symbol/shaping': 226,
                './symbol_size': 228,
                '@mapbox/gl-matrix': 2,
                '@mapbox/point-geometry': 4
            }
        ],
        225: [
            function (_dereq_, module, exports) {
                'use strict';
                function getIconQuads(t, e, i, o, n, a, r) {
                    var u, l, g, d, f = e.image, c = i.layout, h = e.top - 1 / f.pixelRatio, x = e.left - 1 / f.pixelRatio, p = e.bottom + 1 / f.pixelRatio, s = e.right + 1 / f.pixelRatio;
                    if ('none' !== c.get('icon-text-fit') && n) {
                        var P = s - x, _ = p - h, w = c.get('text-size').evaluate(r) / 24, m = n.left * w, v = n.right * w, y = n.top * w, M = n.bottom * w, R = v - m, b = M - y, G = c.get('icon-text-fit-padding')[0], B = c.get('icon-text-fit-padding')[1], I = c.get('icon-text-fit-padding')[2], Q = c.get('icon-text-fit-padding')[3], O = 'width' === c.get('icon-text-fit') ? 0.5 * (b - _) : 0, A = 'height' === c.get('icon-text-fit') ? 0.5 * (R - P) : 0, D = 'width' === c.get('icon-text-fit') || 'both' === c.get('icon-text-fit') ? R : P, E = 'height' === c.get('icon-text-fit') || 'both' === c.get('icon-text-fit') ? b : _;
                        u = new Point(m + A - Q, y + O - G), l = new Point(m + A + B + D, y + O - G), g = new Point(m + A + B + D, y + O + I + E), d = new Point(m + A - Q, y + O + I + E);
                    } else {
                        u = new Point(x, h), l = new Point(s, h), g = new Point(s, p), d = new Point(x, p);
                    }
                    var F = i.layout.get('icon-rotate').evaluate(r) * Math.PI / 180;
                    if (F) {
                        var H = Math.sin(F), L = Math.cos(F), Y = [
                                L,
                                -H,
                                H,
                                L
                            ];
                        u._matMult(Y), l._matMult(Y), d._matMult(Y), g._matMult(Y);
                    }
                    return [{
                            tl: u,
                            tr: l,
                            bl: d,
                            br: g,
                            tex: {
                                x: f.textureRect.x - 1,
                                y: f.textureRect.y - 1,
                                w: f.textureRect.w + 2,
                                h: f.textureRect.h + 2
                            },
                            writingMode: void 0,
                            glyphOffset: [
                                0,
                                0
                            ]
                        }];
                }
                function getGlyphQuads(t, e, i, o, n, a, r) {
                    for (var u = i.layout.get('text-rotate').evaluate(a) * Math.PI / 180, l = i.layout.get('text-offset').evaluate(a).map(function (t) {
                                return 24 * t;
                            }), g = e.positionedGlyphs, d = [], f = 0; f < g.length; f++) {
                        var c = g[f], h = r[c.glyph];
                        if (h) {
                            var x = h.rect;
                            if (x) {
                                var p = GLYPH_PBF_BORDER + 1, s = h.metrics.advance / 2, P = o ? [
                                        c.x + s,
                                        c.y
                                    ] : [
                                        0,
                                        0
                                    ], _ = o ? [
                                        0,
                                        0
                                    ] : [
                                        c.x + s + l[0],
                                        c.y + l[1]
                                    ], w = h.metrics.left - p - s + _[0], m = -h.metrics.top - p + _[1], v = w + x.w, y = m + x.h, M = new Point(w, m), R = new Point(v, m), b = new Point(w, y), G = new Point(v, y);
                                if (o && c.vertical) {
                                    var B = new Point(-s, s), I = -Math.PI / 2, Q = new Point(5, 0);
                                    M._rotateAround(I, B)._add(Q), R._rotateAround(I, B)._add(Q), b._rotateAround(I, B)._add(Q), G._rotateAround(I, B)._add(Q);
                                }
                                if (u) {
                                    var O = Math.sin(u), A = Math.cos(u), D = [
                                            A,
                                            -O,
                                            O,
                                            A
                                        ];
                                    M._matMult(D), R._matMult(D), b._matMult(D), G._matMult(D);
                                }
                                d.push({
                                    tl: M,
                                    tr: R,
                                    bl: b,
                                    br: G,
                                    tex: x,
                                    writingMode: e.writingMode,
                                    glyphOffset: P
                                });
                            }
                        }
                    }
                    return d;
                }
                var Point = _dereq_('@mapbox/point-geometry'), ref = _dereq_('../style/parse_glyph_pbf'), GLYPH_PBF_BORDER = ref.GLYPH_PBF_BORDER;
                module.exports = {
                    getIconQuads: getIconQuads,
                    getGlyphQuads: getGlyphQuads
                };
            },
            {
                '../style/parse_glyph_pbf': 186,
                '@mapbox/point-geometry': 4
            }
        ],
        226: [
            function (_dereq_, module, exports) {
                'use strict';
                function breakLines(e, t) {
                    for (var a = [], r = 0, i = 0, n = t; i < n.length; i += 1) {
                        var l = n[i];
                        a.push(e.substring(r, l)), r = l;
                    }
                    return r < e.length && a.push(e.substring(r, e.length)), a;
                }
                function shapeText(e, t, a, r, i, n, l, o, c, s) {
                    var h = e.trim();
                    s === WritingMode.vertical && (h = verticalizePunctuation(h));
                    var g, u = [], p = {
                            positionedGlyphs: u,
                            text: h,
                            top: o[1],
                            bottom: o[1],
                            left: o[0],
                            right: o[0],
                            writingMode: s
                        }, b = rtlTextPlugin.processBidirectionalText;
                    return g = b ? b(h, determineLineBreaks(h, l, a, t)) : breakLines(h, determineLineBreaks(h, l, a, t)), shapeLines(p, t, g, r, i, n, s, l, c), !!u.length && p;
                }
                function determineAverageLineWidth(e, t, a, r) {
                    for (var i = 0, n = 0; n < e.length; n++) {
                        var l = r[e.charCodeAt(n)];
                        l && (i += l.metrics.advance + t);
                    }
                    return i / Math.max(1, Math.ceil(i / a));
                }
                function calculateBadness(e, t, a, r) {
                    var i = Math.pow(e - t, 2);
                    return r ? e < t ? i / 2 : 2 * i : i + Math.abs(a) * a;
                }
                function calculatePenalty(e, t) {
                    var a = 0;
                    return 10 === e && (a -= 10000), 40 !== e && 65288 !== e || (a += 50), 41 !== t && 65289 !== t || (a += 50), a;
                }
                function evaluateBreak(e, t, a, r, i, n) {
                    for (var l = null, o = calculateBadness(t, a, i, n), c = 0, s = r; c < s.length; c += 1) {
                        var h = s[c], g = t - h.x, u = calculateBadness(g, a, i, n) + h.badness;
                        u <= o && (l = h, o = u);
                    }
                    return {
                        index: e,
                        x: t,
                        priorBreak: l,
                        badness: o
                    };
                }
                function leastBadBreaks(e) {
                    return e ? leastBadBreaks(e.priorBreak).concat(e.index) : [];
                }
                function determineLineBreaks(e, t, a, r) {
                    if (!a) {
                        return [];
                    }
                    if (!e) {
                        return [];
                    }
                    for (var i = [], n = determineAverageLineWidth(e, t, a, r), l = 0, o = 0; o < e.length; o++) {
                        var c = e.charCodeAt(o), s = r[c];
                        s && !whitespace[c] && (l += s.metrics.advance + t), o < e.length - 1 && (breakable[c] || scriptDetection.charAllowsIdeographicBreaking(c)) && i.push(evaluateBreak(o + 1, l, n, i, calculatePenalty(c, e.charCodeAt(o + 1)), !1));
                    }
                    return leastBadBreaks(evaluateBreak(e.length, l, n, i, 0, !0));
                }
                function getAnchorAlignment(e) {
                    var t = 0.5, a = 0.5;
                    switch (e) {
                    case 'right':
                    case 'top-right':
                    case 'bottom-right':
                        t = 1;
                        break;
                    case 'left':
                    case 'top-left':
                    case 'bottom-left':
                        t = 0;
                    }
                    switch (e) {
                    case 'bottom':
                    case 'bottom-right':
                    case 'bottom-left':
                        a = 1;
                        break;
                    case 'top':
                    case 'top-right':
                    case 'top-left':
                        a = 0;
                    }
                    return {
                        horizontalAlign: t,
                        verticalAlign: a
                    };
                }
                function shapeLines(e, t, a, r, i, n, l, o, c) {
                    for (var s = 0, h = -17, g = 0, u = e.positionedGlyphs, p = 'right' === n ? 1 : 'left' === n ? 0 : 0.5, b = 0, v = a; b < v.length; b += 1) {
                        var d = v[b];
                        if (d = d.trim(), d.length) {
                            for (var f = u.length, k = 0; k < d.length; k++) {
                                var m = d.charCodeAt(k), x = t[m];
                                x && (scriptDetection.charHasUprightVerticalOrientation(m) && l !== WritingMode.horizontal ? (u.push({
                                    glyph: m,
                                    x: s,
                                    y: 0,
                                    vertical: !0
                                }), s += c + o) : (u.push({
                                    glyph: m,
                                    x: s,
                                    y: h,
                                    vertical: !1
                                }), s += x.metrics.advance + o));
                            }
                            if (u.length !== f) {
                                var A = s - o;
                                g = Math.max(A, g), justifyLine(u, t, f, u.length - 1, p);
                            }
                            s = 0, h += r;
                        } else {
                            h += r;
                        }
                    }
                    var B = getAnchorAlignment(i), y = B.horizontalAlign, w = B.verticalAlign;
                    align(u, p, y, w, g, r, a.length);
                    var z = a.length * r;
                    e.top += -w * z, e.bottom = e.top + z, e.left += -y * g, e.right = e.left + g;
                }
                function justifyLine(e, t, a, r, i) {
                    if (i) {
                        var n = t[e[r].glyph];
                        if (n) {
                            for (var l = n.metrics.advance, o = (e[r].x + l) * i, c = a; c <= r; c++) {
                                e[c].x -= o;
                            }
                        }
                    }
                }
                function align(e, t, a, r, i, n, l) {
                    for (var o = (t - a) * i, c = (-r * l + 0.5) * n, s = 0; s < e.length; s++) {
                        e[s].x += o, e[s].y += c;
                    }
                }
                function shapeIcon(e, t, a) {
                    var r = getAnchorAlignment(a), i = r.horizontalAlign, n = r.verticalAlign, l = t[0], o = t[1], c = l - e.displaySize[0] * i, s = c + e.displaySize[0], h = o - e.displaySize[1] * n;
                    return {
                        image: e,
                        top: h,
                        bottom: h + e.displaySize[1],
                        left: c,
                        right: s
                    };
                }
                var scriptDetection = _dereq_('../util/script_detection'), verticalizePunctuation = _dereq_('../util/verticalize_punctuation'), rtlTextPlugin = _dereq_('../source/rtl_text_plugin'), WritingMode = {
                        horizontal: 1,
                        vertical: 2,
                        horizontalOnly: 3
                    };
                module.exports = {
                    shapeText: shapeText,
                    shapeIcon: shapeIcon,
                    WritingMode: WritingMode
                };
                var whitespace = {};
                whitespace[9] = !0, whitespace[10] = !0, whitespace[11] = !0, whitespace[12] = !0, whitespace[13] = !0, whitespace[32] = !0;
                var breakable = {};
                breakable[10] = !0, breakable[32] = !0, breakable[38] = !0, breakable[40] = !0, breakable[41] = !0, breakable[43] = !0, breakable[45] = !0, breakable[47] = !0, breakable[173] = !0, breakable[183] = !0, breakable[8203] = !0, breakable[8208] = !0, breakable[8211] = !0, breakable[8231] = !0;
            },
            {
                '../source/rtl_text_plugin': 109,
                '../util/script_detection': 269,
                '../util/verticalize_punctuation': 277
            }
        ],
        227: [
            function (_dereq_, module, exports) {
                'use strict';
                function performSymbolLayout(e, t, a, i, o, n) {
                    e.createArrays(), e.symbolInstances = [];
                    var r = 512 * e.overscaling;
                    e.tilePixelRatio = EXTENT / r, e.compareText = {}, e.iconsNeedLinear = !1;
                    var l = e.layers[0].layout, s = e.layers[0]._unevaluatedLayout._values, c = {};
                    if ('composite' === e.textSizeData.functionType) {
                        var u = e.textSizeData.zoomRange, x = u.min, g = u.max;
                        c.compositeTextSizes = [
                            s['text-size'].possiblyEvaluate(new EvaluationParameters(x)),
                            s['text-size'].possiblyEvaluate(new EvaluationParameters(g))
                        ];
                    }
                    if ('composite' === e.iconSizeData.functionType) {
                        var y = e.iconSizeData.zoomRange, p = y.min, d = y.max;
                        c.compositeIconSizes = [
                            s['icon-size'].possiblyEvaluate(new EvaluationParameters(p)),
                            s['icon-size'].possiblyEvaluate(new EvaluationParameters(d))
                        ];
                    }
                    c.layoutTextSize = s['text-size'].possiblyEvaluate(new EvaluationParameters(e.zoom + 1)), c.layoutIconSize = s['icon-size'].possiblyEvaluate(new EvaluationParameters(e.zoom + 1)), c.textMaxSize = s['text-size'].possiblyEvaluate(new EvaluationParameters(18));
                    for (var m = 24 * l.get('text-line-height'), v = 'map' === l.get('text-rotation-alignment') && 'line' === l.get('symbol-placement'), f = l.get('text-keep-upright'), h = 0, S = e.features; h < S.length; h += 1) {
                        var z = S[h], b = l.get('text-font').evaluate(z).join(','), T = t[b] || {}, I = a[b] || {}, E = {}, P = z.text;
                        if (P) {
                            var w = scriptDetection.allowsVerticalWritingMode(P), q = l.get('text-offset').evaluate(z).map(function (e) {
                                    return 24 * e;
                                }), A = 24 * l.get('text-letter-spacing').evaluate(z), L = scriptDetection.allowsLetterSpacing(P) ? A : 0, D = l.get('text-anchor').evaluate(z), O = l.get('text-justify').evaluate(z), _ = 'line' !== l.get('symbol-placement') ? 24 * l.get('text-max-width').evaluate(z) : 0;
                            E.horizontal = shapeText(P, T, _, m, D, O, L, q, 24, WritingMode.horizontal), w && v && f && (E.vertical = shapeText(P, T, _, m, D, O, L, q, 24, WritingMode.vertical));
                        }
                        var R = void 0;
                        if (z.icon) {
                            var B = i[z.icon];
                            B && (R = shapeIcon(o[z.icon], l.get('icon-offset').evaluate(z), l.get('icon-anchor').evaluate(z)), void 0 === e.sdfIcons ? e.sdfIcons = B.sdf : e.sdfIcons !== B.sdf && util.warnOnce('Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer'), B.pixelRatio !== e.pixelRatio ? e.iconsNeedLinear = !0 : 0 !== l.get('icon-rotate').constantOr(1) && (e.iconsNeedLinear = !0));
                        }
                        (E.horizontal || R) && addFeature(e, z, E, R, I, c);
                    }
                    n && e.generateCollisionDebugBuffers();
                }
                function addFeature(e, t, a, i, o, n) {
                    var r = n.layoutTextSize.evaluate(t), l = n.layoutIconSize.evaluate(t), s = n.textMaxSize.evaluate(t);
                    void 0 === s && (s = r);
                    var c = e.layers[0].layout, u = c.get('text-offset').evaluate(t), x = c.get('icon-offset').evaluate(t), g = r / 24, y = e.tilePixelRatio * g, p = e.tilePixelRatio * s / 24, d = e.tilePixelRatio * l, m = e.tilePixelRatio * c.get('symbol-spacing'), v = c.get('text-padding') * e.tilePixelRatio, f = c.get('icon-padding') * e.tilePixelRatio, h = c.get('text-max-angle') / 180 * Math.PI, S = 'map' === c.get('text-rotation-alignment') && 'line' === c.get('symbol-placement'), z = 'map' === c.get('icon-rotation-alignment') && 'line' === c.get('symbol-placement'), b = c.get('symbol-placement'), T = m / 2, I = function (r, l) {
                            l.x < 0 || l.x >= EXTENT || l.y < 0 || l.y >= EXTENT || e.symbolInstances.push(addSymbol(e, l, r, a, i, e.layers[0], e.collisionBoxArray, t.index, t.sourceLayerIndex, e.index, y, v, S, u, d, f, z, x, { zoom: e.zoom }, t, o, n));
                        };
                    if ('line' === b) {
                        for (var E = 0, P = clipLine(t.geometry, 0, 0, EXTENT, EXTENT); E < P.length; E += 1) {
                            for (var w = P[E], q = getAnchors(w, m, h, a.vertical || a.horizontal, i, 24, p, e.overscaling, EXTENT), A = 0, L = q; A < L.length; A += 1) {
                                var D = L[A], O = a.horizontal;
                                O && anchorIsTooClose(e, O.text, T, D) || I(w, D);
                            }
                        }
                    } else if ('Polygon' === t.type) {
                        for (var _ = 0, R = classifyRings(t.geometry, 0); _ < R.length; _ += 1) {
                            var B = R[_], M = findPoleOfInaccessibility(B, 16);
                            I(B[0], new Anchor(M.x, M.y, 0));
                        }
                    } else if ('LineString' === t.type) {
                        for (var N = 0, V = t.geometry; N < V.length; N += 1) {
                            var W = V[N];
                            I(W, new Anchor(W[0].x, W[0].y, 0));
                        }
                    } else if ('Point' === t.type) {
                        for (var X = 0, C = t.geometry; X < C.length; X += 1) {
                            for (var F = C[X], k = 0, G = F; k < G.length; k += 1) {
                                var Q = G[k];
                                I([Q], new Anchor(Q.x, Q.y, 0));
                            }
                        }
                    }
                }
                function addTextVertices(e, t, a, i, o, n, r, l, s, c, u, x, g) {
                    var y = getGlyphQuads(t, a, i, o, n, r, x), p = e.textSizeData, d = null;
                    return 'source' === p.functionType ? d = [10 * i.layout.get('text-size').evaluate(r)] : 'composite' === p.functionType && (d = [
                        10 * g.compositeTextSizes[0].evaluate(r),
                        10 * g.compositeTextSizes[1].evaluate(r)
                    ]), e.addSymbols(e.text, y, d, l, o, r, c, t, s.lineStartIndex, s.lineLength), u.push(e.text.placedSymbolArray.length - 1), 4 * y.length;
                }
                function addSymbol(e, t, a, i, o, n, r, l, s, c, u, x, g, y, p, d, m, v, f, h, S, z) {
                    var b, T, I = e.addToLineVertexArray(t, a), E = 0, P = 0, w = 0, q = i.horizontal ? i.horizontal.text : '', A = [];
                    i.horizontal && (b = new CollisionFeature(r, a, t, l, s, c, i.horizontal, u, x, g, e.overscaling), P += addTextVertices(e, t, i.horizontal, n, g, f, h, y, I, i.vertical ? WritingMode.horizontal : WritingMode.horizontalOnly, A, S, z), i.vertical && (w += addTextVertices(e, t, i.vertical, n, g, f, h, y, I, WritingMode.vertical, A, S, z)));
                    var L = b ? b.boxStartIndex : e.collisionBoxArray.length, D = b ? b.boxEndIndex : e.collisionBoxArray.length;
                    if (o) {
                        var O = getIconQuads(t, o, n, m, i.horizontal, f, h);
                        T = new CollisionFeature(r, a, t, l, s, c, o, p, d, !1, e.overscaling), E = 4 * O.length;
                        var _ = e.iconSizeData, R = null;
                        'source' === _.functionType ? R = [10 * n.layout.get('icon-size').evaluate(h)] : 'composite' === _.functionType && (R = [
                            10 * z.compositeIconSizes[0].evaluate(h),
                            10 * z.compositeIconSizes[1].evaluate(h)
                        ]), e.addSymbols(e.icon, O, R, v, m, h, !1, t, I.lineStartIndex, I.lineLength);
                    }
                    var B = T ? T.boxStartIndex : e.collisionBoxArray.length, M = T ? T.boxEndIndex : e.collisionBoxArray.length;
                    return e.glyphOffsetArray.length >= SymbolBucket.MAX_GLYPHS && util.warnOnce('Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907'), {
                        key: q,
                        textBoxStartIndex: L,
                        textBoxEndIndex: D,
                        iconBoxStartIndex: B,
                        iconBoxEndIndex: M,
                        textOffset: y,
                        iconOffset: v,
                        anchor: t,
                        line: a,
                        featureIndex: l,
                        feature: h,
                        numGlyphVertices: P,
                        numVerticalGlyphVertices: w,
                        numIconVertices: E,
                        textOpacityState: new OpacityState(),
                        iconOpacityState: new OpacityState(),
                        isDuplicate: !1,
                        placedTextSymbolIndices: A,
                        crossTileID: 0
                    };
                }
                function anchorIsTooClose(e, t, a, i) {
                    var o = e.compareText;
                    if (t in o) {
                        for (var n = o[t], r = n.length - 1; r >= 0; r--) {
                            if (i.dist(n[r]) < a) {
                                return !0;
                            }
                        }
                    } else {
                        o[t] = [];
                    }
                    return o[t].push(i), !1;
                }
                var Anchor = _dereq_('./anchor'), getAnchors = _dereq_('./get_anchors'), clipLine = _dereq_('./clip_line'), OpacityState = _dereq_('./opacity_state'), ref = _dereq_('./shaping'), shapeText = ref.shapeText, shapeIcon = ref.shapeIcon, WritingMode = ref.WritingMode, ref$1 = _dereq_('./quads'), getGlyphQuads = ref$1.getGlyphQuads, getIconQuads = ref$1.getIconQuads, CollisionFeature = _dereq_('./collision_feature'), util = _dereq_('../util/util'), scriptDetection = _dereq_('../util/script_detection'), findPoleOfInaccessibility = _dereq_('../util/find_pole_of_inaccessibility'), classifyRings = _dereq_('../util/classify_rings'), EXTENT = _dereq_('../data/extent'), SymbolBucket = _dereq_('../data/bucket/symbol_bucket'), EvaluationParameters = _dereq_('../style/evaluation_parameters'), Point = _dereq_('@mapbox/point-geometry');
                module.exports = { performSymbolLayout: performSymbolLayout };
            },
            {
                '../data/bucket/symbol_bucket': 51,
                '../data/extent': 53,
                '../style/evaluation_parameters': 182,
                '../util/classify_rings': 255,
                '../util/find_pole_of_inaccessibility': 261,
                '../util/script_detection': 269,
                '../util/util': 275,
                './anchor': 213,
                './clip_line': 215,
                './collision_feature': 216,
                './get_anchors': 219,
                './opacity_state': 222,
                './quads': 225,
                './shaping': 226,
                '@mapbox/point-geometry': 4
            }
        ],
        228: [
            function (_dereq_, module, exports) {
                'use strict';
                function getSizeData(e, o) {
                    var i = o.expression;
                    if ('constant' === i.kind) {
                        return {
                            functionType: 'constant',
                            layoutSize: i.evaluate({ zoom: e + 1 })
                        };
                    }
                    if ('source' === i.kind) {
                        return { functionType: 'source' };
                    }
                    for (var t = i.zoomStops, r = 0; r < t.length && t[r] <= e;) {
                        r++;
                    }
                    r = Math.max(0, r - 1);
                    for (var a = r; a < t.length && t[a] < e + 1;) {
                        a++;
                    }
                    a = Math.min(t.length - 1, a);
                    var n = {
                        min: t[r],
                        max: t[a]
                    };
                    return 'composite' === i.kind ? {
                        functionType: 'composite',
                        zoomRange: n,
                        propertyValue: o.value
                    } : {
                        functionType: 'camera',
                        layoutSize: i.evaluate({ zoom: e + 1 }),
                        zoomRange: n,
                        sizeRange: {
                            min: i.evaluate({ zoom: n.min }),
                            max: i.evaluate({ zoom: n.max })
                        },
                        propertyValue: o.value
                    };
                }
                function evaluateSizeForFeature(e, o, i) {
                    var t = o;
                    return 'source' === e.functionType ? i.lowerSize / 10 : 'composite' === e.functionType ? interpolate.number(i.lowerSize / 10, i.upperSize / 10, t.uSizeT) : t.uSize;
                }
                function evaluateSizeForZoom(e, o, i) {
                    if ('constant' === e.functionType) {
                        return {
                            uSizeT: 0,
                            uSize: e.layoutSize
                        };
                    }
                    if ('source' === e.functionType) {
                        return {
                            uSizeT: 0,
                            uSize: 0
                        };
                    }
                    if ('camera' === e.functionType) {
                        var t = e.propertyValue, r = e.zoomRange, a = e.sizeRange, n = normalizePropertyExpression(t, i.specification), u = util.clamp(n.interpolationFactor(o, r.min, r.max), 0, 1);
                        return {
                            uSizeT: 0,
                            uSize: a.min + u * (a.max - a.min)
                        };
                    }
                    var p = e.propertyValue, l = e.zoomRange, m = normalizePropertyExpression(p, i.specification);
                    return {
                        uSizeT: util.clamp(m.interpolationFactor(o, l.min, l.max), 0, 1),
                        uSize: 0
                    };
                }
                var ref = _dereq_('../style-spec/expression'), normalizePropertyExpression = ref.normalizePropertyExpression, interpolate = _dereq_('../style-spec/util/interpolate'), util = _dereq_('../util/util');
                module.exports = {
                    getSizeData: getSizeData,
                    evaluateSizeForFeature: evaluateSizeForFeature,
                    evaluateSizeForZoom: evaluateSizeForZoom
                };
            },
            {
                '../style-spec/expression': 139,
                '../style-spec/util/interpolate': 158,
                '../util/util': 275
            }
        ],
        229: [
            function (_dereq_, module, exports) {
                'use strict';
                var rtlTextPlugin = _dereq_('../source/rtl_text_plugin');
                module.exports = function (e, t, r) {
                    var a = t.layout.get('text-transform').evaluate(r);
                    return 'uppercase' === a ? e = e.toLocaleUpperCase() : 'lowercase' === a && (e = e.toLocaleLowerCase()), rtlTextPlugin.applyArabicShaping && (e = rtlTextPlugin.applyArabicShaping(e)), e;
                };
            },
            { '../source/rtl_text_plugin': 109 }
        ],
        230: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../util/dom'), Point = _dereq_('@mapbox/point-geometry'), handlers = {
                        scrollZoom: _dereq_('./handler/scroll_zoom'),
                        boxZoom: _dereq_('./handler/box_zoom'),
                        dragRotate: _dereq_('./handler/drag_rotate'),
                        dragPan: _dereq_('./handler/drag_pan'),
                        keyboard: _dereq_('./handler/keyboard'),
                        doubleClickZoom: _dereq_('./handler/dblclick_zoom'),
                        touchZoomRotate: _dereq_('./handler/touch_zoom_rotate')
                    };
                module.exports = function (e, t) {
                    function n(e) {
                        h('mouseout', e);
                    }
                    function o(t) {
                        e.doubleClickZoom.isActive() || e.stop(), b = DOM.mousePos(p, t), h('mousedown', t), L = !0;
                    }
                    function r(t) {
                        var n = e.dragRotate && e.dragRotate.isActive();
                        E && !n && h('contextmenu', E), E = null, L = !1, h('mouseup', t);
                    }
                    function a(t) {
                        if (!(e.dragPan && e.dragPan.isActive() || e.dragRotate && e.dragRotate.isActive())) {
                            for (var n = t.toElement || t.target; n && n !== p;) {
                                n = n.parentNode;
                            }
                            n === p && h('mousemove', t);
                        }
                    }
                    function u(e) {
                        for (var t = e.toElement || e.target; t && t !== p;) {
                            t = t.parentNode;
                        }
                        t === p && h('mouseover', e);
                    }
                    function i(t) {
                        e.stop(), g('touchstart', t), !t.touches || t.touches.length > 1 || (k ? (clearTimeout(k), k = null, h('dblclick', t)) : k = setTimeout(s, 300));
                    }
                    function c(e) {
                        g('touchmove', e);
                    }
                    function d(e) {
                        g('touchend', e);
                    }
                    function l(e) {
                        g('touchcancel', e);
                    }
                    function s() {
                        k = null;
                    }
                    function v(e) {
                        DOM.mousePos(p, e).equals(b) && h('click', e);
                    }
                    function m(e) {
                        h('dblclick', e), e.preventDefault();
                    }
                    function f(t) {
                        var n = e.dragRotate && e.dragRotate.isActive();
                        L || n ? L && (E = t) : h('contextmenu', t), t.preventDefault();
                    }
                    function h(t, n) {
                        var o = DOM.mousePos(p, n);
                        return e.fire(t, {
                            lngLat: e.unproject(o),
                            point: o,
                            originalEvent: n
                        });
                    }
                    function g(t, n) {
                        var o = DOM.touchPos(p, n), r = o.reduce(function (e, t, n, o) {
                                return e.add(t.div(o.length));
                            }, new Point(0, 0));
                        return e.fire(t, {
                            lngLat: e.unproject(r),
                            point: r,
                            lngLats: o.map(function (t) {
                                return e.unproject(t);
                            }, this),
                            points: o,
                            originalEvent: n
                        });
                    }
                    var p = e.getCanvasContainer(), E = null, L = !1, b = null, k = null;
                    for (var q in handlers) {
                        e[q] = new handlers[q](e, t), t.interactive && t[q] && e[q].enable(t[q]);
                    }
                    p.addEventListener('mouseout', n, !1), p.addEventListener('mousedown', o, !1), p.addEventListener('mouseup', r, !1), p.addEventListener('mousemove', a, !1), p.addEventListener('mouseover', u, !1), p.addEventListener('touchstart', i, !1), p.addEventListener('touchend', d, !1), p.addEventListener('touchmove', c, !1), p.addEventListener('touchcancel', l, !1), p.addEventListener('click', v, !1), p.addEventListener('dblclick', m, !1), p.addEventListener('contextmenu', f, !1);
                };
            },
            {
                '../util/dom': 259,
                './handler/box_zoom': 239,
                './handler/dblclick_zoom': 240,
                './handler/drag_pan': 241,
                './handler/drag_rotate': 242,
                './handler/keyboard': 243,
                './handler/scroll_zoom': 244,
                './handler/touch_zoom_rotate': 245,
                '@mapbox/point-geometry': 4
            }
        ],
        231: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util'), interpolate = _dereq_('../style-spec/util/interpolate').number, browser = _dereq_('../util/browser'), LngLat = _dereq_('../geo/lng_lat'), LngLatBounds = _dereq_('../geo/lng_lat_bounds'), Point = _dereq_('@mapbox/point-geometry'), Evented = _dereq_('../util/evented'), Camera = function (t) {
                        function i(i, e) {
                            t.call(this), this.moving = !1, this.transform = i, this._bearingSnap = e.bearingSnap;
                        }
                        return t && (i.__proto__ = t), i.prototype = Object.create(t && t.prototype), i.prototype.constructor = i, i.prototype.getCenter = function () {
                            return this.transform.center;
                        }, i.prototype.setCenter = function (t, i) {
                            return this.jumpTo({ center: t }, i);
                        }, i.prototype.panBy = function (t, i, e) {
                            return t = Point.convert(t).mult(-1), this.panTo(this.transform.center, util.extend({ offset: t }, i), e);
                        }, i.prototype.panTo = function (t, i, e) {
                            return this.easeTo(util.extend({ center: t }, i), e);
                        }, i.prototype.getZoom = function () {
                            return this.transform.zoom;
                        }, i.prototype.setZoom = function (t, i) {
                            return this.jumpTo({ zoom: t }, i), this;
                        }, i.prototype.zoomTo = function (t, i, e) {
                            return this.easeTo(util.extend({ zoom: t }, i), e);
                        }, i.prototype.zoomIn = function (t, i) {
                            return this.zoomTo(this.getZoom() + 1, t, i), this;
                        }, i.prototype.zoomOut = function (t, i) {
                            return this.zoomTo(this.getZoom() - 1, t, i), this;
                        }, i.prototype.getBearing = function () {
                            return this.transform.bearing;
                        }, i.prototype.setBearing = function (t, i) {
                            return this.jumpTo({ bearing: t }, i), this;
                        }, i.prototype.rotateTo = function (t, i, e) {
                            return this.easeTo(util.extend({ bearing: t }, i), e);
                        }, i.prototype.resetNorth = function (t, i) {
                            return this.rotateTo(0, util.extend({ duration: 1000 }, t), i), this;
                        }, i.prototype.snapToNorth = function (t, i) {
                            return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(t, i) : this;
                        }, i.prototype.getPitch = function () {
                            return this.transform.pitch;
                        }, i.prototype.setPitch = function (t, i) {
                            return this.jumpTo({ pitch: t }, i), this;
                        }, i.prototype.fitBounds = function (t, i, e) {
                            if (i = util.extend({
                                    padding: {
                                        top: 0,
                                        bottom: 0,
                                        right: 0,
                                        left: 0
                                    },
                                    offset: [
                                        0,
                                        0
                                    ],
                                    maxZoom: this.transform.maxZoom
                                }, i), 'number' == typeof i.padding) {
                                var o = i.padding;
                                i.padding = {
                                    top: o,
                                    bottom: o,
                                    right: o,
                                    left: o
                                };
                            }
                            if (!util.deepEqual(Object.keys(i.padding).sort(function (t, i) {
                                    return t < i ? -1 : t > i ? 1 : 0;
                                }), [
                                    'bottom',
                                    'left',
                                    'right',
                                    'top'
                                ])) {
                                return util.warnOnce('options.padding must be a positive number, or an Object with keys \'bottom\', \'left\', \'right\', \'top\''), this;
                            }
                            t = LngLatBounds.convert(t);
                            var n = [
                                    (i.padding.left - i.padding.right) / 2,
                                    (i.padding.top - i.padding.bottom) / 2
                                ], r = Math.min(i.padding.right, i.padding.left), a = Math.min(i.padding.top, i.padding.bottom);
                            i.offset = [
                                i.offset[0] + n[0],
                                i.offset[1] + n[1]
                            ];
                            var s = Point.convert(i.offset), h = this.transform, p = h.project(t.getNorthWest()), u = h.project(t.getSouthEast()), c = u.sub(p), m = (h.width - 2 * r - 2 * Math.abs(s.x)) / c.x, f = (h.height - 2 * a - 2 * Math.abs(s.y)) / c.y;
                            return f < 0 || m < 0 ? (util.warnOnce('Map cannot fit within canvas with the given bounds, padding, and/or offset.'), this) : (i.center = h.unproject(p.add(u).div(2)), i.zoom = Math.min(h.scaleZoom(h.scale * Math.min(m, f)), i.maxZoom), i.bearing = 0, i.linear ? this.easeTo(i, e) : this.flyTo(i, e));
                        }, i.prototype.jumpTo = function (t, i) {
                            this.stop();
                            var e = this.transform, o = !1, n = !1, r = !1;
                            return 'zoom' in t && e.zoom !== +t.zoom && (o = !0, e.zoom = +t.zoom), void 0 !== t.center && (e.center = LngLat.convert(t.center)), 'bearing' in t && e.bearing !== +t.bearing && (n = !0, e.bearing = +t.bearing), 'pitch' in t && e.pitch !== +t.pitch && (r = !0, e.pitch = +t.pitch), this.fire('movestart', i).fire('move', i), o && this.fire('zoomstart', i).fire('zoom', i).fire('zoomend', i), n && this.fire('rotate', i), r && this.fire('pitchstart', i).fire('pitch', i).fire('pitchend', i), this.fire('moveend', i);
                        }, i.prototype.easeTo = function (t, i) {
                            var e = this;
                            this.stop(), t = util.extend({
                                offset: [
                                    0,
                                    0
                                ],
                                duration: 500,
                                easing: util.ease
                            }, t), !1 === t.animate && (t.duration = 0);
                            var o = this.transform, n = this.getZoom(), r = this.getBearing(), a = this.getPitch(), s = 'zoom' in t ? +t.zoom : n, h = 'bearing' in t ? this._normalizeBearing(t.bearing, r) : r, p = 'pitch' in t ? +t.pitch : a, u = o.centerPoint.add(Point.convert(t.offset)), c = o.pointLocation(u), m = LngLat.convert(t.center || c);
                            this._normalizeCenter(m);
                            var f, g, d = o.project(c), l = o.project(m).sub(d), v = o.zoomScale(s - n);
                            return t.around && (f = LngLat.convert(t.around), g = o.locationPoint(f)), this.zooming = s !== n, this.rotating = r !== h, this.pitching = p !== a, this._prepareEase(i, t.noMoveStart), clearTimeout(this._onEaseEnd), this._ease(function (t) {
                                if (e.zooming && (o.zoom = interpolate(n, s, t)), e.rotating && (o.bearing = interpolate(r, h, t)), e.pitching && (o.pitch = interpolate(a, p, t)), f) {
                                    o.setLocationAtPoint(f, g);
                                } else {
                                    var c = o.zoomScale(o.zoom - n), m = s > n ? Math.min(2, v) : Math.max(0.5, v), _ = Math.pow(m, 1 - t), b = o.unproject(d.add(l.mult(t * _)).mult(c));
                                    o.setLocationAtPoint(o.renderWorldCopies ? b.wrap() : b, u);
                                }
                                e._fireMoveEvents(i);
                            }, function () {
                                t.delayEndEvents ? e._onEaseEnd = setTimeout(function () {
                                    return e._afterEase(i);
                                }, t.delayEndEvents) : e._afterEase(i);
                            }, t), this;
                        }, i.prototype._prepareEase = function (t, i) {
                            this.moving = !0, i || this.fire('movestart', t), this.zooming && this.fire('zoomstart', t), this.pitching && this.fire('pitchstart', t);
                        }, i.prototype._fireMoveEvents = function (t) {
                            this.fire('move', t), this.zooming && this.fire('zoom', t), this.rotating && this.fire('rotate', t), this.pitching && this.fire('pitch', t);
                        }, i.prototype._afterEase = function (t) {
                            var i = this.zooming, e = this.pitching;
                            this.moving = !1, this.zooming = !1, this.rotating = !1, this.pitching = !1, i && this.fire('zoomend', t), e && this.fire('pitchend', t), this.fire('moveend', t);
                        }, i.prototype.flyTo = function (t, i) {
                            function e(t) {
                                var i = (M * M - z * z + (t ? -1 : 1) * L * L * x * x) / (2 * (t ? M : z) * L * x);
                                return Math.log(Math.sqrt(i * i + 1) - i);
                            }
                            function o(t) {
                                return (Math.exp(t) - Math.exp(-t)) / 2;
                            }
                            function n(t) {
                                return (Math.exp(t) + Math.exp(-t)) / 2;
                            }
                            function r(t) {
                                return o(t) / n(t);
                            }
                            var a = this;
                            this.stop(), t = util.extend({
                                offset: [
                                    0,
                                    0
                                ],
                                speed: 1.2,
                                curve: 1.42,
                                easing: util.ease
                            }, t);
                            var s = this.transform, h = this.getZoom(), p = this.getBearing(), u = this.getPitch(), c = 'zoom' in t ? util.clamp(+t.zoom, s.minZoom, s.maxZoom) : h, m = 'bearing' in t ? this._normalizeBearing(t.bearing, p) : p, f = 'pitch' in t ? +t.pitch : u, g = s.zoomScale(c - h), d = s.centerPoint.add(Point.convert(t.offset)), l = s.pointLocation(d), v = LngLat.convert(t.center || l);
                            this._normalizeCenter(v);
                            var _ = s.project(l), b = s.project(v).sub(_), y = t.curve, z = Math.max(s.width, s.height), M = z / g, x = b.mag();
                            if ('minZoom' in t) {
                                var E = util.clamp(Math.min(t.minZoom, h, c), s.minZoom, s.maxZoom), T = z / s.zoomScale(E - h);
                                y = Math.sqrt(T / x * 2);
                            }
                            var L = y * y, j = e(0), w = function (t) {
                                    return n(j) / n(j + y * t);
                                }, Z = function (t) {
                                    return z * ((n(j) * r(j + y * t) - o(j)) / L) / x;
                                }, P = (e(1) - j) / y;
                            if (Math.abs(x) < 0.000001 || !isFinite(P)) {
                                if (Math.abs(z - M) < 0.000001) {
                                    return this.easeTo(t, i);
                                }
                                var S = M < z ? -1 : 1;
                                P = Math.abs(Math.log(M / z)) / y, Z = function () {
                                    return 0;
                                }, w = function (t) {
                                    return Math.exp(S * y * t);
                                };
                            }
                            if ('duration' in t) {
                                t.duration = +t.duration;
                            } else {
                                var B = 'screenSpeed' in t ? +t.screenSpeed / y : +t.speed;
                                t.duration = 1000 * P / B;
                            }
                            return t.maxDuration && t.duration > t.maxDuration && (t.duration = 0), this.zooming = !0, this.rotating = p !== m, this.pitching = f !== u, this._prepareEase(i, !1), this._ease(function (t) {
                                var e = t * P, o = 1 / w(e);
                                s.zoom = h + s.scaleZoom(o), a.rotating && (s.bearing = interpolate(p, m, t)), a.pitching && (s.pitch = interpolate(u, f, t));
                                var n = s.unproject(_.add(b.mult(Z(e))).mult(o));
                                s.setLocationAtPoint(s.renderWorldCopies ? n.wrap() : n, d), a._fireMoveEvents(i);
                            }, function () {
                                return a._afterEase(i);
                            }, t), this;
                        }, i.prototype.isEasing = function () {
                            return !!this._isEasing;
                        }, i.prototype.isMoving = function () {
                            return this.moving;
                        }, i.prototype.stop = function () {
                            return this._onFrame && this._finishAnimation(), this;
                        }, i.prototype._ease = function (t, i, e) {
                            var o = this;
                            !1 === e.animate || 0 === e.duration ? (t(1), i()) : (this._easeStart = browser.now(), this._isEasing = !0, this._easeOptions = e, this._startAnimation(function (i) {
                                var e = Math.min((browser.now() - o._easeStart) / o._easeOptions.duration, 1);
                                t(o._easeOptions.easing(e)), 1 === e && o.stop();
                            }, function () {
                                o._isEasing = !1, i();
                            }));
                        }, i.prototype._updateCamera = function () {
                            this._onFrame && this._onFrame(this.transform);
                        }, i.prototype._startAnimation = function (t, i) {
                            return void 0 === i && (i = function () {
                            }), this.stop(), this._onFrame = t, this._finishFn = i, this._update(), this;
                        }, i.prototype._finishAnimation = function () {
                            delete this._onFrame;
                            var t = this._finishFn;
                            delete this._finishFn, t.call(this);
                        }, i.prototype._normalizeBearing = function (t, i) {
                            t = util.wrap(t, -180, 180);
                            var e = Math.abs(t - i);
                            return Math.abs(t - 360 - i) < e && (t -= 360), Math.abs(t + 360 - i) < e && (t += 360), t;
                        }, i.prototype._normalizeCenter = function (t) {
                            var i = this.transform;
                            if (i.renderWorldCopies && !i.lngRange) {
                                var e = t.lng - i.center.lng;
                                t.lng += e > 180 ? -360 : e < -180 ? 360 : 0;
                            }
                        }, i;
                    }(Evented);
                module.exports = Camera;
            },
            {
                '../geo/lng_lat': 62,
                '../geo/lng_lat_bounds': 63,
                '../style-spec/util/interpolate': 158,
                '../util/browser': 252,
                '../util/evented': 260,
                '../util/util': 275,
                '@mapbox/point-geometry': 4
            }
        ],
        232: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../../util/dom'), util = _dereq_('../../util/util'), config = _dereq_('../../util/config'), AttributionControl = function (t) {
                        this.options = t, util.bindAll([
                            '_updateEditLink',
                            '_updateData',
                            '_updateCompact'
                        ], this);
                    };
                AttributionControl.prototype.getDefaultPosition = function () {
                    return 'bottom-right';
                }, AttributionControl.prototype.onAdd = function (t) {
                    var i = this.options && this.options.compact;
                    return this._map = t, this._container = DOM.create('div', 'mapboxgl-ctrl mapboxgl-ctrl-attrib'), i && this._container.classList.add('mapboxgl-compact'), this._updateAttributions(), this._updateEditLink(), this._map.on('sourcedata', this._updateData), this._map.on('moveend', this._updateEditLink), void 0 === i && (this._map.on('resize', this._updateCompact), this._updateCompact()), this._container;
                }, AttributionControl.prototype.onRemove = function () {
                    DOM.remove(this._container), this._map.off('sourcedata', this._updateData), this._map.off('moveend', this._updateEditLink), this._map.off('resize', this._updateCompact), this._map = void 0;
                }, AttributionControl.prototype._updateEditLink = function () {
                    var t = this._editLink;
                    t || (t = this._editLink = this._container.querySelector('.mapbox-improve-map'));
                    var i = [
                        {
                            key: 'owner',
                            value: this.styleOwner
                        },
                        {
                            key: 'id',
                            value: this.styleId
                        },
                        {
                            key: 'access_token',
                            value: config.ACCESS_TOKEN
                        }
                    ];
                    if (t) {
                        var e = i.reduce(function (t, e, o) {
                            return e.value && (t += e.key + '=' + e.value + (o < i.length - 1 ? '&' : '')), t;
                        }, '?');
                        t.href = 'https://www.mapbox.com/feedback/' + e + (this._map._hash ? this._map._hash.getHashString(!0) : '');
                    }
                }, AttributionControl.prototype._updateData = function (t) {
                    t && 'metadata' === t.sourceDataType && (this._updateAttributions(), this._updateEditLink());
                }, AttributionControl.prototype._updateAttributions = function () {
                    if (this._map.style) {
                        var t = [];
                        if (this._map.style.stylesheet) {
                            var i = this._map.style.stylesheet;
                            this.styleOwner = i.owner, this.styleId = i.id;
                        }
                        var e = this._map.style.sourceCaches;
                        for (var o in e) {
                            var a = e[o].getSource();
                            a.attribution && t.indexOf(a.attribution) < 0 && t.push(a.attribution);
                        }
                        t.sort(function (t, i) {
                            return t.length - i.length;
                        }), t = t.filter(function (i, e) {
                            for (var o = e + 1; o < t.length; o++) {
                                if (t[o].indexOf(i) >= 0) {
                                    return !1;
                                }
                            }
                            return !0;
                        }), t.length ? (this._container.innerHTML = t.join(' | '), this._container.classList.remove('mapboxgl-attrib-empty')) : this._container.classList.add('mapboxgl-attrib-empty'), this._editLink = null;
                    }
                }, AttributionControl.prototype._updateCompact = function () {
                    this._map.getCanvasContainer().offsetWidth <= 640 ? this._container.classList.add('mapboxgl-compact') : this._container.classList.remove('mapboxgl-compact');
                }, module.exports = AttributionControl;
            },
            {
                '../../util/config': 256,
                '../../util/dom': 259,
                '../../util/util': 275
            }
        ],
        233: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../../util/dom'), util = _dereq_('../../util/util'), window = _dereq_('../../util/window'), FullscreenControl = function () {
                        this._fullscreen = !1, util.bindAll([
                            '_onClickFullscreen',
                            '_changeIcon'
                        ], this), 'onfullscreenchange' in window.document ? this._fullscreenchange = 'fullscreenchange' : 'onmozfullscreenchange' in window.document ? this._fullscreenchange = 'mozfullscreenchange' : 'onwebkitfullscreenchange' in window.document ? this._fullscreenchange = 'webkitfullscreenchange' : 'onmsfullscreenchange' in window.document && (this._fullscreenchange = 'MSFullscreenChange'), this._className = 'mapboxgl-ctrl';
                    };
                FullscreenControl.prototype.onAdd = function (e) {
                    return this._map = e, this._mapContainer = this._map.getContainer(), this._container = DOM.create('div', this._className + ' mapboxgl-ctrl-group'), this._checkFullscreenSupport() ? this._setupUI() : (this._container.style.display = 'none', util.warnOnce('This device does not support fullscreen mode.')), this._container;
                }, FullscreenControl.prototype.onRemove = function () {
                    DOM.remove(this._container), this._map = null, window.document.removeEventListener(this._fullscreenchange, this._changeIcon);
                }, FullscreenControl.prototype._checkFullscreenSupport = function () {
                    return !!(window.document.fullscreenEnabled || window.document.mozFullScreenEnabled || window.document.msFullscreenEnabled || window.document.webkitFullscreenEnabled);
                }, FullscreenControl.prototype._setupUI = function () {
                    var e = this._fullscreenButton = DOM.create('button', this._className + '-icon ' + this._className + '-fullscreen', this._container);
                    e.setAttribute('aria-label', 'Toggle fullscreen'), e.type = 'button', this._fullscreenButton.addEventListener('click', this._onClickFullscreen), window.document.addEventListener(this._fullscreenchange, this._changeIcon);
                }, FullscreenControl.prototype._isFullscreen = function () {
                    return this._fullscreen;
                }, FullscreenControl.prototype._changeIcon = function () {
                    (window.document.fullscreenElement || window.document.mozFullScreenElement || window.document.webkitFullscreenElement || window.document.msFullscreenElement) === this._mapContainer !== this._fullscreen && (this._fullscreen = !this._fullscreen, this._fullscreenButton.classList.toggle(this._className + '-shrink'), this._fullscreenButton.classList.toggle(this._className + '-fullscreen'));
                }, FullscreenControl.prototype._onClickFullscreen = function () {
                    this._isFullscreen() ? window.document.exitFullscreen ? window.document.exitFullscreen() : window.document.mozCancelFullScreen ? window.document.mozCancelFullScreen() : window.document.msExitFullscreen ? window.document.msExitFullscreen() : window.document.webkitCancelFullScreen && window.document.webkitCancelFullScreen() : this._mapContainer.requestFullscreen ? this._mapContainer.requestFullscreen() : this._mapContainer.mozRequestFullScreen ? this._mapContainer.mozRequestFullScreen() : this._mapContainer.msRequestFullscreen ? this._mapContainer.msRequestFullscreen() : this._mapContainer.webkitRequestFullscreen && this._mapContainer.webkitRequestFullscreen();
                }, module.exports = FullscreenControl;
            },
            {
                '../../util/dom': 259,
                '../../util/util': 275,
                '../../util/window': 254
            }
        ],
        234: [
            function (_dereq_, module, exports) {
                'use strict';
                function checkGeolocationSupport(t) {
                    void 0 !== supportsGeolocation ? t(supportsGeolocation) : void 0 !== window.navigator.permissions ? window.navigator.permissions.query({ name: 'geolocation' }).then(function (o) {
                        supportsGeolocation = 'denied' !== o.state, t(supportsGeolocation);
                    }) : (supportsGeolocation = !!window.navigator.geolocation, t(supportsGeolocation));
                }
                var Evented = _dereq_('../../util/evented'), DOM = _dereq_('../../util/dom'), window = _dereq_('../../util/window'), util = _dereq_('../../util/util'), LngLat = _dereq_('../../geo/lng_lat'), Marker = _dereq_('../marker'), defaultOptions = {
                        positionOptions: {
                            enableHighAccuracy: !1,
                            timeout: 6000
                        },
                        fitBoundsOptions: { maxZoom: 15 },
                        trackUserLocation: !1,
                        showUserLocation: !0
                    }, className = 'mapboxgl-ctrl', supportsGeolocation, GeolocateControl = function (t) {
                        function o(o) {
                            t.call(this), this.options = util.extend({}, defaultOptions, o), util.bindAll([
                                '_onSuccess',
                                '_onError',
                                '_finish',
                                '_setupUI',
                                '_updateCamera',
                                '_updateMarker',
                                '_onClickGeolocate'
                            ], this);
                        }
                        return t && (o.__proto__ = t), o.prototype = Object.create(t && t.prototype), o.prototype.constructor = o, o.prototype.onAdd = function (t) {
                            return this._map = t, this._container = DOM.create('div', className + ' ' + className + '-group'), checkGeolocationSupport(this._setupUI), this._container;
                        }, o.prototype.onRemove = function () {
                            void 0 !== this._geolocationWatchID && (window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0), this.options.showUserLocation && this._userLocationDotMarker.remove(), DOM.remove(this._container), this._map = void 0;
                        }, o.prototype._onSuccess = function (t) {
                            if (this.options.trackUserLocation) {
                                switch (this._lastKnownPosition = t, this._watchState) {
                                case 'WAITING_ACTIVE':
                                case 'ACTIVE_LOCK':
                                case 'ACTIVE_ERROR':
                                    this._watchState = 'ACTIVE_LOCK', this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active-error'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active');
                                    break;
                                case 'BACKGROUND':
                                case 'BACKGROUND_ERROR':
                                    this._watchState = 'BACKGROUND', this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background-error'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background');
                                }
                            }
                            this.options.showUserLocation && 'OFF' !== this._watchState && this._updateMarker(t), this.options.trackUserLocation && 'ACTIVE_LOCK' !== this._watchState || this._updateCamera(t), this.options.showUserLocation && this._dotElement.classList.remove('mapboxgl-user-location-dot-stale'), this.fire('geolocate', t), this._finish();
                        }, o.prototype._updateCamera = function (t) {
                            var o = new LngLat(t.coords.longitude, t.coords.latitude), e = t.coords.accuracy;
                            this._map.fitBounds(o.toBounds(e), this.options.fitBoundsOptions, { geolocateSource: !0 });
                        }, o.prototype._updateMarker = function (t) {
                            t ? this._userLocationDotMarker.setLngLat([
                                t.coords.longitude,
                                t.coords.latitude
                            ]).addTo(this._map) : this._userLocationDotMarker.remove();
                        }, o.prototype._onError = function (t) {
                            if (this.options.trackUserLocation) {
                                if (1 === t.code) {
                                    this._watchState = 'OFF', this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active-error'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background-error'), void 0 !== this._geolocationWatchID && this._clearWatch();
                                } else {
                                    switch (this._watchState) {
                                    case 'WAITING_ACTIVE':
                                        this._watchState = 'ACTIVE_ERROR', this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active-error');
                                        break;
                                    case 'ACTIVE_LOCK':
                                        this._watchState = 'ACTIVE_ERROR', this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active-error'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting');
                                        break;
                                    case 'BACKGROUND':
                                        this._watchState = 'BACKGROUND_ERROR', this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background-error'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting');
                                    }
                                }
                            }
                            'OFF' !== this._watchState && this.options.showUserLocation && this._dotElement.classList.add('mapboxgl-user-location-dot-stale'), this.fire('error', t), this._finish();
                        }, o.prototype._finish = function () {
                            this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = void 0;
                        }, o.prototype._setupUI = function (t) {
                            var o = this;
                            !1 !== t && (this._container.addEventListener('contextmenu', function (t) {
                                return t.preventDefault();
                            }), this._geolocateButton = DOM.create('button', className + '-icon ' + className + '-geolocate', this._container), this._geolocateButton.type = 'button', this._geolocateButton.setAttribute('aria-label', 'Geolocate'), this.options.trackUserLocation && (this._geolocateButton.setAttribute('aria-pressed', 'false'), this._watchState = 'OFF'), this.options.showUserLocation && (this._dotElement = DOM.create('div', 'mapboxgl-user-location-dot'), this._userLocationDotMarker = new Marker(this._dotElement), this.options.trackUserLocation && (this._watchState = 'OFF')), this._geolocateButton.addEventListener('click', this._onClickGeolocate.bind(this)), this.options.trackUserLocation && this._map.on('movestart', function (t) {
                                t.geolocateSource || 'ACTIVE_LOCK' !== o._watchState || (o._watchState = 'BACKGROUND', o._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background'), o._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'), o.fire('trackuserlocationend'));
                            }));
                        }, o.prototype._onClickGeolocate = function () {
                            if (this.options.trackUserLocation) {
                                switch (this._watchState) {
                                case 'OFF':
                                    this._watchState = 'WAITING_ACTIVE', this.fire('trackuserlocationstart');
                                    break;
                                case 'WAITING_ACTIVE':
                                case 'ACTIVE_LOCK':
                                case 'ACTIVE_ERROR':
                                case 'BACKGROUND_ERROR':
                                    this._watchState = 'OFF', this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active-error'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background'), this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background-error'), this.fire('trackuserlocationend');
                                    break;
                                case 'BACKGROUND':
                                    this._watchState = 'ACTIVE_LOCK', this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-background'), this._lastKnownPosition && this._updateCamera(this._lastKnownPosition), this.fire('trackuserlocationstart');
                                }
                                switch (this._watchState) {
                                case 'WAITING_ACTIVE':
                                    this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active');
                                    break;
                                case 'ACTIVE_LOCK':
                                    this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active');
                                    break;
                                case 'ACTIVE_ERROR':
                                    this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-active-error');
                                    break;
                                case 'BACKGROUND':
                                    this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background');
                                    break;
                                case 'BACKGROUND_ERROR':
                                    this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting'), this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-background-error');
                                }
                                'OFF' === this._watchState && void 0 !== this._geolocationWatchID ? this._clearWatch() : void 0 === this._geolocationWatchID && (this._geolocateButton.classList.add('mapboxgl-ctrl-geolocate-waiting'), this._geolocateButton.setAttribute('aria-pressed', 'true'), this._geolocationWatchID = window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, this.options.positionOptions));
                            } else {
                                window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, this.options.positionOptions), this._timeoutId = setTimeout(this._finish, 10000);
                            }
                        }, o.prototype._clearWatch = function () {
                            window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0, this._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting'), this._geolocateButton.setAttribute('aria-pressed', 'false'), this.options.showUserLocation && this._updateMarker(null);
                        }, o;
                    }(Evented);
                module.exports = GeolocateControl;
            },
            {
                '../../geo/lng_lat': 62,
                '../../util/dom': 259,
                '../../util/evented': 260,
                '../../util/util': 275,
                '../../util/window': 254,
                '../marker': 248
            }
        ],
        235: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../../util/dom'), util = _dereq_('../../util/util'), LogoControl = function () {
                        util.bindAll(['_updateLogo'], this);
                    };
                LogoControl.prototype.onAdd = function (o) {
                    this._map = o, this._container = DOM.create('div', 'mapboxgl-ctrl');
                    var t = DOM.create('a', 'mapboxgl-ctrl-logo');
                    return t.target = '_blank', t.href = 'https://www.mapbox.com/', t.setAttribute('aria-label', 'Mapbox logo'), this._container.appendChild(t), this._container.style.display = 'none', this._map.on('sourcedata', this._updateLogo), this._updateLogo(), this._container;
                }, LogoControl.prototype.onRemove = function () {
                    DOM.remove(this._container), this._map.off('sourcedata', this._updateLogo);
                }, LogoControl.prototype.getDefaultPosition = function () {
                    return 'bottom-left';
                }, LogoControl.prototype._updateLogo = function (o) {
                    o && 'metadata' !== o.sourceDataType || (this._container.style.display = this._logoRequired() ? 'block' : 'none');
                }, LogoControl.prototype._logoRequired = function () {
                    if (this._map.style) {
                        var o = this._map.style.sourceCaches;
                        for (var t in o) {
                            if (o[t].getSource().mapbox_logo) {
                                return !0;
                            }
                        }
                        return !1;
                    }
                }, module.exports = LogoControl;
            },
            {
                '../../util/dom': 259,
                '../../util/util': 275
            }
        ],
        236: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../../util/dom'), util = _dereq_('../../util/util'), DragRotateHandler = _dereq_('../handler/drag_rotate'), defaultOptions = {
                        showCompass: !0,
                        showZoom: !0
                    }, NavigationControl = function (t) {
                        var o = this;
                        this.options = util.extend({}, defaultOptions, t), this._container = DOM.create('div', 'mapboxgl-ctrl mapboxgl-ctrl-group'), this._container.addEventListener('contextmenu', function (t) {
                            return t.preventDefault();
                        }), this.options.showZoom && (this._zoomInButton = this._createButton('mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in', 'Zoom In', function () {
                            return o._map.zoomIn();
                        }), this._zoomOutButton = this._createButton('mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out', 'Zoom Out', function () {
                            return o._map.zoomOut();
                        })), this.options.showCompass && (util.bindAll(['_rotateCompassArrow'], this), this._compass = this._createButton('mapboxgl-ctrl-icon mapboxgl-ctrl-compass', 'Reset North', function () {
                            return o._map.resetNorth();
                        }), this._compassArrow = DOM.create('span', 'mapboxgl-ctrl-compass-arrow', this._compass));
                    };
                NavigationControl.prototype._rotateCompassArrow = function () {
                    var t = 'rotate(' + this._map.transform.angle * (180 / Math.PI) + 'deg)';
                    this._compassArrow.style.transform = t;
                }, NavigationControl.prototype.onAdd = function (t) {
                    return this._map = t, this.options.showCompass && (this._map.on('rotate', this._rotateCompassArrow), this._rotateCompassArrow(), this._handler = new DragRotateHandler(t, {
                        button: 'left',
                        element: this._compass
                    }), this._handler.enable()), this._container;
                }, NavigationControl.prototype.onRemove = function () {
                    DOM.remove(this._container), this.options.showCompass && (this._map.off('rotate', this._rotateCompassArrow), this._handler.disable(), delete this._handler), delete this._map;
                }, NavigationControl.prototype._createButton = function (t, o, r) {
                    var e = DOM.create('button', t, this._container);
                    return e.type = 'button', e.setAttribute('aria-label', o), e.addEventListener('click', r), e;
                }, module.exports = NavigationControl;
            },
            {
                '../../util/dom': 259,
                '../../util/util': 275,
                '../handler/drag_rotate': 242
            }
        ],
        237: [
            function (_dereq_, module, exports) {
                'use strict';
                function updateScale(t, e, o) {
                    var n = o && o.maxWidth || 100, i = t._container.clientHeight / 2, a = getDistance(t.unproject([
                            0,
                            i
                        ]), t.unproject([
                            n,
                            i
                        ]));
                    if (o && 'imperial' === o.unit) {
                        var l = 3.2808 * a;
                        if (l > 5280) {
                            setScale(e, n, l / 5280, 'mi');
                        } else {
                            setScale(e, n, l, 'ft');
                        }
                    } else if (o && 'nautical' === o.unit) {
                        var r = a / 1852;
                        setScale(e, n, r, 'nm');
                    } else {
                        setScale(e, n, a, 'm');
                    }
                }
                function setScale(t, e, o, n) {
                    var i = getRoundNum(o), a = i / o;
                    'm' === n && i >= 1000 && (i /= 1000, n = 'km'), t.style.width = e * a + 'px', t.innerHTML = i + n;
                }
                function getDistance(t, e) {
                    var o = Math.PI / 180, n = t.lat * o, i = e.lat * o, a = Math.sin(n) * Math.sin(i) + Math.cos(n) * Math.cos(i) * Math.cos((e.lng - t.lng) * o);
                    return 6371000 * Math.acos(Math.min(a, 1));
                }
                function getRoundNum(t) {
                    var e = Math.pow(10, ('' + Math.floor(t)).length - 1), o = t / e;
                    return o = o >= 10 ? 10 : o >= 5 ? 5 : o >= 3 ? 3 : o >= 2 ? 2 : 1, e * o;
                }
                var DOM = _dereq_('../../util/dom'), util = _dereq_('../../util/util'), ScaleControl = function (t) {
                        this.options = t, util.bindAll(['_onMove'], this);
                    };
                ScaleControl.prototype.getDefaultPosition = function () {
                    return 'bottom-left';
                }, ScaleControl.prototype._onMove = function () {
                    updateScale(this._map, this._container, this.options);
                }, ScaleControl.prototype.onAdd = function (t) {
                    return this._map = t, this._container = DOM.create('div', 'mapboxgl-ctrl mapboxgl-ctrl-scale', t.getContainer()), this._map.on('move', this._onMove), this._onMove(), this._container;
                }, ScaleControl.prototype.onRemove = function () {
                    DOM.remove(this._container), this._map.off('move', this._onMove), this._map = void 0;
                }, module.exports = ScaleControl;
            },
            {
                '../../util/dom': 259,
                '../../util/util': 275
            }
        ],
        238: [
            function (_dereq_, module, exports) {
                'use strict';
            },
            {}
        ],
        239: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../../util/dom'), LngLatBounds = _dereq_('../../geo/lng_lat_bounds'), util = _dereq_('../../util/util'), window = _dereq_('../../util/window'), BoxZoomHandler = function (o) {
                        this._map = o, this._el = o.getCanvasContainer(), this._container = o.getContainer(), util.bindAll([
                            '_onMouseDown',
                            '_onMouseMove',
                            '_onMouseUp',
                            '_onKeyDown'
                        ], this);
                    };
                BoxZoomHandler.prototype.isEnabled = function () {
                    return !!this._enabled;
                }, BoxZoomHandler.prototype.isActive = function () {
                    return !!this._active;
                }, BoxZoomHandler.prototype.enable = function () {
                    this.isEnabled() || (this._map.dragPan && this._map.dragPan.disable(), this._el.addEventListener('mousedown', this._onMouseDown, !1), this._map.dragPan && this._map.dragPan.enable(), this._enabled = !0);
                }, BoxZoomHandler.prototype.disable = function () {
                    this.isEnabled() && (this._el.removeEventListener('mousedown', this._onMouseDown), this._enabled = !1);
                }, BoxZoomHandler.prototype._onMouseDown = function (o) {
                    o.shiftKey && 0 === o.button && (window.document.addEventListener('mousemove', this._onMouseMove, !1), window.document.addEventListener('keydown', this._onKeyDown, !1), window.document.addEventListener('mouseup', this._onMouseUp, !1), DOM.disableDrag(), this._startPos = DOM.mousePos(this._el, o), this._active = !0);
                }, BoxZoomHandler.prototype._onMouseMove = function (o) {
                    var e = this._startPos, t = DOM.mousePos(this._el, o);
                    this._box || (this._box = DOM.create('div', 'mapboxgl-boxzoom', this._container), this._container.classList.add('mapboxgl-crosshair'), this._fireEvent('boxzoomstart', o));
                    var n = Math.min(e.x, t.x), i = Math.max(e.x, t.x), s = Math.min(e.y, t.y), a = Math.max(e.y, t.y);
                    DOM.setTransform(this._box, 'translate(' + n + 'px,' + s + 'px)'), this._box.style.width = i - n + 'px', this._box.style.height = a - s + 'px';
                }, BoxZoomHandler.prototype._onMouseUp = function (o) {
                    if (0 === o.button) {
                        var e = this._startPos, t = DOM.mousePos(this._el, o), n = new LngLatBounds().extend(this._map.unproject(e)).extend(this._map.unproject(t));
                        this._finish(), e.x === t.x && e.y === t.y ? this._fireEvent('boxzoomcancel', o) : this._map.fitBounds(n, { linear: !0 }).fire('boxzoomend', {
                            originalEvent: o,
                            boxZoomBounds: n
                        });
                    }
                }, BoxZoomHandler.prototype._onKeyDown = function (o) {
                    27 === o.keyCode && (this._finish(), this._fireEvent('boxzoomcancel', o));
                }, BoxZoomHandler.prototype._finish = function () {
                    this._active = !1, window.document.removeEventListener('mousemove', this._onMouseMove, !1), window.document.removeEventListener('keydown', this._onKeyDown, !1), window.document.removeEventListener('mouseup', this._onMouseUp, !1), this._container.classList.remove('mapboxgl-crosshair'), this._box && (DOM.remove(this._box), this._box = null), DOM.enableDrag();
                }, BoxZoomHandler.prototype._fireEvent = function (o, e) {
                    return this._map.fire(o, { originalEvent: e });
                }, module.exports = BoxZoomHandler;
            },
            {
                '../../geo/lng_lat_bounds': 63,
                '../../util/dom': 259,
                '../../util/util': 275,
                '../../util/window': 254
            }
        ],
        240: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../../util/util'), DoubleClickZoomHandler = function (o) {
                        this._map = o, util.bindAll([
                            '_onDblClick',
                            '_onZoomEnd'
                        ], this);
                    };
                DoubleClickZoomHandler.prototype.isEnabled = function () {
                    return !!this._enabled;
                }, DoubleClickZoomHandler.prototype.isActive = function () {
                    return !!this._active;
                }, DoubleClickZoomHandler.prototype.enable = function () {
                    this.isEnabled() || (this._map.on('dblclick', this._onDblClick), this._enabled = !0);
                }, DoubleClickZoomHandler.prototype.disable = function () {
                    this.isEnabled() && (this._map.off('dblclick', this._onDblClick), this._enabled = !1);
                }, DoubleClickZoomHandler.prototype._onDblClick = function (o) {
                    this._active = !0, this._map.on('zoomend', this._onZoomEnd), this._map.zoomTo(this._map.getZoom() + (o.originalEvent.shiftKey ? -1 : 1), { around: o.lngLat }, o);
                }, DoubleClickZoomHandler.prototype._onZoomEnd = function () {
                    this._active = !1, this._map.off('zoomend', this._onZoomEnd);
                }, module.exports = DoubleClickZoomHandler;
            },
            { '../../util/util': 275 }
        ],
        241: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../../util/dom'), util = _dereq_('../../util/util'), window = _dereq_('../../util/window'), browser = _dereq_('../../util/browser'), inertiaLinearity = 0.3, inertiaEasing = util.bezier(0, 0, inertiaLinearity, 1), inertiaMaxSpeed = 1400, inertiaDeceleration = 2500, DragPanHandler = function (e) {
                        this._map = e, this._el = e.getCanvasContainer(), util.bindAll([
                            '_onDown',
                            '_onMove',
                            '_onUp',
                            '_onTouchEnd',
                            '_onMouseUp',
                            '_onDragFrame',
                            '_onDragFinished'
                        ], this);
                    };
                DragPanHandler.prototype.isEnabled = function () {
                    return !!this._enabled;
                }, DragPanHandler.prototype.isActive = function () {
                    return !!this._active;
                }, DragPanHandler.prototype.enable = function () {
                    this.isEnabled() || (this._el.classList.add('mapboxgl-touch-drag-pan'), this._el.addEventListener('mousedown', this._onDown), this._el.addEventListener('touchstart', this._onDown), this._enabled = !0);
                }, DragPanHandler.prototype.disable = function () {
                    this.isEnabled() && (this._el.classList.remove('mapboxgl-touch-drag-pan'), this._el.removeEventListener('mousedown', this._onDown), this._el.removeEventListener('touchstart', this._onDown), this._enabled = !1);
                }, DragPanHandler.prototype._onDown = function (e) {
                    this._ignoreEvent(e) || this.isActive() || (e.touches ? (window.document.addEventListener('touchmove', this._onMove), window.document.addEventListener('touchend', this._onTouchEnd)) : (window.document.addEventListener('mousemove', this._onMove), window.document.addEventListener('mouseup', this._onMouseUp)), window.addEventListener('blur', this._onMouseUp), this._active = !1, this._previousPos = DOM.mousePos(this._el, e), this._inertia = [[
                            browser.now(),
                            this._previousPos
                        ]]);
                }, DragPanHandler.prototype._onMove = function (e) {
                    if (!this._ignoreEvent(e)) {
                        this._lastMoveEvent = e, e.preventDefault();
                        var t = DOM.mousePos(this._el, e);
                        if (this._drainInertiaBuffer(), this._inertia.push([
                                browser.now(),
                                t
                            ]), !this._previousPos) {
                            return void (this._previousPos = t);
                        }
                        this._pos = t, this.isActive() || (this._active = !0, this._map.moving = !0, this._fireEvent('dragstart', e), this._fireEvent('movestart', e), this._map._startAnimation(this._onDragFrame, this._onDragFinished)), this._map._update();
                    }
                }, DragPanHandler.prototype._onDragFrame = function (e) {
                    var t = this._lastMoveEvent;
                    t && (e.setLocationAtPoint(e.pointLocation(this._previousPos), this._pos), this._fireEvent('drag', t), this._fireEvent('move', t), this._previousPos = this._pos, delete this._lastMoveEvent);
                }, DragPanHandler.prototype._onDragFinished = function (e) {
                    var t = this;
                    if (this.isActive()) {
                        this._active = !1, delete this._lastMoveEvent, delete this._previousPos, delete this._pos, this._fireEvent('dragend', e), this._drainInertiaBuffer();
                        var n = function () {
                                t._map.moving = !1, t._fireEvent('moveend', e);
                            }, i = this._inertia;
                        if (i.length < 2) {
                            return void n();
                        }
                        var o = i[i.length - 1], r = i[0], s = o[1].sub(r[1]), a = (o[0] - r[0]) / 1000;
                        if (0 === a || o[1].equals(r[1])) {
                            return void n();
                        }
                        var h = s.mult(inertiaLinearity / a), u = h.mag();
                        u > inertiaMaxSpeed && (u = inertiaMaxSpeed, h._unit()._mult(u));
                        var d = u / (inertiaDeceleration * inertiaLinearity), _ = h.mult(-d / 2);
                        this._map.panBy(_, {
                            duration: 1000 * d,
                            easing: inertiaEasing,
                            noMoveStart: !0
                        }, { originalEvent: e });
                    }
                }, DragPanHandler.prototype._onUp = function (e) {
                    this._onDragFinished(e);
                }, DragPanHandler.prototype._onMouseUp = function (e) {
                    this._ignoreEvent(e) || (this._onUp(e), window.document.removeEventListener('mousemove', this._onMove), window.document.removeEventListener('mouseup', this._onMouseUp), window.removeEventListener('blur', this._onMouseUp));
                }, DragPanHandler.prototype._onTouchEnd = function (e) {
                    this._ignoreEvent(e) || (this._onUp(e), window.document.removeEventListener('touchmove', this._onMove), window.document.removeEventListener('touchend', this._onTouchEnd));
                }, DragPanHandler.prototype._fireEvent = function (e, t) {
                    return this._map.fire(e, t ? { originalEvent: t } : {});
                }, DragPanHandler.prototype._ignoreEvent = function (e) {
                    var t = this._map;
                    return !(!t.boxZoom || !t.boxZoom.isActive()) || (!(!t.dragRotate || !t.dragRotate.isActive()) || (e.touches ? e.touches.length > 1 : !!e.ctrlKey || 'mousemove' !== e.type && e.button && 0 !== e.button));
                }, DragPanHandler.prototype._drainInertiaBuffer = function () {
                    for (var e = this._inertia, t = browser.now(); e.length > 0 && t - e[0][0] > 160;) {
                        e.shift();
                    }
                }, module.exports = DragPanHandler;
            },
            {
                '../../util/browser': 252,
                '../../util/dom': 259,
                '../../util/util': 275,
                '../../util/window': 254
            }
        ],
        242: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../../util/dom'), util = _dereq_('../../util/util'), window = _dereq_('../../util/window'), browser = _dereq_('../../util/browser'), inertiaLinearity = 0.25, inertiaEasing = util.bezier(0, 0, inertiaLinearity, 1), inertiaMaxSpeed = 180, inertiaDeceleration = 720, DragRotateHandler = function (t, e) {
                        this._map = t, this._el = e.element || t.getCanvasContainer(), this._button = e.button || 'right', this._bearingSnap = e.bearingSnap || 0, this._pitchWithRotate = !1 !== e.pitchWithRotate, util.bindAll([
                            '_onDown',
                            '_onMove',
                            '_onUp',
                            '_onDragFrame',
                            '_onDragFinished'
                        ], this);
                    };
                DragRotateHandler.prototype.isEnabled = function () {
                    return !!this._enabled;
                }, DragRotateHandler.prototype.isActive = function () {
                    return !!this._active;
                }, DragRotateHandler.prototype.enable = function () {
                    this.isEnabled() || (this._el.addEventListener('mousedown', this._onDown), this._enabled = !0);
                }, DragRotateHandler.prototype.disable = function () {
                    this.isEnabled() && (this._el.removeEventListener('mousedown', this._onDown), this._enabled = !1);
                }, DragRotateHandler.prototype._onDown = function (t) {
                    if (!(this._map.boxZoom && this._map.boxZoom.isActive() || this._map.dragPan && this._map.dragPan.isActive() || this.isActive())) {
                        if ('right' === this._button) {
                            var e = t.ctrlKey ? 0 : 2, i = t.button;
                            if (void 0 !== window.InstallTrigger && 2 === t.button && t.ctrlKey && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 && (i = 0), i !== e) {
                                return;
                            }
                        } else if (t.ctrlKey || 0 !== t.button) {
                            return;
                        }
                        DOM.disableDrag(), window.document.addEventListener('mousemove', this._onMove, { capture: !0 }), window.document.addEventListener('mouseup', this._onUp), window.addEventListener('blur', this._onUp), this._active = !1, this._inertia = [[
                                browser.now(),
                                this._map.getBearing()
                            ]], this._previousPos = DOM.mousePos(this._el, t), this._center = this._map.transform.centerPoint, t.preventDefault();
                    }
                }, DragRotateHandler.prototype._onMove = function (t) {
                    this._lastMoveEvent = t;
                    var e = DOM.mousePos(this._el, t);
                    if (!this._previousPos) {
                        return void (this._previousPos = e);
                    }
                    this._pos = e, this.isActive() || (this._active = !0, this._map.moving = !0, this._fireEvent('rotatestart', t), this._fireEvent('movestart', t), this._pitchWithRotate && this._fireEvent('pitchstart', t), this._map._startAnimation(this._onDragFrame, this._onDragFinished)), this._map._update();
                }, DragRotateHandler.prototype._onUp = function (t) {
                    window.document.removeEventListener('mousemove', this._onMove, { capture: !0 }), window.document.removeEventListener('mouseup', this._onUp), window.removeEventListener('blur', this._onUp), DOM.enableDrag(), this._onDragFinished(t);
                }, DragRotateHandler.prototype._onDragFrame = function (t) {
                    var e = this._lastMoveEvent;
                    if (e) {
                        var i = this._previousPos, n = this._pos, r = 0.8 * (i.x - n.x), a = -0.5 * (i.y - n.y), o = t.bearing - r, s = t.pitch - a, h = this._inertia, _ = h[h.length - 1];
                        this._drainInertiaBuffer(), h.push([
                            browser.now(),
                            this._map._normalizeBearing(o, _[1])
                        ]), t.bearing = o, this._pitchWithRotate && (this._fireEvent('pitch', e), t.pitch = s), this._fireEvent('rotate', e), this._fireEvent('move', e), delete this._lastMoveEvent, this._previousPos = this._pos;
                    }
                }, DragRotateHandler.prototype._onDragFinished = function (t) {
                    var e = this;
                    if (this.isActive()) {
                        this._active = !1, delete this._lastMoveEvent, delete this._previousPos, this._fireEvent('rotateend', t), this._drainInertiaBuffer();
                        var i = this._map, n = i.getBearing(), r = this._inertia, a = function () {
                                Math.abs(n) < e._bearingSnap ? i.resetNorth({ noMoveStart: !0 }, { originalEvent: t }) : (e._map.moving = !1, e._fireEvent('moveend', t)), e._pitchWithRotate && e._fireEvent('pitchend', t);
                            };
                        if (r.length < 2) {
                            return void a();
                        }
                        var o = r[0], s = r[r.length - 1], h = r[r.length - 2], _ = i._normalizeBearing(n, h[1]), v = s[1] - o[1], p = v < 0 ? -1 : 1, d = (s[0] - o[0]) / 1000;
                        if (0 === v || 0 === d) {
                            return void a();
                        }
                        var u = Math.abs(v * (inertiaLinearity / d));
                        u > inertiaMaxSpeed && (u = inertiaMaxSpeed);
                        var l = u / (inertiaDeceleration * inertiaLinearity);
                        _ += p * u * (l / 2), Math.abs(i._normalizeBearing(_, 0)) < this._bearingSnap && (_ = i._normalizeBearing(0, _)), i.rotateTo(_, {
                            duration: 1000 * l,
                            easing: inertiaEasing,
                            noMoveStart: !0
                        }, { originalEvent: t });
                    }
                }, DragRotateHandler.prototype._fireEvent = function (t, e) {
                    return this._map.fire(t, e ? { originalEvent: e } : {});
                }, DragRotateHandler.prototype._drainInertiaBuffer = function () {
                    for (var t = this._inertia, e = browser.now(); t.length > 0 && e - t[0][0] > 160;) {
                        t.shift();
                    }
                }, module.exports = DragRotateHandler;
            },
            {
                '../../util/browser': 252,
                '../../util/dom': 259,
                '../../util/util': 275,
                '../../util/window': 254
            }
        ],
        243: [
            function (_dereq_, module, exports) {
                'use strict';
                function easeOut(e) {
                    return e * (2 - e);
                }
                var util = _dereq_('../../util/util'), panStep = 100, bearingStep = 15, pitchStep = 10, KeyboardHandler = function (e) {
                        this._map = e, this._el = e.getCanvasContainer(), util.bindAll(['_onKeyDown'], this);
                    };
                KeyboardHandler.prototype.isEnabled = function () {
                    return !!this._enabled;
                }, KeyboardHandler.prototype.enable = function () {
                    this.isEnabled() || (this._el.addEventListener('keydown', this._onKeyDown, !1), this._enabled = !0);
                }, KeyboardHandler.prototype.disable = function () {
                    this.isEnabled() && (this._el.removeEventListener('keydown', this._onKeyDown), this._enabled = !1);
                }, KeyboardHandler.prototype._onKeyDown = function (e) {
                    if (!(e.altKey || e.ctrlKey || e.metaKey)) {
                        var t = 0, a = 0, n = 0, r = 0, i = 0;
                        switch (e.keyCode) {
                        case 61:
                        case 107:
                        case 171:
                        case 187:
                            t = 1;
                            break;
                        case 189:
                        case 109:
                        case 173:
                            t = -1;
                            break;
                        case 37:
                            e.shiftKey ? a = -1 : (e.preventDefault(), r = -1);
                            break;
                        case 39:
                            e.shiftKey ? a = 1 : (e.preventDefault(), r = 1);
                            break;
                        case 38:
                            e.shiftKey ? n = 1 : (e.preventDefault(), i = -1);
                            break;
                        case 40:
                            e.shiftKey ? n = -1 : (i = 1, e.preventDefault());
                            break;
                        default:
                            return;
                        }
                        var s = this._map, o = s.getZoom(), l = {
                                duration: 300,
                                delayEndEvents: 500,
                                easing: easeOut,
                                zoom: t ? Math.round(o) + t * (e.shiftKey ? 2 : 1) : o,
                                bearing: s.getBearing() + a * bearingStep,
                                pitch: s.getPitch() + n * pitchStep,
                                offset: [
                                    -r * panStep,
                                    -i * panStep
                                ],
                                center: s.getCenter()
                            };
                        s.easeTo(l, { originalEvent: e });
                    }
                }, module.exports = KeyboardHandler;
            },
            { '../../util/util': 275 }
        ],
        244: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../../util/dom'), util = _dereq_('../../util/util'), browser = _dereq_('../../util/browser'), window = _dereq_('../../util/window'), interpolate = _dereq_('../../style-spec/util/interpolate').number, LngLat = _dereq_('../../geo/lng_lat'), wheelZoomDelta = 4.000244140625, defaultZoomRate = 0.01, wheelZoomRate = 1 / 450, maxScalePerFrame = 2, ua = window.navigator.userAgent.toLowerCase(), firefox = -1 !== ua.indexOf('firefox'), safari = -1 !== ua.indexOf('safari') && -1 === ua.indexOf('chrom'), ScrollZoomHandler = function (t) {
                        this._map = t, this._el = t.getCanvasContainer(), this._delta = 0, util.bindAll([
                            '_onWheel',
                            '_onTimeout',
                            '_onScrollFrame',
                            '_onScrollFinished'
                        ], this);
                    };
                ScrollZoomHandler.prototype.isEnabled = function () {
                    return !!this._enabled;
                }, ScrollZoomHandler.prototype.isActive = function () {
                    return !!this._active;
                }, ScrollZoomHandler.prototype.enable = function (t) {
                    this.isEnabled() || (this._el.addEventListener('wheel', this._onWheel, !1), this._el.addEventListener('mousewheel', this._onWheel, !1), this._enabled = !0, this._aroundCenter = t && 'center' === t.around);
                }, ScrollZoomHandler.prototype.disable = function () {
                    this.isEnabled() && (this._el.removeEventListener('wheel', this._onWheel), this._el.removeEventListener('mousewheel', this._onWheel), this._enabled = !1);
                }, ScrollZoomHandler.prototype._onWheel = function (t) {
                    var e = 0;
                    'wheel' === t.type ? (e = t.deltaY, firefox && t.deltaMode === window.WheelEvent.DOM_DELTA_PIXEL && (e /= browser.devicePixelRatio), t.deltaMode === window.WheelEvent.DOM_DELTA_LINE && (e *= 40)) : 'mousewheel' === t.type && (e = -t.wheelDeltaY, safari && (e /= 3));
                    var i = browser.now(), o = i - (this._lastWheelEventTime || 0);
                    this._lastWheelEventTime = i, 0 !== e && e % wheelZoomDelta == 0 ? this._type = 'wheel' : 0 !== e && Math.abs(e) < 4 ? this._type = 'trackpad' : o > 400 ? (this._type = null, this._lastValue = e, this._timeout = setTimeout(this._onTimeout, 40, t)) : this._type || (this._type = Math.abs(o * e) < 200 ? 'trackpad' : 'wheel', this._timeout && (clearTimeout(this._timeout), this._timeout = null, e += this._lastValue)), t.shiftKey && e && (e /= 4), this._type && (this._lastWheelEvent = t, this._delta -= e, this.isActive() || this._start(t)), t.preventDefault();
                }, ScrollZoomHandler.prototype._onTimeout = function (t) {
                    this._type = 'wheel', this._delta -= this._lastValue, this.isActive() || this._start(t);
                }, ScrollZoomHandler.prototype._start = function (t) {
                    if (this._delta) {
                        this._active = !0, this._map.moving = !0, this._map.zooming = !0, this._map.fire('movestart', { originalEvent: t }), this._map.fire('zoomstart', { originalEvent: t }), clearTimeout(this._finishTimeout);
                        var e = DOM.mousePos(this._el, t);
                        this._around = LngLat.convert(this._aroundCenter ? this._map.getCenter() : this._map.unproject(e)), this._aroundPoint = this._map.transform.locationPoint(this._around), this._map._startAnimation(this._onScrollFrame, this._onScrollFinished);
                    }
                }, ScrollZoomHandler.prototype._onScrollFrame = function (t) {
                    if (this.isActive()) {
                        if (0 !== this._delta) {
                            var e = 'wheel' === this._type && Math.abs(this._delta) > wheelZoomDelta ? wheelZoomRate : defaultZoomRate, i = maxScalePerFrame / (1 + Math.exp(-Math.abs(this._delta * e)));
                            this._delta < 0 && 0 !== i && (i = 1 / i);
                            var o = 'number' == typeof this._targetZoom ? t.zoomScale(this._targetZoom) : t.scale;
                            this._targetZoom = Math.min(t.maxZoom, Math.max(t.minZoom, t.scaleZoom(o * i))), 'wheel' === this._type && (this._startZoom = t.zoom, this._easing = this._smoothOutEasing(200)), this._delta = 0;
                        }
                        if ('wheel' === this._type) {
                            var a = Math.min((browser.now() - this._lastWheelEventTime) / 200, 1), s = this._easing(a);
                            t.zoom = interpolate(this._startZoom, this._targetZoom, s), 1 === a && this._map.stop();
                        } else {
                            t.zoom = this._targetZoom, this._map.stop();
                        }
                        t.setLocationAtPoint(this._around, this._aroundPoint), this._map.fire('move', { originalEvent: this._lastWheelEvent }), this._map.fire('zoom', { originalEvent: this._lastWheelEvent });
                    }
                }, ScrollZoomHandler.prototype._onScrollFinished = function () {
                    var t = this;
                    this.isActive() && (this._active = !1, this._finishTimeout = setTimeout(function () {
                        t._map.moving = !1, t._map.zooming = !1, t._map.fire('zoomend'), t._map.fire('moveend'), delete t._targetZoom;
                    }, 200));
                }, ScrollZoomHandler.prototype._smoothOutEasing = function (t) {
                    var e = util.ease;
                    if (this._prevEase) {
                        var i = this._prevEase, o = (browser.now() - i.start) / i.duration, a = i.easing(o + 0.01) - i.easing(o), s = 0.27 / Math.sqrt(a * a + 0.0001) * 0.01, r = Math.sqrt(0.0729 - s * s);
                        e = util.bezier(s, r, 0.25, 1);
                    }
                    return this._prevEase = {
                        start: browser.now(),
                        duration: t,
                        easing: e
                    }, e;
                }, module.exports = ScrollZoomHandler;
            },
            {
                '../../geo/lng_lat': 62,
                '../../style-spec/util/interpolate': 158,
                '../../util/browser': 252,
                '../../util/dom': 259,
                '../../util/util': 275,
                '../../util/window': 254
            }
        ],
        245: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../../util/dom'), util = _dereq_('../../util/util'), window = _dereq_('../../util/window'), browser = _dereq_('../../util/browser'), inertiaLinearity = 0.15, inertiaEasing = util.bezier(0, 0, inertiaLinearity, 1), inertiaDeceleration = 12, inertiaMaxSpeed = 2.5, significantScaleThreshold = 0.15, significantRotateThreshold = 10, TouchZoomRotateHandler = function (t) {
                        this._map = t, this._el = t.getCanvasContainer(), util.bindAll([
                            '_onStart',
                            '_onMove',
                            '_onEnd'
                        ], this);
                    };
                TouchZoomRotateHandler.prototype.isEnabled = function () {
                    return !!this._enabled;
                }, TouchZoomRotateHandler.prototype.enable = function (t) {
                    this.isEnabled() || (this._el.classList.add('mapboxgl-touch-zoom-rotate'), this._el.addEventListener('touchstart', this._onStart, !1), this._enabled = !0, this._aroundCenter = t && 'center' === t.around);
                }, TouchZoomRotateHandler.prototype.disable = function () {
                    this.isEnabled() && (this._el.classList.remove('mapboxgl-touch-zoom-rotate'), this._el.removeEventListener('touchstart', this._onStart), this._enabled = !1);
                }, TouchZoomRotateHandler.prototype.disableRotation = function () {
                    this._rotationDisabled = !0;
                }, TouchZoomRotateHandler.prototype.enableRotation = function () {
                    this._rotationDisabled = !1;
                }, TouchZoomRotateHandler.prototype._onStart = function (t) {
                    if (2 === t.touches.length) {
                        var e = DOM.mousePos(this._el, t.touches[0]), o = DOM.mousePos(this._el, t.touches[1]);
                        this._startVec = e.sub(o), this._startScale = this._map.transform.scale, this._startBearing = this._map.transform.bearing, this._gestureIntent = void 0, this._inertia = [], window.document.addEventListener('touchmove', this._onMove, !1), window.document.addEventListener('touchend', this._onEnd, !1);
                    }
                }, TouchZoomRotateHandler.prototype._onMove = function (t) {
                    if (2 === t.touches.length) {
                        var e = DOM.mousePos(this._el, t.touches[0]), o = DOM.mousePos(this._el, t.touches[1]), i = e.add(o).div(2), n = e.sub(o), a = n.mag() / this._startVec.mag(), r = this._rotationDisabled ? 0 : 180 * n.angleWith(this._startVec) / Math.PI, s = this._map;
                        if (this._gestureIntent) {
                            var h = {
                                duration: 0,
                                around: s.unproject(i)
                            };
                            'rotate' === this._gestureIntent && (h.bearing = this._startBearing + r), 'zoom' !== this._gestureIntent && 'rotate' !== this._gestureIntent || (h.zoom = s.transform.scaleZoom(this._startScale * a)), s.stop(), this._drainInertiaBuffer(), this._inertia.push([
                                browser.now(),
                                a,
                                i
                            ]), s.easeTo(h, { originalEvent: t });
                        } else {
                            var u = Math.abs(1 - a) > significantScaleThreshold;
                            Math.abs(r) > significantRotateThreshold ? this._gestureIntent = 'rotate' : u && (this._gestureIntent = 'zoom'), this._gestureIntent && (this._startVec = n, this._startScale = s.transform.scale, this._startBearing = s.transform.bearing);
                        }
                        t.preventDefault();
                    }
                }, TouchZoomRotateHandler.prototype._onEnd = function (t) {
                    window.document.removeEventListener('touchmove', this._onMove), window.document.removeEventListener('touchend', this._onEnd), this._drainInertiaBuffer();
                    var e = this._inertia, o = this._map;
                    if (e.length < 2) {
                        return void o.snapToNorth({}, { originalEvent: t });
                    }
                    var i = e[e.length - 1], n = e[0], a = o.transform.scaleZoom(this._startScale * i[1]), r = o.transform.scaleZoom(this._startScale * n[1]), s = a - r, h = (i[0] - n[0]) / 1000, u = i[2];
                    if (0 === h || a === r) {
                        return void o.snapToNorth({}, { originalEvent: t });
                    }
                    var l = s * inertiaLinearity / h;
                    Math.abs(l) > inertiaMaxSpeed && (l = l > 0 ? inertiaMaxSpeed : -inertiaMaxSpeed);
                    var d = 1000 * Math.abs(l / (inertiaDeceleration * inertiaLinearity)), c = a + l * d / 2000;
                    c < 0 && (c = 0), o.easeTo({
                        zoom: c,
                        duration: d,
                        easing: inertiaEasing,
                        around: this._aroundCenter ? o.getCenter() : o.unproject(u)
                    }, { originalEvent: t });
                }, TouchZoomRotateHandler.prototype._drainInertiaBuffer = function () {
                    for (var t = this._inertia, e = browser.now(); t.length > 2 && e - t[0][0] > 160;) {
                        t.shift();
                    }
                }, module.exports = TouchZoomRotateHandler;
            },
            {
                '../../util/browser': 252,
                '../../util/dom': 259,
                '../../util/util': 275,
                '../../util/window': 254
            }
        ],
        246: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('../util/util'), window = _dereq_('../util/window'), throttle = _dereq_('../util/throttle'), Hash = function () {
                        util.bindAll([
                            '_onHashChange',
                            '_updateHash'
                        ], this), this._updateHash = throttle(this._updateHashUnthrottled.bind(this), 300);
                    };
                Hash.prototype.addTo = function (t) {
                    return this._map = t, window.addEventListener('hashchange', this._onHashChange, !1), this._map.on('moveend', this._updateHash), this;
                }, Hash.prototype.remove = function () {
                    return window.removeEventListener('hashchange', this._onHashChange, !1), this._map.off('moveend', this._updateHash), delete this._map, this;
                }, Hash.prototype.getHashString = function (t) {
                    var e = this._map.getCenter(), h = Math.round(100 * this._map.getZoom()) / 100, a = Math.ceil((h * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10), n = Math.pow(10, a), i = Math.round(e.lng * n) / n, o = Math.round(e.lat * n) / n, s = this._map.getBearing(), r = this._map.getPitch(), u = '';
                    return u += t ? '#/' + i + '/' + o + '/' + h : '#' + h + '/' + o + '/' + i, (s || r) && (u += '/' + Math.round(10 * s) / 10), r && (u += '/' + Math.round(r)), u;
                }, Hash.prototype._onHashChange = function () {
                    var t = window.location.hash.replace('#', '').split('/');
                    return t.length >= 3 && (this._map.jumpTo({
                        center: [
                            +t[2],
                            +t[1]
                        ],
                        zoom: +t[0],
                        bearing: +(t[3] || 0),
                        pitch: +(t[4] || 0)
                    }), !0);
                }, Hash.prototype._updateHashUnthrottled = function () {
                    var t = this.getHashString();
                    window.history.replaceState('', '', t);
                }, module.exports = Hash;
            },
            {
                '../util/throttle': 272,
                '../util/util': 275,
                '../util/window': 254
            }
        ],
        247: [
            function (_dereq_, module, exports) {
                'use strict';
                function removeNode(t) {
                    t.parentNode && t.parentNode.removeChild(t);
                }
                var util = _dereq_('../util/util'), browser = _dereq_('../util/browser'), window = _dereq_('../util/window'), ref = _dereq_('../util/window'), HTMLImageElement = ref.HTMLImageElement, HTMLElement = ref.HTMLElement, DOM = _dereq_('../util/dom'), ajax = _dereq_('../util/ajax'), Style = _dereq_('../style/style'), EvaluationParameters = _dereq_('../style/evaluation_parameters'), Painter = _dereq_('../render/painter'), Transform = _dereq_('../geo/transform'), Hash = _dereq_('./hash'), bindHandlers = _dereq_('./bind_handlers'), Camera = _dereq_('./camera'), LngLat = _dereq_('../geo/lng_lat'), LngLatBounds = _dereq_('../geo/lng_lat_bounds'), Point = _dereq_('@mapbox/point-geometry'), AttributionControl = _dereq_('./control/attribution_control'), LogoControl = _dereq_('./control/logo_control'), isSupported = _dereq_('@mapbox/mapbox-gl-supported'), ref$1 = _dereq_('../util/image'), RGBAImage = ref$1.RGBAImage;
                _dereq_('./events');
                var defaultMinZoom = 0, defaultMaxZoom = 22, defaultOptions = {
                        center: [
                            0,
                            0
                        ],
                        zoom: 0,
                        bearing: 0,
                        pitch: 0,
                        minZoom: defaultMinZoom,
                        maxZoom: defaultMaxZoom,
                        interactive: !0,
                        scrollZoom: !0,
                        boxZoom: !0,
                        dragRotate: !0,
                        dragPan: !0,
                        keyboard: !0,
                        doubleClickZoom: !0,
                        touchZoomRotate: !0,
                        bearingSnap: 7,
                        hash: !1,
                        attributionControl: !0,
                        failIfMajorPerformanceCaveat: !1,
                        preserveDrawingBuffer: !1,
                        trackResize: !0,
                        renderWorldCopies: !0,
                        refreshExpiredTiles: !0,
                        maxTileCacheSize: null,
                        transformRequest: null,
                        fadeDuration: 300
                    }, Map = function (t) {
                        function e(e) {
                            if (e = util.extend({}, defaultOptions, e), null != e.minZoom && null != e.maxZoom && e.minZoom > e.maxZoom) {
                                throw new Error('maxZoom must be greater than minZoom');
                            }
                            var r = new Transform(e.minZoom, e.maxZoom, e.renderWorldCopies);
                            t.call(this, r, e), this._interactive = e.interactive, this._maxTileCacheSize = e.maxTileCacheSize, this._failIfMajorPerformanceCaveat = e.failIfMajorPerformanceCaveat, this._preserveDrawingBuffer = e.preserveDrawingBuffer, this._trackResize = e.trackResize, this._bearingSnap = e.bearingSnap, this._refreshExpiredTiles = e.refreshExpiredTiles, this._fadeDuration = e.fadeDuration, this._crossFadingFactor = 1, this._collectResourceTiming = e.collectResourceTiming;
                            var o = e.transformRequest;
                            if (this._transformRequest = o ? function (t, e) {
                                    return o(t, e) || { url: t };
                                } : function (t) {
                                    return { url: t };
                                }, 'string' == typeof e.container) {
                                var i = window.document.getElementById(e.container);
                                if (!i) {
                                    throw new Error('Container \'' + e.container + '\' not found.');
                                }
                                this._container = i;
                            } else {
                                if (!(e.container instanceof HTMLElement)) {
                                    throw new Error('Invalid type: \'container\' must be a String or HTMLElement.');
                                }
                                this._container = e.container;
                            }
                            e.maxBounds && this.setMaxBounds(e.maxBounds), util.bindAll([
                                '_onWindowOnline',
                                '_onWindowResize',
                                '_contextLost',
                                '_contextRestored',
                                '_update',
                                '_render',
                                '_onData',
                                '_onDataLoading'
                            ], this), this._setupContainer(), this._setupPainter(), this.on('move', this._update.bind(this, !1)), this.on('zoom', this._update.bind(this, !0)), void 0 !== window && (window.addEventListener('online', this._onWindowOnline, !1), window.addEventListener('resize', this._onWindowResize, !1)), bindHandlers(this, e), this._hash = e.hash && new Hash().addTo(this), this._hash && this._hash._onHashChange() || this.jumpTo({
                                center: e.center,
                                zoom: e.zoom,
                                bearing: e.bearing,
                                pitch: e.pitch
                            }), this.resize(), e.style && this.setStyle(e.style, { localIdeographFontFamily: e.localIdeographFontFamily }), e.attributionControl && this.addControl(new AttributionControl()), this.addControl(new LogoControl(), e.logoPosition), this.on('style.load', function () {
                                this.transform.unmodified && this.jumpTo(this.style.stylesheet);
                            }), this.on('data', this._onData), this.on('dataloading', this._onDataLoading);
                        }
                        t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e;
                        var r = {
                            showTileBoundaries: {},
                            showCollisionBoxes: {},
                            showOverdrawInspector: {},
                            repaint: {},
                            vertices: {}
                        };
                        return e.prototype.addControl = function (t, e) {
                            void 0 === e && t.getDefaultPosition && (e = t.getDefaultPosition()), void 0 === e && (e = 'top-right');
                            var r = t.onAdd(this), o = this._controlPositions[e];
                            return -1 !== e.indexOf('bottom') ? o.insertBefore(r, o.firstChild) : o.appendChild(r), this;
                        }, e.prototype.removeControl = function (t) {
                            return t.onRemove(this), this;
                        }, e.prototype.resize = function () {
                            var t = this._containerDimensions(), e = t[0], r = t[1];
                            return this._resizeCanvas(e, r), this.transform.resize(e, r), this.painter.resize(e, r), this.fire('movestart').fire('move').fire('resize').fire('moveend');
                        }, e.prototype.getBounds = function () {
                            var t = new LngLatBounds(this.transform.pointLocation(new Point(0, this.transform.height)), this.transform.pointLocation(new Point(this.transform.width, 0)));
                            return (this.transform.angle || this.transform.pitch) && (t.extend(this.transform.pointLocation(new Point(this.transform.size.x, 0))), t.extend(this.transform.pointLocation(new Point(0, this.transform.size.y)))), t;
                        }, e.prototype.getMaxBounds = function () {
                            return this.transform.latRange && 2 === this.transform.latRange.length && this.transform.lngRange && 2 === this.transform.lngRange.length ? new LngLatBounds([
                                this.transform.lngRange[0],
                                this.transform.latRange[0]
                            ], [
                                this.transform.lngRange[1],
                                this.transform.latRange[1]
                            ]) : null;
                        }, e.prototype.setMaxBounds = function (t) {
                            if (t) {
                                var e = LngLatBounds.convert(t);
                                this.transform.lngRange = [
                                    e.getWest(),
                                    e.getEast()
                                ], this.transform.latRange = [
                                    e.getSouth(),
                                    e.getNorth()
                                ], this.transform._constrain(), this._update();
                            } else {
                                null !== t && void 0 !== t || (this.transform.lngRange = null, this.transform.latRange = null, this._update());
                            }
                            return this;
                        }, e.prototype.setMinZoom = function (t) {
                            if ((t = null === t || void 0 === t ? defaultMinZoom : t) >= defaultMinZoom && t <= this.transform.maxZoom) {
                                return this.transform.minZoom = t, this._update(), this.getZoom() < t && this.setZoom(t), this;
                            }
                            throw new Error('minZoom must be between ' + defaultMinZoom + ' and the current maxZoom, inclusive');
                        }, e.prototype.getMinZoom = function () {
                            return this.transform.minZoom;
                        }, e.prototype.setMaxZoom = function (t) {
                            if ((t = null === t || void 0 === t ? defaultMaxZoom : t) >= this.transform.minZoom) {
                                return this.transform.maxZoom = t, this._update(), this.getZoom() > t && this.setZoom(t), this;
                            }
                            throw new Error('maxZoom must be greater than the current minZoom');
                        }, e.prototype.getMaxZoom = function () {
                            return this.transform.maxZoom;
                        }, e.prototype.project = function (t) {
                            return this.transform.locationPoint(LngLat.convert(t));
                        }, e.prototype.unproject = function (t) {
                            return this.transform.pointLocation(Point.convert(t));
                        }, e.prototype.on = function (e, r, o) {
                            var i = this;
                            if (void 0 === o) {
                                return t.prototype.on.call(this, e, r);
                            }
                            var n = function () {
                                if ('mouseenter' === e || 'mouseover' === e) {
                                    var t = !1;
                                    return {
                                        layer: r,
                                        listener: o,
                                        delegates: {
                                            mousemove: function (n) {
                                                var s = i.getLayer(r) ? i.queryRenderedFeatures(n.point, { layers: [r] }) : [];
                                                s.length ? t || (t = !0, o.call(i, util.extend({ features: s }, n, { type: e }))) : t = !1;
                                            },
                                            mouseout: function () {
                                                t = !1;
                                            }
                                        }
                                    };
                                }
                                if ('mouseleave' === e || 'mouseout' === e) {
                                    var n = !1;
                                    return {
                                        layer: r,
                                        listener: o,
                                        delegates: {
                                            mousemove: function (t) {
                                                (i.getLayer(r) ? i.queryRenderedFeatures(t.point, { layers: [r] }) : []).length ? n = !0 : n && (n = !1, o.call(i, util.extend({}, t, { type: e })));
                                            },
                                            mouseout: function (t) {
                                                n && (n = !1, o.call(i, util.extend({}, t, { type: e })));
                                            }
                                        }
                                    };
                                }
                                var s = function (t) {
                                    var e = i.getLayer(r) ? i.queryRenderedFeatures(t.point, { layers: [r] }) : [];
                                    e.length && o.call(i, util.extend({ features: e }, t));
                                };
                                return {
                                    layer: r,
                                    listener: o,
                                    delegates: (a = {}, a[e] = s, a)
                                };
                                var a;
                            }();
                            this._delegatedListeners = this._delegatedListeners || {}, this._delegatedListeners[e] = this._delegatedListeners[e] || [], this._delegatedListeners[e].push(n);
                            for (var s in n.delegates) {
                                i.on(s, n.delegates[s]);
                            }
                            return this;
                        }, e.prototype.off = function (e, r, o) {
                            var i = this;
                            if (void 0 === o) {
                                return t.prototype.off.call(this, e, r);
                            }
                            if (this._delegatedListeners && this._delegatedListeners[e]) {
                                for (var n = this._delegatedListeners[e], s = 0; s < n.length; s++) {
                                    var a = n[s];
                                    if (a.layer === r && a.listener === o) {
                                        for (var h in a.delegates) {
                                            i.off(h, a.delegates[h]);
                                        }
                                        return n.splice(s, 1), i;
                                    }
                                }
                            }
                            return this;
                        }, e.prototype.queryRenderedFeatures = function (t, e) {
                            return 2 === arguments.length ? (t = arguments[0], e = arguments[1]) : 1 === arguments.length && function (t) {
                                return t instanceof Point || Array.isArray(t);
                            }(arguments[0]) ? (t = arguments[0], e = {}) : 1 === arguments.length ? (t = void 0, e = arguments[0]) : (t = void 0, e = {}), this.style ? this.style.queryRenderedFeatures(this._makeQueryGeometry(t), e, this.transform.zoom, this.transform.angle) : [];
                        }, e.prototype._makeQueryGeometry = function (t) {
                            var e = this;
                            void 0 === t && (t = [
                                Point.convert([
                                    0,
                                    0
                                ]),
                                Point.convert([
                                    this.transform.width,
                                    this.transform.height
                                ])
                            ]);
                            var r;
                            if (t instanceof Point || 'number' == typeof t[0]) {
                                r = [Point.convert(t)];
                            } else {
                                var o = [
                                    Point.convert(t[0]),
                                    Point.convert(t[1])
                                ];
                                r = [
                                    o[0],
                                    new Point(o[1].x, o[0].y),
                                    o[1],
                                    new Point(o[0].x, o[1].y),
                                    o[0]
                                ];
                            }
                            return r = r.map(function (t) {
                                return e.transform.pointCoordinate(t);
                            });
                        }, e.prototype.querySourceFeatures = function (t, e) {
                            return this.style.querySourceFeatures(t, e);
                        }, e.prototype.setStyle = function (t, e) {
                            if ((!e || !1 !== e.diff && !e.localIdeographFontFamily) && this.style && t && 'object' == typeof t) {
                                try {
                                    return this.style.setState(t) && this._update(!0), this;
                                } catch (t) {
                                    util.warnOnce('Unable to perform style diff: ' + (t.message || t.error || t) + '.  Rebuilding the style from scratch.');
                                }
                            }
                            return this.style && (this.style.setEventedParent(null), this.style._remove()), t ? (this.style = new Style(this, e || {}), this.style.setEventedParent(this, { style: this.style }), 'string' == typeof t ? this.style.loadURL(t) : this.style.loadJSON(t), this) : (delete this.style, this);
                        }, e.prototype.getStyle = function () {
                            if (this.style) {
                                return this.style.serialize();
                            }
                        }, e.prototype.isStyleLoaded = function () {
                            return this.style ? this.style.loaded() : util.warnOnce('There is no style added to the map.');
                        }, e.prototype.addSource = function (t, e) {
                            return this.style.addSource(t, e), this._update(!0), this;
                        }, e.prototype.isSourceLoaded = function (t) {
                            var e = this.style && this.style.sourceCaches[t];
                            return void 0 === e ? void this.fire('error', { error: new Error('There is no source with ID \'' + t + '\'') }) : e.loaded();
                        }, e.prototype.areTilesLoaded = function () {
                            var t = this.style && this.style.sourceCaches;
                            for (var e in t) {
                                var r = t[e], o = r._tiles;
                                for (var i in o) {
                                    var n = o[i];
                                    if ('loaded' !== n.state && 'errored' !== n.state) {
                                        return !1;
                                    }
                                }
                            }
                            return !0;
                        }, e.prototype.addSourceType = function (t, e, r) {
                            return this.style.addSourceType(t, e, r);
                        }, e.prototype.removeSource = function (t) {
                            return this.style.removeSource(t), this._update(!0), this;
                        }, e.prototype.getSource = function (t) {
                            return this.style.getSource(t);
                        }, e.prototype.addImage = function (t, e, r) {
                            void 0 === r && (r = {});
                            var o = r.pixelRatio;
                            void 0 === o && (o = 1);
                            var i = r.sdf;
                            if (void 0 === i && (i = !1), e instanceof HTMLImageElement) {
                                var n = browser.getImageData(e), s = n.width, a = n.height, h = n.data;
                                this.style.addImage(t, {
                                    data: new RGBAImage({
                                        width: s,
                                        height: a
                                    }, h),
                                    pixelRatio: o,
                                    sdf: i
                                });
                            } else {
                                if (void 0 === e.width || void 0 === e.height) {
                                    return this.fire('error', { error: new Error('Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`') });
                                }
                                var l = e.width, u = e.height, d = e.data;
                                this.style.addImage(t, {
                                    data: new RGBAImage({
                                        width: l,
                                        height: u
                                    }, d.slice(0)),
                                    pixelRatio: o,
                                    sdf: i
                                });
                            }
                        }, e.prototype.hasImage = function (t) {
                            return t ? !!this.style.getImage(t) : (this.fire('error', { error: new Error('Missing required image id') }), !1);
                        }, e.prototype.removeImage = function (t) {
                            this.style.removeImage(t);
                        }, e.prototype.loadImage = function (t, e) {
                            ajax.getImage(this._transformRequest(t, ajax.ResourceType.Image), e);
                        }, e.prototype.addLayer = function (t, e) {
                            return this.style.addLayer(t, e), this._update(!0), this;
                        }, e.prototype.moveLayer = function (t, e) {
                            return this.style.moveLayer(t, e), this._update(!0), this;
                        }, e.prototype.removeLayer = function (t) {
                            return this.style.removeLayer(t), this._update(!0), this;
                        }, e.prototype.getLayer = function (t) {
                            return this.style.getLayer(t);
                        }, e.prototype.setFilter = function (t, e) {
                            return this.style.setFilter(t, e), this._update(!0), this;
                        }, e.prototype.setLayerZoomRange = function (t, e, r) {
                            return this.style.setLayerZoomRange(t, e, r), this._update(!0), this;
                        }, e.prototype.getFilter = function (t) {
                            return this.style.getFilter(t);
                        }, e.prototype.setPaintProperty = function (t, e, r) {
                            return this.style.setPaintProperty(t, e, r), this._update(!0), this;
                        }, e.prototype.getPaintProperty = function (t, e) {
                            return this.style.getPaintProperty(t, e);
                        }, e.prototype.setLayoutProperty = function (t, e, r) {
                            return this.style.setLayoutProperty(t, e, r), this._update(!0), this;
                        }, e.prototype.getLayoutProperty = function (t, e) {
                            return this.style.getLayoutProperty(t, e);
                        }, e.prototype.setLight = function (t) {
                            return this.style.setLight(t), this._update(!0), this;
                        }, e.prototype.getLight = function () {
                            return this.style.getLight();
                        }, e.prototype.getContainer = function () {
                            return this._container;
                        }, e.prototype.getCanvasContainer = function () {
                            return this._canvasContainer;
                        }, e.prototype.getCanvas = function () {
                            return this._canvas;
                        }, e.prototype._containerDimensions = function () {
                            var t = 0, e = 0;
                            return this._container && (t = this._container.offsetWidth || 400, e = this._container.offsetHeight || 300), [
                                t,
                                e
                            ];
                        }, e.prototype._setupContainer = function () {
                            var t = this._container;
                            t.classList.add('mapboxgl-map'), (this._missingCSSContainer = DOM.create('div', 'mapboxgl-missing-css', t)).innerHTML = 'Missing Mapbox GL JS CSS';
                            var e = this._canvasContainer = DOM.create('div', 'mapboxgl-canvas-container', t);
                            this._interactive && e.classList.add('mapboxgl-interactive'), this._canvas = DOM.create('canvas', 'mapboxgl-canvas', e), this._canvas.style.position = 'absolute', this._canvas.addEventListener('webglcontextlost', this._contextLost, !1), this._canvas.addEventListener('webglcontextrestored', this._contextRestored, !1), this._canvas.setAttribute('tabindex', '0'), this._canvas.setAttribute('aria-label', 'Map');
                            var r = this._containerDimensions();
                            this._resizeCanvas(r[0], r[1]);
                            var o = this._controlContainer = DOM.create('div', 'mapboxgl-control-container', t), i = this._controlPositions = {};
                            [
                                'top-left',
                                'top-right',
                                'bottom-left',
                                'bottom-right'
                            ].forEach(function (t) {
                                i[t] = DOM.create('div', 'mapboxgl-ctrl-' + t, o);
                            });
                        }, e.prototype._resizeCanvas = function (t, e) {
                            var r = window.devicePixelRatio || 1;
                            this._canvas.width = r * t, this._canvas.height = r * e, this._canvas.style.width = t + 'px', this._canvas.style.height = e + 'px';
                        }, e.prototype._setupPainter = function () {
                            var t = util.extend({
                                    failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat,
                                    preserveDrawingBuffer: this._preserveDrawingBuffer
                                }, isSupported.webGLContextAttributes), e = this._canvas.getContext('webgl', t) || this._canvas.getContext('experimental-webgl', t);
                            if (!e) {
                                return void this.fire('error', { error: new Error('Failed to initialize WebGL') });
                            }
                            this.painter = new Painter(e, this.transform);
                        }, e.prototype._contextLost = function (t) {
                            t.preventDefault(), this._frameId && (browser.cancelFrame(this._frameId), this._frameId = null), this.fire('webglcontextlost', { originalEvent: t });
                        }, e.prototype._contextRestored = function (t) {
                            this._setupPainter(), this.resize(), this._update(), this.fire('webglcontextrestored', { originalEvent: t });
                        }, e.prototype.loaded = function () {
                            return !this._styleDirty && !this._sourcesDirty && !(!this.style || !this.style.loaded());
                        }, e.prototype._update = function (t) {
                            this.style && (this._styleDirty = this._styleDirty || t, this._sourcesDirty = !0, this._rerender());
                        }, e.prototype._render = function () {
                            this._updateCamera();
                            var t = !1;
                            if (this.style && this._styleDirty) {
                                this._styleDirty = !1;
                                var e = this.transform.zoom, r = browser.now();
                                this.style.zoomHistory.update(e, r);
                                var o = new EvaluationParameters(e, {
                                        now: r,
                                        fadeDuration: this._fadeDuration,
                                        zoomHistory: this.style.zoomHistory,
                                        transition: this.style.getTransition()
                                    }), i = o.crossFadingFactor();
                                1 === i && i === this._crossFadingFactor || (t = !0, this._crossFadingFactor = i), this.style.update(o);
                            }
                            return this.style && this._sourcesDirty && (this._sourcesDirty = !1, this.style._updateSources(this.transform)), this._placementDirty = this.style && this.style._updatePlacement(this.painter.transform, this.showCollisionBoxes, this._fadeDuration), this.painter.render(this.style, {
                                showTileBoundaries: this.showTileBoundaries,
                                showOverdrawInspector: this._showOverdrawInspector,
                                rotating: this.rotating,
                                zooming: this.zooming,
                                fadeDuration: this._fadeDuration
                            }), this.fire('render'), this.loaded() && !this._loaded && (this._loaded = !0, this.fire('load')), this.style && (this.style.hasTransitions() || t) && (this._styleDirty = !0), (this._sourcesDirty || this._repaint || this._styleDirty || this._placementDirty) && this._rerender(), this;
                        }, e.prototype.remove = function () {
                            this._hash && this._hash.remove(), browser.cancelFrame(this._frameId), this._frameId = null, this.setStyle(null), void 0 !== window && (window.removeEventListener('resize', this._onWindowResize, !1), window.removeEventListener('online', this._onWindowOnline, !1));
                            var t = this.painter.context.gl.getExtension('WEBGL_lose_context');
                            t && t.loseContext(), removeNode(this._canvasContainer), removeNode(this._controlContainer), removeNode(this._missingCSSContainer), this._container.classList.remove('mapboxgl-map'), this.fire('remove');
                        }, e.prototype._rerender = function () {
                            var t = this;
                            this.style && !this._frameId && (this._frameId = browser.frame(function () {
                                t._frameId = null, t._render();
                            }));
                        }, e.prototype._onWindowOnline = function () {
                            this._update();
                        }, e.prototype._onWindowResize = function () {
                            this._trackResize && this.stop().resize()._update();
                        }, r.showTileBoundaries.get = function () {
                            return !!this._showTileBoundaries;
                        }, r.showTileBoundaries.set = function (t) {
                            this._showTileBoundaries !== t && (this._showTileBoundaries = t, this._update());
                        }, r.showCollisionBoxes.get = function () {
                            return !!this._showCollisionBoxes;
                        }, r.showCollisionBoxes.set = function (t) {
                            this._showCollisionBoxes !== t && (this._showCollisionBoxes = t, t ? this.style._generateCollisionBoxes() : this._update());
                        }, r.showOverdrawInspector.get = function () {
                            return !!this._showOverdrawInspector;
                        }, r.showOverdrawInspector.set = function (t) {
                            this._showOverdrawInspector !== t && (this._showOverdrawInspector = t, this._update());
                        }, r.repaint.get = function () {
                            return !!this._repaint;
                        }, r.repaint.set = function (t) {
                            this._repaint = t, this._update();
                        }, r.vertices.get = function () {
                            return !!this._vertices;
                        }, r.vertices.set = function (t) {
                            this._vertices = t, this._update();
                        }, e.prototype._onData = function (t) {
                            this._update('style' === t.dataType), this.fire(t.dataType + 'data', t);
                        }, e.prototype._onDataLoading = function (t) {
                            this.fire(t.dataType + 'dataloading', t);
                        }, Object.defineProperties(e.prototype, r), e;
                    }(Camera);
                module.exports = Map;
            },
            {
                '../geo/lng_lat': 62,
                '../geo/lng_lat_bounds': 63,
                '../geo/transform': 64,
                '../render/painter': 90,
                '../style/evaluation_parameters': 182,
                '../style/style': 190,
                '../util/ajax': 251,
                '../util/browser': 252,
                '../util/dom': 259,
                '../util/image': 263,
                '../util/util': 275,
                '../util/window': 254,
                './bind_handlers': 230,
                './camera': 231,
                './control/attribution_control': 232,
                './control/logo_control': 235,
                './events': 238,
                './hash': 246,
                '@mapbox/mapbox-gl-supported': 3,
                '@mapbox/point-geometry': 4
            }
        ],
        248: [
            function (_dereq_, module, exports) {
                'use strict';
                var DOM = _dereq_('../util/dom'), LngLat = _dereq_('../geo/lng_lat'), Point = _dereq_('@mapbox/point-geometry'), smartWrap = _dereq_('../util/smart_wrap'), ref = _dereq_('../util/util'), bindAll = ref.bindAll, Marker = function (t, e) {
                        if (bindAll([
                                '_update',
                                '_onMapClick'
                            ], this), !t) {
                            t = DOM.create('div');
                            var r = DOM.createNS('http://www.w3.org/2000/svg', 'svg');
                            r.setAttributeNS(null, 'height', '41px'), r.setAttributeNS(null, 'width', '27px'), r.setAttributeNS(null, 'viewBox', '0 0 27 41');
                            var i = DOM.createNS('http://www.w3.org/2000/svg', 'g');
                            i.setAttributeNS(null, 'stroke', 'none'), i.setAttributeNS(null, 'stroke-width', '1'), i.setAttributeNS(null, 'fill', 'none'), i.setAttributeNS(null, 'fill-rule', 'evenodd');
                            var s = DOM.createNS('http://www.w3.org/2000/svg', 'g');
                            s.setAttributeNS(null, 'fill-rule', 'nonzero');
                            var p = DOM.createNS('http://www.w3.org/2000/svg', 'g');
                            p.setAttributeNS(null, 'transform', 'translate(3.0, 29.0)'), p.setAttributeNS(null, 'fill', '#000000');
                            for (var n = [
                                        {
                                            rx: '10.5',
                                            ry: '5.25002273'
                                        },
                                        {
                                            rx: '10.5',
                                            ry: '5.25002273'
                                        },
                                        {
                                            rx: '9.5',
                                            ry: '4.77275007'
                                        },
                                        {
                                            rx: '8.5',
                                            ry: '4.29549936'
                                        },
                                        {
                                            rx: '7.5',
                                            ry: '3.81822308'
                                        },
                                        {
                                            rx: '6.5',
                                            ry: '3.34094679'
                                        },
                                        {
                                            rx: '5.5',
                                            ry: '2.86367051'
                                        },
                                        {
                                            rx: '4.5',
                                            ry: '2.38636864'
                                        }
                                    ], l = 0, o = n; l < o.length; l += 1) {
                                var a = o[l], u = DOM.createNS('http://www.w3.org/2000/svg', 'ellipse');
                                u.setAttributeNS(null, 'opacity', '0.04'), u.setAttributeNS(null, 'cx', '10.5'), u.setAttributeNS(null, 'cy', '5.80029008'), u.setAttributeNS(null, 'rx', a.rx), u.setAttributeNS(null, 'ry', a.ry), p.appendChild(u);
                            }
                            var h = DOM.createNS('http://www.w3.org/2000/svg', 'g');
                            h.setAttributeNS(null, 'fill', '#3FB1CE');
                            var _ = DOM.createNS('http://www.w3.org/2000/svg', 'path');
                            _.setAttributeNS(null, 'd', 'M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z'), h.appendChild(_);
                            var g = DOM.createNS('http://www.w3.org/2000/svg', 'g');
                            g.setAttributeNS(null, 'opacity', '0.25'), g.setAttributeNS(null, 'fill', '#000000');
                            var f = DOM.createNS('http://www.w3.org/2000/svg', 'path');
                            f.setAttributeNS(null, 'd', 'M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z'), g.appendChild(f);
                            var d = DOM.createNS('http://www.w3.org/2000/svg', 'g');
                            d.setAttributeNS(null, 'transform', 'translate(6.0, 7.0)'), d.setAttributeNS(null, 'fill', '#FFFFFF');
                            var w = DOM.createNS('http://www.w3.org/2000/svg', 'g');
                            w.setAttributeNS(null, 'transform', 'translate(8.0, 8.0)');
                            var c = DOM.createNS('http://www.w3.org/2000/svg', 'circle');
                            c.setAttributeNS(null, 'fill', '#000000'), c.setAttributeNS(null, 'opacity', '0.25'), c.setAttributeNS(null, 'cx', '5.5'), c.setAttributeNS(null, 'cy', '5.5'), c.setAttributeNS(null, 'r', '5.4999962');
                            var v = DOM.createNS('http://www.w3.org/2000/svg', 'circle');
                            v.setAttributeNS(null, 'fill', '#FFFFFF'), v.setAttributeNS(null, 'cx', '5.5'), v.setAttributeNS(null, 'cy', '5.5'), v.setAttributeNS(null, 'r', '5.4999962'), w.appendChild(c), w.appendChild(v), s.appendChild(p), s.appendChild(h), s.appendChild(g), s.appendChild(d), s.appendChild(w), r.appendChild(s), t.appendChild(r);
                            var m = [
                                0,
                                -14
                            ];
                            e && e.offset || (e ? e.offset = m : e = { offset: m });
                        }
                        this._offset = Point.convert(e && e.offset || [
                            0,
                            0
                        ]), t.classList.add('mapboxgl-marker'), this._element = t, this._popup = null;
                    };
                Marker.prototype.addTo = function (t) {
                    return this.remove(), this._map = t, t.getCanvasContainer().appendChild(this._element), t.on('move', this._update), t.on('moveend', this._update), this._update(), this._map.on('click', this._onMapClick), this;
                }, Marker.prototype.remove = function () {
                    return this._map && (this._map.off('click', this._onMapClick), this._map.off('move', this._update), this._map.off('moveend', this._update), delete this._map), DOM.remove(this._element), this._popup && this._popup.remove(), this;
                }, Marker.prototype.getLngLat = function () {
                    return this._lngLat;
                }, Marker.prototype.setLngLat = function (t) {
                    return this._lngLat = LngLat.convert(t), this._pos = null, this._popup && this._popup.setLngLat(this._lngLat), this._update(), this;
                }, Marker.prototype.getElement = function () {
                    return this._element;
                }, Marker.prototype.setPopup = function (t) {
                    return this._popup && (this._popup.remove(), this._popup = null), t && ('offset' in t.options || (t.options.offset = this._offset), this._popup = t, this._lngLat && this._popup.setLngLat(this._lngLat)), this;
                }, Marker.prototype._onMapClick = function (t) {
                    var e = t.originalEvent.target, r = this._element;
                    this._popup && (e === r || r.contains(e)) && this.togglePopup();
                }, Marker.prototype.getPopup = function () {
                    return this._popup;
                }, Marker.prototype.togglePopup = function () {
                    var t = this._popup;
                    return t ? (t.isOpen() ? t.remove() : t.addTo(this._map), this) : this;
                }, Marker.prototype._update = function (t) {
                    this._map && (this._map.transform.renderWorldCopies && (this._lngLat = smartWrap(this._lngLat, this._pos, this._map.transform)), this._pos = this._map.project(this._lngLat)._add(this._offset), t && 'moveend' !== t.type || (this._pos = this._pos.round()), DOM.setTransform(this._element, 'translate(-50%, -50%) translate(' + this._pos.x + 'px, ' + this._pos.y + 'px)'));
                }, Marker.prototype.getOffset = function () {
                    return this._offset;
                }, Marker.prototype.setOffset = function (t) {
                    return this._offset = Point.convert(t), this._update(), this;
                }, module.exports = Marker;
            },
            {
                '../geo/lng_lat': 62,
                '../util/dom': 259,
                '../util/smart_wrap': 270,
                '../util/util': 275,
                '@mapbox/point-geometry': 4
            }
        ],
        249: [
            function (_dereq_, module, exports) {
                'use strict';
                function normalizeOffset(t) {
                    if (t) {
                        if ('number' == typeof t) {
                            var o = Math.round(Math.sqrt(0.5 * Math.pow(t, 2)));
                            return {
                                top: new Point(0, t),
                                'top-left': new Point(o, o),
                                'top-right': new Point(-o, o),
                                bottom: new Point(0, -t),
                                'bottom-left': new Point(o, -o),
                                'bottom-right': new Point(-o, -o),
                                left: new Point(t, 0),
                                right: new Point(-t, 0)
                            };
                        }
                        if (t instanceof Point || Array.isArray(t)) {
                            var e = Point.convert(t);
                            return {
                                top: e,
                                'top-left': e,
                                'top-right': e,
                                bottom: e,
                                'bottom-left': e,
                                'bottom-right': e,
                                left: e,
                                right: e
                            };
                        }
                        return {
                            top: Point.convert(t.top || [
                                0,
                                0
                            ]),
                            'top-left': Point.convert(t['top-left'] || [
                                0,
                                0
                            ]),
                            'top-right': Point.convert(t['top-right'] || [
                                0,
                                0
                            ]),
                            bottom: Point.convert(t.bottom || [
                                0,
                                0
                            ]),
                            'bottom-left': Point.convert(t['bottom-left'] || [
                                0,
                                0
                            ]),
                            'bottom-right': Point.convert(t['bottom-right'] || [
                                0,
                                0
                            ]),
                            left: Point.convert(t.left || [
                                0,
                                0
                            ]),
                            right: Point.convert(t.right || [
                                0,
                                0
                            ])
                        };
                    }
                    return normalizeOffset(new Point(0, 0));
                }
                var util = _dereq_('../util/util'), Evented = _dereq_('../util/evented'), DOM = _dereq_('../util/dom'), LngLat = _dereq_('../geo/lng_lat'), Point = _dereq_('@mapbox/point-geometry'), window = _dereq_('../util/window'), smartWrap = _dereq_('../util/smart_wrap'), defaultOptions = {
                        closeButton: !0,
                        closeOnClick: !0
                    }, Popup = function (t) {
                        function o(o) {
                            t.call(this), this.options = util.extend(Object.create(defaultOptions), o), util.bindAll([
                                '_update',
                                '_onClickClose'
                            ], this);
                        }
                        return t && (o.__proto__ = t), o.prototype = Object.create(t && t.prototype), o.prototype.constructor = o, o.prototype.addTo = function (t) {
                            return this._map = t, this._map.on('move', this._update), this.options.closeOnClick && this._map.on('click', this._onClickClose), this._update(), this;
                        }, o.prototype.isOpen = function () {
                            return !!this._map;
                        }, o.prototype.remove = function () {
                            return this._content && DOM.remove(this._content), this._container && (DOM.remove(this._container), delete this._container), this._map && (this._map.off('move', this._update), this._map.off('click', this._onClickClose), delete this._map), this.fire('close'), this;
                        }, o.prototype.getLngLat = function () {
                            return this._lngLat;
                        }, o.prototype.setLngLat = function (t) {
                            return this._lngLat = LngLat.convert(t), this._pos = null, this._update(), this;
                        }, o.prototype.setText = function (t) {
                            return this.setDOMContent(window.document.createTextNode(t));
                        }, o.prototype.setHTML = function (t) {
                            var o, e = window.document.createDocumentFragment(), n = window.document.createElement('body');
                            for (n.innerHTML = t;;) {
                                if (!(o = n.firstChild)) {
                                    break;
                                }
                                e.appendChild(o);
                            }
                            return this.setDOMContent(e);
                        }, o.prototype.setDOMContent = function (t) {
                            return this._createContent(), this._content.appendChild(t), this._update(), this;
                        }, o.prototype._createContent = function () {
                            this._content && DOM.remove(this._content), this._content = DOM.create('div', 'mapboxgl-popup-content', this._container), this.options.closeButton && (this._closeButton = DOM.create('button', 'mapboxgl-popup-close-button', this._content), this._closeButton.type = 'button', this._closeButton.setAttribute('aria-label', 'Close popup'), this._closeButton.innerHTML = '&#215;', this._closeButton.addEventListener('click', this._onClickClose));
                        }, o.prototype._update = function () {
                            if (this._map && this._lngLat && this._content) {
                                this._container || (this._container = DOM.create('div', 'mapboxgl-popup', this._map.getContainer()), this._tip = DOM.create('div', 'mapboxgl-popup-tip', this._container), this._container.appendChild(this._content)), this._map.transform.renderWorldCopies && (this._lngLat = smartWrap(this._lngLat, this._pos, this._map.transform));
                                var t = this._pos = this._map.project(this._lngLat), o = this.options.anchor, e = normalizeOffset(this.options.offset);
                                if (!o) {
                                    var n = this._container.offsetWidth, i = this._container.offsetHeight;
                                    o = t.y + e.bottom.y < i ? ['top'] : t.y > this._map.transform.height - i ? ['bottom'] : [], t.x < n / 2 ? o.push('left') : t.x > this._map.transform.width - n / 2 && o.push('right'), o = 0 === o.length ? 'bottom' : o.join('-');
                                }
                                var r = t.add(e[o]).round(), s = {
                                        top: 'translate(-50%,0)',
                                        'top-left': 'translate(0,0)',
                                        'top-right': 'translate(-100%,0)',
                                        bottom: 'translate(-50%,-100%)',
                                        'bottom-left': 'translate(0,-100%)',
                                        'bottom-right': 'translate(-100%,-100%)',
                                        left: 'translate(0,-50%)',
                                        right: 'translate(-100%,-50%)'
                                    }, p = this._container.classList;
                                for (var a in s) {
                                    p.remove('mapboxgl-popup-anchor-' + a);
                                }
                                p.add('mapboxgl-popup-anchor-' + o), DOM.setTransform(this._container, s[o] + ' translate(' + r.x + 'px,' + r.y + 'px)');
                            }
                        }, o.prototype._onClickClose = function () {
                            this.remove();
                        }, o;
                    }(Evented);
                module.exports = Popup;
            },
            {
                '../geo/lng_lat': 62,
                '../util/dom': 259,
                '../util/evented': 260,
                '../util/smart_wrap': 270,
                '../util/util': 275,
                '../util/window': 254,
                '@mapbox/point-geometry': 4
            }
        ],
        250: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('./util'), ref = _dereq_('./web_worker_transfer'), serialize = ref.serialize, deserialize = ref.deserialize, Actor = function (e, t, r) {
                        this.target = e, this.parent = t, this.mapId = r, this.callbacks = {}, this.callbackID = 0, util.bindAll(['receive'], this), this.target.addEventListener('message', this.receive, !1);
                    };
                Actor.prototype.send = function (e, t, r, i) {
                    var a = r ? this.mapId + ':' + this.callbackID++ : null;
                    r && (this.callbacks[a] = r);
                    var s = [];
                    this.target.postMessage({
                        targetMapId: i,
                        sourceMapId: this.mapId,
                        type: e,
                        id: String(a),
                        data: serialize(t, s)
                    }, s);
                }, Actor.prototype.receive = function (e) {
                    var t, r = this, i = e.data, a = i.id;
                    if (!i.targetMapId || this.mapId === i.targetMapId) {
                        var s = function (e, t) {
                            var i = [];
                            r.target.postMessage({
                                sourceMapId: r.mapId,
                                type: '<response>',
                                id: String(a),
                                error: e ? String(e) : null,
                                data: serialize(t, i)
                            }, i);
                        };
                        if ('<response>' === i.type) {
                            t = this.callbacks[i.id], delete this.callbacks[i.id], t && i.error ? t(new Error(i.error)) : t && t(null, deserialize(i.data));
                        } else if (void 0 !== i.id && this.parent[i.type]) {
                            this.parent[i.type](i.sourceMapId, deserialize(i.data), s);
                        } else if (void 0 !== i.id && this.parent.getWorkerSource) {
                            var d = i.type.split('.'), l = this.parent.getWorkerSource(i.sourceMapId, d[0]);
                            l[d[1]](deserialize(i.data), s);
                        } else {
                            this.parent[i.type](deserialize(i.data));
                        }
                    }
                }, Actor.prototype.remove = function () {
                    this.target.removeEventListener('message', this.receive, !1);
                }, module.exports = Actor;
            },
            {
                './util': 275,
                './web_worker_transfer': 278
            }
        ],
        251: [
            function (_dereq_, module, exports) {
                'use strict';
                function makeRequest(e) {
                    var t = new window.XMLHttpRequest();
                    t.open('GET', e.url, !0);
                    for (var r in e.headers) {
                        t.setRequestHeader(r, e.headers[r]);
                    }
                    return t.withCredentials = 'include' === e.credentials, t;
                }
                function sameOrigin(e) {
                    var t = window.document.createElement('a');
                    return t.href = e, t.protocol === window.document.location.protocol && t.host === window.document.location.host;
                }
                var window = _dereq_('./window'), ResourceType = {
                        Unknown: 'Unknown',
                        Style: 'Style',
                        Source: 'Source',
                        Tile: 'Tile',
                        Glyphs: 'Glyphs',
                        SpriteImage: 'SpriteImage',
                        SpriteJSON: 'SpriteJSON',
                        Image: 'Image'
                    };
                exports.ResourceType = ResourceType, 'function' == typeof Object.freeze && Object.freeze(ResourceType);
                var AJAXError = function (e) {
                    function t(t, r) {
                        e.call(this, t), this.status = r;
                    }
                    return e && (t.__proto__ = e), t.prototype = Object.create(e && e.prototype), t.prototype.constructor = t, t;
                }(Error);
                exports.getJSON = function (e, t) {
                    var r = makeRequest(e);
                    return r.setRequestHeader('Accept', 'application/json'), r.onerror = function () {
                        t(new Error(r.statusText));
                    }, r.onload = function () {
                        if (r.status >= 200 && r.status < 300 && r.response) {
                            var e;
                            try {
                                e = JSON.parse(r.response);
                            } catch (e) {
                                return t(e);
                            }
                            t(null, e);
                        } else {
                            t(new AJAXError(r.statusText, r.status));
                        }
                    }, r.send(), r;
                }, exports.getArrayBuffer = function (e, t) {
                    var r = makeRequest(e);
                    return r.responseType = 'arraybuffer', r.onerror = function () {
                        t(new Error(r.statusText));
                    }, r.onload = function () {
                        var e = r.response;
                        if (0 === e.byteLength && 200 === r.status) {
                            return t(new Error('http status 200 returned without content.'));
                        }
                        r.status >= 200 && r.status < 300 && r.response ? t(null, {
                            data: e,
                            cacheControl: r.getResponseHeader('Cache-Control'),
                            expires: r.getResponseHeader('Expires')
                        }) : t(new AJAXError(r.statusText, r.status));
                    }, r.send(), r;
                };
                var transparentPngUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=';
                exports.getImage = function (e, t) {
                    return exports.getArrayBuffer(e, function (e, r) {
                        if (e) {
                            t(e);
                        } else if (r) {
                            var n = new window.Image(), o = window.URL || window.webkitURL;
                            n.onload = function () {
                                t(null, n), o.revokeObjectURL(n.src);
                            };
                            var s = new window.Blob([new Uint8Array(r.data)], { type: 'image/png' });
                            n.cacheControl = r.cacheControl, n.expires = r.expires, n.src = r.data.byteLength ? o.createObjectURL(s) : transparentPngUrl;
                        }
                    });
                }, exports.getVideo = function (e, t) {
                    var r = window.document.createElement('video');
                    r.onloadstart = function () {
                        t(null, r);
                    };
                    for (var n = 0; n < e.length; n++) {
                        var o = window.document.createElement('source');
                        sameOrigin(e[n]) || (r.crossOrigin = 'Anonymous'), o.src = e[n], r.appendChild(o);
                    }
                    return r;
                };
            },
            { './window': 254 }
        ],
        252: [
            function (_dereq_, module, exports) {
                'use strict';
                var window = _dereq_('./window'), now = window.performance && window.performance.now ? window.performance.now.bind(window.performance) : Date.now.bind(Date), frame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame, cancel = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;
                module.exports = {
                    now: now,
                    frame: function (e) {
                        return frame(e);
                    },
                    cancelFrame: function (e) {
                        return cancel(e);
                    },
                    getImageData: function (e) {
                        var n = window.document.createElement('canvas'), t = n.getContext('2d');
                        if (!t) {
                            throw new Error('failed to create canvas 2d context');
                        }
                        return n.width = e.width, n.height = e.height, t.drawImage(e, 0, 0, e.width, e.height), t.getImageData(0, 0, e.width, e.height);
                    },
                    hardwareConcurrency: window.navigator.hardwareConcurrency || 4,
                    get devicePixelRatio() {
                        return window.devicePixelRatio;
                    },
                    supportsWebp: !1
                };
                var webpImgTest = window.document.createElement('img');
                webpImgTest.onload = function () {
                    module.exports.supportsWebp = !0;
                }, webpImgTest.src = 'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=';
            },
            { './window': 254 }
        ],
        253: [
            function (_dereq_, module, exports) {
                'use strict';
                var WebWorkify = _dereq_('webworkify'), window = _dereq_('../window'), workerURL = window.URL.createObjectURL(new WebWorkify(_dereq_('../../source/worker'), { bare: !0 }));
                module.exports = function () {
                    return new window.Worker(workerURL);
                };
            },
            {
                '../../source/worker': 118,
                '../window': 254,
                'webworkify': 36
            }
        ],
        254: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = self;
            },
            {}
        ],
        255: [
            function (_dereq_, module, exports) {
                'use strict';
                function compareAreas(e, r) {
                    return r.area - e.area;
                }
                var quickselect = _dereq_('quickselect'), calculateSignedArea = _dereq_('./util').calculateSignedArea;
                module.exports = function (e, r) {
                    var a = e.length;
                    if (a <= 1) {
                        return [e];
                    }
                    for (var t, u, c = [], i = 0; i < a; i++) {
                        var l = calculateSignedArea(e[i]);
                        0 !== l && (e[i].area = Math.abs(l), void 0 === u && (u = l < 0), u === l < 0 ? (t && c.push(t), t = [e[i]]) : t.push(e[i]));
                    }
                    if (t && c.push(t), r > 1) {
                        for (var n = 0; n < c.length; n++) {
                            c[n].length <= r || (quickselect(c[n], r, 1, c[n].length - 1, compareAreas), c[n] = c[n].slice(0, r));
                        }
                    }
                    return c;
                };
            },
            {
                './util': 275,
                'quickselect': 31
            }
        ],
        256: [
            function (_dereq_, module, exports) {
                'use strict';
                var config = {
                    API_URL: 'https://api.mapbox.com',
                    REQUIRE_ACCESS_TOKEN: !0,
                    ACCESS_TOKEN: null
                };
                module.exports = config;
            },
            {}
        ],
        257: [
            function (_dereq_, module, exports) {
                'use strict';
                var DictionaryCoder = function (r) {
                    var t = this;
                    this._stringToNumber = {}, this._numberToString = [];
                    for (var o = 0; o < r.length; o++) {
                        var i = r[o];
                        t._stringToNumber[i] = o, t._numberToString[o] = i;
                    }
                };
                DictionaryCoder.prototype.encode = function (r) {
                    return this._stringToNumber[r];
                }, DictionaryCoder.prototype.decode = function (r) {
                    return this._numberToString[r];
                }, module.exports = DictionaryCoder;
            },
            {}
        ],
        258: [
            function (_dereq_, module, exports) {
                'use strict';
                var util = _dereq_('./util'), Actor = _dereq_('./actor'), Dispatcher = function (t, r) {
                        var o = this;
                        this.workerPool = t, this.actors = [], this.currentActor = 0, this.id = util.uniqueId();
                        for (var i = this.workerPool.acquire(this.id), e = 0; e < i.length; e++) {
                            var s = i[e], c = new Actor(s, r, o.id);
                            c.name = 'Worker ' + e, o.actors.push(c);
                        }
                    };
                Dispatcher.prototype.broadcast = function (t, r, o) {
                    o = o || function () {
                    }, util.asyncAll(this.actors, function (o, i) {
                        o.send(t, r, i);
                    }, o);
                }, Dispatcher.prototype.send = function (t, r, o, i) {
                    return ('number' != typeof i || isNaN(i)) && (i = this.currentActor = (this.currentActor + 1) % this.actors.length), this.actors[i].send(t, r, o), i;
                }, Dispatcher.prototype.remove = function () {
                    this.actors.forEach(function (t) {
                        t.remove();
                    }), this.actors = [], this.workerPool.release(this.id);
                }, module.exports = Dispatcher;
            },
            {
                './actor': 250,
                './util': 275
            }
        ],
        259: [
            function (_dereq_, module, exports) {
                'use strict';
                function testProp(e) {
                    for (var t = 0; t < e.length; t++) {
                        if (e[t] in docStyle) {
                            return e[t];
                        }
                    }
                    return e[0];
                }
                var Point = _dereq_('@mapbox/point-geometry'), window = _dereq_('./window');
                exports.create = function (e, t, n) {
                    var o = window.document.createElement(e);
                    return t && (o.className = t), n && n.appendChild(o), o;
                }, exports.createNS = function (e, t) {
                    return window.document.createElementNS(e, t);
                };
                var docStyle = window.document.documentElement.style, selectProp = testProp([
                        'userSelect',
                        'MozUserSelect',
                        'WebkitUserSelect',
                        'msUserSelect'
                    ]), userSelect;
                exports.disableDrag = function () {
                    selectProp && (userSelect = docStyle[selectProp], docStyle[selectProp] = 'none');
                }, exports.enableDrag = function () {
                    selectProp && (docStyle[selectProp] = userSelect);
                };
                var transformProp = testProp([
                    'transform',
                    'WebkitTransform'
                ]);
                exports.setTransform = function (e, t) {
                    e.style[transformProp] = t;
                };
                var suppressClick = function (e) {
                    e.preventDefault(), e.stopPropagation(), window.removeEventListener('click', suppressClick, !0);
                };
                exports.suppressClick = function () {
                    window.addEventListener('click', suppressClick, !0), window.setTimeout(function () {
                        window.removeEventListener('click', suppressClick, !0);
                    }, 0);
                }, exports.mousePos = function (e, t) {
                    var n = e.getBoundingClientRect();
                    return t = t.touches ? t.touches[0] : t, new Point(t.clientX - n.left - e.clientLeft, t.clientY - n.top - e.clientTop);
                }, exports.touchPos = function (e, t) {
                    for (var n = e.getBoundingClientRect(), o = [], r = 'touchend' === t.type ? t.changedTouches : t.touches, c = 0; c < r.length; c++) {
                        o.push(new Point(r[c].clientX - n.left - e.clientLeft, r[c].clientY - n.top - e.clientTop));
                    }
                    return o;
                }, exports.remove = function (e) {
                    e.parentNode && e.parentNode.removeChild(e);
                };
            },
            {
                './window': 254,
                '@mapbox/point-geometry': 4
            }
        ],
        260: [
            function (_dereq_, module, exports) {
                'use strict';
                function _addEventListener(e, t, n) {
                    n[e] = n[e] || [], n[e].push(t);
                }
                function _removeEventListener(e, t, n) {
                    if (n && n[e]) {
                        var i = n[e].indexOf(t);
                        -1 !== i && n[e].splice(i, 1);
                    }
                }
                var util = _dereq_('./util'), Evented = function () {
                    };
                Evented.prototype.on = function (e, t) {
                    return this._listeners = this._listeners || {}, _addEventListener(e, t, this._listeners), this;
                }, Evented.prototype.off = function (e, t) {
                    return _removeEventListener(e, t, this._listeners), _removeEventListener(e, t, this._oneTimeListeners), this;
                }, Evented.prototype.once = function (e, t) {
                    return this._oneTimeListeners = this._oneTimeListeners || {}, _addEventListener(e, t, this._oneTimeListeners), this;
                }, Evented.prototype.fire = function (e, t) {
                    var n = this;
                    if (this.listens(e)) {
                        t = util.extend({}, t, {
                            type: e,
                            target: this
                        });
                        for (var i = this._listeners && this._listeners[e] ? this._listeners[e].slice() : [], s = 0, r = i; s < r.length; s += 1) {
                            r[s].call(n, t);
                        }
                        for (var o = this._oneTimeListeners && this._oneTimeListeners[e] ? this._oneTimeListeners[e].slice() : [], h = 0, _ = o; h < _.length; h += 1) {
                            var v = _[h];
                            _removeEventListener(e, v, n._oneTimeListeners), v.call(n, t);
                        }
                        this._eventedParent && this._eventedParent.fire(e, util.extend({}, t, 'function' == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData));
                    } else {
                        util.endsWith(e, 'error') && console.error(t && t.error || t || 'Empty error event');
                    }
                    return this;
                }, Evented.prototype.listens = function (e) {
                    return this._listeners && this._listeners[e] && this._listeners[e].length > 0 || this._oneTimeListeners && this._oneTimeListeners[e] && this._oneTimeListeners[e].length > 0 || this._eventedParent && this._eventedParent.listens(e);
                }, Evented.prototype.setEventedParent = function (e, t) {
                    return this._eventedParent = e, this._eventedParentData = t, this;
                }, module.exports = Evented;
            },
            { './util': 275 }
        ],
        261: [
            function (_dereq_, module, exports) {
                'use strict';
                function compareMax(e, t) {
                    return t.max - e.max;
                }
                function Cell(e, t, n, o) {
                    this.p = new Point(e, t), this.h = n, this.d = pointToPolygonDist(this.p, o), this.max = this.d + this.h * Math.SQRT2;
                }
                function pointToPolygonDist(e, t) {
                    for (var n = !1, o = 1 / 0, r = 0; r < t.length; r++) {
                        for (var i = t[r], l = 0, u = i.length, a = u - 1; l < u; a = l++) {
                            var s = i[l], p = i[a];
                            s.y > e.y != p.y > e.y && e.x < (p.x - s.x) * (e.y - s.y) / (p.y - s.y) + s.x && (n = !n), o = Math.min(o, distToSegmentSquared(e, s, p));
                        }
                    }
                    return (n ? 1 : -1) * Math.sqrt(o);
                }
                function getCentroidCell(e) {
                    for (var t = 0, n = 0, o = 0, r = e[0], i = 0, l = r.length, u = l - 1; i < l; u = i++) {
                        var a = r[i], s = r[u], p = a.x * s.y - s.x * a.y;
                        n += (a.x + s.x) * p, o += (a.y + s.y) * p, t += 3 * p;
                    }
                    return new Cell(n / t, o / t, 0, e);
                }
                var Queue = _dereq_('tinyqueue'), Point = _dereq_('@mapbox/point-geometry'), distToSegmentSquared = _dereq_('./intersection_tests').distToSegmentSquared;
                module.exports = function (e, t, n) {
                    void 0 === t && (t = 1), void 0 === n && (n = !1);
                    for (var o = 1 / 0, r = 1 / 0, i = -1 / 0, l = -1 / 0, u = e[0], a = 0; a < u.length; a++) {
                        var s = u[a];
                        (!a || s.x < o) && (o = s.x), (!a || s.y < r) && (r = s.y), (!a || s.x > i) && (i = s.x), (!a || s.y > l) && (l = s.y);
                    }
                    var p = i - o, h = l - r, d = Math.min(p, h), x = d / 2, y = new Queue(null, compareMax);
                    if (0 === d) {
                        return new Point(o, r);
                    }
                    for (var g = o; g < i; g += d) {
                        for (var f = r; f < l; f += d) {
                            y.push(new Cell(g + x, f + x, x, e));
                        }
                    }
                    for (var m = getCentroidCell(e), v = y.length; y.length;) {
                        var c = y.pop();
                        (c.d > m.d || !m.d) && (m = c, n && console.log('found best %d after %d probes', Math.round(10000 * c.d) / 10000, v)), c.max - m.d <= t || (x = c.h / 2, y.push(new Cell(c.p.x - x, c.p.y - x, x, e)), y.push(new Cell(c.p.x + x, c.p.y - x, x, e)), y.push(new Cell(c.p.x - x, c.p.y + x, x, e)), y.push(new Cell(c.p.x + x, c.p.y + x, x, e)), v += 4);
                    }
                    return n && (console.log('num probes: ' + v), console.log('best distance: ' + m.d)), m.p;
                };
            },
            {
                './intersection_tests': 264,
                '@mapbox/point-geometry': 4,
                'tinyqueue': 33
            }
        ],
        262: [
            function (_dereq_, module, exports) {
                'use strict';
                var WorkerPool = _dereq_('./worker_pool'), globalWorkerPool;
                module.exports = function () {
                    return globalWorkerPool || (globalWorkerPool = new WorkerPool()), globalWorkerPool;
                };
            },
            { './worker_pool': 279 }
        ],
        263: [
            function (_dereq_, module, exports) {
                'use strict';
                function createImage(e, t, i, h) {
                    var a = t.width, r = t.height;
                    if (h) {
                        if (h.length !== a * r * i) {
                            throw new RangeError('mismatched image size');
                        }
                    } else {
                        h = new Uint8Array(a * r * i);
                    }
                    return e.width = a, e.height = r, e.data = h, e;
                }
                function resizeImage(e, t, i) {
                    var h = t.width, a = t.height;
                    if (h !== e.width || a !== e.height) {
                        var r = createImage({}, {
                            width: h,
                            height: a
                        }, i);
                        copyImage(e, r, {
                            x: 0,
                            y: 0
                        }, {
                            x: 0,
                            y: 0
                        }, {
                            width: Math.min(e.width, h),
                            height: Math.min(e.height, a)
                        }, i), e.width = h, e.height = a, e.data = r.data;
                    }
                }
                function copyImage(e, t, i, h, a, r) {
                    if (0 === a.width || 0 === a.height) {
                        return t;
                    }
                    if (a.width > e.width || a.height > e.height || i.x > e.width - a.width || i.y > e.height - a.height) {
                        throw new RangeError('out of range source coordinates for image copy');
                    }
                    if (a.width > t.width || a.height > t.height || h.x > t.width - a.width || h.y > t.height - a.height) {
                        throw new RangeError('out of range destination coordinates for image copy');
                    }
                    for (var g = e.data, n = t.data, o = 0; o < a.height; o++) {
                        for (var m = ((i.y + o) * e.width + i.x) * r, w = ((h.y + o) * t.width + h.x) * r, d = 0; d < a.width * r; d++) {
                            n[w + d] = g[m + d];
                        }
                    }
                    return t;
                }
                var ref = _dereq_('./web_worker_transfer'), register = ref.register, AlphaImage = function (e, t) {
                        createImage(this, e, 1, t);
                    };
                AlphaImage.prototype.resize = function (e) {
                    resizeImage(this, e, 1);
                }, AlphaImage.prototype.clone = function () {
                    return new AlphaImage({
                        width: this.width,
                        height: this.height
                    }, new Uint8Array(this.data));
                }, AlphaImage.copy = function (e, t, i, h, a) {
                    copyImage(e, t, i, h, a, 1);
                };
                var RGBAImage = function (e, t) {
                    createImage(this, e, 4, t);
                };
                RGBAImage.prototype.resize = function (e) {
                    resizeImage(this, e, 4);
                }, RGBAImage.prototype.clone = function () {
                    return new RGBAImage({
                        width: this.width,
                        height: this.height
                    }, new Uint8Array(this.data));
                }, RGBAImage.copy = function (e, t, i, h, a) {
                    copyImage(e, t, i, h, a, 4);
                }, register('AlphaImage', AlphaImage), register('RGBAImage', RGBAImage), module.exports = {
                    AlphaImage: AlphaImage,
                    RGBAImage: RGBAImage
                };
            },
            { './web_worker_transfer': 278 }
        ],
        264: [
            function (_dereq_, module, exports) {
                'use strict';
                function polygonIntersectsPolygon(n, t) {
                    for (var e = 0; e < n.length; e++) {
                        if (polygonContainsPoint(t, n[e])) {
                            return !0;
                        }
                    }
                    for (var r = 0; r < t.length; r++) {
                        if (polygonContainsPoint(n, t[r])) {
                            return !0;
                        }
                    }
                    return !!lineIntersectsLine(n, t);
                }
                function multiPolygonIntersectsBufferedMultiPoint(n, t, e) {
                    for (var r = 0; r < n.length; r++) {
                        for (var o = n[r], i = 0; i < t.length; i++) {
                            for (var l = t[i], u = 0; u < l.length; u++) {
                                var s = l[u];
                                if (polygonContainsPoint(o, s)) {
                                    return !0;
                                }
                                if (pointIntersectsBufferedLine(s, o, e)) {
                                    return !0;
                                }
                            }
                        }
                    }
                    return !1;
                }
                function multiPolygonIntersectsMultiPolygon(n, t) {
                    if (1 === n.length && 1 === n[0].length) {
                        return multiPolygonContainsPoint(t, n[0][0]);
                    }
                    for (var e = 0; e < t.length; e++) {
                        for (var r = t[e], o = 0; o < r.length; o++) {
                            if (multiPolygonContainsPoint(n, r[o])) {
                                return !0;
                            }
                        }
                    }
                    for (var i = 0; i < n.length; i++) {
                        for (var l = n[i], u = 0; u < l.length; u++) {
                            if (multiPolygonContainsPoint(t, l[u])) {
                                return !0;
                            }
                        }
                        for (var s = 0; s < t.length; s++) {
                            if (lineIntersectsLine(l, t[s])) {
                                return !0;
                            }
                        }
                    }
                    return !1;
                }
                function multiPolygonIntersectsBufferedMultiLine(n, t, e) {
                    for (var r = 0; r < t.length; r++) {
                        for (var o = t[r], i = 0; i < n.length; i++) {
                            var l = n[i];
                            if (l.length >= 3) {
                                for (var u = 0; u < o.length; u++) {
                                    if (polygonContainsPoint(l, o[u])) {
                                        return !0;
                                    }
                                }
                            }
                            if (lineIntersectsBufferedLine(l, o, e)) {
                                return !0;
                            }
                        }
                    }
                    return !1;
                }
                function lineIntersectsBufferedLine(n, t, e) {
                    if (n.length > 1) {
                        if (lineIntersectsLine(n, t)) {
                            return !0;
                        }
                        for (var r = 0; r < t.length; r++) {
                            if (pointIntersectsBufferedLine(t[r], n, e)) {
                                return !0;
                            }
                        }
                    }
                    for (var o = 0; o < n.length; o++) {
                        if (pointIntersectsBufferedLine(n[o], t, e)) {
                            return !0;
                        }
                    }
                    return !1;
                }
                function lineIntersectsLine(n, t) {
                    if (0 === n.length || 0 === t.length) {
                        return !1;
                    }
                    for (var e = 0; e < n.length - 1; e++) {
                        for (var r = n[e], o = n[e + 1], i = 0; i < t.length - 1; i++) {
                            var l = t[i], u = t[i + 1];
                            if (lineSegmentIntersectsLineSegment(r, o, l, u)) {
                                return !0;
                            }
                        }
                    }
                    return !1;
                }
                function lineSegmentIntersectsLineSegment(n, t, e, r) {
                    return isCounterClockwise(n, e, r) !== isCounterClockwise(t, e, r) && isCounterClockwise(n, t, e) !== isCounterClockwise(n, t, r);
                }
                function pointIntersectsBufferedLine(n, t, e) {
                    var r = e * e;
                    if (1 === t.length) {
                        return n.distSqr(t[0]) < r;
                    }
                    for (var o = 1; o < t.length; o++) {
                        if (distToSegmentSquared(n, t[o - 1], t[o]) < r) {
                            return !0;
                        }
                    }
                    return !1;
                }
                function distToSegmentSquared(n, t, e) {
                    var r = t.distSqr(e);
                    if (0 === r) {
                        return n.distSqr(t);
                    }
                    var o = ((n.x - t.x) * (e.x - t.x) + (n.y - t.y) * (e.y - t.y)) / r;
                    return o < 0 ? n.distSqr(t) : o > 1 ? n.distSqr(e) : n.distSqr(e.sub(t)._mult(o)._add(t));
                }
                function multiPolygonContainsPoint(n, t) {
                    for (var e, r, o, i = !1, l = 0; l < n.length; l++) {
                        e = n[l];
                        for (var u = 0, s = e.length - 1; u < e.length; s = u++) {
                            r = e[u], o = e[s], r.y > t.y != o.y > t.y && t.x < (o.x - r.x) * (t.y - r.y) / (o.y - r.y) + r.x && (i = !i);
                        }
                    }
                    return i;
                }
                function polygonContainsPoint(n, t) {
                    for (var e = !1, r = 0, o = n.length - 1; r < n.length; o = r++) {
                        var i = n[r], l = n[o];
                        i.y > t.y != l.y > t.y && t.x < (l.x - i.x) * (t.y - i.y) / (l.y - i.y) + i.x && (e = !e);
                    }
                    return e;
                }
                var ref = _dereq_('./util'), isCounterClockwise = ref.isCounterClockwise;
                module.exports = {
                    multiPolygonIntersectsBufferedMultiPoint: multiPolygonIntersectsBufferedMultiPoint,
                    multiPolygonIntersectsMultiPolygon: multiPolygonIntersectsMultiPolygon,
                    multiPolygonIntersectsBufferedMultiLine: multiPolygonIntersectsBufferedMultiLine,
                    polygonIntersectsPolygon: polygonIntersectsPolygon,
                    distToSegmentSquared: distToSegmentSquared
                };
            },
            { './util': 275 }
        ],
        265: [
            function (_dereq_, module, exports) {
                'use strict';
                var unicodeBlockLookup = {
                    'Latin-1 Supplement': function (n) {
                        return n >= 128 && n <= 255;
                    },
                    Arabic: function (n) {
                        return n >= 1536 && n <= 1791;
                    },
                    'Arabic Supplement': function (n) {
                        return n >= 1872 && n <= 1919;
                    },
                    'Arabic Extended-A': function (n) {
                        return n >= 2208 && n <= 2303;
                    },
                    'Hangul Jamo': function (n) {
                        return n >= 4352 && n <= 4607;
                    },
                    'Unified Canadian Aboriginal Syllabics': function (n) {
                        return n >= 5120 && n <= 5759;
                    },
                    'Unified Canadian Aboriginal Syllabics Extended': function (n) {
                        return n >= 6320 && n <= 6399;
                    },
                    'General Punctuation': function (n) {
                        return n >= 8192 && n <= 8303;
                    },
                    'Letterlike Symbols': function (n) {
                        return n >= 8448 && n <= 8527;
                    },
                    'Number Forms': function (n) {
                        return n >= 8528 && n <= 8591;
                    },
                    'Miscellaneous Technical': function (n) {
                        return n >= 8960 && n <= 9215;
                    },
                    'Control Pictures': function (n) {
                        return n >= 9216 && n <= 9279;
                    },
                    'Optical Character Recognition': function (n) {
                        return n >= 9280 && n <= 9311;
                    },
                    'Enclosed Alphanumerics': function (n) {
                        return n >= 9312 && n <= 9471;
                    },
                    'Geometric Shapes': function (n) {
                        return n >= 9632 && n <= 9727;
                    },
                    'Miscellaneous Symbols': function (n) {
                        return n >= 9728 && n <= 9983;
                    },
                    'Miscellaneous Symbols and Arrows': function (n) {
                        return n >= 11008 && n <= 11263;
                    },
                    'CJK Radicals Supplement': function (n) {
                        return n >= 11904 && n <= 12031;
                    },
                    'Kangxi Radicals': function (n) {
                        return n >= 12032 && n <= 12255;
                    },
                    'Ideographic Description Characters': function (n) {
                        return n >= 12272 && n <= 12287;
                    },
                    'CJK Symbols and Punctuation': function (n) {
                        return n >= 12288 && n <= 12351;
                    },
                    Hiragana: function (n) {
                        return n >= 12352 && n <= 12447;
                    },
                    Katakana: function (n) {
                        return n >= 12448 && n <= 12543;
                    },
                    Bopomofo: function (n) {
                        return n >= 12544 && n <= 12591;
                    },
                    'Hangul Compatibility Jamo': function (n) {
                        return n >= 12592 && n <= 12687;
                    },
                    Kanbun: function (n) {
                        return n >= 12688 && n <= 12703;
                    },
                    'Bopomofo Extended': function (n) {
                        return n >= 12704 && n <= 12735;
                    },
                    'CJK Strokes': function (n) {
                        return n >= 12736 && n <= 12783;
                    },
                    'Katakana Phonetic Extensions': function (n) {
                        return n >= 12784 && n <= 12799;
                    },
                    'Enclosed CJK Letters and Months': function (n) {
                        return n >= 12800 && n <= 13055;
                    },
                    'CJK Compatibility': function (n) {
                        return n >= 13056 && n <= 13311;
                    },
                    'CJK Unified Ideographs Extension A': function (n) {
                        return n >= 13312 && n <= 19903;
                    },
                    'Yijing Hexagram Symbols': function (n) {
                        return n >= 19904 && n <= 19967;
                    },
                    'CJK Unified Ideographs': function (n) {
                        return n >= 19968 && n <= 40959;
                    },
                    'Yi Syllables': function (n) {
                        return n >= 40960 && n <= 42127;
                    },
                    'Yi Radicals': function (n) {
                        return n >= 42128 && n <= 42191;
                    },
                    'Hangul Jamo Extended-A': function (n) {
                        return n >= 43360 && n <= 43391;
                    },
                    'Hangul Syllables': function (n) {
                        return n >= 44032 && n <= 55215;
                    },
                    'Hangul Jamo Extended-B': function (n) {
                        return n >= 55216 && n <= 55295;
                    },
                    'Private Use Area': function (n) {
                        return n >= 57344 && n <= 63743;
                    },
                    'CJK Compatibility Ideographs': function (n) {
                        return n >= 63744 && n <= 64255;
                    },
                    'Arabic Presentation Forms-A': function (n) {
                        return n >= 64336 && n <= 65023;
                    },
                    'Vertical Forms': function (n) {
                        return n >= 65040 && n <= 65055;
                    },
                    'CJK Compatibility Forms': function (n) {
                        return n >= 65072 && n <= 65103;
                    },
                    'Small Form Variants': function (n) {
                        return n >= 65104 && n <= 65135;
                    },
                    'Arabic Presentation Forms-B': function (n) {
                        return n >= 65136 && n <= 65279;
                    },
                    'Halfwidth and Fullwidth Forms': function (n) {
                        return n >= 65280 && n <= 65519;
                    }
                };
                module.exports = unicodeBlockLookup;
            },
            {}
        ],
        266: [
            function (_dereq_, module, exports) {
                'use strict';
                var LRUCache = function (t, e) {
                    this.max = t, this.onRemove = e, this.reset();
                };
                LRUCache.prototype.reset = function () {
                    var t = this;
                    for (var e in t.data) {
                        t.onRemove(t.data[e]);
                    }
                    return this.data = {}, this.order = [], this;
                }, LRUCache.prototype.add = function (t, e) {
                    if (this.has(t)) {
                        this.order.splice(this.order.indexOf(t), 1), this.data[t] = e, this.order.push(t);
                    } else if (this.data[t] = e, this.order.push(t), this.order.length > this.max) {
                        var r = this.getAndRemove(this.order[0]);
                        r && this.onRemove(r);
                    }
                    return this;
                }, LRUCache.prototype.has = function (t) {
                    return t in this.data;
                }, LRUCache.prototype.keys = function () {
                    return this.order;
                }, LRUCache.prototype.getAndRemove = function (t) {
                    if (!this.has(t)) {
                        return null;
                    }
                    var e = this.data[t];
                    return delete this.data[t], this.order.splice(this.order.indexOf(t), 1), e;
                }, LRUCache.prototype.get = function (t) {
                    return this.has(t) ? this.data[t] : null;
                }, LRUCache.prototype.remove = function (t) {
                    if (!this.has(t)) {
                        return this;
                    }
                    var e = this.data[t];
                    return delete this.data[t], this.onRemove(e), this.order.splice(this.order.indexOf(t), 1), this;
                }, LRUCache.prototype.setMaxSize = function (t) {
                    var e = this;
                    for (this.max = t; this.order.length > this.max;) {
                        var r = e.getAndRemove(e.order[0]);
                        r && e.onRemove(r);
                    }
                    return this;
                }, module.exports = LRUCache;
            },
            {}
        ],
        267: [
            function (_dereq_, module, exports) {
                'use strict';
                function makeAPIURL(r, e) {
                    var t = parseUrl(config.API_URL);
                    if (r.protocol = t.protocol, r.authority = t.authority, '/' !== t.path && (r.path = '' + t.path + r.path), !config.REQUIRE_ACCESS_TOKEN) {
                        return formatUrl(r);
                    }
                    if (!(e = e || config.ACCESS_TOKEN)) {
                        throw new Error('An API access token is required to use Mapbox GL. ' + help);
                    }
                    if ('s' === e[0]) {
                        throw new Error('Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ' + help);
                    }
                    return r.params.push('access_token=' + e), formatUrl(r);
                }
                function isMapboxURL(r) {
                    return 0 === r.indexOf('mapbox:');
                }
                function replaceTempAccessToken(r) {
                    for (var e = 0; e < r.length; e++) {
                        0 === r[e].indexOf('access_token=tk.') && (r[e] = 'access_token=' + (config.ACCESS_TOKEN || ''));
                    }
                }
                function parseUrl(r) {
                    var e = r.match(urlRe);
                    if (!e) {
                        throw new Error('Unable to parse URL object');
                    }
                    return {
                        protocol: e[1],
                        authority: e[2],
                        path: e[3] || '/',
                        params: e[4] ? e[4].split('&') : []
                    };
                }
                function formatUrl(r) {
                    var e = r.params.length ? '?' + r.params.join('&') : '';
                    return r.protocol + '://' + r.authority + r.path + e;
                }
                var config = _dereq_('./config'), browser = _dereq_('./browser'), help = 'See https://www.mapbox.com/api-documentation/#access-tokens';
                exports.isMapboxURL = isMapboxURL, exports.normalizeStyleURL = function (r, e) {
                    if (!isMapboxURL(r)) {
                        return r;
                    }
                    var t = parseUrl(r);
                    return t.path = '/styles/v1' + t.path, makeAPIURL(t, e);
                }, exports.normalizeGlyphsURL = function (r, e) {
                    if (!isMapboxURL(r)) {
                        return r;
                    }
                    var t = parseUrl(r);
                    return t.path = '/fonts/v1' + t.path, makeAPIURL(t, e);
                }, exports.normalizeSourceURL = function (r, e) {
                    if (!isMapboxURL(r)) {
                        return r;
                    }
                    var t = parseUrl(r);
                    return t.path = '/v4/' + t.authority + '.json', t.params.push('secure'), makeAPIURL(t, e);
                }, exports.normalizeSpriteURL = function (r, e, t, a) {
                    var o = parseUrl(r);
                    return isMapboxURL(r) ? (o.path = '/styles/v1' + o.path + '/sprite' + e + t, makeAPIURL(o, a)) : (o.path += '' + e + t, formatUrl(o));
                };
                var imageExtensionRe = /(\.(png|jpg)\d*)(?=$)/;
                exports.normalizeTileURL = function (r, e, t) {
                    if (!e || !isMapboxURL(e)) {
                        return r;
                    }
                    var a = parseUrl(r), o = browser.devicePixelRatio >= 2 || 512 === t ? '@2x' : '', p = browser.supportsWebp ? '.webp' : '$1';
                    return a.path = a.path.replace(imageExtensionRe, '' + o + p), replaceTempAccessToken(a.params), formatUrl(a);
                };
                var urlRe = /^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;
            },
            {
                './browser': 252,
                './config': 256
            }
        ],
        268: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = {
                    getEntriesByName: function (e) {
                        return !(!performance || !performance.getEntriesByName) && performance.getEntriesByName(e);
                    }
                };
            },
            {}
        ],
        269: [
            function (_dereq_, module, exports) {
                'use strict';
                var isChar = _dereq_('./is_char_in_unicode_block');
                module.exports.allowsIdeographicBreaking = function (a) {
                    for (var i = 0, r = a; i < r.length; i += 1) {
                        var s = r[i];
                        if (!exports.charAllowsIdeographicBreaking(s.charCodeAt(0))) {
                            return !1;
                        }
                    }
                    return !0;
                }, module.exports.allowsVerticalWritingMode = function (a) {
                    for (var i = 0, r = a; i < r.length; i += 1) {
                        var s = r[i];
                        if (exports.charHasUprightVerticalOrientation(s.charCodeAt(0))) {
                            return !0;
                        }
                    }
                    return !1;
                }, module.exports.allowsLetterSpacing = function (a) {
                    for (var i = 0, r = a; i < r.length; i += 1) {
                        var s = r[i];
                        if (!exports.charAllowsLetterSpacing(s.charCodeAt(0))) {
                            return !1;
                        }
                    }
                    return !0;
                }, module.exports.charAllowsLetterSpacing = function (a) {
                    return !isChar.Arabic(a) && (!isChar['Arabic Supplement'](a) && (!isChar['Arabic Extended-A'](a) && (!isChar['Arabic Presentation Forms-A'](a) && !isChar['Arabic Presentation Forms-B'](a))));
                }, module.exports.charAllowsIdeographicBreaking = function (a) {
                    return !(a < 11904) && (!!isChar['Bopomofo Extended'](a) || (!!isChar.Bopomofo(a) || (!!isChar['CJK Compatibility Forms'](a) || (!!isChar['CJK Compatibility Ideographs'](a) || (!!isChar['CJK Compatibility'](a) || (!!isChar['CJK Radicals Supplement'](a) || (!!isChar['CJK Strokes'](a) || (!!isChar['CJK Symbols and Punctuation'](a) || (!!isChar['CJK Unified Ideographs Extension A'](a) || (!!isChar['CJK Unified Ideographs'](a) || (!!isChar['Enclosed CJK Letters and Months'](a) || (!!isChar['Halfwidth and Fullwidth Forms'](a) || (!!isChar.Hiragana(a) || (!!isChar['Ideographic Description Characters'](a) || (!!isChar['Kangxi Radicals'](a) || (!!isChar['Katakana Phonetic Extensions'](a) || (!!isChar.Katakana(a) || (!!isChar['Vertical Forms'](a) || (!!isChar['Yi Radicals'](a) || !!isChar['Yi Syllables'](a))))))))))))))))))));
                }, exports.charHasUprightVerticalOrientation = function (a) {
                    return 746 === a || 747 === a || !(a < 4352) && (!!isChar['Bopomofo Extended'](a) || (!!isChar.Bopomofo(a) || (!(!isChar['CJK Compatibility Forms'](a) || a >= 65097 && a <= 65103) || (!!isChar['CJK Compatibility Ideographs'](a) || (!!isChar['CJK Compatibility'](a) || (!!isChar['CJK Radicals Supplement'](a) || (!!isChar['CJK Strokes'](a) || (!(!isChar['CJK Symbols and Punctuation'](a) || a >= 12296 && a <= 12305 || a >= 12308 && a <= 12319 || 12336 === a) || (!!isChar['CJK Unified Ideographs Extension A'](a) || (!!isChar['CJK Unified Ideographs'](a) || (!!isChar['Enclosed CJK Letters and Months'](a) || (!!isChar['Hangul Compatibility Jamo'](a) || (!!isChar['Hangul Jamo Extended-A'](a) || (!!isChar['Hangul Jamo Extended-B'](a) || (!!isChar['Hangul Jamo'](a) || (!!isChar['Hangul Syllables'](a) || (!!isChar.Hiragana(a) || (!!isChar['Ideographic Description Characters'](a) || (!!isChar.Kanbun(a) || (!!isChar['Kangxi Radicals'](a) || (!!isChar['Katakana Phonetic Extensions'](a) || (!(!isChar.Katakana(a) || 12540 === a) || (!(!isChar['Halfwidth and Fullwidth Forms'](a) || 65288 === a || 65289 === a || 65293 === a || a >= 65306 && a <= 65310 || 65339 === a || 65341 === a || 65343 === a || a >= 65371 && a <= 65503 || 65507 === a || a >= 65512 && a <= 65519) || (!(!isChar['Small Form Variants'](a) || a >= 65112 && a <= 65118 || a >= 65123 && a <= 65126) || (!!isChar['Unified Canadian Aboriginal Syllabics'](a) || (!!isChar['Unified Canadian Aboriginal Syllabics Extended'](a) || (!!isChar['Vertical Forms'](a) || (!!isChar['Yijing Hexagram Symbols'](a) || (!!isChar['Yi Syllables'](a) || !!isChar['Yi Radicals'](a))))))))))))))))))))))))))))));
                }, exports.charHasNeutralVerticalOrientation = function (a) {
                    return !(!isChar['Latin-1 Supplement'](a) || 167 !== a && 169 !== a && 174 !== a && 177 !== a && 188 !== a && 189 !== a && 190 !== a && 215 !== a && 247 !== a) || (!(!isChar['General Punctuation'](a) || 8214 !== a && 8224 !== a && 8225 !== a && 8240 !== a && 8241 !== a && 8251 !== a && 8252 !== a && 8258 !== a && 8263 !== a && 8264 !== a && 8265 !== a && 8273 !== a) || (!!isChar['Letterlike Symbols'](a) || (!!isChar['Number Forms'](a) || (!(!isChar['Miscellaneous Technical'](a) || !(a >= 8960 && a <= 8967 || a >= 8972 && a <= 8991 || a >= 8996 && a <= 9000 || 9003 === a || a >= 9085 && a <= 9114 || a >= 9150 && a <= 9165 || 9167 === a || a >= 9169 && a <= 9179 || a >= 9186 && a <= 9215)) || (!(!isChar['Control Pictures'](a) || 9251 === a) || (!!isChar['Optical Character Recognition'](a) || (!!isChar['Enclosed Alphanumerics'](a) || (!!isChar['Geometric Shapes'](a) || (!(!isChar['Miscellaneous Symbols'](a) || a >= 9754 && a <= 9759) || (!(!isChar['Miscellaneous Symbols and Arrows'](a) || !(a >= 11026 && a <= 11055 || a >= 11088 && a <= 11097 || a >= 11192 && a <= 11243)) || (!!isChar['CJK Symbols and Punctuation'](a) || (!!isChar.Katakana(a) || (!!isChar['Private Use Area'](a) || (!!isChar['CJK Compatibility Forms'](a) || (!!isChar['Small Form Variants'](a) || (!!isChar['Halfwidth and Fullwidth Forms'](a) || (8734 === a || 8756 === a || 8757 === a || a >= 9984 && a <= 10087 || a >= 10102 && a <= 10131 || 65532 === a || 65533 === a)))))))))))))))));
                }, exports.charHasRotatedVerticalOrientation = function (a) {
                    return !(exports.charHasUprightVerticalOrientation(a) || exports.charHasNeutralVerticalOrientation(a));
                };
            },
            { './is_char_in_unicode_block': 265 }
        ],
        270: [
            function (_dereq_, module, exports) {
                'use strict';
                var LngLat = _dereq_('../geo/lng_lat');
                module.exports = function (n, t, l) {
                    if (n = new LngLat(n.lng, n.lat), t) {
                        var a = new LngLat(n.lng - 360, n.lat), i = new LngLat(n.lng + 360, n.lat), o = l.locationPoint(n).distSqr(t);
                        l.locationPoint(a).distSqr(t) < o ? n = a : l.locationPoint(i).distSqr(t) < o && (n = i);
                    }
                    for (; Math.abs(n.lng - l.center.lng) > 180;) {
                        var e = l.locationPoint(n);
                        if (e.x >= 0 && e.y >= 0 && e.x <= l.width && e.y <= l.height) {
                            break;
                        }
                        n.lng > l.center.lng ? n.lng -= 360 : n.lng += 360;
                    }
                    return n;
                };
            },
            { '../geo/lng_lat': 62 }
        ],
        271: [
            function (_dereq_, module, exports) {
                'use strict';
                function createLayout(t, r) {
                    void 0 === r && (r = 1);
                    var e = 0, i = 0;
                    return {
                        members: t.map(function (t) {
                            var a = sizeOf(t.type), s = e = align(e, Math.max(r, a)), n = t.components || 1;
                            return i = Math.max(i, a), e += a * n, {
                                name: t.name,
                                type: t.type,
                                components: n,
                                offset: s
                            };
                        }),
                        size: align(e, Math.max(i, r)),
                        alignment: r
                    };
                }
                function sizeOf(t) {
                    return viewTypes[t].BYTES_PER_ELEMENT;
                }
                function align(t, r) {
                    return Math.ceil(t / r) * r;
                }
                var viewTypes = {
                        Int8: Int8Array,
                        Uint8: Uint8Array,
                        Int16: Int16Array,
                        Uint16: Uint16Array,
                        Int32: Int32Array,
                        Uint32: Uint32Array,
                        Float32: Float32Array
                    }, Struct = function (t, r) {
                        this._structArray = t, this._pos1 = r * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;
                    }, DEFAULT_CAPACITY = 128, RESIZE_MULTIPLIER = 5, StructArray = function () {
                        this.isTransferred = !1, this.capacity = -1, this.resize(0);
                    };
                StructArray.serialize = function (t, r) {
                    return t._trim(), r && (t.isTransferred = !0, r.push(t.arrayBuffer)), {
                        length: t.length,
                        arrayBuffer: t.arrayBuffer
                    };
                }, StructArray.deserialize = function (t) {
                    var r = Object.create(this.prototype);
                    return r.arrayBuffer = t.arrayBuffer, r.length = t.length, r.capacity = t.arrayBuffer.byteLength / r.bytesPerElement, r._refreshViews(), r;
                }, StructArray.prototype._trim = function () {
                    this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());
                }, StructArray.prototype.clear = function () {
                    this.length = 0;
                }, StructArray.prototype.resize = function (t) {
                    this.reserve(t), this.length = t;
                }, StructArray.prototype.reserve = function (t) {
                    if (t > this.capacity) {
                        this.capacity = Math.max(t, Math.floor(this.capacity * RESIZE_MULTIPLIER), DEFAULT_CAPACITY), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);
                        var r = this.uint8;
                        this._refreshViews(), r && this.uint8.set(r);
                    }
                }, StructArray.prototype._refreshViews = function () {
                    throw new Error('_refreshViews() must be implemented by each concrete StructArray layout');
                }, module.exports.StructArray = StructArray, module.exports.Struct = Struct, module.exports.viewTypes = viewTypes, module.exports.createLayout = createLayout;
            },
            {}
        ],
        272: [
            function (_dereq_, module, exports) {
                'use strict';
                module.exports = function (t, n) {
                    var u = !1, e = 0, r = function () {
                            e = 0, u && (t(), e = setTimeout(r, n), u = !1);
                        };
                    return function () {
                        return u = !0, e || r(), e;
                    };
                };
            },
            {}
        ],
        273: [
            function (_dereq_, module, exports) {
                'use strict';
                function tileCover(e, r, a, n) {
                    function d(r, d, t) {
                        var y, c, l, x;
                        if (t >= 0 && t <= o) {
                            for (y = r; y < d; y++) {
                                c = Math.floor(y / o), l = (y % o + o) % o, 0 !== c && !0 !== n || (x = new OverscaledTileID(a, c, e, l, t), i[x.key] = x);
                            }
                        }
                    }
                    void 0 === n && (n = !0);
                    var o = 1 << e, i = {};
                    return scanTriangle(r[0], r[1], r[2], 0, o, d), scanTriangle(r[2], r[3], r[0], 0, o, d), Object.keys(i).map(function (e) {
                        return i[e];
                    });
                }
                function edge(e, r) {
                    if (e.row > r.row) {
                        var a = e;
                        e = r, r = a;
                    }
                    return {
                        x0: e.column,
                        y0: e.row,
                        x1: r.column,
                        y1: r.row,
                        dx: r.column - e.column,
                        dy: r.row - e.row
                    };
                }
                function scanSpans(e, r, a, n, d) {
                    var o = Math.max(a, Math.floor(r.y0)), i = Math.min(n, Math.ceil(r.y1));
                    if (e.x0 === r.x0 && e.y0 === r.y0 ? e.x0 + r.dy / e.dy * e.dx < r.x1 : e.x1 - r.dy / e.dy * e.dx < r.x0) {
                        var t = e;
                        e = r, r = t;
                    }
                    for (var y = e.dx / e.dy, c = r.dx / r.dy, l = e.dx > 0, x = r.dx < 0, u = o; u < i; u++) {
                        var s = y * Math.max(0, Math.min(e.dy, u + l - e.y0)) + e.x0, f = c * Math.max(0, Math.min(r.dy, u + x - r.y0)) + r.x0;
                        d(Math.floor(f), Math.ceil(s), u);
                    }
                }
                function scanTriangle(e, r, a, n, d, o) {
                    var i, t = edge(e, r), y = edge(r, a), c = edge(a, e);
                    t.dy > y.dy && (i = t, t = y, y = i), t.dy > c.dy && (i = t, t = c, c = i), y.dy > c.dy && (i = y, y = c, c = i), t.dy && scanSpans(c, t, n, d, o), y.dy && scanSpans(c, y, n, d, o);
                }
                var Coordinate = _dereq_('../geo/coordinate'), ref = _dereq_('../source/tile_id'), OverscaledTileID = ref.OverscaledTileID;
                module.exports = tileCover;
            },
            {
                '../geo/coordinate': 61,
                '../source/tile_id': 114
            }
        ],
        274: [
            function (_dereq_, module, exports) {
                'use strict';
                function resolveTokens(e, n) {
                    return n.replace(/{([^{}]+)}/g, function (n, r) {
                        return r in e ? String(e[r]) : '';
                    });
                }
                module.exports = resolveTokens;
            },
            {}
        ],
        275: [
            function (_dereq_, module, exports) {
                'use strict';
                var UnitBezier = _dereq_('@mapbox/unitbezier'), Coordinate = _dereq_('../geo/coordinate'), Point = _dereq_('@mapbox/point-geometry');
                exports.easeCubicInOut = function (r) {
                    if (r <= 0) {
                        return 0;
                    }
                    if (r >= 1) {
                        return 1;
                    }
                    var e = r * r, n = e * r;
                    return 4 * (r < 0.5 ? n : 3 * (r - e) + n - 0.75);
                }, exports.bezier = function (r, e, n, t) {
                    var o = new UnitBezier(r, e, n, t);
                    return function (r) {
                        return o.solve(r);
                    };
                }, exports.ease = exports.bezier(0.25, 0.1, 0.25, 1), exports.clamp = function (r, e, n) {
                    return Math.min(n, Math.max(e, r));
                }, exports.wrap = function (r, e, n) {
                    var t = n - e, o = ((r - e) % t + t) % t + e;
                    return o === e ? n : o;
                }, exports.asyncAll = function (r, e, n) {
                    if (!r.length) {
                        return n(null, []);
                    }
                    var t = r.length, o = new Array(r.length), a = null;
                    r.forEach(function (r, i) {
                        e(r, function (r, e) {
                            r && (a = r), o[i] = e, 0 == --t && n(a, o);
                        });
                    });
                }, exports.values = function (r) {
                    var e = [];
                    for (var n in r) {
                        e.push(r[n]);
                    }
                    return e;
                }, exports.keysDifference = function (r, e) {
                    var n = [];
                    for (var t in r) {
                        t in e || n.push(t);
                    }
                    return n;
                }, exports.extend = function (r) {
                    var arguments$1 = arguments;
                    for (var e = [], n = arguments.length - 1; n-- > 0;) {
                        e[n] = arguments$1[n + 1];
                    }
                    for (var t = 0, o = e; t < o.length; t += 1) {
                        var a = o[t];
                        for (var i in a) {
                            r[i] = a[i];
                        }
                    }
                    return r;
                }, exports.pick = function (r, e) {
                    for (var n = {}, t = 0; t < e.length; t++) {
                        var o = e[t];
                        o in r && (n[o] = r[o]);
                    }
                    return n;
                };
                var id = 1;
                exports.uniqueId = function () {
                    return id++;
                }, exports.bindAll = function (r, e) {
                    r.forEach(function (r) {
                        e[r] && (e[r] = e[r].bind(e));
                    });
                }, exports.getCoordinatesCenter = function (r) {
                    for (var e = 1 / 0, n = 1 / 0, t = -1 / 0, o = -1 / 0, a = 0; a < r.length; a++) {
                        e = Math.min(e, r[a].column), n = Math.min(n, r[a].row), t = Math.max(t, r[a].column), o = Math.max(o, r[a].row);
                    }
                    var i = t - e, u = o - n, s = Math.max(i, u), c = Math.max(0, Math.floor(-Math.log(s) / Math.LN2));
                    return new Coordinate((e + t) / 2, (n + o) / 2, 0).zoomTo(c);
                }, exports.endsWith = function (r, e) {
                    return -1 !== r.indexOf(e, r.length - e.length);
                }, exports.mapObject = function (r, e, n) {
                    var t = this, o = {};
                    for (var a in r) {
                        o[a] = e.call(n || t, r[a], a, r);
                    }
                    return o;
                }, exports.filterObject = function (r, e, n) {
                    var t = this, o = {};
                    for (var a in r) {
                        e.call(n || t, r[a], a, r) && (o[a] = r[a]);
                    }
                    return o;
                }, exports.deepEqual = _dereq_('../style-spec/util/deep_equal'), exports.clone = function (r) {
                    return Array.isArray(r) ? r.map(exports.clone) : 'object' == typeof r && r ? exports.mapObject(r, exports.clone) : r;
                }, exports.arraysIntersect = function (r, e) {
                    for (var n = 0; n < r.length; n++) {
                        if (e.indexOf(r[n]) >= 0) {
                            return !0;
                        }
                    }
                    return !1;
                };
                var warnOnceHistory = {};
                exports.warnOnce = function (r) {
                    warnOnceHistory[r] || ('undefined' != typeof console && console.warn(r), warnOnceHistory[r] = !0);
                }, exports.isCounterClockwise = function (r, e, n) {
                    return (n.y - r.y) * (e.x - r.x) > (e.y - r.y) * (n.x - r.x);
                }, exports.calculateSignedArea = function (r) {
                    for (var e = 0, n = 0, t = r.length, o = t - 1, a = void 0, i = void 0; n < t; o = n++) {
                        a = r[n], i = r[o], e += (i.x - a.x) * (a.y + i.y);
                    }
                    return e;
                }, exports.isClosedPolygon = function (r) {
                    if (r.length < 4) {
                        return !1;
                    }
                    var e = r[0], n = r[r.length - 1];
                    return !(Math.abs(e.x - n.x) > 0 || Math.abs(e.y - n.y) > 0) && Math.abs(exports.calculateSignedArea(r)) > 0.01;
                }, exports.sphericalToCartesian = function (r) {
                    var e = r[0], n = r[1], t = r[2];
                    return n += 90, n *= Math.PI / 180, t *= Math.PI / 180, {
                        x: e * Math.cos(n) * Math.sin(t),
                        y: e * Math.sin(n) * Math.sin(t),
                        z: e * Math.cos(t)
                    };
                }, exports.parseCacheControl = function (r) {
                    var e = /(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g, n = {};
                    if (r.replace(e, function (r, e, t, o) {
                            var a = t || o;
                            return n[e] = !a || a.toLowerCase(), '';
                        }), n['max-age']) {
                        var t = parseInt(n['max-age'], 10);
                        isNaN(t) ? delete n['max-age'] : n['max-age'] = t;
                    }
                    return n;
                };
            },
            {
                '../geo/coordinate': 61,
                '../style-spec/util/deep_equal': 155,
                '@mapbox/point-geometry': 4,
                '@mapbox/unitbezier': 7
            }
        ],
        276: [
            function (_dereq_, module, exports) {
                'use strict';
                var Feature = function (e, t, r, o) {
                        this.type = 'Feature', this._vectorTileFeature = e, e._z = t, e._x = r, e._y = o, this.properties = e.properties, null != e.id && (this.id = e.id);
                    }, prototypeAccessors = { geometry: {} };
                prototypeAccessors.geometry.get = function () {
                    return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry), this._geometry;
                }, prototypeAccessors.geometry.set = function (e) {
                    this._geometry = e;
                }, Feature.prototype.toJSON = function () {
                    var e = this, t = { geometry: this.geometry };
                    for (var r in e) {
                        '_geometry' !== r && '_vectorTileFeature' !== r && (t[r] = e[r]);
                    }
                    return t;
                }, Object.defineProperties(Feature.prototype, prototypeAccessors), module.exports = Feature;
            },
            {}
        ],
        277: [
            function (_dereq_, module, exports) {
                'use strict';
                var scriptDetection = _dereq_('./script_detection');
                module.exports = function (t) {
                    for (var o = '', e = 0; e < t.length; e++) {
                        var r = t.charCodeAt(e + 1) || null, l = t.charCodeAt(e - 1) || null;
                        (!r || !scriptDetection.charHasRotatedVerticalOrientation(r) || module.exports.lookup[t[e + 1]]) && (!l || !scriptDetection.charHasRotatedVerticalOrientation(l) || module.exports.lookup[t[e - 1]]) && module.exports.lookup[t[e]] ? o += module.exports.lookup[t[e]] : o += t[e];
                    }
                    return o;
                }, module.exports.lookup = {
                    '!': '\uFE15',
                    '#': '\uFF03',
                    $: '\uFF04',
                    '%': '\uFF05',
                    '&': '\uFF06',
                    '(': '\uFE35',
                    ')': '\uFE36',
                    '*': '\uFF0A',
                    '+': '\uFF0B',
                    ',': '\uFE10',
                    '-': '\uFE32',
                    '.': '\u30FB',
                    '/': '\uFF0F',
                    ':': '\uFE13',
                    ';': '\uFE14',
                    '<': '\uFE3F',
                    '=': '\uFF1D',
                    '>': '\uFE40',
                    '?': '\uFE16',
                    '@': '\uFF20',
                    '[': '\uFE47',
                    '\\': '\uFF3C',
                    ']': '\uFE48',
                    '^': '\uFF3E',
                    _: '︳',
                    '`': '\uFF40',
                    '{': '\uFE37',
                    '|': '\u2015',
                    '}': '\uFE38',
                    '~': '\uFF5E',
                    '\xA2': '\uFFE0',
                    '\xA3': '\uFFE1',
                    '\xA5': '\uFFE5',
                    '\xA6': '\uFFE4',
                    '\xAC': '\uFFE2',
                    '\xAF': '\uFFE3',
                    '\u2013': '\uFE32',
                    '\u2014': '\uFE31',
                    '\u2018': '\uFE43',
                    '\u2019': '\uFE44',
                    '\u201C': '\uFE41',
                    '\u201D': '\uFE42',
                    '\u2026': '\uFE19',
                    '\u2027': '\u30FB',
                    '\u20A9': '\uFFE6',
                    '\u3001': '\uFE11',
                    '\u3002': '\uFE12',
                    '\u3008': '\uFE3F',
                    '\u3009': '\uFE40',
                    '\u300A': '\uFE3D',
                    '\u300B': '\uFE3E',
                    '\u300C': '\uFE41',
                    '\u300D': '\uFE42',
                    '\u300E': '\uFE43',
                    '\u300F': '\uFE44',
                    '\u3010': '\uFE3B',
                    '\u3011': '\uFE3C',
                    '\u3014': '\uFE39',
                    '\u3015': '\uFE3A',
                    '\u3016': '\uFE17',
                    '\u3017': '\uFE18',
                    '\uFF01': '\uFE15',
                    '\uFF08': '\uFE35',
                    '\uFF09': '\uFE36',
                    '\uFF0C': '\uFE10',
                    '\uFF0D': '\uFE32',
                    '\uFF0E': '\u30FB',
                    '\uFF1A': '\uFE13',
                    '\uFF1B': '\uFE14',
                    '\uFF1C': '\uFE3F',
                    '\uFF1E': '\uFE40',
                    '\uFF1F': '\uFE16',
                    '\uFF3B': '\uFE47',
                    '\uFF3D': '\uFE48',
                    '＿': '︳',
                    '\uFF5B': '\uFE37',
                    '\uFF5C': '\u2015',
                    '\uFF5D': '\uFE38',
                    '\uFF5F': '\uFE35',
                    '\uFF60': '\uFE36',
                    '\uFF61': '\uFE12',
                    '\uFF62': '\uFE41',
                    '\uFF63': '\uFE42'
                };
            },
            { './script_detection': 269 }
        ],
        278: [
            function (_dereq_, module, exports) {
                'use strict';
                function register(e, r, i) {
                    void 0 === i && (i = {}), Object.defineProperty(r, '_classRegistryKey', {
                        value: e,
                        writeable: !1
                    }), registry[e] = {
                        klass: r,
                        omit: i.omit || [],
                        shallow: i.shallow || []
                    };
                }
                function serialize(e, r) {
                    if (null === e || void 0 === e || 'boolean' == typeof e || 'number' == typeof e || 'string' == typeof e || e instanceof Boolean || e instanceof Number || e instanceof String || e instanceof Date || e instanceof RegExp) {
                        return e;
                    }
                    if (e instanceof ArrayBuffer) {
                        return r && r.push(e), e;
                    }
                    if (ArrayBuffer.isView(e)) {
                        var i = e;
                        return r && r.push(i.buffer), i;
                    }
                    if (e instanceof ImageData) {
                        return r && r.push(e.data.buffer), e;
                    }
                    if (Array.isArray(e)) {
                        for (var s = [], o = 0, t = e; o < t.length; o += 1) {
                            var n = t[o];
                            s.push(serialize(n, r));
                        }
                        return s;
                    }
                    if ('object' == typeof e) {
                        var a = e.constructor, f = a._classRegistryKey;
                        if (!f) {
                            throw new Error('can\'t serialize object of unregistered class');
                        }
                        var l = {};
                        if (a.serialize) {
                            l._serialized = a.serialize(e, r);
                        } else {
                            for (var p in e) {
                                if (e.hasOwnProperty(p) && !(registry[f].omit.indexOf(p) >= 0)) {
                                    var u = e[p];
                                    l[p] = registry[f].shallow.indexOf(p) >= 0 ? u : serialize(u, r);
                                }
                            }
                        }
                        return {
                            name: f,
                            properties: l
                        };
                    }
                    throw new Error('can\'t serialize object of type ' + typeof e);
                }
                function deserialize(e) {
                    if (null === e || void 0 === e || 'boolean' == typeof e || 'number' == typeof e || 'string' == typeof e || e instanceof Boolean || e instanceof Number || e instanceof String || e instanceof Date || e instanceof RegExp || e instanceof ArrayBuffer || ArrayBuffer.isView(e) || e instanceof ImageData) {
                        return e;
                    }
                    if (Array.isArray(e)) {
                        return e.map(function (e) {
                            return deserialize(e);
                        });
                    }
                    if ('object' == typeof e) {
                        var r = e, i = r.name, s = r.properties;
                        if (!i) {
                            throw new Error('can\'t deserialize object of anonymous class');
                        }
                        var o = registry[i], t = o.klass;
                        if (!t) {
                            throw new Error('can\'t deserialize unregistered class ' + i);
                        }
                        if (t.deserialize) {
                            return t.deserialize(s._serialized);
                        }
                        for (var n = Object.create(t.prototype), a = 0, f = Object.keys(s); a < f.length; a += 1) {
                            var l = f[a];
                            n[l] = registry[i].shallow.indexOf(l) >= 0 ? s[l] : deserialize(s[l]);
                        }
                        return n;
                    }
                    throw new Error('can\'t deserialize object of type ' + typeof e);
                }
                var Grid = _dereq_('grid-index'), Color = _dereq_('../style-spec/util/color'), ref = _dereq_('../style-spec/expression'), StylePropertyFunction = ref.StylePropertyFunction, StyleExpression = ref.StyleExpression, StyleExpressionWithErrorHandling = ref.StyleExpressionWithErrorHandling, ZoomDependentExpression = ref.ZoomDependentExpression, ZoomConstantExpression = ref.ZoomConstantExpression, ref$1 = _dereq_('../style-spec/expression/compound_expression'), CompoundExpression = ref$1.CompoundExpression, expressions = _dereq_('../style-spec/expression/definitions'), ref$2 = _dereq_('./window'), ImageData = ref$2.ImageData, registry = {};
                register('Object', Object), Grid.serialize = function (e, r) {
                    var i = e.toArrayBuffer();
                    return r && r.push(i), i;
                }, Grid.deserialize = function (e) {
                    return new Grid(e);
                }, register('Grid', Grid), register('Color', Color), register('StylePropertyFunction', StylePropertyFunction), register('StyleExpression', StyleExpression, { omit: ['_evaluator'] }), register('StyleExpressionWithErrorHandling', StyleExpressionWithErrorHandling, { omit: ['_evaluator'] }), register('ZoomDependentExpression', ZoomDependentExpression), register('ZoomConstantExpression', ZoomConstantExpression), register('CompoundExpression', CompoundExpression, { omit: ['_evaluate'] });
                for (var name in expressions) {
                    expressions[name]._classRegistryKey || register('Expression_' + name, expressions[name]);
                }
                module.exports = {
                    register: register,
                    serialize: serialize,
                    deserialize: deserialize
                };
            },
            {
                '../style-spec/expression': 139,
                '../style-spec/expression/compound_expression': 123,
                '../style-spec/expression/definitions': 131,
                '../style-spec/util/color': 153,
                './window': 254,
                'grid-index': 24
            }
        ],
        279: [
            function (_dereq_, module, exports) {
                'use strict';
                var WebWorker = _dereq_('./web_worker'), WorkerPool = function () {
                        this.active = {};
                    };
                WorkerPool.prototype.acquire = function (r) {
                    var e = this;
                    if (!this.workers) {
                        var o = _dereq_('../').workerCount;
                        for (this.workers = []; this.workers.length < o;) {
                            e.workers.push(new WebWorker());
                        }
                    }
                    return this.active[r] = !0, this.workers.slice();
                }, WorkerPool.prototype.release = function (r) {
                    delete this.active[r], 0 === Object.keys(this.active).length && (this.workers.forEach(function (r) {
                        r.terminate();
                    }), this.workers = null);
                }, module.exports = WorkerPool;
            },
            {
                '../': 73,
                './web_worker': 253
            }
        ]
    }, {}, [73])(73);
}));
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],72:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],73:[function(require,module,exports){
/*
	Based on rgbcolor.js by Stoyan Stefanov <sstoo@gmail.com>
	http://www.phpied.com/rgb-color-parser-in-javascript/
*/

module.exports = function(color_string) {
    this.ok = false;
    this.alpha = 1.0;

    // strip any leading #
    if (color_string.charAt(0) == '#') { // remove # if any
        color_string = color_string.substr(1,6);
    }

    color_string = color_string.replace(/ /g,'');
    color_string = color_string.toLowerCase();

    // before getting into regexps, try simple matches
    // and overwrite the input
    var simple_colors = {
        aliceblue: 'f0f8ff',
        antiquewhite: 'faebd7',
        aqua: '00ffff',
        aquamarine: '7fffd4',
        azure: 'f0ffff',
        beige: 'f5f5dc',
        bisque: 'ffe4c4',
        black: '000000',
        blanchedalmond: 'ffebcd',
        blue: '0000ff',
        blueviolet: '8a2be2',
        brown: 'a52a2a',
        burlywood: 'deb887',
        cadetblue: '5f9ea0',
        chartreuse: '7fff00',
        chocolate: 'd2691e',
        coral: 'ff7f50',
        cornflowerblue: '6495ed',
        cornsilk: 'fff8dc',
        crimson: 'dc143c',
        cyan: '00ffff',
        darkblue: '00008b',
        darkcyan: '008b8b',
        darkgoldenrod: 'b8860b',
        darkgray: 'a9a9a9',
        darkgreen: '006400',
        darkkhaki: 'bdb76b',
        darkmagenta: '8b008b',
        darkolivegreen: '556b2f',
        darkorange: 'ff8c00',
        darkorchid: '9932cc',
        darkred: '8b0000',
        darksalmon: 'e9967a',
        darkseagreen: '8fbc8f',
        darkslateblue: '483d8b',
        darkslategray: '2f4f4f',
        darkturquoise: '00ced1',
        darkviolet: '9400d3',
        deeppink: 'ff1493',
        deepskyblue: '00bfff',
        dimgray: '696969',
        dodgerblue: '1e90ff',
        feldspar: 'd19275',
        firebrick: 'b22222',
        floralwhite: 'fffaf0',
        forestgreen: '228b22',
        fuchsia: 'ff00ff',
        gainsboro: 'dcdcdc',
        ghostwhite: 'f8f8ff',
        gold: 'ffd700',
        goldenrod: 'daa520',
        gray: '808080',
        green: '008000',
        greenyellow: 'adff2f',
        honeydew: 'f0fff0',
        hotpink: 'ff69b4',
        indianred : 'cd5c5c',
        indigo : '4b0082',
        ivory: 'fffff0',
        khaki: 'f0e68c',
        lavender: 'e6e6fa',
        lavenderblush: 'fff0f5',
        lawngreen: '7cfc00',
        lemonchiffon: 'fffacd',
        lightblue: 'add8e6',
        lightcoral: 'f08080',
        lightcyan: 'e0ffff',
        lightgoldenrodyellow: 'fafad2',
        lightgrey: 'd3d3d3',
        lightgreen: '90ee90',
        lightpink: 'ffb6c1',
        lightsalmon: 'ffa07a',
        lightseagreen: '20b2aa',
        lightskyblue: '87cefa',
        lightslateblue: '8470ff',
        lightslategray: '778899',
        lightsteelblue: 'b0c4de',
        lightyellow: 'ffffe0',
        lime: '00ff00',
        limegreen: '32cd32',
        linen: 'faf0e6',
        magenta: 'ff00ff',
        maroon: '800000',
        mediumaquamarine: '66cdaa',
        mediumblue: '0000cd',
        mediumorchid: 'ba55d3',
        mediumpurple: '9370d8',
        mediumseagreen: '3cb371',
        mediumslateblue: '7b68ee',
        mediumspringgreen: '00fa9a',
        mediumturquoise: '48d1cc',
        mediumvioletred: 'c71585',
        midnightblue: '191970',
        mintcream: 'f5fffa',
        mistyrose: 'ffe4e1',
        moccasin: 'ffe4b5',
        navajowhite: 'ffdead',
        navy: '000080',
        oldlace: 'fdf5e6',
        olive: '808000',
        olivedrab: '6b8e23',
        orange: 'ffa500',
        orangered: 'ff4500',
        orchid: 'da70d6',
        palegoldenrod: 'eee8aa',
        palegreen: '98fb98',
        paleturquoise: 'afeeee',
        palevioletred: 'd87093',
        papayawhip: 'ffefd5',
        peachpuff: 'ffdab9',
        peru: 'cd853f',
        pink: 'ffc0cb',
        plum: 'dda0dd',
        powderblue: 'b0e0e6',
        purple: '800080',
        red: 'ff0000',
        rosybrown: 'bc8f8f',
        royalblue: '4169e1',
        saddlebrown: '8b4513',
        salmon: 'fa8072',
        sandybrown: 'f4a460',
        seagreen: '2e8b57',
        seashell: 'fff5ee',
        sienna: 'a0522d',
        silver: 'c0c0c0',
        skyblue: '87ceeb',
        slateblue: '6a5acd',
        slategray: '708090',
        snow: 'fffafa',
        springgreen: '00ff7f',
        steelblue: '4682b4',
        tan: 'd2b48c',
        teal: '008080',
        thistle: 'd8bfd8',
        tomato: 'ff6347',
        turquoise: '40e0d0',
        violet: 'ee82ee',
        violetred: 'd02090',
        wheat: 'f5deb3',
        white: 'ffffff',
        whitesmoke: 'f5f5f5',
        yellow: 'ffff00',
        yellowgreen: '9acd32'
    };
    color_string = simple_colors[color_string] || color_string;
    // emd of simple type-in colors

    // array of color definition objects
    var color_defs = [
        {
            re: /^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,
            example: ['rgba(123, 234, 45, 0.8)', 'rgba(255,234,245,1.0)'],
            process: function (bits){
                return [
                    parseInt(bits[1]),
                    parseInt(bits[2]),
                    parseInt(bits[3]),
                    parseFloat(bits[4])
                ];
            }
        },
        {
            re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,
            example: ['rgb(123, 234, 45)', 'rgb(255,234,245)'],
            process: function (bits){
                return [
                    parseInt(bits[1]),
                    parseInt(bits[2]),
                    parseInt(bits[3])
                ];
            }
        },
        {
            re: /^(\w{2})(\w{2})(\w{2})$/,
            example: ['#00ff00', '336699'],
            process: function (bits){
                return [
                    parseInt(bits[1], 16),
                    parseInt(bits[2], 16),
                    parseInt(bits[3], 16)
                ];
            }
        },
        {
            re: /^(\w{1})(\w{1})(\w{1})$/,
            example: ['#fb0', 'f0f'],
            process: function (bits){
                return [
                    parseInt(bits[1] + bits[1], 16),
                    parseInt(bits[2] + bits[2], 16),
                    parseInt(bits[3] + bits[3], 16)
                ];
            }
        }
    ];

    // search through the definitions to find a match
    for (var i = 0; i < color_defs.length; i++) {
        var re = color_defs[i].re;
        var processor = color_defs[i].process;
        var bits = re.exec(color_string);
        if (bits) {
            var channels = processor(bits);
            this.r = channels[0];
            this.g = channels[1];
            this.b = channels[2];
            if (channels.length > 3) {
                this.alpha = channels[3];
            }
            this.ok = true;
        }

    }

    // validate/cleanup values
    this.r = (this.r < 0 || isNaN(this.r)) ? 0 : ((this.r > 255) ? 255 : this.r);
    this.g = (this.g < 0 || isNaN(this.g)) ? 0 : ((this.g > 255) ? 255 : this.g);
    this.b = (this.b < 0 || isNaN(this.b)) ? 0 : ((this.b > 255) ? 255 : this.b);
    this.alpha = (this.alpha < 0) ? 0 : ((this.alpha > 1.0 || isNaN(this.alpha)) ? 1.0 : this.alpha);

    // some getters
    this.toRGB = function () {
        return 'rgb(' + this.r + ', ' + this.g + ', ' + this.b + ')';
    }
    this.toRGBA = function () {
        return 'rgba(' + this.r + ', ' + this.g + ', ' + this.b + ', ' + this.alpha + ')';
    }
    this.toHex = function () {
        var r = this.r.toString(16);
        var g = this.g.toString(16);
        var b = this.b.toString(16);
        if (r.length == 1) r = '0' + r;
        if (g.length == 1) g = '0' + g;
        if (b.length == 1) b = '0' + b;
        return '#' + r + g + b;
    }

    // help
    this.getHelpXML = function () {

        var examples = new Array();
        // add regexps
        for (var i = 0; i < color_defs.length; i++) {
            var example = color_defs[i].example;
            for (var j = 0; j < example.length; j++) {
                examples[examples.length] = example[j];
            }
        }
        // add type-in colors
        for (var sc in simple_colors) {
            examples[examples.length] = sc;
        }

        var xml = document.createElement('ul');
        xml.setAttribute('id', 'rgbcolor-examples');
        for (var i = 0; i < examples.length; i++) {
            try {
                var list_item = document.createElement('li');
                var list_color = new RGBColor(examples[i]);
                var example_div = document.createElement('div');
                example_div.style.cssText =
                        'margin: 3px; '
                        + 'border: 1px solid black; '
                        + 'background:' + list_color.toHex() + '; '
                        + 'color:' + list_color.toHex()
                ;
                example_div.appendChild(document.createTextNode('test'));
                var list_item_value = document.createTextNode(
                    ' ' + examples[i] + ' -> ' + list_color.toRGB() + ' -> ' + list_color.toHex()
                );
                list_item.appendChild(example_div);
                list_item.appendChild(list_item_value);
                xml.appendChild(list_item);

            } catch(e){}
        }
        return xml;

    }

}

},{}],74:[function(require,module,exports){
/*

StackBlur - a fast almost Gaussian Blur For Canvas

Version: 	0.5
Author:		Mario Klingemann
Contact: 	mario@quasimondo.com
Website:	http://www.quasimondo.com/StackBlurForCanvas
Twitter:	@quasimondo

In case you find this class useful - especially in commercial projects -
I am not totally unhappy for a small donation to my PayPal account
mario@quasimondo.de

Or support me on flattr: 
https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript

Copyright (c) 2010 Mario Klingemann

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/

var mul_table = [
        512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,
        454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,
        482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,
        437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,
        497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,
        320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,
        446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,
        329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,
        505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,
        399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,
        324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,
        268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,
        451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,
        385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,
        332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,
        289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];
        
   
var shg_table = [
	     9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 
		17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 
		19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,
		20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,
		21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,
		21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 
		22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,
		22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 
		23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,
		23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,
		23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 
		23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 
		24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
		24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
		24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
		24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ];

function blur( pixels, width, height, radius )
{
	if ( isNaN(radius) || radius < 1 ) return;
	radius |= 0;

	var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, 
	r_out_sum, g_out_sum, b_out_sum, a_out_sum,
	r_in_sum, g_in_sum, b_in_sum, a_in_sum, 
	pr, pg, pb, pa, rbs;
			
	var div = radius + radius + 1;
	var w4 = width << 2;
	var widthMinus1  = width - 1;
	var heightMinus1 = height - 1;
	var radiusPlus1  = radius + 1;
	var sumFactor = radiusPlus1 * ( radiusPlus1 + 1 ) / 2;
	
	var stackStart = new BlurStack();
	var stack = stackStart;
	for ( i = 1; i < div; i++ )
	{
		stack = stack.next = new BlurStack();
		if ( i == radiusPlus1 ) var stackEnd = stack;
	}
	stack.next = stackStart;
	var stackIn = null;
	var stackOut = null;
	
	yw = yi = 0;
	
	var mul_sum = mul_table[radius];
	var shg_sum = shg_table[radius];
	
	for ( y = 0; y < height; y++ )
	{
		r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;
		
		r_out_sum = radiusPlus1 * ( pr = pixels[yi] );
		g_out_sum = radiusPlus1 * ( pg = pixels[yi+1] );
		b_out_sum = radiusPlus1 * ( pb = pixels[yi+2] );
		a_out_sum = radiusPlus1 * ( pa = pixels[yi+3] );
		
		r_sum += sumFactor * pr;
		g_sum += sumFactor * pg;
		b_sum += sumFactor * pb;
		a_sum += sumFactor * pa;
		
		stack = stackStart;
		
		for( i = 0; i < radiusPlus1; i++ )
		{
			stack.r = pr;
			stack.g = pg;
			stack.b = pb;
			stack.a = pa;
			stack = stack.next;
		}
		
		for( i = 1; i < radiusPlus1; i++ )
		{
			p = yi + (( widthMinus1 < i ? widthMinus1 : i ) << 2 );
			r_sum += ( stack.r = ( pr = pixels[p])) * ( rbs = radiusPlus1 - i );
			g_sum += ( stack.g = ( pg = pixels[p+1])) * rbs;
			b_sum += ( stack.b = ( pb = pixels[p+2])) * rbs;
			a_sum += ( stack.a = ( pa = pixels[p+3])) * rbs;
			
			r_in_sum += pr;
			g_in_sum += pg;
			b_in_sum += pb;
			a_in_sum += pa;
			
			stack = stack.next;
		}
		
		
		stackIn = stackStart;
		stackOut = stackEnd;
		for ( x = 0; x < width; x++ )
		{
			pixels[yi+3] = pa = (a_sum * mul_sum) >> shg_sum;
			if ( pa != 0 )
			{
				pa = 255 / pa;
				pixels[yi]   = ((r_sum * mul_sum) >> shg_sum) * pa;
				pixels[yi+1] = ((g_sum * mul_sum) >> shg_sum) * pa;
				pixels[yi+2] = ((b_sum * mul_sum) >> shg_sum) * pa;
			} else {
				pixels[yi] = pixels[yi+1] = pixels[yi+2] = 0;
			}
			
			r_sum -= r_out_sum;
			g_sum -= g_out_sum;
			b_sum -= b_out_sum;
			a_sum -= a_out_sum;
			
			r_out_sum -= stackIn.r;
			g_out_sum -= stackIn.g;
			b_out_sum -= stackIn.b;
			a_out_sum -= stackIn.a;
			
			p =  ( yw + ( ( p = x + radius + 1 ) < widthMinus1 ? p : widthMinus1 ) ) << 2;
			
			r_in_sum += ( stackIn.r = pixels[p]);
			g_in_sum += ( stackIn.g = pixels[p+1]);
			b_in_sum += ( stackIn.b = pixels[p+2]);
			a_in_sum += ( stackIn.a = pixels[p+3]);
			
			r_sum += r_in_sum;
			g_sum += g_in_sum;
			b_sum += b_in_sum;
			a_sum += a_in_sum;
			
			stackIn = stackIn.next;
			
			r_out_sum += ( pr = stackOut.r );
			g_out_sum += ( pg = stackOut.g );
			b_out_sum += ( pb = stackOut.b );
			a_out_sum += ( pa = stackOut.a );
			
			r_in_sum -= pr;
			g_in_sum -= pg;
			b_in_sum -= pb;
			a_in_sum -= pa;
			
			stackOut = stackOut.next;

			yi += 4;
		}
		yw += width;
	}

	
	for ( x = 0; x < width; x++ )
	{
		g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;
		
		yi = x << 2;
		r_out_sum = radiusPlus1 * ( pr = pixels[yi]);
		g_out_sum = radiusPlus1 * ( pg = pixels[yi+1]);
		b_out_sum = radiusPlus1 * ( pb = pixels[yi+2]);
		a_out_sum = radiusPlus1 * ( pa = pixels[yi+3]);
		
		r_sum += sumFactor * pr;
		g_sum += sumFactor * pg;
		b_sum += sumFactor * pb;
		a_sum += sumFactor * pa;
		
		stack = stackStart;
		
		for( i = 0; i < radiusPlus1; i++ )
		{
			stack.r = pr;
			stack.g = pg;
			stack.b = pb;
			stack.a = pa;
			stack = stack.next;
		}
		
		yp = width;
		
		for( i = 1; i <= radius; i++ )
		{
			yi = ( yp + x ) << 2;
			
			r_sum += ( stack.r = ( pr = pixels[yi])) * ( rbs = radiusPlus1 - i );
			g_sum += ( stack.g = ( pg = pixels[yi+1])) * rbs;
			b_sum += ( stack.b = ( pb = pixels[yi+2])) * rbs;
			a_sum += ( stack.a = ( pa = pixels[yi+3])) * rbs;
		   
			r_in_sum += pr;
			g_in_sum += pg;
			b_in_sum += pb;
			a_in_sum += pa;
			
			stack = stack.next;
		
			if( i < heightMinus1 )
			{
				yp += width;
			}
		}
		
		yi = x;
		stackIn = stackStart;
		stackOut = stackEnd;
		for ( y = 0; y < height; y++ )
		{
			p = yi << 2;
			pixels[p+3] = pa = (a_sum * mul_sum) >> shg_sum;
			if ( pa > 0 )
			{
				pa = 255 / pa;
				pixels[p]   = ((r_sum * mul_sum) >> shg_sum ) * pa;
				pixels[p+1] = ((g_sum * mul_sum) >> shg_sum ) * pa;
				pixels[p+2] = ((b_sum * mul_sum) >> shg_sum ) * pa;
			} else {
				pixels[p] = pixels[p+1] = pixels[p+2] = 0;
			}
			
			r_sum -= r_out_sum;
			g_sum -= g_out_sum;
			b_sum -= b_out_sum;
			a_sum -= a_out_sum;
		   
			r_out_sum -= stackIn.r;
			g_out_sum -= stackIn.g;
			b_out_sum -= stackIn.b;
			a_out_sum -= stackIn.a;
			
			p = ( x + (( ( p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1 ) * width )) << 2;
			
			r_sum += ( r_in_sum += ( stackIn.r = pixels[p]));
			g_sum += ( g_in_sum += ( stackIn.g = pixels[p+1]));
			b_sum += ( b_in_sum += ( stackIn.b = pixels[p+2]));
			a_sum += ( a_in_sum += ( stackIn.a = pixels[p+3]));
		   
			stackIn = stackIn.next;
			
			r_out_sum += ( pr = stackOut.r );
			g_out_sum += ( pg = stackOut.g );
			b_out_sum += ( pb = stackOut.b );
			a_out_sum += ( pa = stackOut.a );
			
			r_in_sum -= pr;
			g_in_sum -= pg;
			b_in_sum -= pb;
			a_in_sum -= pa;
			
			stackOut = stackOut.next;
			
			yi += width;
		}
	}
}

function BlurStack()
{
	this.r = 0;
	this.g = 0;
	this.b = 0;
	this.a = 0;
	this.next = null;
}

module.exports = blur;
},{}]},{},[1]);
